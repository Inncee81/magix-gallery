define("mx-suggest/index",["magix","$","../mx-medusa/util","../mx-util/monitor"],(t,e,i)=>{var a=t("magix"),s=t("$"),l=t("../mx-medusa/util"),_=t("../mx-util/monitor");a.applyStyle("_zs_galleryax",'[mx-view*="mx-suggest/index"]{position:relative;display:inline-block}[mx-view*="mx-suggest/index"] ._zs_gallerykl{position:absolute;right:6px;top:50%;width:12px;height:12px;font-size:12px;margin-top:-6px;color:#ccc;cursor:pointer;transition:all var(--duration);background-color:#fff}[mx-view*="mx-suggest/index"] ._zs_gallerykl:hover{color:#999}'),i.exports=a.View.extend({tmpl:function(t,e,i,a,s,l,_,n){if(i||(i=t),!s){var r={"&":"amp","<":"lt",">":"gt",'"':"#34","'":"#39","`":"#96"},o=/[&<>"'`]/g,u=function(t){return"&"+r[t]+";"};s=function(t){return""+(null==t?"":t)},a=function(t){return s(t).replace(o,u)}}if(!l){var d={"!":"%21","'":"%27","(":"%28",")":"%29","*":"%2A"},c=function(t){return d[t]},h=/[!')(*]/g;l=function(t){return encodeURIComponent(s(t)).replace(h,c)}}if(!n){var p=/[\\'"]/g;n=function(t){return s(t).replace(p,"\\$&")}}_||(_=function(t,e,i,a){for(a=t[x];--a;)if(t[i=x+a]===e)return i;return t[i=x+t[x]++]=e,i});var x="",g="",f=t.placeholder,v=t.viewId,m=t.selectedText,y=t.show,k=t.loading,T=t.list,w=t.selectedValue,z=t.emptyText;if(g+='<div mxv mxa="_zs_galleryeT:_" class="search-box"><i mxs="_zs_galleryeT:_" class="mc-iconfont search-icon">&#xe651;</i><input class="input search-input" placeholder="'+a(f)+'" autocomplete="off" id="'+a(v)+'_input" value="'+a(m)+'" mx-keyup="'+e+'__dM()" mx-paste="'+e+'__dM()" mx-focusin="'+e+'__dM()" mx-focusout="'+e+'__p()" mx-change="'+e+'__p()"/>',m&&(g+='<i mxs="_zs_galleryeT:a" class="mc-iconfont _zs_gallerykl" mx-click="'+e+'__dN()">&#xe6f8;</i>'),g+='<div class="mx-output mx-output-bottom ',y&&(g+=" mx-output-open "),g+='"><ul mxa="_zs_galleryeT:a" class="mx-output-list">',k)g+='<li mxs="_zs_galleryeT:b"><div class="loading" style="padding: 40px 0;"><span class="loading-anim"></span></div></li>';else{if(g+=" ",T.length>0){g+=" ";for(var b=0,C=T.length;b<C;b++){var E=T[b];g+='<li mxa="_zs_galleryeT:b" class="mx-output-item"><span class="mx-output-link ',w+""==E.value+""&&(g+=" mx-output-link-active "),g+="\" data-active=\"(selectedValue + '') === (item.value + '')\" mx-click=\""+e+"__ah({item:'"+_(i,E)+"'})\">"+s(E.text)+"</span></li>"}g+=" "}else g+='<li mxa="_zs_galleryeT:c" class="text-center color-9 pt20 pb20">'+a(z)+"</li>";g+=" "}return g+="</ul></div></div>"},init:function(t){var e=this;e.updater.snapshot(),e.assign(t);var i=t.list||[];e.__dD=0==i.length,_.__k(),e.on("destroy",function(){_.__l(e),_.__m(),e.__dE&&clearTimeout(e.__dE)})},assign:function(t){var e=this.updater.altered(),i=t.placeholder||"";i||(i=l.search),this.__dF=t.dynamicEnter+""=="true",this.__dG=t.listValue||"value",this.__dH=t.listText||"text";var a=this.__dI(t.list||this.__dJ);this.__dJ=a;var _=t.item||{},n=_.value||t.selected||"",r=_.text||"";if(n)for(var o=0;o<a.length;o++)if(a[o].value==n){r=a[o].text;break}this.__dK=n;var u=(t.type||"text")+"";return"all"==u&&(u="text,value"),this.__dL=u.split(","),this.updater.set({viewId:this.id,list:a,selectedValue:n,selectedText:r,placeholder:i,show:!1,emptyText:l["empty.text"]}),this.__a=s("#"+this.id),this.__a.val(n),e||(e=this.updater.altered()),!!e&&(this.updater.snapshot(),!0)},__dI:function(t){var e=this.__dG,i=this.__dH,a=[];return t&&t.length>0&&(a="object"==typeof t[0]?t.map(function(t){return{value:t[e],text:t[i]}}):t.map(function(t){return{value:t,text:t}})),a},render:function(){this.updater.digest()},"__dM<focusin,keyup,paste>":function(t){t.stopPropagation();var e=this;e.__dE&&clearTimeout(e.__dE);for(var i=e.updater.get(),a=i.list,l=i.selectedValue,_=-1,n=0;n<a.length;n++)if(a[n].value==l){_=n;break}if(40==t.keyCode||38==t.keyCode)40==t.keyCode&&(_+=1)>=a.length&&(_=0),38==t.keyCode&&(_-=1)<0&&(_=a.length-1),e.updater.digest({selectedValue:a[_].value});else if(13==t.keyCode)if(e.__dF){var r=s("#"+e.id+"_input").val();e.__ah({value:r,text:r})}else e.__aC(_);else e.__dE=setTimeout(e.wrapAsync(function(){e.__r()}),250)},"__dN<click>":function(){this.updater.digest({selectedText:""}),this.__ah({value:"",text:""})},__r:function(t){var e=s("#"+this.id+"_input").val(),i=this.__dJ,a=[];if(this.__dD){if(!e)return this.updater.set({list:this.__dJ=[]}),void this.__q();a=i}else{var l=(e+"").toLowerCase(),n=this.__dL;i.forEach(function(t){var e=!1;n.forEach(function(i){(t[i]+"").toLowerCase().indexOf(l)>-1&&(e=!0)}),e&&a.push(t)})}this.updater.digest({list:a,selectedText:e,show:!0}),_.__t(this),t||this.__a.trigger({type:"show",keyword:e})},__q:function(t){this.__dE&&clearTimeout(this.__dE);var e=(t=t||{text:s("#"+this.id+"_input").val()}).value||"",i=t.text||"";this.updater.digest({selectedValue:e,selectedText:i,show:!1,loading:!1}),_.__l(this),this.__a.trigger({type:"focusout",keyword:i})},__aC:function(t){if(!s("#"+this.id+"_input").val()&&this.__dD)this.__ah({value:"",text:""});else{var e=this.updater.get().list;t<0&&(t=0),e[t]&&this.__ah(e[t])}},"__ah<click>":function(t){t.stopPropagation();var e=t.params.item;this.__ah(e)},__ah:function(t){var e=!(t.value==this.__dK),i=this.__dK=t.value;this.__q(t),e&&(this.__a.val(i).trigger({type:"change",selected:i,item:t}),this.__a.trigger({type:"suggest",selected:{value:i,text:t.text}}))},__o:function(t){return a.inside(t,this.id)},"__p<change,focusout>":function(t){t.stopPropagation()},showLoading:function(){this.updater.digest({loading:!0})},hideLoading:function(){this.updater.digest({loading:!1})},update:function(t){this.__dJ=this.__dI(t),this.__r(!0)}})});