define("mx-cascade/index",["magix","$","../mx-util/view","../mx-tree/util","../mx-medusa/util","../mx-util/monitor"],(e,t,r)=>{"use strict";t.__esModule=!0;var a=e("magix"),i=e("$"),l=e("../mx-util/view"),n=e("../mx-tree/util"),s=e("../mx-medusa/util"),d=e("../mx-util/monitor");a.default.Vframe;a.default.applyStyle("_zs_galleryz","._zs_gallerydt{width:auto;min-width:0;max-width:none;white-space:nowrap}._zs_gallerydu{display:inline-block;min-width:100px;height:calc(var(--input-small-height)*6);overflow-y:auto;overflow-x:hidden;vertical-align:top;border-left:1px solid var(--color-border)}._zs_gallerydu:first-child{border-left:0}._zs_gallerydv{position:relative;height:var(--input-small-height);padding-right:var(--input-small-height);padding-left:10px;line-height:var(--input-small-height);transition:background-color var(--duration),color var(--duration);cursor:pointer}._zs_gallerydv ._zs_gallerydw{display:block;width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}._zs_gallerydv ._zs_gallerydx{position:absolute;right:0;top:0;font-size:24px;line-height:var(--input-small-height);color:#999;transform:rotate(-90deg)}._zs_gallerydv._zs_gallerydy{background-color:var(--color-bg-hover)}._zs_gallerydv._zs_gallerydz{color:var(--color-brand)}._zs_gallerydv._zs_gallerydz,._zs_gallerydv._zs_gallerydz._zs_gallerydy{background-color:var(--color-brand-opacity)}"),t.default=l.extend({tmpl:function(e,t,r,a,i,l,n,s){if(r||(r=e),!i){var d={"&":"amp","<":"lt",">":"gt",'"':"#34","'":"#39","`":"#96"},o=/[&<>"'`]/g,u=function(e){return"&"+d[e]+";"};i=function(e){return""+(null==e?"":e)},a=function(e){return i(e).replace(o,u)}}if(!l){var c={"!":"%21","'":"%27","(":"%28",")":"%29","*":"%2A"},h=function(e){return c[e]},_=/[!')(*]/g;l=function(e){return encodeURIComponent(i(e)).replace(_,h)}}if(!s){var g=/[\\'"]/g;s=function(e){return i(e).replace(g,"\\$&")}}var p="",v=e.expand,f=e.disabled,x=e.name,m=e.selectedText,y=e.groups,z=e.viewId,w=e.textKey;if(p+='<div class="mx-trigger ',v&&(p+=" mx-trigger-open "),p+='" ',f||(p+=' mx-click="'+t+'__r()" '),p+='><span mxa="_zs_galleryat:_" class="mx-trigger-label">',x&&(p+=a(x)+"ï¼š"),p+=a(m)+'</span><span mxs="_zs_galleryat:_" class="mc-iconfont mx-trigger-arrow">&#xe692;</span></div>',!f){p+='<div class="mx-output mx-output-bottom ',v&&(p+=" mx-output-open "),p+=' clearfix _zs_gallerydt">';for(var b=0,T=y.length;b<T;b++){var k=y[b];p+='<div class="_zs_gallerydu" id="'+a(z)+"_g_"+a(b)+'">';for(var E=0,K=k.length;E<K;E++){var I=k[E];p+='<div class="_zs_gallerydv ',I.cur&&(p+=" _zs_gallerydz "),p+=" ",I.hover&&(p+=" _zs_gallerydy "),p+='" mx-click="'+t+"__ah({gIndex:"+a(b)+",iIndex:"+a(E)+'})" mx-mouseover="'+t+"__ah({gIndex:"+a(b)+",iIndex:"+a(E)+'})"><span mxa="_zs_galleryat:a" class="_zs_gallerydw">'+a(I[w])+"</span>",I.children&&I.children.length&&(p+='<span mxs="_zs_galleryat:a" class="mc-iconfont _zs_gallerydx">&#xe692;</span>'),p+="</div>"}p+="</div>"}p+="</div>"}return p},init:function(e){var t=this;this.updater.snapshot(),this.assign(e),d.__k(),this.on("destroy",function(){d.__l(t),d.__m()})},assign:function(e){var t=this.updater.altered(),r=e.valueKey||"value",a=e.textKey||"text",l=e.parentKey||"pValue",d=e.disabled+""=="true"||i("#"+this.id)[0].hasAttribute("mx-disabled"),o=e.triggerType||"click",u=n.listToTree(e.list,r,l),c=u.map,h=u.list;this.updater.set({disabled:d,placeholder:this.placeholder||s.choose,valueKey:r,textKey:a,parentKey:l,map:c,list:h,expand:!1,triggerType:o});var _=e.selected||"",g=this.__af(_);return g.selectedValue=_,g.selectedText=g.selectedTexts.join("/"),this.updater.set(g),t||(t=this.updater.altered()),!!t&&(this.updater.snapshot(),!0)},render:function(){this.updater.digest();var e=this.updater.get().selectedValue;this.__a=i("#"+this.id),this.__a.val(e)},__af:function(e){var t=this.updater.get(),r=t.valueKey,a=t.textKey,i=t.parentKey,l=t.placeholder,n=t.map,s=t.list,d=[],o=[],u=[];if(e&&n[e]){var c=function(e){var t=n[e];if(d.unshift(t[a]),o.unshift(t[r]+""),t[i]){var l=n[t[i]].children;l.forEach(function(e){e.cur=!1,e.hover=!1}),t.cur=!0,u.unshift(l),c(t[i])}else s.forEach(function(e){e.cur=!1,e.hover=!1}),t.cur=!0,u.unshift(s)};c(e)}else{d=[l];var h=function(e){e.cur=!1,e.hover=!1,e.children&&e.children.length&&e.children.forEach(function(e){h(e)})};s.forEach(function(e){h(e)}),u=[s]}return{groups:u,selectedTexts:d,selectedValues:o}},__o:function(e){return a.default.inside(e,this.id)},__q:function(e){this.updater.get().expand&&(this.updater.digest({expand:!1}),this.__a.trigger("focusout"),d.__l(this))},"__r<click>":function(e){var t=this,r=t.updater.get(),a=r.expand,i=r.selectedValue;if(!a){var l=t.__af(i);l.expand=!0,t.updater.digest(l),t.__a.trigger("focusin"),d.__t(t),t.__ae=!1,document.querySelector("#"+t.id+" .mx-output").addEventListener("animationend",function(e){t.__ae=!0},!1)}},"__ah<mouseover>":function(e){if(!a.default.inside(e.relatedTarget,e.eventTarget)){var t=this;t.__ae&&(clearTimeout(t.__ai),t.__ai=setTimeout(t.wrapAsync(function(){var r=t.updater.get(),a=r.selectedValues,i=r.valueKey,l=r.groups,n=r.triggerType,s=e.params,d=s.gIndex,o=s.iIndex,u=l[d],c=u[o];"hover"==n?(u.forEach(function(e){e.hover=!1}),c.hover=!0,l=l.slice(0,d+1),c.children&&c.children.length>0&&(c.children.forEach(function(e){e.hover=!1,e.cur=a.indexOf(e[i]+"")>-1}),l.push(c.children))):(l.forEach(function(e){e.forEach(function(e){e.hover=!1})}),c.hover=!0),t.updater.digest({groups:l})}),150))}},"__ah<click>":function(e){var t=this.updater.get(),r=t.selectedValues,a=t.valueKey,l=t.groups,n=t.triggerType,s=t.map,d=e.params,o=d.gIndex,u=d.iIndex,c=l[o],h=c[u];if(h.children&&h.children.length)"click"==n&&(c.forEach(function(e){e.hover=!1,e.cur=!1}),h.cur=!0,h.hover=!0,l=l.slice(0,o+1),h.children.forEach(function(e){e.cur=r.indexOf(e[a]+"")>-1}),l.push(h.children),this.updater.digest({groups:l}));else{var _=h[a],g=this.__af(_);g.selectedValue=_,g.selectedText=g.selectedTexts.join("/"),this.updater.digest(g);var p=g.selectedValues.map(function(e){return s[e]}),v=i.Event("change",{item:h,items:p,selected:_});this.__a.val(_).trigger(v),this.__q()}}})});