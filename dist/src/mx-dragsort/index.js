define("mx-dragsort/index",["magix","../mx-dragdrop/index","../mx-util/runner","$"],(e,_,t)=>{var i=e("magix"),o=e("../mx-dragdrop/index"),b=e("../mx-util/runner"),n=e("$");i.applyStyle("_zs_galleryG",'._zs_galleryec{left:-1000px;top:0;background:var(--color-brand)}._zs_galleryec,._zs_galleryed{position:absolute;z-index:999999}._zs_galleryed{width:20px;height:20px;border-radius:var(--border-radius)}._zs_galleryed:after{position:absolute;left:0;right:0;top:0;bottom:0;font-size:var(--font-size);line-height:20px;text-align:center;color:var(--color-brand)}._zs_galleryee{background:var(--color-brand-opacity);border:1px solid var(--color-brand)}._zs_galleryee:after{content:"âœ“"}');var r=i.guid("dbar_"),l=i.guid("pt_"),d=n(window),a=n(document),h={__b_:function(){n("#"+r).length||n('<div class="_zs_galleryec" id="'+r+'"/>').appendTo("body")},__ba:function(e){e.child&&(n(e.child).css({opacity:.4}),this.__b_())},__bd:function(e){e&&e.child&&n(e.child).css({opacity:1}),this.__bb(),this.__bc()},__bb:function(){n("#"+r).css({left:-1e5})},__be:function(e,_){var t=n("#"+r),i=!1;2&e.anchor&&(2&_?(t.css({height:2,width:e.bound.width,top:e.bound.y-1,left:e.bound.x}),i=!0):8&_&&(t.css({height:2,width:e.bound.width,top:e.bound.y+e.bound.height-1,left:e.bound.x}),i=!0)),!i&&1&e.anchor&&(1&_?t.css({height:e.bound.height,width:2,top:e.bound.y,left:e.bound.x-1}):4&_&&t.css({height:e.bound.height,width:2,top:e.bound.y,left:e.bound.x+e.bound.width-1}))},__bg:function(e){var _=this;e.atPlace&&e.child!=e.hover?(3==e.anchor?e.__bf&&_.__be(e,e.side):e.__bg&&_.__be(e,e.position),_.__bh(!0)):(_.__bb(),_.__bh())},__bi:function(e){var _=n("#"+l);_.length||(_=n('<div class="_zs_galleryed" id="'+l+'"/>')).appendTo("body");var t=Math.max(0,Math.min(e.pageX+10,a.width()-_.width())),i=Math.max(0,Math.min(e.pageY+18,a.height()-_.height()));_.css({left:t,top:i,display:"block"})},__bh:function(e){var _=n("#"+l);e?_.addClass("_zs_galleryee"):_.removeClass("_zs_galleryee")},__bc:function(){n("#"+l).hide()}};t.exports=i.View.extend({mixins:[o],init:function(e){var _=this,t=n("#"+_.id);t.on("mousedown",e.selector,function(e){e.preventDefault(),_.__ba(e)}),_.on("destroy",function(){t.off("mousedown")}),_.__a=t;var o=[t.get(0)];e.drops&&(o=o.concat(e.drops.split(","))),_.__bj=o;var b=e.horizonal+""=="true",d=e.vertical+""=="true";b||d||(d=!0);var a=0;b&&(a|=1),d&&(a|=2),_.__bk=a;var h=!0;i.has(e,"sort")&&(h=e.sort+""=="true"),_.__bl=h,_.on("destroy",function(){n("#"+r).remove(),n("#"+l).remove()})},__bm:function(e){for(var _=0,t=this.__bj;_<t.length;_++){var o=t[_];if(i.inside(e,o))return i.node(o)}return null},__bo:function(e,_){var t=null;if(_||(_=this.__bm(e)),!this.__bl&&this.__bn)return{child:this.__bn,zone:_};for(;_!=e;){if(e.parentNode==_){t=e;break}e=e.parentNode}return!_||_.firstChild||t||(t=_),t&&"false"===t.getAttribute("ds-draggable")&&(t=null),{child:t,zone:_}},__bq:function(e,_){var t=0,i=0,o=-1,b=-1,n=-1,r=-1,l=!1;if(_.pageX>=e.x&&_.pageX<=e.x+e.width&&_.pageY>=e.y&&_.pageY<=e.y+e.height&&(t|=_.pageX<=e.x+e.width/2?1:4,o=_.pageX-e.x,n=e.x+e.width-_.pageX,t|=_.pageY<=e.y+e.height/2?2:8,b=_.pageY-e.y,r=e.y+e.height-_.pageY,l=!0),l){var d=Math.min(o,b,n,r);d>-1&&(d==o?i=1:d==b?i=2:d==n?i=4:d==r&&(i=8))}var a=this.__bp;return a&&a.zone===a.hover&&(t=2,i=1),{position:t,atPlace:l,side:i}},__ba:function(e){if(1===e.which){var _=this,t=_.__bo(e.target);t.child&&(_.__bn=t.child,_.__br=t.zone,_.__a.trigger({type:"dragbegin",dragNode:t.child,dragZone:t.zone}),h.__ba(t),_.dragdrop(t.zone,function(e){_.__bs(e)},function(e){_.__bd(e)}))}},__bv:function(e,_,t){var i=this,o=i.__bq(e,_),b=o.side!=i.__bt,n=o.position!=i.__bu;(b||n)&&(i.__bt=o.side,i.__bu=o.position,t.__bf=b,t.__bg=n,t.side=o.side,t.position=o.position,t.atPlace=o.atPlace,t.anchor=i.__bk,h.__bg(t))},__bs:function(e){var _=o.fromPoint(e.clientX,e.clientY),t=this;if(h.__bi(e),t.__bw=e,t.__bx=!0,t.__by(),t.__bz(),t.__bA||t.__bB||!_)return delete t.__bC,delete t.__bt,void delete t.__bu;if(t.__bC!=_){if(_.id===r)return;t.__bC=_,delete t.__bt;var b=t.__bm(_);if(b){b!=t.__bD&&(t.__bD=b,t.__a.trigger({type:"enterzone",zone:b,changePointer:h.__bh}));var l=t.__bo(_,b);if(!l.child)return;var d=n(l.child),a=d.offset(),s={x:a.left,y:a.top,width:d.outerWidth(),height:d.outerHeight()};a=(d=n(l.zone)).offset(),t.__bE={x:a.left,y:a.top,scrollX:d.prop("scrollLeft"),scrollY:d.prop("scrollTop"),maxWidth:d.prop("scrollWidth"),maxHeight:d.prop("scrollHeight"),width:d.width(),height:d.height()},t.__bv(t.__bF=s,e,t.__bp={child:t.__bn,bound:s,zone:l.zone,hover:l.child})}else t.__bD&&(t.__a.trigger({type:"leavezone",zone:t.__bD,changePointer:h.__bh}),delete t.__bD)}else t.__bF&&i.inside(_,t.__bp.zone)?t.__bv(t.__bF,e,t.__bp):(delete t.__bt,delete t.__bu,t.__bl&&(h.__bb(),h.__bh()))},__bd:function(){var e=this;e.__bG(),e.__bH(),h.__bd({child:e.__bn});var _=e.__bu,t=e.__bt,i=e.__bx,o=e.__bp,b=e.__bn;if(i&&(_||t)){var n=o.zone,r=e.__bk,l=3===r?t:_;if(1&r&&1&l||2&l&&2&r)o.hover==n?n.appendChild(b):n.insertBefore(b,o.hover);else if(8&l&&2&r||4&l&&1&r){for(var d=o.hover.nextSibling;d&&1!=d.nodeType;)d=d.nextSibling;n.insertBefore(b,d),d||(n.scrollTop=n.scrollHeight)}}o&&e.__a.trigger({type:"dragfinish",moved:i,dragNode:b,dragZone:e.__br,dropNode:o.hover,dropZone:o.zone,outZone:!e.__bD}),delete e.__bn,delete e.__br,delete e.__bC,delete e.__bp,delete e.__bF,delete e.__bu,delete e.__bt,delete e.__bw,delete e.__bB,delete e.__bD,delete e.__bE,delete e.__bA,delete e.__bx},__by:function(){var e=this;e.__bI||(e.__bI=function(){var _=e.__bE;if(_){var t=e.__bp.zone,i=0,o=0,b=e.__bw;b.pageX>_.x&&b.pageY>_.y&&b.pageX<_.x+_.width&&b.pageY<_.y+_.height?(b.pageX-_.x<20&&_.scrollX>0?i=-Math.min(7,_.scrollX):_.x+_.width-b.pageX<20&&_.scrollX+_.width<_.maxWidth&&(i=Math.min(7,_.maxWidth-_.scrollX-_.width)),b.pageY-_.y<20&&_.scrollY>0?o=-Math.min(7,_.scrollY):_.y+_.height-b.pageY<20&&_.scrollY+_.height<_.maxHeight&&(o=Math.min(7,_.maxHeight-_.scrollY-_.height)),i||o?(e.__bA=!0,e.__bJ=!0,t.scrollTop+=o,t.scrollLeft+=i,_.scrollX+=i,_.scrollY+=o,delete e.__bx,h.__bb(),h.__bh()):(delete e.__bA,delete e.__bJ)):(delete e.__bA,delete e.__bJ)}},b.__bK(30,e.__bI))},__bz:function(){var e=this;e.__bL||(e.__bL=function(){if(!e.__bJ){var _=0,t=0,i=e.__bw,o=d.scrollTop(),b=d.height(),n=a.height(),r=a.width(),l=d.width(),s=d.scrollLeft();i.pageX-s<20&&s>0?_=-Math.min(7,s):s+l-i.pageX<20&&s+l<r&&(_=Math.min(7,r-l-s)),i.pageY-o<20&&o>0?t=-Math.min(7,o):o+b-i.pageY<20&&o+b<n&&(t=Math.min(7,n-b-o)),_||t?(e.__bB=!0,i.pageX+=_,i.pageY+=t,window.scrollBy(_,t),delete e.__bx,h.__bb(),h.__bi(i),h.__bh()):delete e.__bB}},b.__bK(30,e.__bL))},__bG:function(){this.__bI&&(b.__bM(this.__bI),delete this.__bI,delete this.__bJ)},__bH:function(){this.__bL&&(b.__bM(this.__bL),delete this.__bL)}})});