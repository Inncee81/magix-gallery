define("mx-dragsort/index",["magix","../mx-dragdrop/index","../mx-util/runner","$"],(e,_,t)=>{var i=e("magix"),o=e("../mx-dragdrop/index"),r=e("../mx-util/runner"),n=e("$");i.applyStyle("_zs_galleryG",'._zs_galleryec{left:-1000px;top:0;background:var(--color-brand)}._zs_galleryec,._zs_galleryed{position:absolute;z-index:999999}._zs_galleryed{width:20px;height:20px;border-radius:var(--border-radius)}._zs_galleryed:after{position:absolute;left:0;right:0;top:0;bottom:0;font-size:var(--font-size);line-height:20px;text-align:center;color:var(--color-brand)}._zs_galleryee{background:var(--color-brand-opacity);border:1px solid var(--color-brand)}._zs_galleryee:after{content:"âœ“"}');var a=i.guid("dbar_"),b=i.guid("pt_"),l=n(window),d=n(document),h={__aX:function(){n("#"+a).length||n('<div class="_zs_galleryec" id="'+a+'"/>').appendTo("body")},__aY:function(e){e.child&&(n(e.child).css({opacity:.4}),this.__aX())},__ba:function(e){e&&e.child&&n(e.child).css({opacity:1}),this.__aZ(),this.__b_()},__aZ:function(){n("#"+a).css({left:-1e5})},__bb:function(e,_){var t=n("#"+a),i=!1;2&e.anchor&&(2&_?(t.css({height:2,width:e.bound.width,top:e.bound.y-1,left:e.bound.x}),i=!0):8&_&&(t.css({height:2,width:e.bound.width,top:e.bound.y+e.bound.height-1,left:e.bound.x}),i=!0)),!i&&1&e.anchor&&(1&_?t.css({height:e.bound.height,width:2,top:e.bound.y,left:e.bound.x-1}):4&_&&t.css({height:e.bound.height,width:2,top:e.bound.y,left:e.bound.x+e.bound.width-1}))},__bd:function(e){var _=this;e.atPlace&&e.child!=e.hover?(3==e.anchor?e.__bc&&_.__bb(e,e.side):e.__bd&&_.__bb(e,e.position),_.__be(!0)):(_.__aZ(),_.__be())},__bf:function(e){var _=n("#"+b);_.length||(_=n('<div class="_zs_galleryed" id="'+b+'"/>')).appendTo("body");var t=Math.max(0,Math.min(e.pageX+10,d.width()-_.width())),i=Math.max(0,Math.min(e.pageY+18,d.height()-_.height()));_.css({left:t,top:i,display:"block"})},__be:function(e){var _=n("#"+b);e?_.addClass("_zs_galleryee"):_.removeClass("_zs_galleryee")},__b_:function(){n("#"+b).hide()}};t.exports=i.View.extend({mixins:[o],init:function(e){var _=this,t=n("#"+_.id);t.on("mousedown",e.selector,function(e){e.preventDefault(),_.__aY(e)}),_.on("destroy",function(){t.off("mousedown")}),_.__a=t;var o=[t.get(0)];e.drops&&(o=o.concat(e.drops.split(","))),_.__bg=o;var r=e.horizonal+""=="true",l=e.vertical+""=="true";r||l||(l=!0);var d=0;r&&(d|=1),l&&(d|=2),_.__bh=d;var h=!0;i.has(e,"sort")&&(h=e.sort+""=="true"),_.__bi=h,_.on("destroy",function(){n("#"+a).remove(),n("#"+b).remove()})},__bj:function(e){for(var _=0,t=this.__bg;_<t.length;_++){var o=t[_];if(i.inside(e,o))return i.node(o)}return null},__bl:function(e,_){var t=null;if(_||(_=this.__bj(e)),!this.__bi&&this.__bk)return{child:this.__bk,zone:_};for(;_!=e;){if(e.parentNode==_){t=e;break}e=e.parentNode}return!_||_.firstChild||t||(t=_),t&&"false"===t.getAttribute("ds-draggable")&&(t=null),{child:t,zone:_}},__bn:function(e,_){var t=0,i=0,o=-1,r=-1,n=-1,a=-1,b=!1;if(_.pageX>=e.x&&_.pageX<=e.x+e.width&&_.pageY>=e.y&&_.pageY<=e.y+e.height&&(t|=_.pageX<=e.x+e.width/2?1:4,o=_.pageX-e.x,n=e.x+e.width-_.pageX,t|=_.pageY<=e.y+e.height/2?2:8,r=_.pageY-e.y,a=e.y+e.height-_.pageY,b=!0),b){var l=Math.min(o,r,n,a);l>-1&&(l==o?i=1:l==r?i=2:l==n?i=4:l==a&&(i=8))}var d=this.__bm;return d&&d.zone===d.hover&&(t=2,i=1),{position:t,atPlace:b,side:i}},__aY:function(e){if(1===e.which){var _=this,t=_.__bl(e.target);t.child&&(_.__bk=t.child,_.__bo=t.zone,_.__a.trigger({type:"dragbegin",dragNode:t.child,dragZone:t.zone}),h.__aY(t),_.dragdrop(t.zone,function(e){_.__bp(e)},function(e){_.__ba(e)}))}},__bs:function(e,_,t){var i=this,o=i.__bn(e,_),r=o.side!=i.__bq,n=o.position!=i.__br;(r||n)&&(i.__bq=o.side,i.__br=o.position,t.__bc=r,t.__bd=n,t.side=o.side,t.position=o.position,t.atPlace=o.atPlace,t.anchor=i.__bh,h.__bd(t))},__bp:function(e){var _=o.fromPoint(e.clientX,e.clientY),t=this;if(h.__bf(e),t.__bt=e,t.__bu=!0,t.__bv(),t.__bw(),t.__bx||t.__by||!_)return delete t.__bz,delete t.__bq,void delete t.__br;if(t.__bz!=_){if(_.id===a)return;t.__bz=_,delete t.__bq;var r=t.__bj(_);if(r){r!=t.__bA&&(t.__bA=r,t.__a.trigger({type:"enterzone",zone:r,changePointer:h.__be}));var b=t.__bl(_,r);if(!b.child)return;var l=n(b.child),d=l.offset(),s={x:d.left,y:d.top,width:l.outerWidth(),height:l.outerHeight()};d=(l=n(b.zone)).offset(),t.__bB={x:d.left,y:d.top,scrollX:l.prop("scrollLeft"),scrollY:l.prop("scrollTop"),maxWidth:l.prop("scrollWidth"),maxHeight:l.prop("scrollHeight"),width:l.width(),height:l.height()},t.__bs(t.__bC=s,e,t.__bm={child:t.__bk,bound:s,zone:b.zone,hover:b.child})}else t.__bA&&(t.__a.trigger({type:"leavezone",zone:t.__bA,changePointer:h.__be}),delete t.__bA)}else t.__bC&&i.inside(_,t.__bm.zone)?t.__bs(t.__bC,e,t.__bm):(delete t.__bq,delete t.__br,t.__bi&&(h.__aZ(),h.__be()))},__ba:function(){var e=this;e.__bD(),e.__bE(),h.__ba({child:e.__bk});var _=e.__br,t=e.__bq,i=e.__bu,o=e.__bm,r=e.__bk;if(i&&(_||t)){var n=o.zone,a=e.__bh,b=3===a?t:_;if(1&a&&1&b||2&b&&2&a)o.hover==n?n.appendChild(r):n.insertBefore(r,o.hover);else if(8&b&&2&a||4&b&&1&a){for(var l=o.hover.nextSibling;l&&1!=l.nodeType;)l=l.nextSibling;n.insertBefore(r,l),l||(n.scrollTop=n.scrollHeight)}}o&&e.__a.trigger({type:"dragfinish",moved:i,dragNode:r,dragZone:e.__bo,dropNode:o.hover,dropZone:o.zone,outZone:!e.__bA}),delete e.__bk,delete e.__bo,delete e.__bz,delete e.__bm,delete e.__bC,delete e.__br,delete e.__bq,delete e.__bt,delete e.__by,delete e.__bA,delete e.__bB,delete e.__bx,delete e.__bu},__bv:function(){var e=this;e.__bF||(e.__bF=function(){var _=e.__bB;if(_){var t=e.__bm.zone,i=0,o=0,r=e.__bt;r.pageX>_.x&&r.pageY>_.y&&r.pageX<_.x+_.width&&r.pageY<_.y+_.height?(r.pageX-_.x<20&&_.scrollX>0?i=-Math.min(7,_.scrollX):_.x+_.width-r.pageX<20&&_.scrollX+_.width<_.maxWidth&&(i=Math.min(7,_.maxWidth-_.scrollX-_.width)),r.pageY-_.y<20&&_.scrollY>0?o=-Math.min(7,_.scrollY):_.y+_.height-r.pageY<20&&_.scrollY+_.height<_.maxHeight&&(o=Math.min(7,_.maxHeight-_.scrollY-_.height)),i||o?(e.__bx=!0,e.__bG=!0,t.scrollTop+=o,t.scrollLeft+=i,_.scrollX+=i,_.scrollY+=o,delete e.__bu,h.__aZ(),h.__be()):(delete e.__bx,delete e.__bG)):(delete e.__bx,delete e.__bG)}},r.__bH(30,e.__bF))},__bw:function(){var e=this;e.__bI||(e.__bI=function(){if(!e.__bG){var _=0,t=0,i=e.__bt,o=l.scrollTop(),r=l.height(),n=d.height(),a=d.width(),b=l.width(),s=l.scrollLeft();i.pageX-s<20&&s>0?_=-Math.min(7,s):s+b-i.pageX<20&&s+b<a&&(_=Math.min(7,a-b-s)),i.pageY-o<20&&o>0?t=-Math.min(7,o):o+r-i.pageY<20&&o+r<n&&(t=Math.min(7,n-r-o)),_||t?(e.__by=!0,i.pageX+=_,i.pageY+=t,window.scrollBy(_,t),delete e.__bu,h.__aZ(),h.__bf(i),h.__be()):delete e.__by}},r.__bH(30,e.__bI))},__bD:function(){this.__bF&&(r.__bJ(this.__bF),delete this.__bF,delete this.__bG)},__bE:function(){this.__bI&&(r.__bJ(this.__bI),delete this.__bI)}})});