define("mx-dragsort/index",["magix","../mx-dragdrop/index","../mx-util/runner","$"],(e,_,t)=>{var i=e("magix"),o=e("../mx-dragdrop/index"),r=e("../mx-util/runner"),n=e("$");i.applyStyle("_zs_galleryH",'._zs_galleryet{left:-1000px;top:0;background:var(--color-brand)}._zs_galleryet,._zs_galleryeu{position:absolute;z-index:999999}._zs_galleryeu{width:20px;height:20px;border-radius:var(--border-radius)}._zs_galleryeu:after{position:absolute;left:0;right:0;top:0;bottom:0;font-size:var(--font-size);line-height:20px;text-align:center;color:var(--color-brand)}._zs_galleryev{background:var(--color-brand-opacity);border:1px solid var(--color-brand)}._zs_galleryev:after{content:"âœ“"}');var b=i.guid("dbar_"),l=i.guid("pt_"),d=n(window),a=n(document),h={__bc:function(){n("#"+b).length||n('<div class="_zs_galleryet" id="'+b+'"/>').appendTo("body")},__bd:function(e){e.child&&(n(e.child).css({opacity:.4}),this.__bc())},__bg:function(e){e&&e.child&&n(e.child).css({opacity:1}),this.__be(),this.__bf()},__be:function(){n("#"+b).css({left:-1e5})},__bh:function(e,_){var t=n("#"+b),i=!1;2&e.anchor&&(2&_?(t.css({height:2,width:e.bound.width,top:e.bound.y-1,left:e.bound.x}),i=!0):8&_&&(t.css({height:2,width:e.bound.width,top:e.bound.y+e.bound.height-1,left:e.bound.x}),i=!0)),!i&&1&e.anchor&&(1&_?t.css({height:e.bound.height,width:2,top:e.bound.y,left:e.bound.x-1}):4&_&&t.css({height:e.bound.height,width:2,top:e.bound.y,left:e.bound.x+e.bound.width-1}))},__bj:function(e){var _=this;e.atPlace&&e.child!=e.hover?(3==e.anchor?e.__bi&&_.__bh(e,e.side):e.__bj&&_.__bh(e,e.position),_.__bk(!0)):(_.__be(),_.__bk())},__bl:function(e){var _=n("#"+l);_.length||(_=n('<div class="_zs_galleryeu" id="'+l+'"/>')).appendTo("body");var t=Math.max(0,Math.min(e.pageX+10,a.width()-_.width())),i=Math.max(0,Math.min(e.pageY+18,a.height()-_.height()));_.css({left:t,top:i,display:"block"})},__bk:function(e){var _=n("#"+l);e?_.addClass("_zs_galleryev"):_.removeClass("_zs_galleryev")},__bf:function(){n("#"+l).hide()}};t.exports=i.View.extend({mixins:[o],init:function(e){var _=this,t=n("#"+_.id);t.on("mousedown",e.selector,function(e){e.preventDefault(),_.__bd(e)}),_.on("destroy",function(){t.off("mousedown")}),_.__a=t;var o=[t.get(0)];e.drops&&(o=o.concat(e.drops.split(","))),_.__bm=o;var r=e.horizonal+""=="true",d=e.vertical+""=="true";r||d||(d=!0);var a=0;r&&(a|=1),d&&(a|=2),_.__bn=a;var h=!0;i.has(e,"sort")&&(h=e.sort+""=="true"),_.__bo=h,_.on("destroy",function(){n("#"+b).remove(),n("#"+l).remove()})},__bp:function(e){for(var _=0,t=this.__bm;_<t.length;_++){var o=t[_];if(i.inside(e,o))return i.node(o)}return null},__br:function(e,_){var t=null;if(_||(_=this.__bp(e)),!this.__bo&&this.__bq)return{child:this.__bq,zone:_};for(;_!=e;){if(e.parentNode==_){t=e;break}e=e.parentNode}return!_||_.firstChild||t||(t=_),t&&"false"===t.getAttribute("ds-draggable")&&(t=null),{child:t,zone:_}},__bt:function(e,_){var t=0,i=0,o=-1,r=-1,n=-1,b=-1,l=!1;if(_.pageX>=e.x&&_.pageX<=e.x+e.width&&_.pageY>=e.y&&_.pageY<=e.y+e.height&&(t|=_.pageX<=e.x+e.width/2?1:4,o=_.pageX-e.x,n=e.x+e.width-_.pageX,t|=_.pageY<=e.y+e.height/2?2:8,r=_.pageY-e.y,b=e.y+e.height-_.pageY,l=!0),l){var d=Math.min(o,r,n,b);d>-1&&(d==o?i=1:d==r?i=2:d==n?i=4:d==b&&(i=8))}var a=this.__bs;return a&&a.zone===a.hover&&(t=2,i=1),{position:t,atPlace:l,side:i}},__bd:function(e){if(1===e.which){var _=this,t=_.__br(e.target);t.child&&(_.__bq=t.child,_.__bu=t.zone,_.__a.trigger({type:"dragbegin",dragNode:t.child,dragZone:t.zone}),h.__bd(t),_.dragdrop(t.zone,function(e){_.__bv(e)},function(e){_.__bg(e)}))}},__by:function(e,_,t){var i=this,o=i.__bt(e,_),r=o.side!=i.__bw,n=o.position!=i.__bx;(r||n)&&(i.__bw=o.side,i.__bx=o.position,t.__bi=r,t.__bj=n,t.side=o.side,t.position=o.position,t.atPlace=o.atPlace,t.anchor=i.__bn,h.__bj(t))},__bv:function(e){var _=o.fromPoint(e.clientX,e.clientY),t=this;if(h.__bl(e),t.__bz=e,t.__bA=!0,t.__bB(),t.__bC(),t.__bD||t.__bE||!_)return delete t.__bF,delete t.__bw,void delete t.__bx;if(t.__bF!=_){if(_.id===b)return;t.__bF=_,delete t.__bw;var r=t.__bp(_);if(r){r!=t.__bG&&(t.__bG=r,t.__a.trigger({type:"enterzone",zone:r,changePointer:h.__bk}));var l=t.__br(_,r);if(!l.child)return;var d=n(l.child),a=d.offset(),s={x:a.left,y:a.top,width:d.outerWidth(),height:d.outerHeight()};a=(d=n(l.zone)).offset(),t.__bH={x:a.left,y:a.top,scrollX:d.prop("scrollLeft"),scrollY:d.prop("scrollTop"),maxWidth:d.prop("scrollWidth"),maxHeight:d.prop("scrollHeight"),width:d.width(),height:d.height()},t.__by(t.__bI=s,e,t.__bs={child:t.__bq,bound:s,zone:l.zone,hover:l.child})}else t.__bG&&(t.__a.trigger({type:"leavezone",zone:t.__bG,changePointer:h.__bk}),delete t.__bG)}else t.__bI&&i.inside(_,t.__bs.zone)?t.__by(t.__bI,e,t.__bs):(delete t.__bw,delete t.__bx,t.__bo&&(h.__be(),h.__bk()))},__bg:function(){var e=this;e.__bJ(),e.__bK(),h.__bg({child:e.__bq});var _=e.__bx,t=e.__bw,i=e.__bA,o=e.__bs,r=e.__bq;if(i&&(_||t)){var n=o.zone,b=e.__bn,l=3===b?t:_;if(1&b&&1&l||2&l&&2&b)o.hover==n?n.appendChild(r):n.insertBefore(r,o.hover);else if(8&l&&2&b||4&l&&1&b){for(var d=o.hover.nextSibling;d&&1!=d.nodeType;)d=d.nextSibling;n.insertBefore(r,d),d||(n.scrollTop=n.scrollHeight)}}o&&e.__a.trigger({type:"dragfinish",moved:i,dragNode:r,dragZone:e.__bu,dropNode:o.hover,dropZone:o.zone,outZone:!e.__bG}),delete e.__bq,delete e.__bu,delete e.__bF,delete e.__bs,delete e.__bI,delete e.__bx,delete e.__bw,delete e.__bz,delete e.__bE,delete e.__bG,delete e.__bH,delete e.__bD,delete e.__bA},__bB:function(){var e=this;e.__bL||(e.__bL=function(){var _=e.__bH;if(_){var t=e.__bs.zone,i=0,o=0,r=e.__bz;r.pageX>_.x&&r.pageY>_.y&&r.pageX<_.x+_.width&&r.pageY<_.y+_.height?(r.pageX-_.x<20&&_.scrollX>0?i=-Math.min(7,_.scrollX):_.x+_.width-r.pageX<20&&_.scrollX+_.width<_.maxWidth&&(i=Math.min(7,_.maxWidth-_.scrollX-_.width)),r.pageY-_.y<20&&_.scrollY>0?o=-Math.min(7,_.scrollY):_.y+_.height-r.pageY<20&&_.scrollY+_.height<_.maxHeight&&(o=Math.min(7,_.maxHeight-_.scrollY-_.height)),i||o?(e.__bD=!0,e.__bM=!0,t.scrollTop+=o,t.scrollLeft+=i,_.scrollX+=i,_.scrollY+=o,delete e.__bA,h.__be(),h.__bk()):(delete e.__bD,delete e.__bM)):(delete e.__bD,delete e.__bM)}},r.__bN(30,e.__bL))},__bC:function(){var e=this;e.__bO||(e.__bO=function(){if(!e.__bM){var _=0,t=0,i=e.__bz,o=d.scrollTop(),r=d.height(),n=a.height(),b=a.width(),l=d.width(),s=d.scrollLeft();i.pageX-s<20&&s>0?_=-Math.min(7,s):s+l-i.pageX<20&&s+l<b&&(_=Math.min(7,b-l-s)),i.pageY-o<20&&o>0?t=-Math.min(7,o):o+r-i.pageY<20&&o+r<n&&(t=Math.min(7,n-r-o)),_||t?(e.__bE=!0,i.pageX+=_,i.pageY+=t,window.scrollBy(_,t),delete e.__bA,h.__be(),h.__bl(i),h.__bk()):delete e.__bE}},r.__bN(30,e.__bO))},__bJ:function(){this.__bL&&(r.__bP(this.__bL),delete this.__bL,delete this.__bM)},__bK:function(){this.__bO&&(r.__bP(this.__bO),delete this.__bO)}})});