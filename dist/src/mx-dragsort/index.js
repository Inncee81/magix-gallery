define("mx-dragsort/index",["magix","../mx-dragdrop/index","../mx-util/runner","$"],(_,e,t)=>{var i=_("magix"),o=_("../mx-dragdrop/index"),b=_("../mx-util/runner"),n=_("$");i.applyStyle("_zs_galleryG",'._zs_galleryee{left:-1000px;top:0;background:var(--color-brand)}._zs_galleryee,._zs_galleryef{position:absolute;z-index:999999}._zs_galleryef{width:20px;height:20px;border-radius:var(--border-radius)}._zs_galleryef:after{position:absolute;left:0;right:0;top:0;bottom:0;font-size:var(--font-size);line-height:20px;text-align:center;color:var(--color-brand)}._zs_galleryeg{background:var(--color-brand-opacity);border:1px solid var(--color-brand)}._zs_galleryeg:after{content:"âœ“"}');var r=i.guid("dbar_"),l=i.guid("pt_"),a=n(window),d=n(document),h={__b_:function(){n("#"+r).length||n('<div class="_zs_galleryee" id="'+r+'"/>').appendTo("body")},__ba:function(_){_.child&&(n(_.child).css({opacity:.4}),this.__b_())},__bd:function(_){_&&_.child&&n(_.child).css({opacity:1}),this.__bb(),this.__bc()},__bb:function(){n("#"+r).css({left:-1e5})},__be:function(_,e){var t=n("#"+r),i=!1;2&_.anchor&&(2&e?(t.css({height:2,width:_.bound.width,top:_.bound.y-1,left:_.bound.x}),i=!0):8&e&&(t.css({height:2,width:_.bound.width,top:_.bound.y+_.bound.height-1,left:_.bound.x}),i=!0)),!i&&1&_.anchor&&(1&e?t.css({height:_.bound.height,width:2,top:_.bound.y,left:_.bound.x-1}):4&e&&t.css({height:_.bound.height,width:2,top:_.bound.y,left:_.bound.x+_.bound.width-1}))},__bg:function(_){var e=this;_.atPlace&&_.child!=_.hover?(3==_.anchor?_.__bf&&e.__be(_,_.side):_.__bg&&e.__be(_,_.position),e.__bh(!0)):(e.__bb(),e.__bh())},__bi:function(_){var e=n("#"+l);e.length||(e=n('<div class="_zs_galleryef" id="'+l+'"/>')).appendTo("body");var t=Math.max(0,Math.min(_.pageX+10,d.width()-e.width())),i=Math.max(0,Math.min(_.pageY+18,d.height()-e.height()));e.css({left:t,top:i,display:"block"})},__bh:function(_){var e=n("#"+l);_?e.addClass("_zs_galleryeg"):e.removeClass("_zs_galleryeg")},__bc:function(){n("#"+l).hide()}};t.exports=i.View.extend({mixins:[o],init:function(_){var e=this,t=n("#"+e.id);t.on("mousedown",_.selector,function(_){_.preventDefault(),e.__ba(_)}),e.on("destroy",function(){t.off("mousedown")}),e.__a=t;var o=[t.get(0)];_.drops&&(o=o.concat(_.drops.split(","))),e.__bj=o;var b=_.horizonal+""=="true",a=_.vertical+""=="true";b||a||(a=!0);var d=0;b&&(d|=1),a&&(d|=2),e.__bk=d;var h=!0;i.has(_,"sort")&&(h=_.sort+""=="true"),e.__bl=h,e.on("destroy",function(){n("#"+r).remove(),n("#"+l).remove()})},__bm:function(_){for(var e=0,t=this.__bj;e<t.length;e++){var o=t[e];if(i.inside(_,o))return i.node(o)}return null},__bo:function(_,e){var t=null;if(e||(e=this.__bm(_)),!this.__bl&&this.__bn)return{child:this.__bn,zone:e};for(;e!=_;){if(_.parentNode==e){t=_;break}_=_.parentNode}return!e||e.firstChild||t||(t=e),t&&"false"===t.getAttribute("ds-draggable")&&(t=null),{child:t,zone:e}},__bq:function(_,e){var t=0,i=0,o=-1,b=-1,n=-1,r=-1,l=!1;if(e.pageX>=_.x&&e.pageX<=_.x+_.width&&e.pageY>=_.y&&e.pageY<=_.y+_.height&&(t|=e.pageX<=_.x+_.width/2?1:4,o=e.pageX-_.x,n=_.x+_.width-e.pageX,t|=e.pageY<=_.y+_.height/2?2:8,b=e.pageY-_.y,r=_.y+_.height-e.pageY,l=!0),l){var a=Math.min(o,b,n,r);a>-1&&(a==o?i=1:a==b?i=2:a==n?i=4:a==r&&(i=8))}var d=this.__bp;return d&&d.zone===d.hover&&(t=2,i=1),{position:t,atPlace:l,side:i}},__ba:function(_){if(1===_.which){var e=this,t=e.__bo(_.target);t.child&&(e.__bn=t.child,e.__br=t.zone,e.__a.trigger({type:"dragbegin",dragNode:t.child,dragZone:t.zone}),h.__ba(t),e.dragdrop(t.zone,function(_){e.__bs(_)},function(_){e.__bd(_)}))}},__bv:function(_,e,t){var i=this,o=i.__bq(_,e),b=o.side!=i.__bt,n=o.position!=i.__bu;(b||n)&&(i.__bt=o.side,i.__bu=o.position,t.__bf=b,t.__bg=n,t.side=o.side,t.position=o.position,t.atPlace=o.atPlace,t.anchor=i.__bk,h.__bg(t))},__bs:function(_){var e=o.fromPoint(_.clientX,_.clientY),t=this;if(h.__bi(_),t.__bw=_,t.__bx=!0,t.__by(),t.__bz(),t.__bA||t.__bB||!e)return delete t.__bC,delete t.__bt,void delete t.__bu;if(t.__bC!=e){if(e.id===r)return;t.__bC=e,delete t.__bt;var b=t.__bm(e);if(b){b!=t.__bD&&(t.__bD=b,t.__a.trigger({type:"enterzone",zone:b,changePointer:h.__bh}));var l=t.__bo(e,b);if(!l.child)return;var a=n(l.child),d=a.offset(),s={x:d.left,y:d.top,width:a.outerWidth(),height:a.outerHeight()};d=(a=n(l.zone)).offset(),t.__bE={x:d.left,y:d.top,scrollX:a.prop("scrollLeft"),scrollY:a.prop("scrollTop"),maxWidth:a.prop("scrollWidth"),maxHeight:a.prop("scrollHeight"),width:a.width(),height:a.height()},t.__bv(t.__bF=s,_,t.__bp={child:t.__bn,bound:s,zone:l.zone,hover:l.child})}else t.__bD&&(t.__a.trigger({type:"leavezone",zone:t.__bD,changePointer:h.__bh}),delete t.__bD)}else t.__bF&&i.inside(e,t.__bp.zone)?t.__bv(t.__bF,_,t.__bp):(delete t.__bt,delete t.__bu,t.__bl&&(h.__bb(),h.__bh()))},__bd:function(){var _=this;_.__bG(),_.__bH(),h.__bd({child:_.__bn});var e=_.__bu,t=_.__bt,i=_.__bx,o=_.__bp,b=_.__bn;if(i&&(e||t)){var n=o.zone,r=_.__bk,l=3===r?t:e;if(1&r&&1&l||2&l&&2&r)o.hover==n?n.appendChild(b):n.insertBefore(b,o.hover);else if(8&l&&2&r||4&l&&1&r){for(var a=o.hover.nextSibling;a&&1!=a.nodeType;)a=a.nextSibling;n.insertBefore(b,a),a||(n.scrollTop=n.scrollHeight)}}o&&_.__a.trigger({type:"dragfinish",moved:i,dragNode:b,dragZone:_.__br,dropNode:o.hover,dropZone:o.zone,outZone:!_.__bD}),delete _.__bn,delete _.__br,delete _.__bC,delete _.__bp,delete _.__bF,delete _.__bu,delete _.__bt,delete _.__bw,delete _.__bB,delete _.__bD,delete _.__bE,delete _.__bA,delete _.__bx},__by:function(){var _=this;_.__bI||(_.__bI=function(){var e=_.__bE;if(e){var t=_.__bp.zone,i=0,o=0,b=_.__bw;b.pageX>e.x&&b.pageY>e.y&&b.pageX<e.x+e.width&&b.pageY<e.y+e.height?(b.pageX-e.x<20&&e.scrollX>0?i=-Math.min(7,e.scrollX):e.x+e.width-b.pageX<20&&e.scrollX+e.width<e.maxWidth&&(i=Math.min(7,e.maxWidth-e.scrollX-e.width)),b.pageY-e.y<20&&e.scrollY>0?o=-Math.min(7,e.scrollY):e.y+e.height-b.pageY<20&&e.scrollY+e.height<e.maxHeight&&(o=Math.min(7,e.maxHeight-e.scrollY-e.height)),i||o?(_.__bA=!0,_.__bJ=!0,t.scrollTop+=o,t.scrollLeft+=i,e.scrollX+=i,e.scrollY+=o,delete _.__bx,h.__bb(),h.__bh()):(delete _.__bA,delete _.__bJ)):(delete _.__bA,delete _.__bJ)}},b.__bK(30,_.__bI))},__bz:function(){var _=this;_.__bL||(_.__bL=function(){if(!_.__bJ){var e=0,t=0,i=_.__bw,o=a.scrollTop(),b=a.height(),n=d.height(),r=d.width(),l=a.width(),s=a.scrollLeft();i.pageX-s<20&&s>0?e=-Math.min(7,s):s+l-i.pageX<20&&s+l<r&&(e=Math.min(7,r-l-s)),i.pageY-o<20&&o>0?t=-Math.min(7,o):o+b-i.pageY<20&&o+b<n&&(t=Math.min(7,n-b-o)),e||t?(_.__bB=!0,i.pageX+=e,i.pageY+=t,window.scrollBy(e,t),delete _.__bx,h.__bb(),h.__bi(i),h.__bh()):delete _.__bB}},b.__bK(30,_.__bL))},__bG:function(){this.__bI&&(b.__bM(this.__bI),delete this.__bI,delete this.__bJ)},__bH:function(){this.__bL&&(b.__bM(this.__bL),delete this.__bL)}})});