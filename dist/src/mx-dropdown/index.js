define("mx-dropdown/index",["magix","$","../mx-util/monitor","../mx-medusa/util"],(e,t,a)=>{var _=e("magix"),i=e("$"),r=e("../mx-util/monitor"),l=e("../mx-medusa/util");_.applyStyle("_zs_galleryH","._zs_galleryec{min-width:600px}._zs_galleryec ._zs_galleryed{float:left;width:25%}._zs_galleryec ._zs_galleryee{margin-bottom:10px}._zs_galleryef{padding-top:10px;padding-left:18px;padding-right:18px;line-height:16px}._zs_galleryef ._zs_galleryeg{float:left;padding-right:20px;color:#999}._zs_galleryef ._zs_galleryeg:hover{color:var(--color-brand)}._zs_galleryef._zs_galleryeh{padding-left:12px;padding-right:12px}._zs_galleryei ._zs_galleryej{height:auto}._zs_galleryek img{display:none}"),a.exports=_.View.extend({tmpl:function(e,t,a,_,i,r,l,s){if(a||(a=e),!i){var n={"&":"amp","<":"lt",">":"gt",'"':"#34","'":"#39","`":"#96"},o=/[&<>"'`]/g,c=function(e){return"&"+n[e]+";"};i=function(e){return""+(null==e?"":e)},_=function(e){return i(e).replace(o,c)}}if(!r){var u={"!":"%21","'":"%27","(":"%28",")":"%29","*":"%2A"},p=function(e){return u[e]},d=/[!')(*]/g;r=function(e){return encodeURIComponent(i(e)).replace(d,p)}}if(!s){var g=/[\\'"]/g;s=function(e){return i(e).replace(g,"\\$&")}}l||(l=function(e,t,a,_){for(_=e[m];--_;)if(e[a=m+_]===t)return a;return e[a=m+e[m]++]=t,a});var m="",f="",x=e.viewId,v=e.expand,h=e.name,y=e.selectedText,b=e.placementClass,z=e.rList,k=e.searchbox,w=e.text,T=e.keyword,L=e.list,Z=e.height,K=e.textKey,P=e.valueKey,A=e.selected,C=e.spm;if(f+='<div id="toggle_'+_(x)+'" class="mx-trigger ',v&&(f+=" mx-trigger-open "),f+='"><span mxa="_zs_gallerybo:_" class="mx-trigger-label">',h&&(f+='<span mxa="_zs_gallerybo:a" class="color-9">'+_(h)+"ï¼š</span>"),f+='<span mxa="_zs_gallerybo:b" class="_zs_galleryek">'+i(y)+'</span></span><span mxs="_zs_gallerybo:_" class="mc-iconfont mx-trigger-arrow">&#xe692;</span></div><div mxv id="menu_'+_(x)+'" class="_zs_galleryei mx-output '+_(b)+" ",v&&(f+=" mx-output-open "),f+='">',z){if(f+=" ",k&&(f+='<div mxv mxa="_zs_gallerybo:c" class="mx-output-search"><div mxv mxa="_zs_gallerybo:d" class="search-box" style="width: 100%;"><i mxs="_zs_gallerybo:a" class="mc-iconfont search-icon">&#xe651;</i><input class="input search-input" placeholder="'+_(w.search)+'" mx-keyup="'+t+'__g()" mx-paste="'+t+'__g()" mx-change="'+t+'__m()" mx-focusin="'+t+'__m()" mx-focusout="'+t+'__m()" value="'+_(T)+'"/></div></div>'),f+=" ",L.length){f+='<ul class="mx-output-list" id="list_'+_(x)+'" style="max-height:'+_(Z)+'px;">';w=void 0;var N=void 0;f+=" ";for(var O=0,j=L;O<j.length;O++){var U=j[O];if(f+=" ",w=U[K],N=U[P],f+=" ",U&&U.group)f+='<li class="mx-output-header" title="'+_(U[K])+'">'+_(U[K])+"</li>";else{f+='<li class="mx-output-item" title="'+_(U.tip?U.tip:w)+'">';var H=N+""==A+"";f+='<span class="_zs_galleryej mx-output-link ',H&&(f+=" mx-output-link-active "),f+='" data-active="'+_(H)+'" mx-click="'+t+"__ab({item:'"+l(a,U)+"'})\" ",C&&(f+=' data-spm-click="'+_(C)+_(N)+'" '),f+=">"+i(w)+"</span></li>"}f+=" "}f+="</ul>"}else f+='<div mxa="_zs_gallerybo:e" class="text-center color-9 pt20 pb20">'+i(w.empty)+"</div>";f+=" "}return f+="</div>"},init:function(e){var t=this;r.__h(),t.on("destroy",function(){r.__i(t),r.__j()}),t.__a=i("#"+t.id),t.__k=e.disabled+""=="true"||i("#"+t.id)[0].hasAttribute("mx-disabled"),t.__bZ=!1;var a="mx-output-"+(e.placement||"bottom");t.__bO=e.triggerType||"click";var s=t.__c_=e.selected,n=t.__ca=e.textKey||"text",o=t.__cb=e.valueKey||"value",c=t.__cc=e.emptyText||"",u=[];if(e.list){try{u=JSON.parse(e.list)}catch(t){u=e.list}"object"==typeof u[0]||(u=u.map(function(e){var t={};return t[n]=e,t[o]=e,t}))}else{var p;t.__a.children().each(function(e,t){t=i(t),p="true"==t.attr("group"),u.push({group:p,text:t.text(),value:p?_.guid():t.attr("value")})}),n=t.__ca="text",o=t.__cb="value"}t.__cd=u;var d=_.toMap(u,o);if(c&&!d[""]){var g={};g[n]=c,g[o]="",u.unshift(g),d[""]=g}if(!s||!d[s]){for(var m={},f=0;f<u.length;f++)if(!u[f].group){m=u[f];break}s=d[s]||m,n&&o&&(s=s[o])}t.updater.set({viewId:t.id,textKey:t.__ca,valueKey:t.__cb,selected:t.__c_=s,searchbox:e.searchbox+""=="true",selectedText:t.__ce=(d[s]||{})[n],keyword:t.__cf=e.keyword||"",expand:t.__bZ,height:e.height||250,spm:t.__a.attr("data-spm-click")||"",name:e.name||"",placementClass:a,text:{search:l["dropdown.search"],empty:l["empty.text"]}}),t.__a.val(s)},render:function(){var e,t=this,a=t.updater.get("searchbox"),_=function(){t.updater.digest({list:e});var a=t.__bO,_=i("#toggle_"+t.id);switch(a){case"click":_.on("click",function(){t.__bZ?t.__n():t.__k||t.__o()});break;case"hover":_.hover(function(){clearTimeout(t.__bN),t.__k||t.__o()},function(){t.__bP()}),i("#menu_"+t.id).hover(function(){clearTimeout(t.__bN)},function(){t.__bP()})}};a?t.__bU(t.__cf,function(t){e=t,_()}):(e=t.__cd,_())},__l:function(e){return _.inside(e,this.id)},__bP:function(){var e=this;clearTimeout(e.__bN),e.__bN=setTimeout(e.wrapAsync(function(){e.__n()}),250)},__n:function(){var e=this;e.__bZ&&(e.updater.digest({expand:e.__bZ=!1}),e.__a.trigger("focusout"),r.__i(e))},__o:function(){var e=this;if(!e.__bZ){var t={expand:e.__bZ=!0};e.updater.get("rList")||(t.rList=!0),e.updater.digest(t),e.__a.trigger("focusin");var a=i("#list_"+e.id),_=a.find('[data-active="true"]').position(),l=a.height(),s=a.prop("scrollTop");if(_&&(_.top<0||_.top>l)){var n=_.top-l+s+l/2;a.prop("scrollTop",n)}r.__q(e)}},__bU:function(e,t){var a=this;clearTimeout(a.__aH);var _=a.__cd,i=[],r=0,l=_.length,s=a.__ca,n=a.__cb;if(e){var o=function(){if(r<l){for(var c=Math.min(r+400,l),u=r,p=void 0,d=void 0,g=void 0;u<c;u++){d=p=_[u],g=p,s&&n&&(d=p[s],g=p[n]);var m=(e+"").toLocaleLowerCase();((d+"").toLocaleLowerCase().indexOf(m)>=0||(g+"").indexOf(e)>=0)&&i.push(p)}r=c,a.__aH=setTimeout(a.wrapAsync(o),20)}else t(i)};o()}else t(_)},"__g<keyup,paste>":function(e){var t=this;e.stopPropagation(),clearTimeout(t.__bY);var a=i.trim(e.eventTarget.value);t.updater.set({keyword:a}),t.__bY=setTimeout(t.wrapAsync(function(){a!=t.__cf&&t.__bU(t.__cf=a,function(e){t.updater.digest({list:e})})}),250)},"__ab<click>":function(e){var t=this,a=e.params.item,_=t.updater,r=t.__cb,l=t.__ca,s=t.__c_,n=t.__cf,o=a[r],c=a[l];if(s!==o){_.set({selected:t.__c_=o});var u=i.Event("change",{item:a,keyword:n,keys:{text:l,value:r},value:a[r],text:a[l],selected:a[r]});u.isDefaultPrevented()?_.set({selected:s}):_.digest({selected:o,selectedText:c}),t.__a.val(r?a[r]:a).trigger(u)}t.__n()},"__m<change,focusin,focusout>":function(e){e.stopPropagation()}})});