define("mx-indics/index",["magix","$","../mx-util/view","../mx-dialog/index"],(e,l,r)=>{"use strict";l.__esModule=!0;var a=e("magix"),t=e("$"),i=e("../mx-util/view"),s=e("../mx-dialog/index");a.default.applyStyle("_zs_galleryac",'._zs_galleryhH{position:relative;height:100%}._zs_galleryhH ._zs_galleryhI{position:relative;width:100%;height:60px;padding:0 24px;background-color:#fff;line-height:60px;border-bottom:1px solid var(--color-border);white-space:nowrap;word-wrap:normal;overflow:hidden;text-overflow:ellipsis}._zs_galleryhH ._zs_galleryhI ._zs_galleryhJ{position:absolute;top:0;right:0;padding:0 24px;background-color:#fff}._zs_galleryhH ._zs_galleryhK{position:absolute;top:60px;left:0;bottom:0;right:0;overflow-y:auto}._zs_galleryhH ._zs_galleryhK ._zs_galleryhL{position:relative;padding:16px 24px}._zs_galleryhH ._zs_galleryhK ._zs_galleryhL:nth-of-type(2n){background-color:var(--color-bg)}._zs_galleryhH ._zs_galleryhK ._zs_galleryhM{position:absolute;top:16px;left:24px;width:90px;padding:8px 0;color:#999}._zs_galleryhH ._zs_galleryhK ._zs_galleryhN{float:left;padding:8px 0;white-space:nowrap}._zs_galleryhH ._zs_galleryhK ._zs_galleryhN ._zs_galleryhO{position:relative;top:1px;left:1px;font-size:14px;color:#ccc}._zs_galleryhH._zs_galleryhP ._zs_galleryhL{padding-left:122px}._zs_galleryhH._zs_galleryhQ{padding-right:240px}._zs_galleryhH._zs_galleryhQ ._zs_galleryhK{right:240px;border-right:1px solid var(--color-border)}._zs_galleryhH._zs_galleryhQ ._zs_galleryhR{position:absolute;top:0;right:0;width:240px;height:98px}._zs_galleryhH._zs_galleryhQ ._zs_galleryhR ._zs_galleryhS{height:60px;line-height:60px;padding-left:24px;border-bottom:1px solid var(--color-border)}._zs_galleryhH._zs_galleryhQ ._zs_galleryhR ._zs_galleryhT{height:38px;padding:0 24px;line-height:38px;text-align:right;background-color:var(--color-bg)}._zs_galleryhH._zs_galleryhQ ._zs_galleryhU{position:absolute;top:98px;right:0;bottom:0;width:240px;padding:0 24px 16px;overflow-y:auto;background-color:var(--color-bg)}._zs_galleryhH._zs_galleryhQ ._zs_galleryhU ._zs_galleryhV{height:30px;margin-bottom:5px;padding:0 15px;line-height:28px;background:#fff;border:1px solid var(--color-border);border-radius:var(--border-radius);cursor:move}._zs_galleryhH._zs_galleryhQ ._zs_galleryhU ._zs_galleryhV:last-child{margin-bottom:0}._zs_galleryhW{display:inline-block;width:40px;padding-right:10px;margin-right:10px;text-align:center}._zs_galleryhW ._zs_galleryhX{position:relative;top:2px;font-size:18px}._zs_galleryhY{display:inline-block;width:auto}[mx-view*="mx-indics/index"]{display:inline-block;vertical-align:middle}[mx-view*="mx-indics/index"]:hover ._zs_galleryhW,[mx-view*="mx-indics/index"]:hover ._zs_galleryhY{border-color:var(--border-highlight-hover);color:#333}[mx-view*="mx-indics/index"]:hover ._zs_galleryhY ._zs_galleryhZ{color:var(--border-highlight-hover)}'),l.default=i.extend({tmpl:function(e,l,r,a,t,i,s,o){if(r||(r=e),!t){var g={"&":"amp","<":"lt",">":"gt",'"':"#34","'":"#39","`":"#96"},_=/[&<>"'`]/g,h=function(e){return"&"+g[e]+";"};t=function(e){return""+(null==e?"":e)},a=function(e){return t(e).replace(_,h)}}if(!i){var n={"!":"%21","'":"%27","(":"%28",")":"%29","*":"%2A"},p=function(e){return n[e]},d=/[!')(*]/g;i=function(e){return encodeURIComponent(t(e)).replace(d,p)}}if(!o){var c=/[\\'"]/g;o=function(e){return t(e).replace(c,"\\$&")}}var y="",x=e.data;return y+='<a mxs="_zs_galleryc?:_" href="javascript:;" class="mx-trigger _zs_galleryhW" mx-click="'+l+'show()"><i class="mc-iconfont _zs_galleryhX">&#xe731;</i></a><a mxa="_zs_galleryc?:_" href="javascript:;" class="mx-trigger _zs_galleryhY" mx-click="'+l+'toggleDefault()">'+a(x.map[x.type].label)+'<i mxs="_zs_galleryc?:a" class="mc-iconfont mx-trigger-arrow _zs_galleryhZ">&#xe692;</i></a>'},mixins:[s],init:function(e){this.updater.snapshot(),this.assign(e)},assign:function(e){var l=this.updater.altered(),r=e.textKey||"text",t=e.valueKey||"value",i=e.parentKey||"pValue",s=[];(e.fields||[]).forEach(function(e){s.push(a.default.mix(e,{text:e[r],value:e[t],pValue:e[i]}))});var o=[];(e.parents||[]).forEach(function(e){o.push(a.default.mix(e,{text:e[r],value:e[t]}))});var g=(e.customs||[]).map(function(e){return""+e}),_=(e.defaults||[]).map(function(e){return""+e});0==g.length&&(g=_);var h=+e.limit||0,n=e.sortable+""=="true",p=e.lineNumber||(n?4:5),d=e.custom+""=="true"?2:1,c={1:{label:"默认数据",list:_},2:{label:"自定义数据",list:g}};return this.updater.set({data:{parents:o,fields:s,sortable:n,lineNumber:p,limit:h,map:c,type:d,tip:e.tip||""}}),l||(l=this.updater.altered()),!!l&&(this.updater.snapshot(),!0)},render:function(){this.updater.digest()},"toggleDefault<click>":function(e){var l=this.updater.get("data");1==l.type?l.type=2:l.type=1,this.updater.digest({data:l}),this.__al("btn-switch")},__al:function(e){var l=this.updater.get("data"),r=l.type,a=l.map;t("#"+this.id).trigger({type:"change",triggerType:e,defaults:a[1].list,custom:2==r,customs:a[2].list})},"show<click>":function(e){e.preventDefault();var l=this,r=l.updater.get("data"),a=t.extend(!0,{},r);a.selected=a.map[a.type].list,a.callback=function(e){r.type=2,r.map[r.type].list=e.selected,l.updater.digest({data:r}),l.__al("dialog-setting")},l.mxModal("mx-indics/dialog",a,{width:1e3,closable:!1,card:!1})}})});