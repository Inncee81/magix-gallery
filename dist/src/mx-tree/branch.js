define("mx-tree/branch",["magix","$"],(e,l,r)=>{var t=e("magix"),i=e("$"),n=t.Vframe;t.applyStyle("_zs_galleryaH",':root{--mx-tree-oper-size:calc(var(--font-size) + 2px)}._zs_galleryl_{position:relative;height:32px;line-height:20px;padding-bottom:12px;background-color:#fff;overflow:hidden;transition:height .2s}._zs_galleryl_ ._zs_galleryla{float:left;width:var(--mx-tree-oper-size);height:var(--mx-tree-oper-size);margin-right:5px;line-height:var(--mx-tree-oper-size);font-size:var(--mx-tree-oper-size);color:#ccc;transition:color var(--duration);-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-user-select:none}._zs_galleryl_ ._zs_gallerylb{cursor:pointer}._zs_galleryl_ ._zs_gallerylb:hover{color:#666}._zs_gallerylc ._zs_galleryl_{height:0;padding-bottom:0}._zs_galleryld{position:relative}._zs_galleryle{padding-left:calc(var(--mx-tree-oper-size) + 5px)}._zs_gallerylf,._zs_gallerylf ._zs_galleryld{position:relative}._zs_gallerylf ._zs_galleryld:after{content:"";position:absolute;top:22px;left:calc(var(--mx-tree-oper-size)/2);bottom:2px;width:1px;background-color:var(--color-border)}._zs_gallerylf ._zs_galleryld:last-child:after{content:none}'),r.exports=t.View.extend({tmpl:function(e,l,r,t,i,n,a,s){if(r||(r=e),!i){var o={"&":"amp","<":"lt",">":"gt",'"':"#34","'":"#39","`":"#96"},c=/[&<>"'`]/g,_=function(e){return"&"+o[e]+";"};i=function(e){return""+(null==e?"":e)},t=function(e){return i(e).replace(c,_)}}if(!n){var d={"!":"%21","'":"%27","(":"%28",")":"%29","*":"%2A"},g=function(e){return d[e]},p=/[!')(*]/g;n=function(e){return encodeURIComponent(i(e)).replace(p,g)}}if(!s){var h=/[\\'"]/g;s=function(e){return i(e).replace(h,"\\$&")}}a||(a=function(e,l,r,t){for(t=e[f];--t;)if(e[r=f+t]===l)return r;return e[r=f+e[f]++]=l,r});for(var f="",u="",v=e.list,m=e.needExpand,x=e.readOnly,y=e.viewId,z=e.valueKey,b=e.textKey,k=e.closeMap,w=0,E=v.length;w<E;w++){var I=v[w];u+='<div mxv mxa="_zs_galleryfp:_" class="_zs_galleryld"><div mxv mxa="_zs_galleryfp:a" class="_zs_galleryl_ clearfix">',m&&(u+=" ",I.children&&I.children.length>0?(u+='<i class="mc-iconfont _zs_galleryla _zs_gallerylb" mx-click="'+l+"__p({index:"+t(w)+'})">',I.close?u+="&#xe65b;":u+="&#xe65a;",u+="</i>"):(u+=" ",x&&(u+='<i mxs="_zs_galleryfp:_" class="mc-iconfont _zs_galleryla">&#xe732;</i>'),u+=" "),u+=" "),u+='<label mxv mxa="_zs_galleryfp:b" class="fl">',x||(u+='<input class="checkbox" type="checkbox" id="cb_'+t(y)+"_"+t(w)+'" value="'+t(I[z])+'" name="'+t(y)+'" mx-change="'+l+"__bY({index:"+t(w)+'})"/>'),u+=t(I[b])+"</label></div>",I.children&&I.children.length>0&&(u+='<div mxv="readOnly,needExpand,list,closeMap" id="'+t(y)+"_"+t(w)+'" class="',I.close&&(u+=" _zs_gallerylc "),u+=" ",I.isAll||(u+=" _zs_galleryle "),u+='" mx-view="mx-tree/branch?textKey='+n(b)+"&valueKey="+n(z)+"&readOnly="+a(r,x)+"&needExpand="+a(r,m)+"&list="+a(r,I.children)+"&closeMap="+a(r,k)+'"></div>'),u+="</div>"}return u},init:function(e){this.updater.set(e)},render:function(){this.updater.digest({viewId:this.id})},__fl:function(){var e,l,r=this.id;return i("#"+r+' input[name="'+r+'"]').each(function(r,t){t.indeterminate?e=l=!0:t.checked?e=!0:l=!0}),e&&l?3:e?2:1},__fm:function(e){var l=this.owner.parent(),r=0;if(l){for(var t=l.children(),a=0;a<t.length;a++)if(t[a]==e){var s=n.get(t[a]);s&&(r|=s.invoke("__fl"));break}var o=i("#cb_"+e);3===r?o.prop("indeterminate",!0):(o.prop("indeterminate",!1),o.prop("checked",2==r)),l.invoke("__fm",[l.id])}},__bX:function(e){var l=this.id;i("#"+l+' input[name="'+l+'"]').prop("indeterminate",!1).prop("checked",e);for(var r=0,t=this.owner.children();r<t.length;r++){var a=t[r],s=n.get(a);s&&s.invoke("__bX",[e])}},"__bY<change>":function(e){var l=n.get(this.id+"_"+e.params.index);l&&l.invoke("__bX",[e.eventTarget.checked]),this.__fm(this.id)},"__p<click>":function(e){e.stopPropagation();var l=i(e.eventTarget),r=e.params.index,t=i("#"+this.id+"_"+r);t.toggleClass("_zs_gallerylc");var n=this.updater.get("list"),a=this.updater.get("closeMap"),s=n[r].value;t.hasClass("_zs_gallerylc")?(l.html("&#xe65b;"),a[s]=!0):(l.html("&#xe65a;"),a[s]=!1)},setValues:function(e){e=e.map(function(e){return e+""});var l=this.id;i("#"+l+' input[name="'+l+'"]').each(function(l,r){e.indexOf(r.value+"")>-1&&(r.checked=!0)}),this.__fm(l)},getValues:function(){return this.get("value")},getItems:function(){return this.get("item")},get:function(e){var l=this.id,r=[];return this.updater.get("list").forEach(function(t,n){if(0==(t.children||[]).length){var a=i("#cb_"+l+"_"+n);a[0].checked&&("item"==e?r.push(t):r.push(a[0].value))}}),r}})});