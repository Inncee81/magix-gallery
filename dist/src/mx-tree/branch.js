define("mx-tree/branch",["magix","$"],(e,r,t)=>{var l=e("magix"),i=e("$"),n=l.Vframe;l.applyStyle("_zs_galleryaF",':root{--mx-tree-oper-size:calc(var(--font-size) + 2px)}._zs_gallerykZ{position:relative;height:32px;line-height:20px;padding-bottom:12px;background-color:#fff;overflow:hidden;transition:height .2s}._zs_gallerykZ ._zs_galleryl_{float:left;width:var(--mx-tree-oper-size);height:var(--mx-tree-oper-size);margin-right:5px;line-height:var(--mx-tree-oper-size);font-size:var(--mx-tree-oper-size);color:#ccc;transition:color var(--duration);-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-user-select:none}._zs_gallerykZ ._zs_galleryla{cursor:pointer}._zs_gallerykZ ._zs_galleryla:hover{color:#666}._zs_gallerylb ._zs_gallerykZ{height:0;padding-bottom:0}._zs_gallerylc{position:relative}._zs_galleryld{padding-left:calc(var(--mx-tree-oper-size) + 5px)}._zs_galleryle,._zs_galleryle ._zs_gallerylc{position:relative}._zs_galleryle ._zs_gallerylc:after{content:"";position:absolute;top:22px;left:calc(var(--mx-tree-oper-size)/2);bottom:2px;width:1px;background-color:var(--color-border)}._zs_galleryle ._zs_gallerylc:last-child:after{content:none}'),t.exports=l.View.extend({tmpl:function(e,r,t,l,i,n,a,s){if(t||(t=e),!i){var c={"&":"amp","<":"lt",">":"gt",'"':"#34","'":"#39","`":"#96"},o=/[&<>"'`]/g,_=function(e){return"&"+c[e]+";"};i=function(e){return""+(null==e?"":e)},l=function(e){return i(e).replace(o,_)}}if(!n){var d={"!":"%21","'":"%27","(":"%28",")":"%29","*":"%2A"},g=function(e){return d[e]},h=/[!')(*]/g;n=function(e){return encodeURIComponent(i(e)).replace(h,g)}}if(!s){var p=/[\\'"]/g;s=function(e){return i(e).replace(p,"\\$&")}}a||(a=function(e,r,t,l){for(l=e[u];--l;)if(e[t=u+l]===r)return t;return e[t=u+e[u]++]=r,t});for(var u="",f="",v=e.list,x=e.needExpand,m=e.readOnly,y=e.viewId,z=e.valueKey,b=e.textKey,k=e.closeMap,w=0,Z=v.length;w<Z;w++){var P=v[w];f+='<div mxv mxa="_zs_galleryfP:_" class="_zs_gallerylc"><div mxv mxa="_zs_galleryfP:a" class="_zs_gallerykZ clearfix">',x&&(f+=" ",P.children&&P.children.length>0?(f+='<i class="mc-iconfont _zs_galleryl_ _zs_galleryla" mx-click="'+r+"__s({index:"+l(w)+'})">',P.close?f+="&#xe65b;":f+="&#xe65a;",f+="</i>"):(f+=" ",m&&(f+='<i mxs="_zs_galleryfP:_" class="mc-iconfont _zs_galleryl_">&#xe732;</i>'),f+=" "),f+=" "),f+='<label mxv mxa="_zs_galleryfP:b" class="fl">',m||(f+='<input class="checkbox" type="checkbox" id="cb_'+l(y)+"_"+l(w)+'" value="'+l(P[z])+'" name="'+l(y)+'" mx-change="'+r+"__cc({index:"+l(w)+'})"/>'),f+=l(P[b])+"</label></div>",P.children&&P.children.length>0&&(f+='<div mxv="readOnly,needExpand,list,closeMap" id="'+l(y)+"_"+l(w)+'" class="',P.close&&(f+=" _zs_gallerylb "),f+=" ",P.isAll||(f+=" _zs_galleryld "),f+='" mx-view="mx-tree/branch?textKey='+n(b)+"&valueKey="+n(z)+"&readOnly="+a(t,m)+"&needExpand="+a(t,x)+"&list="+a(t,P.children)+"&closeMap="+a(t,k)+'"></div>'),f+="</div>"}return f},init:function(e){this.updater.set(e)},render:function(){this.updater.digest({viewId:this.id})},__fr:function(){var e,r,t=this.id;return i("#"+t+' input[name="'+t+'"]').each(function(t,l){l.indeterminate?e=r=!0:l.checked?e=!0:r=!0}),e&&r?3:e?2:1},__fs:function(e){var r=this.owner.parent(),t=0;if(r){for(var l=r.children(),a=0;a<l.length;a++)if(l[a]==e){var s=n.get(l[a]);s&&(t|=s.invoke("__fr"));break}var c=i("#cb_"+e);3===t?c.prop("indeterminate",!0):(c.prop("indeterminate",!1),c.prop("checked",2==t)),r.invoke("__fs",[r.id])}},__cb:function(e){var r=this.id;i("#"+r+' input[name="'+r+'"]').prop("indeterminate",!1).prop("checked",e);for(var t=0,l=this.owner.children();t<l.length;t++){var a=l[t],s=n.get(a);s&&s.invoke("__cb",[e])}},"__cc<change>":function(e){var r=n.get(this.id+"_"+e.params.index);r&&r.invoke("__cb",[e.eventTarget.checked]),this.__fs(this.id)},"__s<click>":function(e){e.stopPropagation();var r=i(e.eventTarget),t=e.params.index,l=i("#"+this.id+"_"+t);l.toggleClass("_zs_gallerylb");var n=this.updater.get("list"),a=this.updater.get("closeMap"),s=n[t].value;l.hasClass("_zs_gallerylb")?(r.html("&#xe65b;"),a[s]=!0):(r.html("&#xe65a;"),a[s]=!1)},setValues:function(e){e=e.map(function(e){return e+""});var r=this.id;i("#"+r+' input[name="'+r+'"]').each(function(r,t){e.indexOf(t.value+"")>-1&&(t.checked=!0)}),this.__fs(r)},getValues:function(){return this.get("value")},getItems:function(){return this.get("item")},get:function(e){var r=this.id,t=[];return this.updater.get("list").forEach(function(l,n){if(0==(l.children||[]).length){var a=i("#cb_"+r+"_"+n);a[0].checked&&("item"==e?t.push(l):t.push(a[0].value))}}),t}})});