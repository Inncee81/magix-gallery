define("mx-main/index",["magix"],(i,e,l)=>{var a=i("magix"),r=a.Router,s=a.Vframe;a.applyStyle("_zs_galleryag",'[mx-view*="mx-main/index"]{position:relative;background-color:#e8ebf2}._zs_galleryin{position:absolute;top:0;left:0;bottom:0;padding-top:16px;background-color:var(--app-nav-bg);z-index:3}._zs_galleryin ._zs_galleryio{position:relative;font-size:14px}._zs_galleryin ._zs_galleryio:before{content:"";position:absolute;top:0;left:24px;bottom:0;width:0;border-left:1px solid #4d5873}._zs_galleryin ._zs_galleryio:first-child:before{top:23px}._zs_galleryin ._zs_galleryio:last-child:before{bottom:23px}._zs_galleryin ._zs_galleryio ._zs_galleryip{position:relative;display:block;height:46px;line-height:46px;padding-left:36px}._zs_galleryin ._zs_galleryio ._zs_galleryip ._zs_galleryiq{position:absolute;top:50%;left:16px;width:16px;height:16px;margin-top:-8px;border-radius:50%;background-color:#4d5873;color:#fff;text-align:center;line-height:16px;font-size:12px;transition:all var(--duration)}._zs_galleryin ._zs_galleryio ._zs_galleryip ._zs_galleryir{color:#fff;opacity:.5}._zs_galleryin ._zs_galleryio ._zs_galleryip ._zs_galleryis{opacity:0;position:absolute;top:0;left:0;z-index:-1;width:100%;height:100%;background-image:linear-gradient(-90deg,var(--app-brand),var(--app-brand-gradient));background-color:var(--app-brand);transition:all var(--duration)}._zs_galleryin ._zs_galleryio ._zs_galleryip._zs_galleryit ._zs_galleryis,._zs_galleryin ._zs_galleryio ._zs_galleryip._zs_galleryit ._zs_galleryir,._zs_galleryin ._zs_galleryio ._zs_galleryip:hover ._zs_galleryir{opacity:1}._zs_galleryin ._zs_galleryio ._zs_galleryiu:before{content:"";position:absolute;top:50%;left:24px;width:10px;height:0;border-top:1px solid #4d5873}._zs_galleryin ._zs_galleryio._zs_galleryiv ._zs_galleryip ._zs_galleryir{opacity:1}._zs_galleryin ._zs_galleryio._zs_galleryiv ._zs_galleryip ._zs_galleryis{opacity:.2}._zs_galleryin ._zs_galleryio._zs_galleryiv ._zs_galleryip._zs_galleryit ._zs_galleryiq{background-color:#fff;color:var(--app-brand)}._zs_galleryin ._zs_galleryio._zs_galleryiv ._zs_galleryip._zs_galleryit ._zs_galleryis{opacity:1}._zs_galleryin ._zs_galleryio._zs_galleryiw ._zs_galleryip{cursor:not-allowed}._zs_galleryin ._zs_galleryio._zs_galleryiw ._zs_galleryip:hover ._zs_galleryir{opacity:.5}._zs_galleryin ._zs_galleryio._zs_galleryiw ._zs_galleryix{position:absolute;top:50%;right:16px;margin-top:-6px;font-size:14px;font-weight:700;color:#4d5873}._zs_galleryiy{position:relative;z-index:2}._zs_galleryiy ._zs_galleryiz{position:relative;margin-bottom:16px;border-radius:var(--border-radius);background-color:#fff}._zs_galleryiy ._zs_galleryiz ._zs_galleryiA{padding:8px 24px;border-top-left-radius:var(--border-radius);border-top-right-radius:var(--border-radius);border-bottom:1px solid var(--color-border)}._zs_galleryiy ._zs_galleryiz ._zs_galleryiA ._zs_galleryiB,._zs_galleryiy ._zs_galleryiz ._zs_galleryiA ._zs_galleryiB>*,._zs_galleryiy ._zs_galleryiz ._zs_galleryiA ._zs_galleryiC,._zs_galleryiy ._zs_galleryiz ._zs_galleryiA ._zs_galleryiD{display:inline-block;height:32px;line-height:32px;vertical-align:middle;overflow:hidden}._zs_galleryiy ._zs_galleryiz ._zs_galleryiA ._zs_galleryiB{margin-right:5px;color:#999}._zs_galleryiy ._zs_galleryiz ._zs_galleryiA ._zs_galleryiC{font-size:16px}._zs_galleryiy ._zs_galleryiz ._zs_galleryiA ._zs_galleryiE{margin-left:20px;color:#999}._zs_galleryiy ._zs_galleryiz ._zs_galleryiF{padding:16px 24px}._zs_galleryiy ._zs_galleryiG{position:absolute;background-color:#fff;border-radius:var(--border-radius)}._zs_galleryiy ._zs_galleryiG ._zs_galleryiH{padding:8px 24px;line-height:32px;font-size:16px;border-bottom:1px solid var(--color-border)}._zs_galleryiy ._zs_galleryiG ._zs_galleryiI{padding:16px 24px;color:#666}._zs_galleryiy ._zs_galleryiJ{text-align:center;padding:40px 0}._zs_galleryiy ._zs_galleryiJ ._zs_galleryiK{min-width:100px;margin-right:20px}._zs_galleryiy ._zs_galleryiJ ._zs_galleryiK:last-child{margin-right:0}._zs_galleryiL{display:inline-block;position:relative;margin-top:10px;color:var(--color-red)}'),l.exports=a.View.extend({tmpl:function(i,e,l,a,r,s,_,t){if(l||(l=i),!r){var n={"&":"amp","<":"lt",">":"gt",'"':"#34","'":"#39","`":"#96"},o=/[&<>"'`]/g,d=function(i){return"&"+n[i]+";"};r=function(i){return""+(null==i?"":i)},a=function(i){return r(i).replace(o,d)}}if(!s){var g={"!":"%21","'":"%27","(":"%28",")":"%29","*":"%2A"},p=function(i){return g[i]},y=/[!')(*]/g;s=function(i){return encodeURIComponent(r(i)).replace(y,p)}}if(!t){var z=/[\\'"]/g;t=function(i){return r(i).replace(z,"\\$&")}}_||(_=function(i,e,l,a){for(a=i[c];--a;)if(i[l=c+a]===e)return l;return i[l=c+i[c]++]=e,l});var c="",x="",f=i.leftWidth,u=i.stepInfos,v=i.curStepIndex,h=i.curSubStepIndex,b=i.viewHeight,m=i.gapWidth,w=i.curStepInfo,I=i.rightWidth,S=i.childInfos,k=i.viewId;x+='<div class="_zs_galleryin" style="width: '+a(f)+'px;">';for(var $=0,T=u.length;$<T;$++){var W=u[$];if(x+='<div class="_zs_galleryio ',W.index==v&&(x+=" _zs_galleryiv "),x+=" ",W.locked&&(x+=" _zs_galleryiw "),x+='"><a href="javascript:;" class="_zs_galleryip ',W.index==v&&-1==h&&(x+=" _zs_galleryit "),x+='" data-sub="-1" ',W.locked||(x+=' mx-click="'+e+"nav({stepIndex:"+a(W.index)+'})" '),x+='><span mxa="_zs_gallerydz:_" class="_zs_galleryiq">'+a($+1)+'</span><span mxs="_zs_gallerydz:_" class="_zs_galleryis"></span><span mxa="_zs_gallerydz:a" class="_zs_galleryir">'+a(W.label)+"</span></a>",!W.locked&&W.subs.length>1){x+=" ";for(var A=0,j=W.subs,C=j.length;A<C;A++){var V=j[A];x+='<a href="javascript:;" class="_zs_galleryip _zs_galleryiu ',W.index==v&&h==V.index&&(x+=" _zs_galleryit "),x+='" data-sub="'+a(V.index)+'" mx-click="'+e+"nav({stepIndex:"+a(W.index)+",subStepIndex:"+a(V.index)+'})"><span mxs="_zs_gallerydz:_" class="_zs_galleryis"></span><span mxa="_zs_gallerydz:b" class="_zs_galleryir">'+a(V.label)+"</span></a>"}x+=" "}x+=" ",W.locked&&(x+='<i mxs="_zs_gallerydz:a" class="mc-iconfont _zs_galleryix">&#xe759;</i>'),x+="</div>"}x+='</div><div mxv class="_zs_galleryiy clearfix" style="min-height: '+a(b)+"px; padding-top: "+a(m)+"px; padding-right: "+a(m+(w.sideWrapper?I+m:0))+"px; padding-left: "+a(f+m)+'px;">';for(var E=0,G=w.subs,H=G.length;E<H;E++){x+='<div mxv mxa="_zs_gallerydz:c" class="_zs_galleryiz"><div mxa="_zs_gallerydz:d" class="_zs_galleryiA clearfix">',(V=G[E]).icon&&(x+='<span mxa="_zs_gallerydz:e" class="_zs_galleryiB">'+r(V.icon)+"</span>"),x+='<span mxa="_zs_gallerydz:f" class="_zs_galleryiC">'+a(V.label)+"</span>",V.tip&&(x+='<span mxa="_zs_gallerydz:g" class="_zs_galleryiE">'+r(V.tip)+"</span>"),x+='</div><div mxv="curStepInfo,childInfos" class="_zs_galleryiF" id="sub_frame_'+a(V.index)+'" mx-view="'+a(V.view)+"?info="+_(l,V)+"&data="+_(l,S)+'"><div mxs="_zs_gallerydz:b" class="loading" style="padding: 40px 0;"><span class="loading-anim"></span></div></div></div>'}return x+=" ",w.sideWrapper&&(x+='<div mxv="curStepInfo" class="_zs_galleryiG" style="top: '+a(m)+"px; right: "+a(m)+"px; width: "+a(I)+'px;" mx-view="'+a(w.sideWrapper)+"?data="+_(l,w.sideData)+'"><div mxs="_zs_gallerydz:b" class="loading" style="padding: 40px 0;"><span class="loading-anim"></span></div></div>'),x+='<div mxa="_zs_gallerydz:h" class="_zs_galleryiJ"><div>',w.prevTip&&(x+='<a mxa="_zs_gallerydz:i" href="javascript:;" class="btn min-width-100 mr20" mx-click="'+e+'prev()">'+a(w.prevTip)+"</a>"),x+=" ",w.nextTip&&(x+='<a mxa="_zs_gallerydz:j" href="javascript:;" class="btn min-width-100 btn-brand" mx-click="'+e+'next()">'+a(w.nextTip)+"</a>"),x+='</div><div id="'+a(k)+'_error" class="_zs_galleryiL"></div></div></div>'},init:function(i){var e=this;e.updater.set({gapWidth:16,leftWidth:+i.leftWidth||160,rightWidth:+i.rightWidth||260,alreadyStep:i.alreadyStep||1,stepInfos:i.stepInfos||[],viewId:e.id,viewHeight:$(window).height()}),e.observeLocation(["stepIndex","subStepIndex"]),e.owner.oncreated=function(){e.$init||(e.subScroll(),e.$init=1)},e.ondestroy=function(){e.owner.off("created")}},render:function(){var i=this;i.$init=null;var e=i.updater.get(),l=e.alreadyStep,a=e.stepInfos;l=+l;var s=r.parse().params,_=+(s.stepIndex||1);_>l&&(l=_);var t=+s.subStepIndex||-1;a.forEach(function(e,r){var s=r+1;e.index=s,e.subs=e.subs||[],(e=i.wrapSide(e)).locked=s>l,s==_&&(t>e.subs.length||1==e.subs.length)&&(t=-1);var n="";s>1&&!a[r-1].locked&&(n=e.prevTip||"返回上一步"),e.prevTip=n;var o="";s<a.length&&(o=e.nextTip||"下一步"),e.nextTip=o});var n=function(){i.updater.digest({alreadyStep:l,curStepInfo:a[_-1],curStepIndex:_,curSubStepIndex:t})};if(i.$inited)if(r.diff().params.stepIndex)n();else{i.updater.set({curSubStepIndex:t});var o=$("#"+i.id+" ._zs_galleryiv");o.find("._zs_galleryip").removeClass("_zs_galleryit"),o.find('._zs_galleryip[data-sub="'+t+'"]').addClass("_zs_galleryit"),i.subScroll()}else i.$inited=1,n()},wrapSide:function(i){var e=+this.updater.get("rightWidth"),l=!1,a=null,r={};(i.sideView||i.sideTip)&&(a="mx-main/tip",r={view:i.sideView||"",title:i.sideTitle||"",content:i.sideTip||""},l=!0);var s=!1;return i.subs.forEach(function(i,e){i.index=e+1;var a=null,r={};if(!l){var _=!1;(i.sideView||i.sideTip)&&(a="mx-main/tip",r={view:i.sideView||"",content:i.sideTip||""},_=!0),s=s||_}i.sideWrapper=a,i.sideData=r}),l=l||s,i.hasSide=l,i.sideWrapper=a,i.sideData=r,i.rightWidth=l?e:0,i},subScroll:function(){var i,e=+this.updater.get("curSubStepIndex");e>0?i=$("#"+this.id+" #sub_frame_"+e).offset().top:i=0;$(window).scrollTop(i)},"$win<scroll>":function(){var i=$("#"+this.id),e=i.find("._zs_galleryiy");if(e.length){var l=i.find("._zs_galleryin"),a=$(window).scrollTop();a>e.offset().top?l.css({position:"fixed"}):l.css({position:"absolute"});var r=i.find("._zs_galleryiG");if(r.length){var s=e.offset().top,_=this.updater.get().gapWidth;a>s+_?r.css({position:"fixed",top:0}):r.css({position:"absolute",top:_+"px"})}}},"$win<resize>":function(){var i=$(window).height();this.updater.set({viewHeight:i}),$("#"+this.id).find(".unfound-[main]-from-index.less").css({minHeight:i})},"prev<click>":function(i){var e=this.updater.get("curStepIndex");r.to({stepIndex:+e-1,subStepIndex:-1})},"next<click>":function(i){var e=this,l=e.updater.get("curStepInfo"),r=l.subs,_=r.map(function(i){return s.get("sub_frame_"+i.index).invoke("check")});Promise.all(_).then(function(i){var s=!0,_=[],t={},n=$("#"+e.id+"_error");if(i.forEach(function(i,e){s=s&&i.ok,i.ok||_.push({id:e+1,label:r[e].label,msg:i.msg||""}),a.mix(t,i.remain||{})}),s)n.html(""),l.nextFn?l.nextFn(t,function(i){e.next(i)}):e.next({});else{n.html('\n                    <i class="mc-iconfont unfound-[error-icon]-from-index.less">&#xe6ad;</i>\n                    '+_.map(function(i){return"\n                        <div>"+i.label+"："+i.msg+"</div>\n                    "}).join("")+"\n                ");var o=$("#"+e.id+" #sub_frame_"+_[0].id);$(window).scrollTop(o.offset().top)}})},"nav<click>":function(i){var e=i.params,l=e.stepIndex,a=e.subStepIndex||-1;r.to({stepIndex:l,subStepIndex:a})},next:function(i){var e=this.updater.get("curStepIndex");i.stepIndex=+e+1,r.to(i)}})});