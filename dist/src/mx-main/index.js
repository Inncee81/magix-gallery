define("mx-main/index",["magix"],(e,l,i)=>{var a=e("magix"),r=a.Router,s=a.Vframe;a.applyStyle("_zs_galleryaf",'[mx-view*="mx-main/index"]{position:relative;background-color:#e8ebf2}._zs_galleryhY{position:absolute;top:0;left:0;bottom:0;padding-top:16px;background-color:var(--app-nav-bg);z-index:3}._zs_galleryhY ._zs_galleryhZ{position:relative;font-size:14px}._zs_galleryhY ._zs_galleryhZ:before{content:"";position:absolute;top:0;left:24px;bottom:0;width:0;border-left:1px solid #4d5873}._zs_galleryhY ._zs_galleryhZ:first-child:before{top:23px}._zs_galleryhY ._zs_galleryhZ:last-child:before{bottom:23px}._zs_galleryhY ._zs_galleryhZ ._zs_galleryi_{position:relative;display:block;height:46px;line-height:46px;padding-left:36px}._zs_galleryhY ._zs_galleryhZ ._zs_galleryi_ ._zs_galleryia{color:#fff;opacity:.5}._zs_galleryhY ._zs_galleryhZ ._zs_galleryi_ ._zs_galleryic{opacity:0;position:absolute;top:0;left:0;z-index:-1;width:100%;height:100%;background-image:linear-gradient(-90deg,var(--app-brand),var(--app-brand-gradient));background-color:var(--app-brand);transition:all var(--duration)}._zs_galleryhY ._zs_galleryhZ ._zs_galleryi_._zs_galleryid ._zs_galleryic,._zs_galleryhY ._zs_galleryhZ ._zs_galleryi_._zs_galleryid ._zs_galleryia,._zs_galleryhY ._zs_galleryhZ ._zs_galleryi_:hover ._zs_galleryia{opacity:1}._zs_galleryhY ._zs_galleryhZ ._zs_galleryie ._zs_galleryif{position:absolute;top:50%;left:16px;width:16px;height:16px;margin-top:-8px;border-radius:50%;background-color:#4d5873;color:#fff;text-align:center;line-height:16px;font-size:12px;transition:all var(--duration)}._zs_galleryhY ._zs_galleryhZ ._zs_galleryig:before{content:"";position:absolute;top:50%;left:24px;width:10px;height:0;border-top:1px solid #4d5873}._zs_galleryhY ._zs_galleryhZ._zs_galleryih ._zs_galleryie ._zs_galleryia{opacity:1}._zs_galleryhY ._zs_galleryhZ._zs_galleryih ._zs_galleryie ._zs_galleryic{opacity:.2}._zs_galleryhY ._zs_galleryhZ._zs_galleryih ._zs_galleryie._zs_galleryid ._zs_galleryif{background-color:#fff;color:var(--app-brand)}._zs_galleryhY ._zs_galleryhZ._zs_galleryih ._zs_galleryie._zs_galleryid ._zs_galleryic{opacity:1}._zs_galleryhY ._zs_galleryhZ._zs_galleryii ._zs_galleryi_{cursor:not-allowed}._zs_galleryhY ._zs_galleryhZ._zs_galleryii ._zs_galleryi_:hover ._zs_galleryia{opacity:.5}._zs_galleryhY ._zs_galleryhZ._zs_galleryii ._zs_galleryij{position:absolute;top:50%;right:16px;margin-top:-6px;font-size:14px;font-weight:700;color:#4d5873}._zs_galleryik{position:relative;z-index:2}._zs_galleryik ._zs_galleryil{position:relative;margin-bottom:16px;border-radius:var(--border-radius);background-color:#fff}._zs_galleryik ._zs_galleryil ._zs_galleryim{padding:8px 24px;border-top-left-radius:var(--border-radius);border-top-right-radius:var(--border-radius);border-bottom:1px solid var(--color-border)}._zs_galleryik ._zs_galleryil ._zs_galleryim ._zs_galleryin,._zs_galleryik ._zs_galleryil ._zs_galleryim ._zs_galleryin>*,._zs_galleryik ._zs_galleryil ._zs_galleryim ._zs_galleryio,._zs_galleryik ._zs_galleryil ._zs_galleryim ._zs_galleryip{display:inline-block;height:32px;line-height:32px;vertical-align:middle;overflow:hidden}._zs_galleryik ._zs_galleryil ._zs_galleryim ._zs_galleryin{margin-right:5px;color:#999}._zs_galleryik ._zs_galleryil ._zs_galleryim ._zs_galleryio{font-size:16px}._zs_galleryik ._zs_galleryil ._zs_galleryim ._zs_galleryiq{margin-left:20px;color:#999}._zs_galleryik ._zs_galleryil ._zs_galleryir{padding:16px 24px}._zs_galleryik ._zs_galleryis{position:absolute;background-color:#fff;border-radius:var(--border-radius)}._zs_galleryik ._zs_galleryis ._zs_galleryit{padding:8px 24px;line-height:32px;font-size:16px;border-bottom:1px solid var(--color-border)}._zs_galleryik ._zs_galleryis ._zs_galleryiu{padding:16px 24px;color:#666}._zs_galleryik ._zs_galleryiv{text-align:center;padding:40px 0}._zs_galleryik ._zs_galleryiv ._zs_galleryiw{min-width:100px;margin-right:20px}._zs_galleryik ._zs_galleryiv ._zs_galleryiw:last-child{margin-right:0}._zs_galleryix{display:inline-block;position:relative;margin-top:10px;color:var(--color-red)}'),i.exports=a.View.extend({tmpl:function(e,l,i,a,r,s,_,t){if(i||(i=e),!r){var n={"&":"amp","<":"lt",">":"gt",'"':"#34","'":"#39","`":"#96"},d=/[&<>"'`]/g,o=function(e){return"&"+n[e]+";"};r=function(e){return""+(null==e?"":e)},a=function(e){return r(e).replace(d,o)}}if(!s){var g={"!":"%21","'":"%27","(":"%28",")":"%29","*":"%2A"},p=function(e){return g[e]},y=/[!')(*]/g;s=function(e){return encodeURIComponent(r(e)).replace(y,p)}}if(!t){var z=/[\\'"]/g;t=function(e){return r(e).replace(z,"\\$&")}}_||(_=function(e,l,i,a){for(a=e[c];--a;)if(e[i=c+a]===l)return i;return e[i=c+e[c]++]=l,i});var c="",x="",h=e.leftWidth,f=e.stepInfos,u=e.curStepIndex,v=e.curSubStepIndex,m=e.viewHeight,b=e.gapWidth,k=e.curStepInfo,w=e.rightWidth,I=e.childInfos,S=e.viewId;x+='<div class="_zs_galleryhY" style="width: '+a(h)+'px;">';for(var Y=0,Z=f.length;Y<Z;Y++){var $=f[Y];if(x+='<div class="_zs_galleryhZ ',$.index==u&&(x+=" _zs_galleryih "),x+=" ",$.locked&&(x+=" _zs_galleryii "),x+='"><a href="javascript:;" class="_zs_galleryi_ _zs_galleryie ',$.index==u&&-1==v&&(x+=" _zs_galleryid "),x+='" data-sub="-1" ',$.locked||(x+=' mx-click="'+l+"nav({stepIndex:"+a($.index)+'})" '),x+=' data-spm-click="gostr=/alimama.feedflow.1;locaid=df0100677"><span mxa="_zs_gallerydm:_" class="_zs_galleryif">'+a(Y+1)+'</span><span mxs="_zs_gallerydm:_" class="_zs_galleryic"></span><span mxa="_zs_gallerydm:a" class="_zs_galleryia">'+a($.label)+"</span></a>",!$.locked&&$.subs.length>1){x+=" ";for(var T=0,W=$.subs,j=W.length;T<j;T++){var V=W[T];x+='<a href="javascript:;" class="_zs_galleryi_ _zs_galleryig ',$.index==u&&v==V.index&&(x+=" _zs_galleryid "),x+='" data-sub="'+a(V.index)+'" mx-click="'+l+"nav({stepIndex:"+a($.index)+",subStepIndex:"+a(V.index)+'})" data-spm-click="gostr=/alimama.feedflow.1;locaid=de313a21d"><span mxs="_zs_gallerydm:_" class="_zs_galleryic"></span><span mxa="_zs_gallerydm:b" class="_zs_galleryia">'+a(V.label)+"</span></a>"}x+=" "}x+=" ",$.locked&&(x+='<i mxs="_zs_gallerydm:a" class="mc-iconfont _zs_galleryij">&#xe759;</i>'),x+="</div>"}x+='</div><div mxv class="_zs_galleryik clearfix" style="min-height: '+a(m)+"px; padding-top: "+a(b)+"px; padding-right: "+a(b+(k.sideWrapper?w+b:0))+"px; padding-left: "+a(h+b)+'px;">';for(var H=0,C=k.subs,D=C.length;H<D;H++){x+='<div mxv mxa="_zs_gallerydm:c" class="_zs_galleryil"><div mxa="_zs_gallerydm:d" class="_zs_galleryim clearfix">',(V=C[H]).icon&&(x+='<span mxa="_zs_gallerydm:e" class="_zs_galleryin">'+r(V.icon)+"</span>"),x+='<span mxa="_zs_gallerydm:f" class="_zs_galleryio">'+a(V.label)+"</span>",V.tip&&(x+='<span mxa="_zs_gallerydm:g" class="_zs_galleryiq">'+r(V.tip)+"</span>"),x+='</div><div mxv="curStepInfo,childInfos" class="_zs_galleryir" id="sub_frame_'+a(V.index)+'" mx-view="'+a(V.view)+"?info="+_(i,V)+"&data="+_(i,I)+'"><div mxs="_zs_gallerydm:b" class="loading" style="padding: 40px 0;"><span class="loading-anim"></span></div></div></div>'}return x+=" ",k.sideWrapper&&(x+='<div mxv="curStepInfo" class="_zs_galleryis" style="top: '+a(b)+"px; right: "+a(b)+"px; width: "+a(w)+'px;" mx-view="'+a(k.sideWrapper)+"?data="+_(i,k.sideData)+'"><div mxs="_zs_gallerydm:b" class="loading" style="padding: 40px 0;"><span class="loading-anim"></span></div></div>'),x+='<div mxa="_zs_gallerydm:h" class="_zs_galleryiv"><div>',k.prevTip&&(x+='<a mxa="_zs_gallerydm:i" href="javascript:;" class="btn min-width-100 mr20" mx-click="'+l+'prev()">'+a(k.prevTip)+"</a>"),x+=" ",k.nextTip&&(x+='<a mxa="_zs_gallerydm:j" href="javascript:;" class="btn min-width-100 btn-brand" mx-click="'+l+'next()">'+a(k.nextTip)+"</a>"),x+='</div><div id="'+a(S)+'_error" class="_zs_galleryix"></div></div></div>'},init:function(e){var l=this;l.updater.set({gapWidth:16,leftWidth:+e.leftWidth||160,rightWidth:+e.rightWidth||260,alreadyStep:e.alreadyStep||1,stepInfos:e.stepInfos||[],viewId:l.id,viewHeight:$(window).height()}),l.observeLocation(["stepIndex","subStepIndex"]),l.owner.oncreated=function(){l.$init||(l.subScroll(),l.$init=1)},l.ondestroy=function(){l.owner.off("created")}},render:function(){var e=this;e.$init=null;var l=e.updater,i=+l.get("alreadyStep"),a=l.get("stepInfos"),s=r.parse().params,_=+(s.stepIndex||1);_>i&&(i=_);var t=+s.subStepIndex||-1;if(a.forEach(function(l,r){var s=r+1;l.index=s,l.subs=l.subs||[],(l=e.wrapSide(l)).locked=s>i,s==_&&(t>l.subs.length||1==l.subs.length)&&(t=-1);var n="";s>1&&!a[r-1].locked&&(n=l.prevTip||"返回上一步"),l.prevTip=n;var d="";s<a.length&&(d=l.nextTip||"下一步"),l.nextTip=d}),s.stepIndex+""==_+""&&s.subStepIndex+""==t+""){var n=function(){e.updater.digest({alreadyStep:i,curStepInfo:a[_-1],curStepIndex:_,curSubStepIndex:t})};if(e.$inited)if(r.diff().params.stepIndex)n();else{e.updater.set({curSubStepIndex:t});var d=$("#"+e.id+" ._zs_galleryih");d.find("._zs_galleryi_").removeClass("_zs_galleryid"),d.find('._zs_galleryi_[data-sub="'+t+'"]').addClass("_zs_galleryid"),e.subScroll()}else e.$inited=1,n()}else r.to({stepIndex:_,subStepIndex:t})},wrapSide:function(e){var l=+this.updater.get("rightWidth"),i=!1,a=null,r={};(e.sideView||e.sideTip)&&(a="mx-main/tip",r={view:e.sideView||"",title:e.sideTitle||"",content:e.sideTip||""},i=!0);var s=!1;return e.subs.forEach(function(e,l){e.index=l+1;var a=null,r={};if(!i){var _=!1;(e.sideView||e.sideTip)&&(a="mx-main/tip",r={view:e.sideView||"",content:e.sideTip||""},_=!0),s=s||_}e.sideWrapper=a,e.sideData=r}),i=i||s,e.hasSide=i,e.sideWrapper=a,e.sideData=r,e.rightWidth=i?l:0,e},subScroll:function(){var e,l=+this.updater.get("curSubStepIndex");l>0?e=$("#"+this.id+" #sub_frame_"+l).offset().top:e=0;$(window).scrollTop(e)},"$win<scroll>":function(){var e=$("#"+this.id),l=e.find("._zs_galleryik");if(l.length){var i=e.find("._zs_galleryhY"),a=$(window).scrollTop();a>l.offset().top?i.css({position:"fixed"}):i.css({position:"absolute"});var r=e.find("._zs_galleryis");if(r.length){var s=l.offset().top,_=this.updater.get().gapWidth;a>s+_?r.css({position:"fixed",top:0}):r.css({position:"absolute",top:_+"px"})}}},"$win<resize>":function(){var e=$(window).height();this.updater.set({viewHeight:e}),$("#"+this.id).find(".unfound-[main]-from-index.less").css({minHeight:e})},"prev<click>":function(e){var l=this.updater.get("curStepIndex");r.to({stepIndex:+l-1,subStepIndex:-1})},"next<click>":function(e){var l=this,i=l.updater.get("curStepInfo"),r=i.subs,_=r.map(function(e){return s.get("sub_frame_"+e.index).invoke("check")});Promise.all(_).then(function(e){var s=!0,_=[],t={},n=$("#"+l.id+"_error");if(e.forEach(function(e,l){s=s&&e.ok,e.ok||_.push({id:l+1,label:r[l].label,msg:e.msg||""}),a.mix(t,e.remain||{})}),s)n.html(""),i.nextFn?i.nextFn(t,function(e){l.next(e)}):l.next({});else{n.html('\n                    <i class="mc-iconfont unfound-[error-icon]-from-index.less">&#xe6ad;</i>\n                    '+_.map(function(e){return"\n                        <div>"+e.label+"："+e.msg+"</div>\n                    "}).join("")+"\n                ");var d=$("#"+l.id+" #sub_frame_"+_[0].id);$(window).scrollTop(d.offset().top)}})},"nav<click>":function(e){var l=e.params,i=l.stepIndex,a=l.subStepIndex||-1;r.to({stepIndex:i,subStepIndex:a})},next:function(e){var l=this.updater.get("curStepIndex");e.stepIndex=+l+1,r.to(e)}})});