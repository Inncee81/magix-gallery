define("mx-calendar/rangepicker",["magix","$","../mx-util/monitor","mx-calendar/util","mx-medusa/util","./range"],(e,a,r)=>{e("./range");var t=e("magix"),l=e("$"),i=e("../mx-util/monitor"),s=e("mx-calendar/util"),_=s.dateFormat,n=s.getDefaultDate,d=s.getQuickInfos,g=s.getOffsetDate,m=e("mx-medusa/util");t.applyStyle("_zs_galleryq",'._zs_gallerybH{padding:0 10px}._zs_gallerybI ._zs_gallerybJ{padding:0 5px}._zs_gallerybK ._zs_gallerybJ{position:absolute;top:50%;left:50%;width:40px;height:30px;margin-left:-20px;margin-top:-15px;line-height:30px;text-align:center}._zs_gallerybK ._zs_gallerybL{display:inline-block;width:50%;text-align:center}._zs_gallerybK ._zs_gallerybM{padding-right:10px}._zs_gallerybK ._zs_gallerybN{padding-left:10px}._zs_gallerybO ._zs_gallerybM{color:var(--color-brand)}._zs_gallerybO ._zs_gallerybN{color:var(--color-brand-vs)}[mx-view*="mx-calendar/rangepicker"]{min-width:180px}[mx-view*="mx-calendar/datepicker"][mx-disabled] ._zs_gallerybO ._zs_gallerybM,[mx-view*="mx-calendar/datepicker"][mx-disabled] ._zs_gallerybO ._zs_gallerybN,[mx-view*="mx-calendar/datepicker"][mx-disabled] ._zs_gallerybH ._zs_gallerybM,[mx-view*="mx-calendar/datepicker"][mx-disabled] ._zs_gallerybH ._zs_gallerybN,[mx-view*="mx-calendar/datepicker"][mx-disabled]:hover ._zs_gallerybO ._zs_gallerybM,[mx-view*="mx-calendar/datepicker"][mx-disabled]:hover ._zs_gallerybO ._zs_gallerybN,[mx-view*="mx-calendar/datepicker"][mx-disabled]:hover ._zs_gallerybH ._zs_gallerybM,[mx-view*="mx-calendar/datepicker"][mx-disabled]:hover ._zs_gallerybH ._zs_gallerybN,[mx-view*="mx-calendar/datepicker"][mx-view*="disabled=true"] ._zs_gallerybO ._zs_gallerybM,[mx-view*="mx-calendar/datepicker"][mx-view*="disabled=true"] ._zs_gallerybO ._zs_gallerybN,[mx-view*="mx-calendar/datepicker"][mx-view*="disabled=true"] ._zs_gallerybH ._zs_gallerybM,[mx-view*="mx-calendar/datepicker"][mx-view*="disabled=true"] ._zs_gallerybH ._zs_gallerybN,[mx-view*="mx-calendar/datepicker"][mx-view*="disabled=true"]:hover ._zs_gallerybO ._zs_gallerybM,[mx-view*="mx-calendar/datepicker"][mx-view*="disabled=true"]:hover ._zs_gallerybO ._zs_gallerybN,[mx-view*="mx-calendar/datepicker"][mx-view*="disabled=true"]:hover ._zs_gallerybH ._zs_gallerybM,[mx-view*="mx-calendar/datepicker"][mx-view*="disabled=true"]:hover ._zs_gallerybH ._zs_gallerybN,[mx-view*="mx-calendar/rangepicker"][mx-disabled] ._zs_gallerybO ._zs_gallerybM,[mx-view*="mx-calendar/rangepicker"][mx-disabled] ._zs_gallerybO ._zs_gallerybN,[mx-view*="mx-calendar/rangepicker"][mx-disabled] ._zs_gallerybH ._zs_gallerybM,[mx-view*="mx-calendar/rangepicker"][mx-disabled] ._zs_gallerybH ._zs_gallerybN,[mx-view*="mx-calendar/rangepicker"][mx-disabled]:hover ._zs_gallerybO ._zs_gallerybM,[mx-view*="mx-calendar/rangepicker"][mx-disabled]:hover ._zs_gallerybO ._zs_gallerybN,[mx-view*="mx-calendar/rangepicker"][mx-disabled]:hover ._zs_gallerybH ._zs_gallerybM,[mx-view*="mx-calendar/rangepicker"][mx-disabled]:hover ._zs_gallerybH ._zs_gallerybN,[mx-view*="mx-calendar/rangepicker"][mx-view*="disabled=true"] ._zs_gallerybO ._zs_gallerybM,[mx-view*="mx-calendar/rangepicker"][mx-view*="disabled=true"] ._zs_gallerybO ._zs_gallerybN,[mx-view*="mx-calendar/rangepicker"][mx-view*="disabled=true"] ._zs_gallerybH ._zs_gallerybM,[mx-view*="mx-calendar/rangepicker"][mx-view*="disabled=true"] ._zs_gallerybH ._zs_gallerybN,[mx-view*="mx-calendar/rangepicker"][mx-view*="disabled=true"]:hover ._zs_gallerybO ._zs_gallerybM,[mx-view*="mx-calendar/rangepicker"][mx-view*="disabled=true"]:hover ._zs_gallerybO ._zs_gallerybN,[mx-view*="mx-calendar/rangepicker"][mx-view*="disabled=true"]:hover ._zs_gallerybH ._zs_gallerybM,[mx-view*="mx-calendar/rangepicker"][mx-view*="disabled=true"]:hover ._zs_gallerybH ._zs_gallerybN{color:#999}'),r.exports=t.View.extend({tmpl:function(e,a,r,t,l,i,s,_){if(r||(r=e),!l){var n={"&":"amp","<":"lt",">":"gt",'"':"#34","'":"#39","`":"#96"},d=/[&<>"'`]/g,g=function(e){return"&"+n[e]+";"};l=function(e){return""+(null==e?"":e)},t=function(e){return l(e).replace(d,g)}}if(!i){var m={"!":"%21","'":"%27","(":"%28",")":"%29","*":"%2A"},x=function(e){return m[e]},c=/[!')(*]/g;i=function(e){return encodeURIComponent(l(e)).replace(c,x)}}if(!_){var b=/[\\'"]/g;_=function(e){return l(e).replace(b,"\\$&")}}s||(s=function(e,a,r,t){for(t=e[o];--t;)if(e[r=o+t]===a)return r;return e[r=o+e[o]++]=a,r});var o="",v="",p=e.textAlign,y=e.rangeInfo,u=e.viewId,z=e.result,h=e.show,f=e.left,w=e.top;return v+='<div class="mx-trigger _zs_gallerybH '+t(p)+" ",y.vs&&(v+=" _zs_gallerybO "),v+='" id="trigger_'+t(u)+'" mx-click="'+a+'__p()" mx-change="'+a+'__m()">',z.endStr?v+='<span mxa="_zs_gallerya_:_" class="_zs_gallerybL _zs_gallerybM">'+t(z.startStr)+'</span><span mxa="_zs_gallerya_:a" class="_zs_gallerybJ color-9">'+t(z.centetTip)+'</span><span mxa="_zs_gallerya_:b" class="_zs_gallerybL _zs_gallerybN">'+t(z.endStr)+"</span>":v+=" "+t(z.startStr)+" ",v+='</div><div mxv="rangeInfo" class="mx-output mx-output-bottom ',h&&(v+=" mx-output-open "),v+='" style="left:'+t(f)+"px;top:"+t(w)+'px;" id="rpcnt_'+t(u)+'" mx-view="mx-calendar/range?configs='+s(r,y)+'" mx-change="'+a+'__O()" mx-cancel="'+a+'__n()"></div>'},init:function(e){var a=this;i.__h(),a.on("destroy",function(){i.__i(a),i.__j()}),a.updater.snapshot(),a.assign(e)},assign:function(e){var a=this.updater.altered();this.__k=e.disabled+""=="true"||l("#"+this.id)[0].hasAttribute("mx-disabled");var r=/^true$/i.test(e.vsenable)||!1,t=!1;r&&(t=/^true$/i.test(e.vs)||!1);var i=r&&/^true$/i.test(e.single)||!1,g=e.timeType,m=e.formatter||"YYYY-MM-dd"+(g?" hh:mm:ss":""),x=e.dateType,c=/^true$/i.test(e.startDisabled)||!1,b=/^true$/i.test(e.endDisabled)||!1,o=!/^false$/i.test(e.shortcuts),v=o?e.shortkeys||["today","yesterday","preWeekMon","lastestWeekMon","preMonth","lastestThisMonth"]:[];if(c){o=!1;for(var p=0;p<v.length;p++)v[p].indexOf("dynamic")<0&&v[p].indexOf("forever")<0&&v.splice(p--,1)}b&&(o=!1,v=[]);var y=e.start,u=e.end,z=e.min,h=e.max;y||(y=n(z,h,m)),u||o&&!(v.indexOf("forever")<0)||(u=n(z,h,m));var f,w,k=new Date(_(y,m)),S=_(k,m);u==s.foreverStr?f=w=s.foreverStr:(f=new Date(_(u,m)),w=_(f,m));for(var O,M,N=d(v,S,m),H=0;H<N.length;H++){var D=N[H];if(D.start==S&&D.end==w){O=D.text,M=D.key;break}}var I={start:k,startStr:S,end:f,endStr:w,formatter:m,quickDateText:O,quickDateKey:M},T={min:z,max:h,timeType:g,dateType:x,formatter:m,quickDates:v,quickGap:e.quickGap,align:e.align,vsEnable:r,vs:t,vsSingle:i,startDisabled:c,endDisabled:b,dates:I,disabledWeeks:e.disabledWeeks||[],minGap:+e.minGap||0,maxGap:+e.maxGap||0};return this.updater.set({viewId:this.id,rangeInfo:T,textAlign:{"result-left":"_zs_gallerybI","result-center":"_zs_gallerybK"}["result-"+(e.textAlign||"center")]}),this.__a=l("#"+this.id),this.__a.val(JSON.stringify({start:I.startStr,end:I.endStr,vs:t})),a||(a=this.updater.altered()),!!a&&(this.updater.snapshot(),!0)},render:function(){this.__N()},__N:function(){var e,a=this.updater.get("rangeInfo"),r=a.dates,t=a.vs,l=a.vsSingle,i=a.formatter,n=r.startStr,d=r.endStr,x=r.quickDateText,c={centetTip:t?m["calendar.vs"]:m["calendar.to"]},b=_(g(0),i),o=_(g(-1),i),v=_(g(1),i),p=((e={})[b]=m["calendar.today"],e[o]=m["calendar.yesterday"],e[v]=m["calendar.tomorrow"],e),y=function(e){return p[e]||e};t?(c.startStr=y(n),c.endStr=y(d)):l?c.startStr=y(n):x?x==s.foreverStr?(c.startStr=n,c.endStr=s.foreverStr):c.startStr=x:(c.startStr=n,c.endStr=d),this.updater.digest({result:c})},"__m<change,focusin,focusout>":function(e){e.dates||e.stopPropagation()},"__p<click>":function(e){this.__k||(e.preventDefault(),this.updater.get("show")?this.__n():this.__o())},__o:function(){var e=this.updater,a=e.get("rangeInfo");if(!e.get("show")){e.digest({show:!0});var r=l("#trigger_"+this.id),t=l("#rpcnt_"+this.id),s=0,_=r.outerHeight();"right"==a.align&&(s=r.outerWidth()-t.outerWidth()),e.digest({top:_,left:s}),i.__q(this)}},__n:function(){this.updater.get("show")&&(this.updater.digest({show:!1}),i.__i(this))},"__O<change>":function(e){e.stopPropagation();var a=this.updater.get("rangeInfo"),r=e.dates,l=e.vs;t.mix(a,{dates:r,vs:l}),this.__N(),this.__n();var i=JSON.stringify({start:r.startStr,end:r.endStr,vs:l});this.__a.val(i).trigger({type:"change",start:r.startStr,end:r.endStr,vs:l,dates:r})},"__n<cancel>":function(e){e.stopPropagation(),this.__n()},__l:function(e){var a=t.inside(e,this.id)||t.inside(e,this.__a[0]);if(!a)for(var r=this.owner.children(),l=r.length-1;l>=0;l--){var i=t.Vframe.get(r[l]);if(i&&(a=i.invoke("__l",[e])),a)break}return a}})});