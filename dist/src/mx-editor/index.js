define("mx-editor/index",["magix","mx-form/index","mx-form/validator"],(e,t,i)=>{var n=e("magix"),l=e("mx-form/index"),r=e("mx-form/validator");n.applyStyle("_zs_galleryL","._zs_galleryeD ._zs_galleryeE{display:none}._zs_galleryeD ._zs_galleryeF{display:inline-block;word-break:break-all}._zs_galleryeD ._zs_galleryeF ._zs_galleryeG{opacity:0;position:relative;top:2px;left:2px;color:#ccc;cursor:pointer}._zs_galleryeD ._zs_galleryeF:hover ._zs_galleryeG{opacity:1}._zs_galleryeD._zs_galleryeH ._zs_galleryeE{display:inline-block}._zs_galleryeD._zs_galleryeH ._zs_galleryeF{display:none}");i.exports=n.View.extend({tmpl:function(e,t,i,n,l,r,a,s){if(i||(i=e),!l){var _={"&":"amp","<":"lt",">":"gt",'"':"#34","'":"#39","`":"#96"},o=/[&<>"'`]/g,c=function(e){return"&"+_[e]+";"};l=function(e){return""+(null==e?"":e)},n=function(e){return l(e).replace(o,c)}}if(!r){var d={"!":"%21","'":"%27","(":"%28",")":"%29","*":"%2A"},u=function(e){return d[e]},p=/[!')(*]/g;r=function(e){return encodeURIComponent(l(e)).replace(p,u)}}if(!s){var g=/[\\'"]/g;s=function(e){return l(e).replace(g,"\\$&")}}a||(a=function(e,t,i,n){for(n=e[m];--n;)if(e[i=m+n]===t)return i;return e[i=m+e[m]++]=t,i});var m="",y="",f=e.editing,h=e.small,x=e.width,v=e.viewId,z=e.content,k=e.rules,$=e.dis;return y+='<div mxv class="_zs_galleryeD ',f&&(y+=" _zs_galleryeH "),y+='"><input mxe="'+t+"_0\" mxc=\"[{p:'content',f:'"+a(i,k)+'\'}]" class="input ',h&&(y+=" input-small "),y+=' _zs_galleryeE" style="width: '+n(x)+'px;" id="'+n(v)+'_input" value="'+n(z)+'" mx-keyup="'+t+'__cn()" mx-focusout="'+t+'__cn()" mx-change="'+t+'__m()" mx-focusin="'+t+'__m()"/><div mxa="_zs_gallerybz:_" class="_zs_galleryeF">'+l($)+'<i mxs="_zs_gallerybz:_" class="mc-iconfont operations _zs_galleryeG" mx-click="'+t+'__o()">&#xe698;</i></div></div>'},mixins:[l,r],init:function(e){var t=this;t.updater.snapshot(),t.assign(e),t.on("destroy",function(){clearTimeout(t.__cl)})},assign:function(e){var t=this.updater.altered(),i=e.rules||{},n=e.content,l=/^true$/i.test(e.small),r=e.tmpl||"${content}";return this.__cm=n,this.updater.set({viewId:this.id,tmpl:r,dis:r.replace("${content}",n),content:n,rules:i,small:l,width:e.width||140,editing:!1}),this.__a=$("#"+this.id),this.__a.val(n),t||(t=this.updater.altered()),!!t&&(this.updater.snapshot(),!0)},render:function(){this.updater.digest()},"__o<click>":function(e){e.preventDefault(),this.updater.digest({editing:!0}),$("#"+this.id+"_input").focus()},"__cn<keyup>":function(e){var t=this.isValid();if(13==e.keyCode&&t){var i=e.target.value,n=this.updater.get("tmpl");this.updater.digest({editing:!1,dis:n.replace("${content}",i),content:i})}},"__m<change,focusin>":function(e){e.stopPropagation()},"__cn<focusout>":function(e){e.stopPropagation();if(this.isValid()){var t=e.target.value,i=this.updater.get(),n=i.tmpl,l=i.content;this.updater.digest({editing:!1,dis:n.replace("${content}",t),content:t}),this.__cm!=l&&(this.__a.val(l).trigger({type:"change",editText:l}),$("#"+this.id).trigger({type:"edit",editText:l}))}}})});