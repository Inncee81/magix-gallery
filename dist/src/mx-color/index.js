define("mx-color/index",["magix","$","../mx-dragdrop/index"],(a,t,s)=>{var r=a("magix"),e=a("$"),i=a("../mx-dragdrop/index");r.applyStyle("_zs_galleryC",':root{--mx-color-width:224px;--mx-color-slider-width:18px;--mx-color-picker-width:calc(var(--mx-color-width) - var(--mx-color-slider-width) - 10px)}._zs_gallerydK,._zs_gallerydL,._zs_gallerydM{width:var(--mx-color-width)}._zs_gallerydK{margin:10px 0}._zs_gallerydN{position:relative;float:left;width:15px;height:15px;margin:-1px 0 0 -1px;border:1px solid #333;cursor:pointer}._zs_gallerydN._zs_gallerydO:after,._zs_gallerydN._zs_gallerydO:before{content:" ";position:absolute;left:0;top:0;width:100%;height:100%}._zs_gallerydN._zs_gallerydO:before{z-index:2;border:1px solid #fff}._zs_gallerydN._zs_gallerydO:after{z-index:1;border:2px solid #333}._zs_gallerydP{float:left;position:relative;width:var(--mx-color-picker-width);height:var(--mx-color-picker-width);cursor:pointer}._zs_gallerydP ._zs_gallerydQ{position:absolute;width:8px;height:8px;box-shadow:0 0 0 1.5px #fff,inset 0 0 1px 1px rgba(0,0,0,.3),0 0 1px 2px rgba(0,0,0,.4);border-radius:50%}._zs_gallerydR{float:right;position:relative;width:var(--mx-color-slider-width);height:var(--mx-color-picker-width);cursor:pointer}._zs_gallerydR ._zs_gallerydS{position:absolute;right:-6px;top:-6px;width:0;height:0;background-color:none;border:6px solid transparent;border-right-color:#333;border-left:none}._zs_gallerydT{width:calc(var(--mx-color-width) - 120px)}._zs_gallerydU,._zs_gallerydV{width:50px}._zs_gallerydU{height:var(--input-height);margin-right:10px;border-radius:var(--border-radius);border:1px solid var(--color-border)}._zs_gallerydW{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAIAAADZF8uwAAAAGUlEQVQYV2M4gwH+YwCGIasIUwhT25BVBADtzYNYrHvv4gAAAABJRU5ErkJggg==);width:var(--mx-color-width);height:12px;margin-bottom:10px}._zs_gallerydX{position:relative;height:100%;cursor:pointer}._zs_gallerydY{position:absolute;left:-2px;top:2px;height:8px;width:4px;box-shadow:0 0 0 1.5px #fff,inset 0 0 1px 1px rgba(0,0,0,.3),0 0 1px 2px rgba(0,0,0,.4);background:#fff}._zs_gallerydZ{display:inline-block;width:var(--input-height);height:var(--input-height);border-radius:50%;vertical-align:middle}[mx-view*="mx-color/index"]{width:calc(var(--mx-color-width) + 22px);min-width:calc(var(--mx-color-width) + 22px);padding:10px;background-color:#fff}[mx-view*="mx-color/picker"] ._zs_gallerye_{min-width:0}[mx-view*="mx-color/picker"][mx-view*="dot=true"]{min-width:var(--input-height)}[mx-view*="mx-color/picker"][mx-view*="dot=true"] ._zs_gallerye_{max-width:none}');var o="_zs_gallerydO",_=["d81e06","f4ea2a","1afa29","1296db","13227a","d4237a","ffffff","e6e6e6","dbdbdb","cdcdcd","bfbfbf","8a8a8a","707070","515151","2c2c2c","000000","ea986c","eeb174","f3ca7e","f9f28b","c8db8c","aad08f","87c38f","83c6c2","7dc5eb","87a7d6","8992c8","a686ba","bd8cbb","be8dbd","e89abe","e8989a","e16632","e98f36","efb336","f6ef37","afcd51","7cba59","36ab60","1baba8","17ace3","3f81c1","4f68b0","594d9c","82529d","a4579d","db649b","dd6572","d84e06","e0620d","ea9518","f4ea2a","8cbb1a","2ba515","0e932e","0c9890","1295db","0061b2","0061b0","004198","122179","88147f","d3227b","d6204b"],l=function(a,t,s){var r,e,i,o,_;a=a%360/60,r=e=i=s-(_=s*t);var l=255*(r+=[_,o=_*(1-Math.abs(a%2-1)),0,0,o,_][a=~~a]),d=255*(e+=[o,_,_,o,0,0][a]),c=255*(i+=[0,0,o,_,_,o][a]);return{r:l,g:d,b:c,hex:"#"+(16777216|c|d<<8|l<<16).toString(16).slice(1)}};s.exports=r.View.extend({mixins:[i],tmpl:function(a,t,s,r,e,i,o,_){if(s||(s=a),!e){var l={"&":"amp","<":"lt",">":"gt",'"':"#34","'":"#39","`":"#96"},d=/[&<>"'`]/g,c=function(a){return"&"+l[a]+";"};e=function(a){return""+(null==a?"":a)},r=function(a){return e(a).replace(d,c)}}if(!i){var p={"!":"%21","'":"%27","(":"%28",")":"%29","*":"%2A"},n=function(a){return p[a]},g=/[!')(*]/g;i=function(a){return encodeURIComponent(e(a)).replace(g,n)}}if(!_){var h=/[\\'"]/g;_=function(a){return e(a).replace(h,"\\$&")}}var f="",x=a.id,v=a.shortcuts,u=a.alpha,y=a.btns;f+='<div id="scs_'+r(x)+'"><ul mxa="_zs_galleryaO:_" class="_zs_gallerydM clearfix">';for(var m=0;m<v.length;m++)f+='<li class="_zs_gallerydN" id="sc_'+r(v[m])+"_"+r(x)+'" style="background:#'+r(v[m])+'" mx-click="'+t+"__az({color:'#"+r(_(v[m]))+"'})\"></li>";return f+='</ul></div><div mxa="_zs_galleryaO:a" class="_zs_gallerydK clearfix"><div class="_zs_gallerydP" id="cz_'+r(x)+'" mx-mousedown="'+t+'__ax()"><svg mxa="_zs_galleryaO:b" xmlns="http://www.w3.org/2000/svg" version="1.1" width="100%" height="100%"><defs><lineargradient id="gb_'+r(x)+'" x1="0%" y1="100%" x2="0%" y2="0%"><stop mxs="_zs_galleryaO:_" offset="0%" stop-color="#000000" stop-opacity="1"></stop><stop mxs="_zs_galleryaO:a" offset="100%" stop-color="#CC9A81" stop-opacity="0"></stop></lineargradient><lineargradient id="gw_'+r(x)+'" x1="0%" y1="100%" x2="100%" y2="100%"><stop mxs="_zs_galleryaO:b" offset="0%" stop-color="#FFFFFF" stop-opacity="1"></stop><stop mxs="_zs_galleryaO:a" offset="100%" stop-color="#CC9A81" stop-opacity="0"></stop></lineargradient></defs><rect x="0" y="0" width="100%" height="100%" fill="url(#gw_'+r(x)+')"></rect><rect x="0" y="0" width="100%" height="100%" fill="url(#gb_'+r(x)+')"></rect></svg><div class="_zs_gallerydQ" id="ci_'+r(x)+'"></div></div><div mxa="_zs_galleryaO:c" class="_zs_gallerydR" mx-mousedown="'+t+'__aw()"><svg mxa="_zs_galleryaO:d" xmlns="http://www.w3.org/2000/svg" version="1.1" width="100%" height="100%"><defs><lineargradient id="ghsv_'+r(x)+'" x1="0%" y1="100%" x2="0%" y2="0%"><stop mxs="_zs_galleryaO:c" offset="0%" stop-color="#FF0000" stop-opacity="1"></stop><stop mxs="_zs_galleryaO:d" offset="13%" stop-color="#FF00FF" stop-opacity="1"></stop><stop mxs="_zs_galleryaO:e" offset="25%" stop-color="#8000FF" stop-opacity="1"></stop><stop mxs="_zs_galleryaO:f" offset="38%" stop-color="#0040FF" stop-opacity="1"></stop><stop mxs="_zs_galleryaO:g" offset="50%" stop-color="#00FFFF" stop-opacity="1"></stop><stop mxs="_zs_galleryaO:h" offset="63%" stop-color="#00FF40" stop-opacity="1"></stop><stop mxs="_zs_galleryaO:i" offset="75%" stop-color="#0BED00" stop-opacity="1"></stop><stop mxs="_zs_galleryaO:j" offset="88%" stop-color="#FFFF00" stop-opacity="1"></stop><stop mxs="_zs_galleryaO:k" offset="100%" stop-color="#FF0000" stop-opacity="1"></stop></lineargradient></defs><rect x="0" y="0" width="100%" height="100%" fill="url(#ghsv_'+r(x)+')"></rect></svg><div class="_zs_gallerydS" id="si_'+r(x)+'"></div></div></div>',u&&(f+='<div mxa="_zs_galleryaO:e" class="_zs_gallerydW pr"><div class="_zs_gallerydX" id="at_'+r(x)+'" mx-mousedown="'+t+'__ay()"><div class="_zs_gallerydY" id="ai_'+r(x)+'"></div></div></div>'),f+='<div mxv mxa="_zs_galleryaO:f" class="_zs_gallerydL clearfix"><span class="fl _zs_gallerydU" id="bc_'+r(x)+'"></span><input class="fl input _zs_gallerydT" id="v_'+r(x)+'" mx-keyup="'+t+'__aB()" mx-paste="'+t+'__aB()" mx-change="'+t+'__p()" mx-focusin="'+t+'__p()" mx-focusout="'+t+'__p()"/>',y&&(f+='<a mxs="_zs_galleryaO:l" href="javascript:;" class="fr btn btn-brand _zs_gallerydV" mx-click="'+t+'__aC()">确定</a>'),f+="</div>"},init:function(a){var t=a.data||{};this.__am=t.color||"#ffffff",this.__an=t.showAlpha+""=="true",this.__ao=t.showBtns+""=="true",this.__ap={h:0,s:1,v:1}},render:function(){var a=this;a.updater.digest({id:a.id,alpha:a.__an,btns:a.__ao,shortcuts:_}),a.__aq(a.__am)},__at:function(a,t){var s=this,r=s.__ap;r.h=a.h%360,r.s=a.s,r.v=a.v;var i=l(a.h,a.s,a.v).hex,_=e("#cz_"+s.id),d=_.width(),c=l(a.h,1,1);if(_.css("background",c.hex),s.__ar=i,s.__as(),!t){e("#scs_"+s.id+" li").removeClass(o);var p=e("#si_"+s.id).height()/2;p<0&&(p=0);var n=Math.round(r.h*d/360-p),g=e("#ci_"+s.id).width()/2;e("#si_"+s.id).css({top:n-6}),n=Math.round((1-r.v)*d-g);var h=Math.round(r.s*d-g);e("#ci_"+s.id).css({left:h,top:n})}e("#sc_"+i.substr(1,6)+"_"+s.id).addClass(o)},__aq:function(a){var t=parseInt(a.substr(1,2),16),s=parseInt(a.substr(3,2),16),r=parseInt(a.substr(5,2),16),e=parseInt(a.substr(7,2),16);isNaN(e)&&(e=255),this.__au=("0"+e.toString(16)).slice(-2);var i=function(a,t,s){var r,e;return a/=255,t/=255,s/=255,{h:(0==(e=(r=Math.max(a,t,s))-Math.min(a,t,s))?null:r==a?(t-s)/e+(t<s?6:0):r==t?(s-a)/e+2:(a-t)/e+4)%6*60,s:0===e?0:e/r,v:r}}(t,s,r);this.__at(i),this.__an&&this.__av(e)},"__aw<mousedown>":function(a){var t=this,s=e(a.eventTarget),r=e("#si_"+t.id),i=a,o=e("#cz_"+t.id).width(),_=e("#si_"+t.id).height()/2,l=s.offset(),d=(a.pageY-l.top)/o*360;t.__at({h:d,s:t.__ap.s,v:t.__ap.v});var c=parseInt(r.css("top"),10);t.dragdrop(a.eventTarget,function(a){var s=a.pageY-i.pageY;(s+=c)<=-_?s=-_:s>=o-_&&(s=o-_),r.css({top:s-6});var e=(s+_)/o*360;t.__at({h:e,s:t.__ap.s,v:t.__ap.v},!0)},function(){t.__D()})},"__ax<mousedown>":function(a){var t=this,s=e("#cz_"+t.id).width(),r=e("#ci_"+t.id).width()/2,i=e(a.eventTarget).offset(),o=a.pageX-i.left,_=a.pageY-i.top,l=o/s,d=(s-_)/s;t.__at({h:t.__ap.h,s:l,v:d});var c=e("#ci_"+t.id),p=parseInt(c.css("left"),10),n=parseInt(c.css("top"),10),g=a;t.dragdrop(a.eventTarget,function(a){var e=a.pageY-g.pageY,i=a.pageX-g.pageX;(e+=n)<=-r?e=-r:e>=s-r&&(e=s-r),(i+=p)<=-r?i=-r:i>=s-r&&(i=s-r),c.css({top:e,left:i});var o=(i+r)/s,_=(s-(e+r))/s;t.__at({h:t.__ap.h,s:o,v:_})},function(){t.__D()})},__av:function(a){a/=255,a*=e("#at_"+this.id).width(),a-=e("#si_"+this.id).height()/2,e("#ai_"+this.id).css({left:a})},__as:function(){var a=this,t=a.__ar;e("#at_"+a.id).css({background:"linear-gradient(to right, "+t+"00 0%,"+t+" 100%)"}),a.__an&&(t+=a.__au),e("#bc_"+a.id).css("background",t),e("#v_"+a.id).val(t)},"__ay<mousedown>":function(a){var t=e(a.eventTarget),s=a,r=this,i=e("#ai_"+r.id),o=e("#at_"+r.id).width(),_=e("#si_"+r.id).height()/2,l=t.offset(),d=(a.pageX-l.left)/o*255|0;r.__au=("0"+d.toString(16)).slice(-2),r.__av(d),r.__as();var c=parseInt(i.css("left"),10);r.dragdrop(a.eventTarget,function(a){var t=a.pageX-s.pageX;(t+=c)<=-_?t=-_:t>=o-_&&(t=o-_),i.css({left:t});var e=Math.round((t+_)/o*255);r.__au=("0"+e.toString(16)).slice(-2),r.__as()},function(){r.__D()})},"__az<click>":function(a){this.__aq(a.params.color),e(a.eventTarget).addClass(o),this.__D()},"__aB<keyup,paste>":function(a){var t=this;clearTimeout(t.__aA);var s=e.trim(a.eventTarget.value);t.__aA=setTimeout(t.wrapAsync(function(){7===s.length&&s!=t.__am&&(t.__aq(s),t.__D())}),250)},"__p<change,focusin,focusout>":function(a){a.stopPropagation()},__D:function(a){if(!this.__ao||a){var t=e("#v_"+this.id).val();e("#"+this.id).trigger({type:"change",color:this.__am=t})}},"__aC<click>":function(){this.__D(!0)}})});