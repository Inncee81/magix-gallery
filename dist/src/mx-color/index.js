define("mx-color/index",["magix","$","../mx-dragdrop/index"],(a,t,s)=>{var i=a("magix"),r=a("$"),e=a("../mx-dragdrop/index");i.applyStyle("_zs_galleryB",':root{--mx-color-width:224px;--mx-color-slider-width:18px;--mx-color-picker-width:calc(var(--mx-color-width) - var(--mx-color-slider-width) - 10px)}._zs_gallerydt,._zs_gallerydu,._zs_gallerydv{width:var(--mx-color-width)}._zs_gallerydt{margin:10px 0}._zs_gallerydw{position:relative;float:left;width:15px;height:15px;margin:-1px 0 0 -1px;border:1px solid #333;cursor:pointer}._zs_gallerydw._zs_gallerydx:after,._zs_gallerydw._zs_gallerydx:before{content:" ";position:absolute;left:0;top:0;width:100%;height:100%}._zs_gallerydw._zs_gallerydx:before{z-index:2;border:1px solid #fff}._zs_gallerydw._zs_gallerydx:after{z-index:1;border:2px solid #333}._zs_gallerydy{float:left;position:relative;width:var(--mx-color-picker-width);height:var(--mx-color-picker-width);cursor:pointer}._zs_gallerydy ._zs_gallerydz{position:absolute;width:8px;height:8px;box-shadow:0 0 0 1.5px #fff,inset 0 0 1px 1px rgba(0,0,0,.3),0 0 1px 2px rgba(0,0,0,.4);border-radius:50%}._zs_gallerydA{float:right;position:relative;width:var(--mx-color-slider-width);height:var(--mx-color-picker-width);cursor:pointer}._zs_gallerydA ._zs_gallerydB{position:absolute;right:-6px;top:-6px;width:0;height:0;background-color:none;border:6px solid transparent;border-right-color:#333;border-left:none}._zs_gallerydC{width:calc(var(--mx-color-width) - 120px)}._zs_gallerydD,._zs_gallerydE{width:50px}._zs_gallerydD{height:var(--input-height);margin-right:10px;border-radius:var(--border-radius);border:1px solid var(--color-border)}._zs_gallerydF{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAIAAADZF8uwAAAAGUlEQVQYV2M4gwH+YwCGIasIUwhT25BVBADtzYNYrHvv4gAAAABJRU5ErkJggg==);width:var(--mx-color-width);height:12px;margin-bottom:10px}._zs_gallerydG{position:relative;height:100%;cursor:pointer}._zs_gallerydH{position:absolute;left:-2px;top:2px;height:8px;width:4px;box-shadow:0 0 0 1.5px #fff,inset 0 0 1px 1px rgba(0,0,0,.3),0 0 1px 2px rgba(0,0,0,.4);background:#fff}._zs_gallerydI{display:inline-block;width:var(--input-height);height:var(--input-height);border-radius:50%;vertical-align:middle}[mx-view*="mx-color/index"]{width:calc(var(--mx-color-width) + 22px);min-width:calc(var(--mx-color-width) + 22px);padding:10px;background-color:#fff}[mx-view*="mx-color/picker"] ._zs_gallerydJ{min-width:0}[mx-view*="mx-color/picker"][mx-view*="dot=true"]{min-width:var(--input-height)}[mx-view*="mx-color/picker"][mx-view*="dot=true"] ._zs_gallerydJ{max-width:none}');var o="_zs_gallerydx",_=["d81e06","f4ea2a","1afa29","1296db","13227a","d4237a","ffffff","e6e6e6","dbdbdb","cdcdcd","bfbfbf","8a8a8a","707070","515151","2c2c2c","000000","ea986c","eeb174","f3ca7e","f9f28b","c8db8c","aad08f","87c38f","83c6c2","7dc5eb","87a7d6","8992c8","a686ba","bd8cbb","be8dbd","e89abe","e8989a","e16632","e98f36","efb336","f6ef37","afcd51","7cba59","36ab60","1baba8","17ace3","3f81c1","4f68b0","594d9c","82529d","a4579d","db649b","dd6572","d84e06","e0620d","ea9518","f4ea2a","8cbb1a","2ba515","0e932e","0c9890","1295db","0061b2","0061b0","004198","122179","88147f","d3227b","d6204b"],l=function(a,t,s){var i,r,e,o,_;a=a%360/60,i=r=e=s-(_=s*t);var l=255*(i+=[_,o=_*(1-Math.abs(a%2-1)),0,0,o,_][a=~~a]),d=255*(r+=[o,_,_,o,0,0][a]),c=255*(e+=[0,0,o,_,_,o][a]);return{r:l,g:d,b:c,hex:"#"+(16777216|c|d<<8|l<<16).toString(16).slice(1)}};s.exports=i.View.extend({mixins:[e],tmpl:function(a,t,s,i,r,e,o,_){if(s||(s=a),!r){var l={"&":"amp","<":"lt",">":"gt",'"':"#34","'":"#39","`":"#96"},d=/[&<>"'`]/g,c=function(a){return"&"+l[a]+";"};r=function(a){return""+(null==a?"":a)},i=function(a){return r(a).replace(d,c)}}if(!e){var n={"!":"%21","'":"%27","(":"%28",")":"%29","*":"%2A"},p=function(a){return n[a]},g=/[!')(*]/g;e=function(a){return encodeURIComponent(r(a)).replace(g,p)}}if(!_){var h=/[\\'"]/g;_=function(a){return r(a).replace(h,"\\$&")}}var f="",x=a.id,v=a.shortcuts,u=a.alpha,m=a.btns;f+='<div id="scs_'+i(x)+'"><ul mxa="_zs_galleryaH:_" class="_zs_gallerydv clearfix">';for(var y=0;y<v.length;y++)f+='<li class="_zs_gallerydw" id="sc_'+i(v[y])+"_"+i(x)+'" style="background:#'+i(v[y])+'" mx-click="'+t+"__as({color:'#"+i(_(v[y]))+"'})\"></li>";return f+='</ul></div><div mxa="_zs_galleryaH:a" class="_zs_gallerydt clearfix"><div class="_zs_gallerydy" id="cz_'+i(x)+'" mx-mousedown="'+t+'__aq()"><svg mxa="_zs_galleryaH:b" xmlns="http://www.w3.org/2000/svg" version="1.1" width="100%" height="100%"><defs><lineargradient id="gb_'+i(x)+'" x1="0%" y1="100%" x2="0%" y2="0%"><stop mxs="_zs_galleryaH:_" offset="0%" stop-color="#000000" stop-opacity="1"></stop><stop mxs="_zs_galleryaH:a" offset="100%" stop-color="#CC9A81" stop-opacity="0"></stop></lineargradient><lineargradient id="gw_'+i(x)+'" x1="0%" y1="100%" x2="100%" y2="100%"><stop mxs="_zs_galleryaH:b" offset="0%" stop-color="#FFFFFF" stop-opacity="1"></stop><stop mxs="_zs_galleryaH:a" offset="100%" stop-color="#CC9A81" stop-opacity="0"></stop></lineargradient></defs><rect x="0" y="0" width="100%" height="100%" fill="url(#gw_'+i(x)+')"></rect><rect x="0" y="0" width="100%" height="100%" fill="url(#gb_'+i(x)+')"></rect></svg><div class="_zs_gallerydz" id="ci_'+i(x)+'"></div></div><div mxa="_zs_galleryaH:c" class="_zs_gallerydA" mx-mousedown="'+t+'__ap()"><svg mxa="_zs_galleryaH:d" xmlns="http://www.w3.org/2000/svg" version="1.1" width="100%" height="100%"><defs><lineargradient id="ghsv_'+i(x)+'" x1="0%" y1="100%" x2="0%" y2="0%"><stop mxs="_zs_galleryaH:c" offset="0%" stop-color="#FF0000" stop-opacity="1"></stop><stop mxs="_zs_galleryaH:d" offset="13%" stop-color="#FF00FF" stop-opacity="1"></stop><stop mxs="_zs_galleryaH:e" offset="25%" stop-color="#8000FF" stop-opacity="1"></stop><stop mxs="_zs_galleryaH:f" offset="38%" stop-color="#0040FF" stop-opacity="1"></stop><stop mxs="_zs_galleryaH:g" offset="50%" stop-color="#00FFFF" stop-opacity="1"></stop><stop mxs="_zs_galleryaH:h" offset="63%" stop-color="#00FF40" stop-opacity="1"></stop><stop mxs="_zs_galleryaH:i" offset="75%" stop-color="#0BED00" stop-opacity="1"></stop><stop mxs="_zs_galleryaH:j" offset="88%" stop-color="#FFFF00" stop-opacity="1"></stop><stop mxs="_zs_galleryaH:k" offset="100%" stop-color="#FF0000" stop-opacity="1"></stop></lineargradient></defs><rect x="0" y="0" width="100%" height="100%" fill="url(#ghsv_'+i(x)+')"></rect></svg><div class="_zs_gallerydB" id="si_'+i(x)+'"></div></div></div>',u&&(f+='<div mxa="_zs_galleryaH:e" class="_zs_gallerydF pr"><div class="_zs_gallerydG" id="at_'+i(x)+'" mx-mousedown="'+t+'__ar()"><div class="_zs_gallerydH" id="ai_'+i(x)+'"></div></div></div>'),f+='<div mxv mxa="_zs_galleryaH:f" class="_zs_gallerydu clearfix"><span class="fl _zs_gallerydD" id="bc_'+i(x)+'"></span><input class="fl input _zs_gallerydC" id="v_'+i(x)+'" mx-keyup="'+t+'__au()" mx-paste="'+t+'__au()" mx-change="'+t+'__m()" mx-focusin="'+t+'__m()" mx-focusout="'+t+'__m()"/>',m&&(f+='<a mxs="_zs_galleryaH:l" href="javascript:;" class="fr btn btn-brand _zs_gallerydE" mx-click="'+t+'__av()">确定</a>'),f+="</div>"},init:function(a){var t=a.data||{};this.__af=t.color||"#ffffff",this.__ag=t.showAlpha+""=="true",this.__ah=t.showBtns+""=="true",this.__ai={h:0,s:1,v:1}},render:function(){var a=this;a.updater.digest({id:a.id,alpha:a.__ag,btns:a.__ah,shortcuts:_}),a.__aj(a.__af)},__am:function(a,t){var s=this,i=s.__ai;i.h=a.h%360,i.s=a.s,i.v=a.v;var e=l(a.h,a.s,a.v).hex,_=r("#cz_"+s.id),d=_.width(),c=l(a.h,1,1);if(_.css("background",c.hex),s.__ak=e,s.__al(),!t){r("#scs_"+s.id+" li").removeClass(o);var n=r("#si_"+s.id).height()/2;n<0&&(n=0);var p=Math.round(i.h*d/360-n),g=r("#ci_"+s.id).width()/2;r("#si_"+s.id).css({top:p-6}),p=Math.round((1-i.v)*d-g);var h=Math.round(i.s*d-g);r("#ci_"+s.id).css({left:h,top:p})}r("#sc_"+e.substr(1,6)+"_"+s.id).addClass(o)},__aj:function(a){var t=parseInt(a.substr(1,2),16),s=parseInt(a.substr(3,2),16),i=parseInt(a.substr(5,2),16),r=parseInt(a.substr(7,2),16);isNaN(r)&&(r=255),this.__an=("0"+r.toString(16)).slice(-2);var e=function(a,t,s){var i,r;return a/=255,t/=255,s/=255,{h:(0==(r=(i=Math.max(a,t,s))-Math.min(a,t,s))?null:i==a?(t-s)/r+(t<s?6:0):i==t?(s-a)/r+2:(a-t)/r+4)%6*60,s:0===r?0:r/i,v:i}}(t,s,i);this.__am(e),this.__ag&&this.__ao(r)},"__ap<mousedown>":function(a){var t=this,s=r(a.eventTarget),i=r("#si_"+t.id),e=a,o=r("#cz_"+t.id).width(),_=r("#si_"+t.id).height()/2,l=s.offset(),d=(a.pageY-l.top)/o*360;t.__am({h:d,s:t.__ai.s,v:t.__ai.v});var c=parseInt(i.css("top"),10);t.dragdrop(a.eventTarget,function(a){var s=a.pageY-e.pageY;(s+=c)<=-_?s=-_:s>=o-_&&(s=o-_),i.css({top:s-6});var r=(s+_)/o*360;t.__am({h:r,s:t.__ai.s,v:t.__ai.v},!0)},function(){t.__A()})},"__aq<mousedown>":function(a){var t=this,s=r("#cz_"+t.id).width(),i=r("#ci_"+t.id).width()/2,e=r(a.eventTarget).offset(),o=a.pageX-e.left,_=a.pageY-e.top,l=o/s,d=(s-_)/s;t.__am({h:t.__ai.h,s:l,v:d});var c=r("#ci_"+t.id),n=parseInt(c.css("left"),10),p=parseInt(c.css("top"),10),g=a;t.dragdrop(a.eventTarget,function(a){var r=a.pageY-g.pageY,e=a.pageX-g.pageX;(r+=p)<=-i?r=-i:r>=s-i&&(r=s-i),(e+=n)<=-i?e=-i:e>=s-i&&(e=s-i),c.css({top:r,left:e});var o=(e+i)/s,_=(s-(r+i))/s;t.__am({h:t.__ai.h,s:o,v:_})},function(){t.__A()})},__ao:function(a){a/=255,a*=r("#at_"+this.id).width(),a-=r("#si_"+this.id).height()/2,r("#ai_"+this.id).css({left:a})},__al:function(){var a=this,t=a.__ak;r("#at_"+a.id).css({background:"linear-gradient(to right, "+t+"00 0%,"+t+" 100%)"}),a.__ag&&(t+=a.__an),r("#bc_"+a.id).css("background",t),r("#v_"+a.id).val(t)},"__ar<mousedown>":function(a){var t=r(a.eventTarget),s=a,i=this,e=r("#ai_"+i.id),o=r("#at_"+i.id).width(),_=r("#si_"+i.id).height()/2,l=t.offset(),d=(a.pageX-l.left)/o*255|0;i.__an=("0"+d.toString(16)).slice(-2),i.__ao(d),i.__al();var c=parseInt(e.css("left"),10);i.dragdrop(a.eventTarget,function(a){var t=a.pageX-s.pageX;(t+=c)<=-_?t=-_:t>=o-_&&(t=o-_),e.css({left:t});var r=Math.round((t+_)/o*255);i.__an=("0"+r.toString(16)).slice(-2),i.__al()},function(){i.__A()})},"__as<click>":function(a){this.__aj(a.params.color),r(a.eventTarget).addClass(o),this.__A()},"__au<keyup,paste>":function(a){var t=this;clearTimeout(t.__at);var s=r.trim(a.eventTarget.value);t.__at=setTimeout(t.wrapAsync(function(){7===s.length&&s!=t.__af&&(t.__aj(s),t.__A())}),250)},"__m<change,focusin,focusout>":function(a){a.stopPropagation()},__A:function(a){if(!this.__ah||a){var t=r("#v_"+this.id).val();r("#"+this.id).trigger({type:"change",color:this.__af=t})}},"__av<click>":function(){this.__A(!0)}})});