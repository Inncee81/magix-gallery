<div class="mb20">
    <div class="mb10">1. 原始表格：当前4*4的表格，x坐标的取值范围【0-3】，y的取值范围【0-3】</div>
    <div class="pl15">
        <table class="table custom" id="{{=viewId}}_table">
            <tbody>
                <tr>
                    <td rowspan="2">A</td>
                    <td>B</td>
                    <td rowspan="2">C</td>
                    <td>D</td>
                </tr>
                <tr>
                    <td rowspan="3">E</td>
                    <td>F</td>
                </tr>
                <tr>
                    <td>G</td>
                    <td>H</td>
                    <td>I</td>
                </tr>
                <tr>
                    <td>J</td>
                    <td colspan="2">L</td>
                </tr>
            </tbody>
        </table>
    </div>
</div>
<div class="mb20">
    <div class="mb10">2. 根据属性<span class="tag">colspan</span>得到单元格相对于当前行的相对位置<span class="tag">x</span> ，后一行的位置等于<span class="tag">prevRow.x + prevRow.colspan</span>，第一次计算得到以下结果：</div>
    <div class="pl15">
        <table class="table custom mb10">
            <tbody>
                <tr>
                    <td>(0,0)<span class="color-brand ml10">A</span></td>
                    <td>(1,0)<span class="color-brand ml10">B</span></td>
                    <td>(2,0)<span class="color-brand ml10">C</span></td>
                    <td>(3,0)<span class="color-brand ml10">D</span></td>
                </tr>
                <tr>
                    <td>(0,1)<span class="color-brand ml10">E</span></td>
                    <td>(1,1)<span class="color-brand ml10">F</span></td>
                    <td>(2,1)</td>
                    <td>(3,1)</td>
                </tr>
                <tr>
                    <td>(0,2)<span class="color-brand ml10">G</span></td>
                    <td>(1,2)<span class="color-brand ml10">H</span></td>
                    <td>(2,2)<span class="color-brand ml10">I</span></td>
                    <td>(3,2)</td>
                </tr>
                <tr>
                    <td>(0,3)<span class="color-brand ml10">J</span></td>
                    <td>(1,3)<span class="color-brand ml10">L</span></td>
                    <td>(2,3)</td>
                    <td>(3,3)</td>
                </tr>
            </tbody>
        </table>
        <pre class="tip-content">
// 二维数组
let rows = [];

// 计算同一行的x位置
for (let i = 0; i &lt; trs.length; i++) &#123;
    let tds = $(trs[i]).find('td');

    let gap = 0;
    let row = [];
    for (let j = 0; j &lt; tds.length; j++) &#123;
        let td = tds.eq(j);
        let colspan = +td.attr('colspan') || 1,
            rowspan = +td.attr('rowspan') || 1;
        row.push(&#123;
            x: gap,
            y: i,
            colspan,
            rowspan,
            left: td.offset().left,  //用于判断位置
            content: td.html()
        &#125;)
        gap = gap + colspan;
    &#125;

    rows.push(row);
&#125;
        </pre>
    </div>
</div>
<div class="mb20">
    <div class="mb10">3. 可以从上表看出，由于<span class="tag">rowspan</span>的存在，部分单元格在计算位置时存在偏差，分析可得，当前单元格存在rowspan时，以下两种情况的单元格需要进行移动：</div>
    <div class="pl15">
        <div>1. 当前单元格后面的单元格</div>
        <div class="mb10">2. 两行行差小于当前单元格的rowspan</div>
        <pre class="tip-content">
//计算 rowspan对后边行的影响
for (let rowIndex = 0; rowIndex &lt; rows.length - 1; rowIndex++) &#123;
    let row = rows[rowIndex];
    for (let cellIndex = 0; cellIndex &lt; row.length; cellIndex++) &#123;
        let curCell = row[cellIndex];
        if (curCell.rowspan &gt; 1) &#123;
            // 后面行，left&lt;当前cell的位置进行移动
            for (let nextRowIndex = rowIndex + 1; (nextRowIndex &lt; rows.length) && (curCell.rowspan &gt; nextRowIndex - rowIndex); nextRowIndex++) &#123;
                let nextRow = rows[nextRowIndex];
                for (let nextCellIndex = 0; nextCellIndex &lt; nextRow.length; nextCellIndex++) &#123;
                    let nextCell = nextRow[nextCellIndex];
                    if (nextCell.left &gt; curCell.left) &#123;
                        nextCell.x += curCell.colspan;
                    &#125;
                &#125;
            &#125;
        &#125;
    &#125;
&#125;    
        </pre>
    </div>
</div>
<div>
    <div class="mb10">4. 最终结果</div>
    <div class="pl15 clearfix">
        <table class="table custom fl">
            <tbody>
                <tr>
                    <td>(0,0)<span class="color-brand ml10">A</span></td>
                    <td>(1,0)<span class="color-brand ml10">B</span></td>
                    <td>(2,0)<span class="color-brand ml10">C</span></td>
                    <td>(3,0)<span class="color-brand ml10">D</span></td>
                </tr>
                <tr>
                    <td>(0,1)</td>
                    <td>(1,1)<span class="color-brand ml10">E</span></td>
                    <td>(2,1)</td>
                    <td>(3,1)<span class="color-brand ml10">F</span></td>
                </tr>
                <tr>
                    <td>(0,2)<span class="color-brand ml10">G</span></td>
                    <td>(1,2)</td>
                    <td>(2,2)<span class="color-brand ml10">H</span></td>
                    <td>(3,2)<span class="color-brand ml10">I</span></td>
                </tr>
                <tr>
                    <td>(0,3)<span class="color-brand ml10">J</span></td>
                    <td>(1,3)</td>
                    <td>(2,3)<span class="color-brand ml10">L</span></td>
                    <td>(3,3)</td>
                </tr>
            </tbody>
        </table>
        <div class="fl ml20">
            {{each rows as row}}
                {{each row as cell}}
                <div class="clearfix">
                    <div class="fl prefix">{{=cell.content}}：</div>
                    <div class="fl">&#123;x: {{=cell.x}}, y: {{=cell.y}}&#125;</div>
                </div>
                {{/each}}
            {{/each}}
        </div>
    </div>
</div>