define("mx-tree/branch",["magix","$","./branch"],(e,i,a)=>{e("./branch");var t=e("magix"),n=e("$"),r=t.Vframe;a.exports=t.View.extend({tmpl:{html:'<ul><%for(var _=0,a;_<$$.list.length;_++){a=$$.list[_]%><li class="_fH<%if(!_&&$$.fromTop){%> _fN<%}if(_==$$.list.length-1){%> _fM<%}%>"><div class="_fI<%if(a.children){%> _ad<%}%>" <%if(a.children){%> mx-click="__aW({id:\'<%=$eq(a[$$.valueKey])%>\'})" <%}%>><%if(a.children){%><span class="_fJ">+</span><%}%></div><div class="_fK"><label class="_fL"><input class="_as _fP _aa" type="checkbox" mx-change="__gk()" id="cb_<%=$$.id%>_<%=a[$$.valueKey]%>" value="<%=a[$$.valueKey]%>" name="<%=$$.id%>"><span class="_ac _fO _aa"><%=a[$$.textKey]%></span></label></div><%if(a.children){%><div id="<%=$$.id%>_<%=a[$$.valueKey]%>" class="_fG _ah" mx-view="mx-tree/branch?textKey=<%!$eu($$.textKey)%>&valueKey=<%!$eu($$.valueKey)%>&list=<%@a.children%>"></div><%}%></li><%}%></ul>'},init:function(e){this.updater.set(e)},render:function(){this.updater.digest({id:this.id})},__gF:function(){var e,i,a=this.id;return n("#"+a+' input[name="'+a+'"]').each(function(a,t){t.indeterminate?e=i=!0:t.checked?e=!0:i=!0}),e&&i?3:e?2:1},__gG:function(e){var i=this.owner.parent(),a=0;if(i){for(var t=0,_=i.children();t<_.length;t++){var c=_[t],l=r.get(c);l&&(a|=l.invoke("__gF"))}var d=n("#cb_"+e);3===a?d.prop("indeterminate",!0):(d.prop("indeterminate",!1),d.prop("checked",2==a)),i.invoke("__gG",[i.id])}},__cB:function(e){var i=this.id;n("#"+i+' input[name="'+i+'"]').prop("indeterminate",!1).prop("checked",e);for(var a=0,t=this.owner.children();a<t.length;a++){var _=t[a],c=r.get(_);c&&c.invoke("__cB",[e])}},"__aW<click>":function(e){var i=n("#"+this.id+"_"+e.params.id),a=n(e.eventTarget).find("span");"+"==n.trim(a.html())?(i.slideDown(),a.html("-")):(i.slideUp(),a.html("+"))},"__gk<change>":function(e){var i=r.get(this.id+"_"+e.eventTarget.value);i&&i.invoke("__cB",[e.eventTarget.checked]),this.__gG(this.id)}})});