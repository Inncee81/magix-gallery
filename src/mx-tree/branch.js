define("mx-tree/branch",["magix","$","./branch"],(e,n,i)=>{e("./branch");var t=e("magix"),a=e("$"),r=t.Vframe;i.exports=t.View.extend({tmpl:function(e){var n="",i={"&":"amp","<":"lt",">":"gt",'"':"#34","'":"#39","`":"#96"},t=/[&<>"'`]/g,a=function(e){return null==e?"":""+e},r=function(e){return"&"+i[e]+";"},c=function(e){return a(e).replace(t,r)},l=function(n,i,t){for(t=e[""];--t;)if(e[i=""+t]===n)return i;return e[i=""+e[""]++]=n,i},d={"!":"%21","'":"%27","(":"%28",")":"%29","*":"%2A"},_=function(e){return d[e]},s=/[!')(*]/g,u=function(e){return encodeURIComponent(a(e)).replace(s,_)},h=/[\\'"]/g;n+="<ul>";for(var o,v=0;v<e.list.length;v++)o=e.list[v],n+='<li class="_fG',!v&&e.fromTop&&(n+=" _fM"),v==e.list.length-1&&(n+=" _fL"),n+='"><div class="_fH',o.children&&(n+=" _ad"),n+='" ',o.children&&(n+=" mx-click=\"__aY({id:'"+c((f=o[e.valueKey],a(f).replace(h,"\\$&")))+"'})\" "),n+=">",o.children&&(n+='<span class="_fI">+</span>'),n+='</div><div class="_fJ"><label class="_fK"><input class="_as _fO _aa" type="checkbox" mx-change="__gm()" id="cb_'+c(e.id)+"_"+c(o[e.valueKey])+'" value="'+c(o[e.valueKey])+'" name="'+c(e.id)+'"/><span class="_ac _fN _aa">'+c(o[e.textKey])+"</span></label></div>",o.children&&(n+='<div id="'+c(e.id)+"_"+c(o[e.valueKey])+'" class="_fF _ah" mx-view="mx-tree/branch?textKey='+a(u(e.textKey))+"&valueKey="+a(u(e.valueKey))+"&list=",n+=l(o.children),n+='"></div>'),n+="</li>";var f;return n+="</ul>"},init:function(e){this.updater.set(e)},render:function(){this.updater.digest({id:this.id})},__gG:function(){var e,n,i=this.id;return a("#"+i+' input[name="'+i+'"]').each(function(i,t){t.indeterminate?e=n=!0:t.checked?e=!0:n=!0}),e&&n?3:e?2:1},__gH:function(e){var n=this.owner.parent(),i=0;if(n){for(var t=0,c=n.children();t<c.length;t++){var l=c[t],d=r.get(l);d&&(i|=d.invoke("__gG"))}var _=a("#cb_"+e);3===i?_.prop("indeterminate",!0):(_.prop("indeterminate",!1),_.prop("checked",2==i)),n.invoke("__gH",[n.id])}},__cD:function(e){var n=this.id;a("#"+n+' input[name="'+n+'"]').prop("indeterminate",!1).prop("checked",e);for(var i=0,t=this.owner.children();i<t.length;i++){var c=t[i],l=r.get(c);l&&l.invoke("__cD",[e])}},"__aY<click>":function(e){var n=a("#"+this.id+"_"+e.params.id),i=a(e.eventTarget).find("span");"+"==a.trim(i.html())?(n.slideDown(),i.html("-")):(n.slideUp(),i.html("+"))},"__gm<change>":function(e){var n=r.get(this.id+"_"+e.eventTarget.value);n&&n.invoke("__cD",[e.eventTarget.checked]),this.__gH(this.id)}})});