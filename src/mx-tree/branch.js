define("mx-tree/branch",["magix","$","./branch"],(e,n,i)=>{e("./branch");var t=e("magix"),a=e("$"),r=t.Vframe;i.exports=t.View.extend({tmpl:function(e,n){var i="",t={"&":"amp","<":"lt",">":"gt",'"':"#34","'":"#39","`":"#96"},a=/[&<>"'`]/g,r=function(e){return null==e?"":""+e},c=function(e){return"&"+t[e]+";"},l=function(e){return r(e).replace(a,c)},d=function(i,t,a){for(a=n[e];--a;)if(n[t=e+a]===i)return t;return n[t=e+n[e]++]=i,t},_={"!":"%21","'":"%27","(":"%28",")":"%29","*":"%2A"},s=function(e){return _[e]},u=/[!')(*]/g,h=function(e){return encodeURIComponent(r(e)).replace(u,s)},o=/[\\'"]/g;i+="<ul>";for(var v,f=0;f<n.list.length;f++)v=n.list[f],i+='<li class="_fG',!f&&n.fromTop&&(i+=" _fM"),f==n.list.length-1&&(i+=" _fL"),i+='"><div class="_fH',v.children&&(i+=" _ad"),i+='" ',v.children&&(i+=" mx-click=\"__aX({id:'"+l((p=v[n.valueKey],r(p).replace(o,"\\$&")))+"'})\" "),i+=">",v.children&&(i+='<span class="_fI">+</span>'),i+='</div><div class="_fJ"><label class="_fK"><input class="_as _fO _aa" type="checkbox" mx-change="__gl()" id="cb_'+l(n.id)+"_"+l(v[n.valueKey])+'" value="'+l(v[n.valueKey])+'" name="'+l(n.id)+'"><span class="_ac _fN _aa">'+l(v[n.textKey])+"</span></label></div>",v.children&&(i+='<div id="'+l(n.id)+"_"+l(v[n.valueKey])+'" class="_fF _ah" mx-view="mx-tree/branch?textKey='+r(h(n.textKey))+"&valueKey="+r(h(n.valueKey))+"&list=",i+=d(v.children),i+='"></div>'),i+="</li>";var p;return i+="</ul>"},init:function(e){this.updater.set(e)},render:function(){this.updater.digest({id:this.id})},__gG:function(){var e,n,i=this.id;return a("#"+i+' input[name="'+i+'"]').each(function(i,t){t.indeterminate?e=n=!0:t.checked?e=!0:n=!0}),e&&n?3:e?2:1},__gH:function(e){var n=this.owner.parent(),i=0;if(n){for(var t=0,c=n.children();t<c.length;t++){var l=c[t],d=r.get(l);d&&(i|=d.invoke("__gG"))}var _=a("#cb_"+e);3===i?_.prop("indeterminate",!0):(_.prop("indeterminate",!1),_.prop("checked",2==i)),n.invoke("__gH",[n.id])}},__cC:function(e){var n=this.id;a("#"+n+' input[name="'+n+'"]').prop("indeterminate",!1).prop("checked",e);for(var i=0,t=this.owner.children();i<t.length;i++){var c=t[i],l=r.get(c);l&&l.invoke("__cC",[e])}},"__aX<click>":function(e){var n=a("#"+this.id+"_"+e.params.id),i=a(e.eventTarget).find("span");"+"==a.trim(i.html())?(n.slideDown(),i.html("-")):(n.slideUp(),i.html("+"))},"__gl<change>":function(e){var n=r.get(this.id+"_"+e.eventTarget.value);n&&n.invoke("__cC",[e.eventTarget.checked]),this.__gH(this.id)}})});