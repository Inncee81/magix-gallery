define("mx-tree/branch",["magix","$","./branch"],(e,n,i)=>{e("./branch");var t=e("magix"),a=e("$"),r=t.Vframe;i.exports=t.View.extend({tmpl:function(e,n){n=n||"";var i="",t={"&":"amp","<":"lt",">":"gt",'"':"#34","'":"#39","`":"#96"},a=/[&<>"'`]/g,r=function(e){return null==e?"":""+e},c=function(e){return"&"+t[e]+";"},l=function(e){return r(e).replace(a,c)},_=function(n,i,t){for(t=e[""];--t;)if(e[i=""+t]===n)return i;return e[i=""+e[""]++]=n,i},d={"!":"%21","'":"%27","(":"%28",")":"%29","*":"%2A"},s=function(e){return d[e]},u=/[!')(*]/g,h=function(e){return encodeURIComponent(r(e)).replace(u,s)},o=/[\\'"]/g;i+="<ul>";for(var v,f=0;f<e.list.length;f++)v=e.list[f],i+='<li class="_fG',!f&&e.fromTop&&(i+=" _fM"),f==e.list.length-1&&(i+=" _fL"),i+='"><div class="_fH',v.children&&(i+=" _ad"),i+='" ',v.children&&(i+=' mx-click="'+n+"__aY({id:'"+l((p=v[e.valueKey],r(p).replace(o,"\\$&")))+"'})\" "),i+=">",v.children&&(i+='<span mxs="_-:_" class="_fI">+</span>'),i+='</div><div mxa="_-:_" class="_fJ"><label mxa="_-:a" class="_fK"><input class="_as _fO _aa" type="checkbox" mx-change="'+n+'__gm()" id="cb_'+l(e.id)+"_"+l(v[e.valueKey])+'" value="'+l(v[e.valueKey])+'" name="'+l(e.id)+'"/><span mxa="_-:b" class="_ac _fN _aa">'+l(v[e.textKey])+"</span></label></div>",v.children&&(i+='<div id="'+l(e.id)+"_"+l(v[e.valueKey])+'" class="_fF _ah" mx-view="mx-tree/branch?textKey='+r(h(e.textKey))+"&valueKey="+r(h(e.valueKey))+"&list=",i+=_(v.children),i+='"></div>'),i+="</li>";var p;return i+="</ul>"},init:function(e){this.updater.set(e)},render:function(){this.updater.digest({id:this.id})},__gG:function(){var e,n,i=this.id;return a("#"+i+' input[name="'+i+'"]').each(function(i,t){t.indeterminate?e=n=!0:t.checked?e=!0:n=!0}),e&&n?3:e?2:1},__gH:function(e){var n=this.owner.parent(),i=0;if(n){for(var t=0,c=n.children();t<c.length;t++){var l=c[t],_=r.get(l);_&&(i|=_.invoke("__gG"))}var d=a("#cb_"+e);3===i?d.prop("indeterminate",!0):(d.prop("indeterminate",!1),d.prop("checked",2==i)),n.invoke("__gH",[n.id])}},__cD:function(e){var n=this.id;a("#"+n+' input[name="'+n+'"]').prop("indeterminate",!1).prop("checked",e);for(var i=0,t=this.owner.children();i<t.length;i++){var c=t[i],l=r.get(c);l&&l.invoke("__cD",[e])}},"__aY<click>":function(e){var n=a("#"+this.id+"_"+e.params.id),i=a(e.eventTarget).find("span");"+"==a.trim(i.html())?(n.slideDown(),i.html("-")):(n.slideUp(),i.html("+"))},"__gm<change>":function(e){var n=r.get(this.id+"_"+e.eventTarget.value);n&&n.invoke("__cD",[e.eventTarget.checked]),this.__gH(this.id)}})});