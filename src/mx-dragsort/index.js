define("mx-dragsort/index",["magix","../mx-dragdrop/index","../mx-runner/index","$"],(_,t,e)=>{var i=_("magix"),h=_("../mx-dragdrop/index"),o=_("../mx-runner/index"),n=_("$");i.applyStyle("_o",'._cn{left:-1000px;top:0;background:#f96447}._cn,._co{position:absolute}._co{width:26px;height:26px}._cp{background:#479b47}._cq{background:#e94f4f}._co:after{font-size:20px;line-height:26px;color:#fff;position:absolute;left:0;right:0;top:0;bottom:0;text-align:center}._cp:after{content:"✓"}._cq:after{content:"✗"}');var s=i.guid("dbar_"),c=i.guid("pt_"),d=n(window),r=n(document),a={__bG:function(){n("#"+s).length||n('<div class="_cn" id="'+s+'"/>').appendTo("body")},__bq:function(_){_.child&&(n(_.child).css({opacity:.4}),this.__bG())},__bB:function(_){_&&_.child&&n(_.child).css({opacity:1}),this.__bH(),this.__bI()},__bH:function(){n("#"+s).css({left:-1e5})},__bJ:function(_,t){var e=n("#"+s),i=!1;2&_.anchor&&(2&t?(e.css({height:2,width:_.bound.width,top:_.bound.y-1,left:_.bound.x}),i=!0):8&t&&(e.css({height:2,width:_.bound.width,top:_.bound.y+_.bound.height-1,left:_.bound.x}),i=!0)),!i&&1&_.anchor&&(1&t?e.css({height:_.bound.height,width:2,top:_.bound.y,left:_.bound.x-1}):4&t&&e.css({height:_.bound.height,width:2,top:_.bound.y,left:_.bound.x+_.bound.width-1}))},__bL:function(_){_.atPlace&&_.child!=_.hover?(3==_.anchor?_.__bK&&this.__bJ(_,_.side):_.__bL&&this.__bJ(_,_.position),this.__bM(!0)):(this.__bH(),this.__bM())},__bN:function(_){var t=n("#"+c);t.length||(t=n('<div class="_co" id="'+c+'"/>')).appendTo("body");var e=Math.max(0,Math.min(_.pageX+10,r.width()-t.width())),i=Math.max(0,Math.min(_.pageY+18,r.height()-t.height()));t.css({left:e,top:i,display:"block"})},__bM:function(_){var t=n("#"+c);_?t.removeClass("_cq").addClass("_cp"):t.addClass("_cq").removeClass("_cp")},__bI:function(){n("#"+c).hide()}};e.exports=i.View.extend({mixins:[h],init:function(_){var t=this,e=n("#"+t.id);e.on("mousedown",_.selector,function(_){_.preventDefault(),t.__bq(_)}),t.on("destroy",function(){e.off("mousedown")}),t.__k=e;var h=[e.get(0)];_.drops&&(h=h.concat(_.drops.split(","))),t.__bO=h;var o=_.horizonal+""=="true",s=_.vertical+""=="true";o||s||(s=!0);var c=0;o&&(c|=1),s&&(c|=2),t.__bP=c;var d=!0;i.has(_,"sort")&&(d=_.sort+""=="true"),t.__bQ=d},__bR:function(_){for(var t=0,e=this.__bO;t<e.length;t++){var h=e[t];if(i.inside(_,h))return i.node(h)}return null},__bs:function(_,t){var e=null;if(t||(t=this.__bR(_)),!this.__bQ&&this.__bS)return{child:this.__bS,zone:t};for(;t!=_;){if(_.parentNode==t){e=_;break}_=_.parentNode}return!t||t.firstChild||e||(e=t),e&&"false"===e.getAttribute("ds-draggable")&&(e=null),{child:e,zone:t}},__bU:function(_,t){var e=0,i=0,h=-1,o=-1,n=-1,s=-1,c=!1;if(t.pageX>=_.x&&t.pageX<=_.x+_.width&&t.pageY>=_.y&&t.pageY<=_.y+_.height&&(e|=t.pageX<=_.x+_.width/2?1:4,h=t.pageX-_.x,n=_.x+_.width-t.pageX,e|=t.pageY<=_.y+_.height/2?2:8,o=t.pageY-_.y,s=_.y+_.height-t.pageY,c=!0),c){var d=Math.min(h,o,n,s);d>-1&&(d==h?i=1:d==o?i=2:d==n?i=4:d==s&&(i=8))}var r=this.__bT;return r&&r.zone===r.hover&&(e=2,i=1),{position:e,atPlace:c,side:i}},__bq:function(_){if(1===_.which){var t=this,e=t.__bs(_.target);e.child&&(t.__bS=e.child,t.__bV=e.zone,t.__k.trigger({type:"dragbegin",dragNode:e.child,dragZone:e.zone}),a.__bq(e),t.dragdrop(e.zone,function(_){t.__bA(_)},function(_){t.__bB(_)}))}},__bY:function(_,t,e){var i=this.__bU(_,t),h=i.side!=this.__bW,o=i.position!=this.__bX;(h||o)&&(this.__bW=i.side,this.__bX=i.position,e.__bK=h,e.__bL=o,e.side=i.side,e.position=i.position,e.atPlace=i.atPlace,e.anchor=this.__bP,a.__bL(e))},__bA:function(_){var t=h.fromPoint(_.clientX,_.clientY);if(a.__bN(_),this.__bC=_,this.__br=!0,this.__bZ(),this.__bD(),this.__c_||this.__ca||!t)return delete this.__cb,delete this.__bW,void delete this.__bX;if(this.__cb!=t){if(t.id===s)return;this.__cb=t,delete this.__bW;var e=this.__bR(t);if(e){e!=this.__cc&&(this.__cc=e,this.__k.trigger({type:"enterzone",zone:e,changePointer:a.__bM}));var o=this.__bs(t,e);if(!o.child)return;var c=n(o.child),d=c.offset(),r={x:d.left,y:d.top,width:c.outerWidth(),height:c.outerHeight()};d=(c=n(o.zone)).offset(),this.__cd={x:d.left,y:d.top,scrollX:c.prop("scrollLeft"),scrollY:c.prop("scrollTop"),maxWidth:c.prop("scrollWidth"),maxHeight:c.prop("scrollHeight"),width:c.width(),height:c.height()},this.__bY(this.__ce=r,_,this.__bT={child:this.__bS,bound:r,zone:o.zone,hover:o.child})}else this.__cc&&(this.__k.trigger({type:"leavezone",zone:this.__cc,changePointer:a.__bM}),delete this.__cc)}else this.__ce&&i.inside(t,this.__bT.zone)?this.__bY(this.__ce,_,this.__bT):(delete this.__bW,delete this.__bX,this.__bQ&&(a.__bH(),a.__bM()))},__bB:function(){this.__cf(),this.__bE(),a.__bB({child:this.__bS});var _=this.__bX,t=this.__bW,e=this.__br,i=this.__bT,h=this.__bS;if(e&&(_||t)){var o=i.zone,n=this.__bP,s=3===n?t:_;if(1&n&&1&s||2&s&&2&n)i.hover==o?o.appendChild(h):o.insertBefore(h,i.hover);else if(8&s&&2&n||4&s&&1&n){for(var c=i.hover.nextSibling;c&&1!=c.nodeType;)c=c.nextSibling;o.insertBefore(h,c),c||(o.scrollTop=o.scrollHeight)}}i&&this.__k.trigger({type:"dragfinish",moved:e,dragNode:h,dragZone:this.__bV,dropNode:i.hover,dropZone:i.zone,outZone:!this.__cc}),delete this.__bS,delete this.__bV,delete this.__cb,delete this.__bT,delete this.__ce,delete this.__bX,delete this.__bW,delete this.__bC,delete this.__ca,delete this.__cc,delete this.__cd,delete this.__c_,delete this.__br},__bZ:function(){var _=this;_.__cg||(_.__cg=function(){var t=_.__cd;if(t){var e=_.__bT.zone,i=0,h=0,o=_.__bC;o.pageX>t.x&&o.pageY>t.y&&o.pageX<t.x+t.width&&o.pageY<t.y+t.height?(o.pageX-t.x<20&&t.scrollX>0?i=-Math.min(7,t.scrollX):t.x+t.width-o.pageX<20&&t.scrollX+t.width<t.maxWidth&&(i=Math.min(7,t.maxWidth-t.scrollX-t.width)),o.pageY-t.y<20&&t.scrollY>0?h=-Math.min(7,t.scrollY):t.y+t.height-o.pageY<20&&t.scrollY+t.height<t.maxHeight&&(h=Math.min(7,t.maxHeight-t.scrollY-t.height)),i||h?(_.__c_=!0,_.__ch=!0,e.scrollTop+=h,e.scrollLeft+=i,t.scrollX+=i,t.scrollY+=h,delete _.__br,a.__bH(),a.__bM()):(delete _.__c_,delete _.__ch)):(delete _.__c_,delete _.__ch)}},o.__ai(30,_.__cg))},__bD:function(){var _=this;_.__bF||(_.__bF=function(){if(!_.__ch){var t=0,e=0,i=_.__bC,h=d.scrollTop(),o=d.height(),n=r.height(),s=r.width(),c=d.width(),b=d.scrollLeft();i.pageX-b<20&&b>0?t=-Math.min(7,b):b+c-i.pageX<20&&b+c<s&&(t=Math.min(7,s-c-b)),i.pageY-h<20&&h>0?e=-Math.min(7,h):h+o-i.pageY<20&&h+o<n&&(e=Math.min(7,n-o-h)),t||e?(_.__ca=!0,i.pageX+=t,i.pageY+=e,window.scrollBy(t,e),delete _.__br,a.__bH(),a.__bN(i),a.__bM()):delete _.__ca}},o.__ai(30,_.__bF))},__cf:function(){this.__cg&&(o.__ak(this.__cg),delete this.__cg,delete this.__ch)},__bE:function(){this.__bF&&(o.__ak(this.__bF),delete this.__bF)}})});