define("mx-dragsort/index",["magix","../mx-dragdrop/index","../mx-runner/index","$"],(_,t,e)=>{var i=_("magix"),h=_("../mx-dragdrop/index"),o=_("../mx-runner/index"),n=_("$");i.applyStyle("_p",'._ct{left:-1000px;top:0;background:#f96447}._ct,._cu{position:absolute}._cu{width:26px;height:26px}._cv{background:#479b47}._cw{background:#e94f4f}._cu:after{font-size:20px;line-height:26px;color:#fff;position:absolute;left:0;right:0;top:0;bottom:0;text-align:center}._cv:after{content:"✓"}._cw:after{content:"✗"}');var s=i.guid("dbar_"),d=i.guid("pt_"),r=n(window),b=n(document),c={__bE:function(){n("#"+s).length||n('<div class="_ct" id="'+s+'"/>').appendTo("body")},__bo:function(_){_.child&&(n(_.child).css({opacity:.4}),this.__bE())},__bz:function(_){_&&_.child&&n(_.child).css({opacity:1}),this.__bF(),this.__bG()},__bF:function(){n("#"+s).css({left:-1e5})},__bH:function(_,t){var e=n("#"+s),i=!1;2&_.anchor&&(2&t?(e.css({height:2,width:_.bound.width,top:_.bound.y-1,left:_.bound.x}),i=!0):8&t&&(e.css({height:2,width:_.bound.width,top:_.bound.y+_.bound.height-1,left:_.bound.x}),i=!0)),!i&&1&_.anchor&&(1&t?e.css({height:_.bound.height,width:2,top:_.bound.y,left:_.bound.x-1}):4&t&&e.css({height:_.bound.height,width:2,top:_.bound.y,left:_.bound.x+_.bound.width-1}))},__bJ:function(_){_.atPlace&&_.child!=_.hover?(3==_.anchor?_.__bI&&this.__bH(_,_.side):_.__bJ&&this.__bH(_,_.position),this.__bK(!0)):(this.__bF(),this.__bK())},__bL:function(_){var t=n("#"+d);t.length||(t=n('<div class="_cu" id="'+d+'"/>')).appendTo("body");var e=Math.max(0,Math.min(_.pageX+10,b.width()-t.width())),i=Math.max(0,Math.min(_.pageY+18,b.height()-t.height()));t.css({left:e,top:i,display:"block"})},__bK:function(_){var t=n("#"+d);_?t.removeClass("_cw").addClass("_cv"):t.addClass("_cw").removeClass("_cv")},__bG:function(){n("#"+d).hide()}};e.exports=i.View.extend({init:function(_){var t=this,e=n("#"+t.id);e.on("mousedown",_.selector,function(_){_.preventDefault(),t.__bo(_)}),t.on("destroy",function(){e.off("mousedown"),h.end()}),t.__i=e;var o=[e.get(0)];_.drops&&(o=o.concat(_.drops.split(","))),t.__bM=o;var s=_.horizonal+""=="true",d=_.vertical+""=="true";s||d||(d=!0);var r=0;s&&(r|=1),d&&(r|=2),t.__bN=r;var b=!0;i.has(_,"sort")&&(b=_.sort+""=="true"),t.__bO=b},__bP:function(_){for(var t=0,e=this.__bM;t<e.length;t++){var h=e[t];if(i.inside(_,h))return i.node(h)}return null},__bq:function(_,t){var e=null;if(t||(t=this.__bP(_)),!this.__bO&&this.__bQ)return{child:this.__bQ,zone:t};for(;t!=_;){if(_.parentNode==t){e=_;break}_=_.parentNode}return!t||t.firstChild||e||(e=t),e&&"false"===e.getAttribute("ds-draggable")&&(e=null),{child:e,zone:t}},__bS:function(_,t){var e=0,i=0,h=-1,o=-1,n=-1,s=-1,d=!1;if(t.pageX>=_.x&&t.pageX<=_.x+_.width&&t.pageY>=_.y&&t.pageY<=_.y+_.height&&(e|=t.pageX<=_.x+_.width/2?1:4,h=t.pageX-_.x,n=_.x+_.width-t.pageX,e|=t.pageY<=_.y+_.height/2?2:8,o=t.pageY-_.y,s=_.y+_.height-t.pageY,d=!0),d){var r=Math.min(h,o,n,s);r>-1&&(r==h?i=1:r==o?i=2:r==n?i=4:r==s&&(i=8))}var b=this.__bR;return b&&b.zone===b.hover&&(e=2,i=1),{position:e,atPlace:d,side:i}},__bo:function(_){if(1===_.which){var t=this,e=t.__bq(_.target);e.child&&(t.__bQ=e.child,t.__bT=e.zone,t.__i.trigger({type:"dragbegin",dragNode:e.child,dragZone:e.zone}),c.__bo(e),h.begin(e.zone,function(_){t.__by(_)},function(_){t.__bz(_)}))}},__bW:function(_,t,e){var i=this.__bS(_,t),h=i.side!=this.__bU,o=i.position!=this.__bV;(h||o)&&(this.__bU=i.side,this.__bV=i.position,e.__bI=h,e.__bJ=o,e.side=i.side,e.position=i.position,e.atPlace=i.atPlace,e.anchor=this.__bN,c.__bJ(e))},__by:function(_){var t=h.fromPoint(_.clientX,_.clientY);if(c.__bL(_),this.__bA=_,this.__bp=!0,this.__bX(),this.__bB(),this.__bY||this.__bZ||!t)return delete this.__c_,delete this.__bU,void delete this.__bV;if(this.__c_!=t){if(t.id===s)return;this.__c_=t,delete this.__bU;var e=this.__bP(t);if(e){e!=this.__ca&&(this.__ca=e,this.__i.trigger({type:"enterzone",zone:e,changePointer:c.__bK}));var o=this.__bq(t,e);if(!o.child)return;var d=n(o.child),r=d.offset(),b={x:r.left,y:r.top,width:d.outerWidth(),height:d.outerHeight()};r=(d=n(o.zone)).offset(),this.__cb={x:r.left,y:r.top,scrollX:d.prop("scrollLeft"),scrollY:d.prop("scrollTop"),maxWidth:d.prop("scrollWidth"),maxHeight:d.prop("scrollHeight"),width:d.width(),height:d.height()},this.__bW(this.__cc=b,_,this.__bR={child:this.__bQ,bound:b,zone:o.zone,hover:o.child})}else this.__ca&&(this.__i.trigger({type:"leavezone",zone:this.__ca,changePointer:c.__bK}),delete this.__ca)}else this.__cc&&i.inside(t,this.__bR.zone)?this.__bW(this.__cc,_,this.__bR):(delete this.__bU,delete this.__bV,this.__bO&&(c.__bF(),c.__bK()))},__bz:function(){this.__cd(),this.__bC(),c.__bz({child:this.__bQ});var _=this.__bV,t=this.__bU,e=this.__bp,i=this.__bR,h=this.__bQ;if(e&&(_||t)){var o=i.zone,n=this.__bN,s=3===n?t:_;if(1&n&&1&s||2&s&&2&n)i.hover==o?o.appendChild(h):o.insertBefore(h,i.hover);else if(8&s&&2&n||4&s&&1&n){for(var d=i.hover.nextSibling;d&&1!=d.nodeType;)d=d.nextSibling;o.insertBefore(h,d),d||(o.scrollTop=o.scrollHeight)}}i&&this.__i.trigger({type:"dragfinish",moved:e,dragNode:h,dragZone:this.__bT,dropNode:i.hover,dropZone:i.zone,outZone:!this.__ca}),delete this.__bQ,delete this.__bT,delete this.__c_,delete this.__bR,delete this.__cc,delete this.__bV,delete this.__bU,delete this.__bA,delete this.__bZ,delete this.__ca,delete this.__cb,delete this.__bY,delete this.__bp},__bX:function(){var _=this;_.__ce||(_.__ce=function(){var t=_.__cb;if(t){var e=_.__bR.zone,i=0,h=0,o=_.__bA;o.pageX>t.x&&o.pageY>t.y&&o.pageX<t.x+t.width&&o.pageY<t.y+t.height?(o.pageX-t.x<20&&t.scrollX>0?i=-Math.min(7,t.scrollX):t.x+t.width-o.pageX<20&&t.scrollX+t.width<t.maxWidth&&(i=Math.min(7,t.maxWidth-t.scrollX-t.width)),o.pageY-t.y<20&&t.scrollY>0?h=-Math.min(7,t.scrollY):t.y+t.height-o.pageY<20&&t.scrollY+t.height<t.maxHeight&&(h=Math.min(7,t.maxHeight-t.scrollY-t.height)),i||h?(_.__bY=!0,_.__cf=!0,e.scrollTop+=h,e.scrollLeft+=i,t.scrollX+=i,t.scrollY+=h,delete _.__bp,c.__bF(),c.__bK()):(delete _.__bY,delete _.__cf)):(delete _.__bY,delete _.__cf)}},o.__ag(30,_.__ce))},__bB:function(){var _=this;_.__bD||(_.__bD=function(){if(!_.__cf){var t=0,e=0,i=_.__bA,h=r.scrollTop(),o=r.height(),n=b.height(),s=b.width(),d=r.width(),a=r.scrollLeft();i.pageX-a<20&&a>0?t=-Math.min(7,a):a+d-i.pageX<20&&a+d<s&&(t=Math.min(7,s-d-a)),i.pageY-h<20&&h>0?e=-Math.min(7,h):h+o-i.pageY<20&&h+o<n&&(e=Math.min(7,n-o-h)),t||e?(_.__bZ=!0,i.pageX+=t,i.pageY+=e,window.scrollBy(t,e),delete _.__bp,c.__bF(),c.__bL(i),c.__bK()):delete _.__bZ}},o.__ag(30,_.__bD))},__cd:function(){this.__ce&&(o.__ai(this.__ce),delete this.__ce,delete this.__cf)},__bC:function(){this.__bD&&(o.__ai(this.__bD),delete this.__bD)}})});