define("mx-dragsort/index",["magix","../mx-dragdrop/index","../mx-runner/index","$"],(_,t,e)=>{var i=_("magix"),h=_("../mx-dragdrop/index"),o=_("../mx-runner/index"),n=_("$");i.applyStyle("_o",'._cn{left:-1000px;top:0;background:#f96447}._cn,._co{position:absolute}._co{width:26px;height:26px}._cp{background:#479b47}._cq{background:#e94f4f}._co:after{font-size:20px;line-height:26px;color:#fff;position:absolute;left:0;right:0;top:0;bottom:0;text-align:center}._cp:after{content:"✓"}._cq:after{content:"✗"}');var s=i.guid("dbar_"),d=i.guid("pt_"),r=n(window),c=n(document),b={__bF:function(){n("#"+s).length||n('<div class="_cn" id="'+s+'"/>').appendTo("body")},__bp:function(_){_.child&&(n(_.child).css({opacity:.4}),this.__bF())},__bA:function(_){_&&_.child&&n(_.child).css({opacity:1}),this.__bG(),this.__bH()},__bG:function(){n("#"+s).css({left:-1e5})},__bI:function(_,t){var e=n("#"+s),i=!1;2&_.anchor&&(2&t?(e.css({height:2,width:_.bound.width,top:_.bound.y-1,left:_.bound.x}),i=!0):8&t&&(e.css({height:2,width:_.bound.width,top:_.bound.y+_.bound.height-1,left:_.bound.x}),i=!0)),!i&&1&_.anchor&&(1&t?e.css({height:_.bound.height,width:2,top:_.bound.y,left:_.bound.x-1}):4&t&&e.css({height:_.bound.height,width:2,top:_.bound.y,left:_.bound.x+_.bound.width-1}))},__bK:function(_){_.atPlace&&_.child!=_.hover?(3==_.anchor?_.__bJ&&this.__bI(_,_.side):_.__bK&&this.__bI(_,_.position),this.__bL(!0)):(this.__bG(),this.__bL())},__bM:function(_){var t=n("#"+d);t.length||(t=n('<div class="_co" id="'+d+'"/>')).appendTo("body");var e=Math.max(0,Math.min(_.pageX+10,c.width()-t.width())),i=Math.max(0,Math.min(_.pageY+18,c.height()-t.height()));t.css({left:e,top:i,display:"block"})},__bL:function(_){var t=n("#"+d);_?t.removeClass("_cq").addClass("_cp"):t.addClass("_cq").removeClass("_cp")},__bH:function(){n("#"+d).hide()}};e.exports=i.View.extend({mixins:[h],init:function(_){var t=this,e=n("#"+t.id);e.on("mousedown",_.selector,function(_){_.preventDefault(),t.__bp(_)}),t.on("destroy",function(){e.off("mousedown")}),t.__j=e;var h=[e.get(0)];_.drops&&(h=h.concat(_.drops.split(","))),t.__bN=h;var o=_.horizonal+""=="true",s=_.vertical+""=="true";o||s||(s=!0);var d=0;o&&(d|=1),s&&(d|=2),t.__bO=d;var r=!0;i.has(_,"sort")&&(r=_.sort+""=="true"),t.__bP=r},__bQ:function(_){for(var t=0,e=this.__bN;t<e.length;t++){var h=e[t];if(i.inside(_,h))return i.node(h)}return null},__br:function(_,t){var e=null;if(t||(t=this.__bQ(_)),!this.__bP&&this.__bR)return{child:this.__bR,zone:t};for(;t!=_;){if(_.parentNode==t){e=_;break}_=_.parentNode}return!t||t.firstChild||e||(e=t),e&&"false"===e.getAttribute("ds-draggable")&&(e=null),{child:e,zone:t}},__bT:function(_,t){var e=0,i=0,h=-1,o=-1,n=-1,s=-1,d=!1;if(t.pageX>=_.x&&t.pageX<=_.x+_.width&&t.pageY>=_.y&&t.pageY<=_.y+_.height&&(e|=t.pageX<=_.x+_.width/2?1:4,h=t.pageX-_.x,n=_.x+_.width-t.pageX,e|=t.pageY<=_.y+_.height/2?2:8,o=t.pageY-_.y,s=_.y+_.height-t.pageY,d=!0),d){var r=Math.min(h,o,n,s);r>-1&&(r==h?i=1:r==o?i=2:r==n?i=4:r==s&&(i=8))}var c=this.__bS;return c&&c.zone===c.hover&&(e=2,i=1),{position:e,atPlace:d,side:i}},__bp:function(_){if(1===_.which){var t=this,e=t.__br(_.target);e.child&&(t.__bR=e.child,t.__bU=e.zone,t.__j.trigger({type:"dragbegin",dragNode:e.child,dragZone:e.zone}),b.__bp(e),t.dragdrop(e.zone,function(_){t.__bz(_)},function(_){t.__bA(_)}))}},__bX:function(_,t,e){var i=this.__bT(_,t),h=i.side!=this.__bV,o=i.position!=this.__bW;(h||o)&&(this.__bV=i.side,this.__bW=i.position,e.__bJ=h,e.__bK=o,e.side=i.side,e.position=i.position,e.atPlace=i.atPlace,e.anchor=this.__bO,b.__bK(e))},__bz:function(_){var t=h.fromPoint(_.clientX,_.clientY);if(b.__bM(_),this.__bB=_,this.__bq=!0,this.__bY(),this.__bC(),this.__bZ||this.__c_||!t)return delete this.__ca,delete this.__bV,void delete this.__bW;if(this.__ca!=t){if(t.id===s)return;this.__ca=t,delete this.__bV;var e=this.__bQ(t);if(e){e!=this.__cb&&(this.__cb=e,this.__j.trigger({type:"enterzone",zone:e,changePointer:b.__bL}));var o=this.__br(t,e);if(!o.child)return;var d=n(o.child),r=d.offset(),c={x:r.left,y:r.top,width:d.outerWidth(),height:d.outerHeight()};r=(d=n(o.zone)).offset(),this.__cc={x:r.left,y:r.top,scrollX:d.prop("scrollLeft"),scrollY:d.prop("scrollTop"),maxWidth:d.prop("scrollWidth"),maxHeight:d.prop("scrollHeight"),width:d.width(),height:d.height()},this.__bX(this.__cd=c,_,this.__bS={child:this.__bR,bound:c,zone:o.zone,hover:o.child})}else this.__cb&&(this.__j.trigger({type:"leavezone",zone:this.__cb,changePointer:b.__bL}),delete this.__cb)}else this.__cd&&i.inside(t,this.__bS.zone)?this.__bX(this.__cd,_,this.__bS):(delete this.__bV,delete this.__bW,this.__bP&&(b.__bG(),b.__bL()))},__bA:function(){this.__ce(),this.__bD(),b.__bA({child:this.__bR});var _=this.__bW,t=this.__bV,e=this.__bq,i=this.__bS,h=this.__bR;if(e&&(_||t)){var o=i.zone,n=this.__bO,s=3===n?t:_;if(1&n&&1&s||2&s&&2&n)i.hover==o?o.appendChild(h):o.insertBefore(h,i.hover);else if(8&s&&2&n||4&s&&1&n){for(var d=i.hover.nextSibling;d&&1!=d.nodeType;)d=d.nextSibling;o.insertBefore(h,d),d||(o.scrollTop=o.scrollHeight)}}i&&this.__j.trigger({type:"dragfinish",moved:e,dragNode:h,dragZone:this.__bU,dropNode:i.hover,dropZone:i.zone,outZone:!this.__cb}),delete this.__bR,delete this.__bU,delete this.__ca,delete this.__bS,delete this.__cd,delete this.__bW,delete this.__bV,delete this.__bB,delete this.__c_,delete this.__cb,delete this.__cc,delete this.__bZ,delete this.__bq},__bY:function(){var _=this;_.__cf||(_.__cf=function(){var t=_.__cc;if(t){var e=_.__bS.zone,i=0,h=0,o=_.__bB;o.pageX>t.x&&o.pageY>t.y&&o.pageX<t.x+t.width&&o.pageY<t.y+t.height?(o.pageX-t.x<20&&t.scrollX>0?i=-Math.min(7,t.scrollX):t.x+t.width-o.pageX<20&&t.scrollX+t.width<t.maxWidth&&(i=Math.min(7,t.maxWidth-t.scrollX-t.width)),o.pageY-t.y<20&&t.scrollY>0?h=-Math.min(7,t.scrollY):t.y+t.height-o.pageY<20&&t.scrollY+t.height<t.maxHeight&&(h=Math.min(7,t.maxHeight-t.scrollY-t.height)),i||h?(_.__bZ=!0,_.__cg=!0,e.scrollTop+=h,e.scrollLeft+=i,t.scrollX+=i,t.scrollY+=h,delete _.__bq,b.__bG(),b.__bL()):(delete _.__bZ,delete _.__cg)):(delete _.__bZ,delete _.__cg)}},o.__ah(30,_.__cf))},__bC:function(){var _=this;_.__bE||(_.__bE=function(){if(!_.__cg){var t=0,e=0,i=_.__bB,h=r.scrollTop(),o=r.height(),n=c.height(),s=c.width(),d=r.width(),a=r.scrollLeft();i.pageX-a<20&&a>0?t=-Math.min(7,a):a+d-i.pageX<20&&a+d<s&&(t=Math.min(7,s-d-a)),i.pageY-h<20&&h>0?e=-Math.min(7,h):h+o-i.pageY<20&&h+o<n&&(e=Math.min(7,n-o-h)),t||e?(_.__c_=!0,i.pageX+=t,i.pageY+=e,window.scrollBy(t,e),delete _.__bq,b.__bG(),b.__bM(i),b.__bL()):delete _.__c_}},o.__ah(30,_.__bE))},__ce:function(){this.__cf&&(o.__aj(this.__cf),delete this.__cf,delete this.__cg)},__bD:function(){this.__bE&&(o.__aj(this.__bE),delete this.__bE)}})});