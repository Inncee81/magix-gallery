define("mx-dragsort/index",["magix","../mx-dragdrop/index","../mx-runner/index","$"],(_,t,e)=>{var i=_("magix"),h=_("../mx-dragdrop/index"),o=_("../mx-runner/index"),n=_("$");i.applyStyle("_o",'._cn{left:-1000px;top:0;background:#f96447}._cn,._co{position:absolute}._co{width:26px;height:26px}._cp{background:#479b47}._cq{background:#e94f4f}._co:after{font-size:20px;line-height:26px;color:#fff;position:absolute;left:0;right:0;top:0;bottom:0;text-align:center}._cp:after{content:"✓"}._cq:after{content:"✗"}');var s=i.guid("dbar_"),b=i.guid("pt_"),d=n(window),r=n(document),l={__by:function(){n("#"+s).length||n('<div class="_cn" id="'+s+'"/>').appendTo("body")},__bi:function(_){_.child&&(n(_.child).css({opacity:.4}),this.__by())},__bt:function(_){_.child&&n(_.child).css({opacity:1}),this.__bz(),this.__bA()},__bz:function(){n("#"+s).css({left:-1e5})},__bB:function(_,t){var e=n("#"+s),i=!1;2&_.anchor&&(2&t?(e.css({height:2,width:_.bound.width,top:_.bound.y-1,left:_.bound.x}),i=!0):8&t&&(e.css({height:2,width:_.bound.width,top:_.bound.y+_.bound.height-1,left:_.bound.x}),i=!0)),!i&&1&_.anchor&&(1&t?e.css({height:_.bound.height,width:2,top:_.bound.y,left:_.bound.x-1}):4&t&&e.css({height:_.bound.height,width:2,top:_.bound.y,left:_.bound.x+_.bound.width-1}))},__bD:function(_){_.atPlace&&_.child!=_.hover?(3==_.anchor?_.__bC&&this.__bB(_,_.side):_.__bD&&this.__bB(_,_.position),this.__bE(!0)):(this.__bz(),this.__bE())},__bF:function(_){var t=n("#"+b);t.length||(t=n('<div class="_co" id="'+b+'"/>')).appendTo("body");var e=Math.max(0,Math.min(_.pageX+10,r.width()-t.width())),i=Math.max(0,Math.min(_.pageY+18,r.height()-t.height()));t.css({left:e,top:i,display:"block"})},__bE:function(_){var t=n("#"+b);_?t.removeClass("_cq").addClass("_cp"):t.addClass("_cq").removeClass("_cp")},__bA:function(){n("#"+b).hide()}};e.exports=i.View.extend({init:function(_){var t=this,e=n("#"+t.id);e.on("mousedown",_.selector,function(_){_.preventDefault(),t.__bi(_)}),t.on("destroy",function(){e.off("mousedown")}),t.__h=e;var h=[e.get(0)];_.drops&&(h=h.concat(_.drops.split(","))),t.__bG=h;var o=_.horizonal+""=="true",s=_.vertical+""=="true";o||s||(s=!0);var b=0;o&&(b|=1),s&&(b|=2),t.__bH=b;var d=!0;i.has(_,"sort")&&(d=_.sort+""=="true"),t.__bI=d},__bJ:function(_){for(var t=0,e=this.__bG;t<e.length;t++){var h=e[t];if(i.inside(_,h))return i.node(h)}return null},__bk:function(_,t){var e=null;if(t||(t=this.__bJ(_)),!this.__bI&&this.__bK)return{child:this.__bK,zone:t};for(;t!=_;){if(_.parentNode==t){e=_;break}_=_.parentNode}return!t||t.firstChild||e||(e=t),e&&"false"===e.getAttribute("ds-draggable")&&(e=null),{child:e,zone:t}},__bM:function(_,t){var e=0,i=0,h=-1,o=-1,n=-1,s=-1,b=!1;if(t.pageX>=_.x&&t.pageX<=_.x+_.width&&t.pageY>=_.y&&t.pageY<=_.y+_.height&&(e|=t.pageX<=_.x+_.width/2?1:4,h=t.pageX-_.x,n=_.x+_.width-t.pageX,e|=t.pageY<=_.y+_.height/2?2:8,o=t.pageY-_.y,s=_.y+_.height-t.pageY,b=!0),b){var d=Math.min(h,o,n,s);d>-1&&(d==h?i=1:d==o?i=2:d==n?i=4:d==s&&(i=8))}var r=this.__bL;return r&&r.zone===r.hover&&(e=2,i=1),{position:e,atPlace:b,side:i}},__bi:function(_){if(1===_.which){var t=this,e=t.__bk(_.target);e.child&&(t.__bK=e.child,t.__bN=e.zone,t.__h.trigger({type:"dragbegin",dragNode:e.child,dragZone:e.zone}),l.__bi(e),h.begin(e.zone,function(_){t.__bs(_)},function(_){t.__bt(_)}))}},__bQ:function(_,t,e){var i=this.__bM(_,t),h=i.side!=this.__bO,o=i.position!=this.__bP;(h||o)&&(this.__bO=i.side,this.__bP=i.position,e.__bC=h,e.__bD=o,e.side=i.side,e.position=i.position,e.atPlace=i.atPlace,e.anchor=this.__bH,l.__bD(e))},__bs:function(_){var t=h.fromPoint(_.clientX,_.clientY);if(l.__bF(_),this.__bu=_,this.__bj=!0,this.__bR(),this.__bv(),this.__bS||this.__bT||!t)return delete this.__bU,delete this.__bO,void delete this.__bP;if(this.__bU!=t){if(t.id===s)return;this.__bU=t,delete this.__bO;var e=this.__bJ(t);if(e){e!=this.__bV&&(this.__bV=e,this.__h.trigger({type:"enterzone",zone:e,changePointer:l.__bE}));var o=this.__bk(t,e);if(!o.child)return;var b=n(o.child),d=b.offset(),r={x:d.left,y:d.top,width:b.outerWidth(),height:b.outerHeight()};d=(b=n(o.zone)).offset(),this.__bW={x:d.left,y:d.top,scrollX:b.prop("scrollLeft"),scrollY:b.prop("scrollTop"),maxWidth:b.prop("scrollWidth"),maxHeight:b.prop("scrollHeight"),width:b.width(),height:b.height()},this.__bQ(this.__bX=r,_,this.__bL={child:this.__bK,bound:r,zone:o.zone,hover:o.child})}else this.__bV&&(this.__h.trigger({type:"leavezone",zone:this.__bV,changePointer:l.__bE}),delete this.__bV)}else this.__bX&&i.inside(t,this.__bL.zone)?this.__bQ(this.__bX,_,this.__bL):(delete this.__bO,delete this.__bP,this.__bI&&(l.__bz(),l.__bE()))},__bt:function(){this.__bY(),this.__bw(),l.__bt({child:this.__bK});var _=this.__bP,t=this.__bO,e=this.__bj,i=this.__bL,h=this.__bK;if(e&&(_||t)){var o=i.zone,n=this.__bH,s=3===n?t:_;if(1&n&&1&s||2&s&&2&n)i.hover==o?o.appendChild(h):o.insertBefore(h,i.hover);else if(8&s&&2&n||4&s&&1&n){for(var b=i.hover.nextSibling;b&&1!=b.nodeType;)b=b.nextSibling;o.insertBefore(h,b),b||(o.scrollTop=o.scrollHeight)}}i&&this.__h.trigger({type:"dragfinish",moved:e,dragNode:h,dragZone:this.__bN,dropNode:i.hover,dropZone:i.zone,outZone:!this.__bV}),delete this.__bK,delete this.__bN,delete this.__bU,delete this.__bL,delete this.__bX,delete this.__bP,delete this.__bO,delete this.__bu,delete this.__bT,delete this.__bV,delete this.__bW,delete this.__bS,delete this.__bj},__bR:function(){var _=this;_.__bZ||(_.__bZ=function(){var t=_.__bW;if(t){var e=_.__bL.zone,i=0,h=0,o=_.__bu;o.pageX>t.x&&o.pageY>t.y&&o.pageX<t.x+t.width&&o.pageY<t.y+t.height?(o.pageX-t.x<20&&t.scrollX>0?i=-Math.min(7,t.scrollX):t.x+t.width-o.pageX<20&&t.scrollX+t.width<t.maxWidth&&(i=Math.min(7,t.maxWidth-t.scrollX-t.width)),o.pageY-t.y<20&&t.scrollY>0?h=-Math.min(7,t.scrollY):t.y+t.height-o.pageY<20&&t.scrollY+t.height<t.maxHeight&&(h=Math.min(7,t.maxHeight-t.scrollY-t.height)),i||h?(_.__bS=!0,_.__c_=!0,e.scrollTop+=h,e.scrollLeft+=i,t.scrollX+=i,t.scrollY+=h,delete _.__bj,l.__bz(),l.__bE()):(delete _.__bS,delete _.__c_)):(delete _.__bS,delete _.__c_)}},o.__ad(30,_.__bZ))},__bv:function(){var _=this;_.__bx||(_.__bx=function(){if(!_.__c_){var t=0,e=0,i=_.__bu,h=d.scrollTop(),o=d.height(),n=r.height(),s=r.width(),b=d.width(),a=d.scrollLeft();i.pageX-a<20&&a>0?t=-Math.min(7,a):a+b-i.pageX<20&&a+b<s&&(t=Math.min(7,s-b-a)),i.pageY-h<20&&h>0?e=-Math.min(7,h):h+o-i.pageY<20&&h+o<n&&(e=Math.min(7,n-o-h)),t||e?(_.__bT=!0,i.pageX+=t,i.pageY+=e,window.scrollBy(t,e),delete _.__bj,l.__bz(),l.__bF(i),l.__bE()):delete _.__bT}},o.__ad(30,_.__bx))},__bY:function(){this.__bZ&&(o.__af(this.__bZ),delete this.__bZ,delete this.__c_)},__bw:function(){this.__bx&&(o.__af(this.__bx),delete this.__bx)}})});