define("mx-dialog/index",["magix","$","./alert","./confirm"],(i,t,o)=>{var e=i("magix");i("./alert"),i("./confirm"),e.applyStyle("_m","._bZ{position:absolute}._c_{position:relative;background-color:#fff;border-radius:4px;border:1px solid #e6e6e6}._ca{position:absolute;cursor:pointer;opacity:.2;z-index:1;top:16px;right:10px}._ca:focus,._ca:hover{opacity:.5}._cb{font-size:22px;font-weight:400}._cc{position:fixed;top:0;right:0;left:0;bottom:0;background-color:#000;opacity:.5;display:none}._cd{-webkit-filter:blur(3px);filter:blur(3px)}._ce{-webkit-animation:_b .3s;animation:_b .3s;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}._cf{position:absolute;right:10px;top:0;width:1px;height:0}._cg{padding:80px 0}@-webkit-keyframes _b{0%{opacity:0}to{opacity:.5}}@keyframes _b{0%{opacity:0}to{opacity:.5}}._ch{-webkit-animation:_c .2s;animation:_c .2s;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}@-webkit-keyframes _c{0%{opacity:.5}to{opacity:0}}@keyframes _c{0%{opacity:.5}to{opacity:0}}._ci{margin-bottom:50px;min-height:60px}._cj{position:fixed;width:100%;height:100%;overflow:auto;left:0;top:0}._ck{-webkit-animation:_d .3s;animation:_d .3s;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}@-webkit-keyframes _d{0%{margin-top:-50px;opacity:0}to{margin-top:0;opacity:1}}@keyframes _d{0%{margin-top:-50px;opacity:0}to{margin-top:0;opacity:1}}._cl{-webkit-animation:_e .2s;animation:_e .2s;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}@-webkit-keyframes _e{0%{margin-top:0;opacity:1}to{margin-top:-50px;opacity:0}}@keyframes _e{0%{margin-top:0;opacity:1}to{margin-top:-50px;opacity:0}}");var a=i("$"),n=a(window),c=500,d=[];o.exports=e.View.extend({tmpl:function(i,t){var o="",e={"&":"amp","<":"lt",">":"gt",'"':"#34","'":"#39","`":"#96"},a=/[&<>"'`]/g,n=function(i){return null==i?"":""+i},c=function(i){return"&"+e[i]+";"},d=function(i){return n(i).replace(a,c)};return o+='<div class="_cc _ce" style="display:block;z-index:'+d(t.zIndex-1)+'" id="mask_'+d(t.viewId)+'"></div><div class="_cj" style="z-index:'+d(t.zIndex)+';"><div class="_bZ _ck" data-spm-protocol="i" id="body_'+d(t.viewId)+'" style="left:'+d(t.left)+"px;top:"+d(t.top)+"px;width:"+d(t.width)+'px;"><input id="focus_'+d(t.viewId)+'" class="_cf"><span class="__ _cb _ca '+d(t.closable?"":"_ah")+'" mx-click="__bm()">&#xe67f;</span><div class="_c_ _ci" id="cnt_'+d(t.viewId)+'"><div class="_aC _cg"><span class="_aD"></span></div></div></div></div>'},init:function(i){var t=this,o=a("#app");t.on("destroy",function(){!function(i){for(var t=d.length-1;t>=0;t--)if(d[t].id==i.id){d.splice(t,1);break}}(t),500==(c-=2)&&o.removeClass("_cd"),a("#"+t.id).trigger("close").remove()}),e.has(i,"closable")||(i.closable=!0),t.updater.set(i),500==c&&o.addClass("_cd"),c+=2,d.push(t)},render:function(){var i=this,t=i.updater,o=t.get();t.set({zIndex:c,viewId:i.id}).digest(),a("#"+i.id).show(),a("#focus_"+i.id).focus(),i.owner.mountVframe("cnt_"+i.id,o.view,o),setTimeout(i.wrapAsync(function(){a("#body_"+i.id).removeClass("_ck"),a("#mask_"+i.id).removeClass("_ce")}),300)},__bl:function(i){e.Vframe.get("cnt_"+this.id).invoke("fire",["unload",i])},"__bm<click>":function(){a("#"+this.id).trigger("dlg_close")},"$doc<keyup>":function(i){if(27==i.keyCode){var t=d[d.length-1];if(t==this&&t.updater.get("closable")){a("#"+t.id).trigger("dlg_close")}}}},{__bn:function(i,t){var o=e.guid("dlg_");a(document.body).append('<div id="'+o+'" style="display:none" />');var n,c=i.owner.mountVframe(o,"mx-dialog/index",t),d=a("#"+o);return d.on("dlg_close",function(){if(!d.data("closing")&&!n){var t=function(){d.data("closing",1),a("#body_"+o).addClass("_cl"),a("#mask_"+o).addClass("_ch"),setTimeout(function(){i.owner&&i.owner.unmountVframe(o)},200)},e={prevent:function(){n=1},resolve:function(){e.p=1,n=0,t()},reject:function(){e.p=1,n=0}};c.invoke("__bl",[e]),n||e.p||t()}})},alert:function(i,t,o){this.confirm(i,t,null,o,"alert")},confirm:function(i,t,o,e,a){this.mxDialog("mx-dialog/"+(a||"confirm"),{body:i,cancelCallback:o,enterCallback:t,title:e,modal:!0,width:400,closable:!1,left:(n.width()-400)/2,top:Math.max((n.height()-220)/2,0)})},mxDialog:function(i,t){var o,a,c=this,d={view:i};return seajs.use(i,c.wrapAsync(function(r){var s="$dlg_"+i;c[s]||(c[s]=1,e.mix(d,r.dialogOptions),e.mix(d,t),d.width||(d.width=500),d.left||(d.left=(n.width()-d.width)/2),d.top||(d.top=100),d.dialog={close:function(){o&&o.trigger("dlg_close")}},(o=c.__bn(c,d)).on("close",function(){delete c[s],a&&a()}))})),{close:function(){o&&o.trigger("dlg_close")},whenClose:function(i){a=i}}}})});