define("mx-dialog/index",["magix","$","./alert","./confirm"],(i,o,t)=>{var e=i("magix");i("./alert"),i("./confirm"),e.applyStyle("_l","._bQ{position:absolute}._bR{position:relative;background-color:#fff;border-radius:4px;border:1px solid #e6e6e6}._bS{position:absolute;-webkit-appearance:none;-moz-appearance:none;appearance:none;padding:0;margin:13px 15px 0 0;cursor:pointer;background:transparent;border:0;float:right;font-size:21px;font-weight:700;line-height:1;color:#000;text-shadow:0 1px 0 #fff;filter:alpha(opacity=20);opacity:.2;z-index:1041;top:16px;right:10px;margin:0}._bS:focus,._bS:hover{color:#000;text-decoration:none;cursor:pointer;filter:alpha(opacity=50);opacity:.5}._bT{font-size:22px;font-weight:400}._bU{position:fixed;top:0;right:0;left:0;bottom:0;background-color:#000;filter:alpha(opacity=50);opacity:.5;display:none;z-index:1039}._bV{-webkit-filter:blur(3px);filter:blur(3px)}._bW{-webkit-animation:_b .3s;animation:_b .3s;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}._bX{position:absolute;right:10px;top:0;width:1px;height:0}._bY{padding:80px 0}@-webkit-keyframes _b{0%{opacity:0}to{opacity:.5}}@keyframes _b{0%{opacity:0}to{opacity:.5}}._bZ{-webkit-animation:_c .2s;animation:_c .2s;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}@-webkit-keyframes _c{0%{opacity:.5}to{opacity:0}}@keyframes _c{0%{opacity:.5}to{opacity:0}}._c_{margin-bottom:50px;min-height:60px}._ca{position:fixed;width:100%;height:100%;overflow:auto;left:0;top:0}._cb{-webkit-animation:_d .3s;animation:_d .3s;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}@-webkit-keyframes _d{0%{margin-top:-50px;opacity:0}to{margin-top:0;opacity:1}}@keyframes _d{0%{margin-top:-50px;opacity:0}to{margin-top:0;opacity:1}}._cc{-webkit-animation:_e .2s;animation:_e .2s;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}@-webkit-keyframes _e{0%{margin-top:0;opacity:1}to{margin-top:-50px;opacity:0}}@keyframes _e{0%{margin-top:0;opacity:1}to{margin-top:-50px;opacity:0}}");var a=i("$"),n=a(window),r=500,s=[];t.exports=e.View.extend({tmpl:{html:'<div class="_bU _bW" style="display:block;z-index:<%=$$.zIndex-1%>" id="mask_<%=$$.viewId%>"></div><div class="_ca" style="z-index:<%=$$.zIndex%>;"><div class="_bQ _cb" data-spm-protocol="i" id="body_<%=$$.viewId%>" style="left:<%=$$.left%>px;top:<%=$$.top%>px;width:<%=$$.width%>px;"><input id="focus_<%=$$.viewId%>" class="_bX"><button type="button" mx-click="__aN()" class="_bS <%=$$.closable?\'\':\'_ah\'%>"><span class="__ _bT">&#xe67f;</span></button><div class="_bR _c_" id="cnt_<%=$$.viewId%>"><div class="_aC _bY"><span class="_aD"></span></div></div></div></div>',subs:[]},init:function(i){var o=this,t=a("#app");o.on("destroy",function(){!function(i){for(var o=s.length-1;o>=0;o--)if(s[o].id==i.id){s.splice(o,1);break}}(o),500==(r-=2)&&t.removeClass("_bV"),a("#"+o.id).trigger("close").remove()}),e.has(i,"closable")||(i.closable=!0),o.updater.set(i),500==r&&t.addClass("_bV"),r+=2,s.push(o)},render:function(){var i=this,o=i.updater,t=o.get();o.set({zIndex:r,viewId:i.id}).digest(),a("#"+i.id).show(),a("#focus_"+i.id).focus(),i.owner.mountVframe("cnt_"+i.id,t.view,t),setTimeout(i.wrapAsync(function(){a("#body_"+i.id).removeClass("_cb"),a("#mask_"+i.id).removeClass("_bW")}),300)},__aM:function(i){e.Vframe.get("cnt_"+this.id).invoke("fire",["unload",i])},"__aN<click>":function(){a("#"+this.id).trigger("dlg_close")},"$doc<keyup>":function(i){if(27==i.keyCode){var o=s[s.length-1];if(o==this&&o.updater.get("closable")){a("#"+o.id).trigger("dlg_close")}}}},{__aO:function(i,o){var t=e.guid("dlg_");a(document.body).append('<div id="'+t+'" style="display:none" />');var n,r=i.owner.mountVframe(t,"mx-dialog/index",o),s=a("#"+t);return s.on("dlg_close",function(){if(!s.data("closing")&&!n){var o=function(){s.data("closing",1),a("#body_"+t).addClass("_cc"),a("#mask_"+t).addClass("_bZ"),setTimeout(function(){i.owner&&i.owner.unmountVframe(t)},200)},e={prevent:function(){n=1},resolve:function(){e.p=1,n=0,o()},reject:function(){e.p=1,n=0}};r.invoke("__aM",[e]),n||e.p||o()}})},alert:function(i,o,t){this.confirm(i,o,null,t,"alert")},confirm:function(i,o,t,e,a){this.mxDialog("mx-dialog/"+(a||"confirm"),{body:i,cancelCallback:t,enterCallback:o,title:e,modal:!0,width:400,closable:!1,left:(n.width()-400)/2,top:Math.max((n.height()-220)/2,0)})},mxDialog:function(i,o){var t,a,r=this,s={view:i};return seajs.use(i,r.wrapAsync(function(d){var l="$dlg_"+i;r[l]||(r[l]=1,e.mix(s,d.dialogOptions),e.mix(s,o),s.width||(s.width=500),s.left||(s.left=(n.width()-s.width)/2),s.top||(s.top=100),s.dialog={close:function(){t&&t.trigger("dlg_close")}},(t=r.__aO(r,s)).on("close",function(){delete r[l],a&&a()}))})),{close:function(){t&&t.trigger("dlg_close")},whenClose:function(i){a=i}}}})});