define("mx-day/month",["magix","$","mx-dragselect/index"],(e,a,_)=>{e("mx-dragselect/index");var t=e("magix");t.applyStyle("_k","._bL{padding:0;height:38.4px;overflow:hidden;cursor:default;border:none;border-right:1px solid #e6e6e6}._bM{border-right:none}._bN{background-color:#f37b63}._bO{opacity:0}._bP{cursor:not-allowed;background-color:#fbfbfb}");var r=e("$"),i={MON:1,TUE:2,WED:3,THU:4,FRI:5,SAT:6,SUN:0},n={1:"MON",2:"TUE",3:"WED",4:"THU",5:"FRI",6:"SAT",0:"SUN"},s=function(e,a){e=(e=e||"").slice(0,a);for(var _=0;_<a;_++)e.length<=_&&(e+="0");return e};_.exports=t.View.extend({tmpl:{html:'<table class="_W _X"><tbody><tr mx-guid="g0" mx-change="__e()" mx-dragbegin="__aF()" mx-dragfinish="__aG()" mx-view="mx-dragselect/index?selector=td%5Benable%3Dtrue%5D">1</tr></tbody></table>',subs:[{keys:["days","selected"],path:'tr[mx-guid="g0"]',tmpl:'<%for(var _=0;_<31;_++){%><td data-day="<%=_%>" enable="<%=_<$$.days?true:false%>" class="_bL<%if($$.selected.charAt(_)===\'1\'){%> _bN<%}if(_==30){%> _bM<%}if(_>=$$.days){%> _bP<%}%>"><span class="_bO"><%=(\'0\'+(_+1)).slice(-2)%></span></td><%}%>',s:"1"}]},init:function(e){this.assign(e),this.__h=r("#"+this.id)},assign:function(e){var a=function(e,a){return 32-new Date(e,a,32).getDate()}(e.year,e.month);return this.__ay=a,this.__az=e.year,this.__aA=e.month,this.__aB=s(e.selected,a),!0},__p:function(e){var a=this;if(e){var _=a.__ay;a.__aB=s(e,_),a.render()}},__at:function(e,a){for(var _=this,t=_.__aB,r=_.__az,n=_.__aA,s=_.__ay,d=i[e],o=1;o<=s;o++){new Date(r,n,o).getDay()===d&&(t=t.slice(0,o-1)+(a?"1":"0")+t.slice(o))}_.__aB=t,_.render(!0)},render:function(e){var a=this;a.updater.digest({days:a.__ay,selected:a.__aB}),a.__aC=function(e){for(var a={},_=e.length;_--;)"1"===e.charAt(_)&&(a[_]=1);return a}(a.__aB),a.__h.trigger({type:"sync",ignoreSync:e,days:a.__aB})},__aq:function(){for(var e=this.__aB,a=this.__az,_=this.__aA,r=this.__ay,i={},s=1;s<=r;s++)if("1"!=e.charAt(s-1)){var d=new Date(a,_,s);i[n[d.getDay()]]=1}return t.keys(i)},"__e<change,click>":function(e){e.stopPropagation();var a=r(e.node),_=this,i=_.updater.get(),n=a.data("day"),s=_.__aC,d=_.__aD;"add"==e.action?s[n]?(a.removeClass("_bN"),delete s[n],"drag"==e.mode&&(d[n]=1)):(a.addClass("_bN"),s[n]=1,"drag"==e.mode&&delete d[n]):"remove"==e.action&&(d[n]?(a.addClass("_bN"),s[n]=1,"drag"==e.mode&&delete d[n]):(a.removeClass("_bN"),delete s[n],"drag"==e.mode&&(d[n]=1)));for(var o=_.__ay,c="",g=0;g<o;g++)t.has(s,g)?c+="1":c+="0";i.selected=_.__aB=c,"click"==e.mode&&_.__h.trigger({type:"change",days:c})},"__aF<dragbegin>":function(e){e.stopPropagation();this.__aE=this.__aB,this.__aD={}},"__aG<dragfinish>":function(e){e.stopPropagation();var a=this;a.__aB!=a.__aE&&a.__h.trigger({type:"change",days:a.__aB}),delete a.__aD}})});