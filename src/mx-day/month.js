define("mx-day/month",["magix","$","mx-dragselect/index"],(e,t,a)=>{e("mx-dragselect/index");var _=e("magix");_.applyStyle("_k","._bL{padding:0;height:38.4px;overflow:hidden;cursor:default;border:none;border-right:1px solid #e6e6e6}._bM{border-right:none}._bN{background-color:#f37b63}._bO{opacity:0}._bP{cursor:not-allowed;background-color:#fbfbfb}");var i=e("$"),s={MON:1,TUE:2,WED:3,THU:4,FRI:5,SAT:6,SUN:0},r={1:"MON",2:"TUE",3:"WED",4:"THU",5:"FRI",6:"SAT",0:"SUN"},d=function(e,t){e=(e=e||"").slice(0,t);for(var a=0;a<t;a++)e.length<=a&&(e+="0");return e};a.exports=_.View.extend({tmpl:{html:'<table class="_W _X"><tbody><tr mx-guid="g0" mx-change="__e()" mx-dragbegin="__aF()" mx-dragfinish="__aG()" mx-view="mx-dragselect/index?selector=td%5Benable%3Dtrue%5D">1</tr></tbody></table>',subs:[{keys:["days","selected"],path:'tr[mx-guid="g0"]',tmpl:'<%for(var _=0;_<31;_++){%><td data-day="<%=_%>" enable="<%=_<$$.days?true:false%>" class="_bL<%if($$.selected.charAt(_)===\'1\'){%> _bN<%}if(_==30){%> _bM<%}if(_>=$$.days){%> _bP<%}%>"><span class="_bO"><%=(\'0\'+(_+1)).slice(-2)%></span></td><%}%>',s:"1"}]},init:function(e){this.assign(e),this.__h=i("#"+this.id)},assign:function(e){var t,a,_=(t=e.year,a=e.month,32-new Date(t,a,32).getDate());return this.__ay=_,this.__az=e.year,this.__aA=e.month,this.__aB=d(e.selected,_),!0},__p:function(e){if(e){var t=this.__ay;this.__aB=d(e,t),this.render()}},__at:function(e,t){for(var a=this.__aB,_=this.__az,i=this.__aA,r=this.__ay,d=s[e],n=1;n<=r;n++){new Date(_,i,n).getDay()===d&&(a=a.slice(0,n-1)+(t?"1":"0")+a.slice(n))}this.__aB=a,this.render(!0)},render:function(e){this.updater.digest({days:this.__ay,selected:this.__aB}),this.__aC=function(e){for(var t={},a=e.length;a--;)"1"===e.charAt(a)&&(t[a]=1);return t}(this.__aB),this.__h.trigger({type:"sync",ignoreSync:e,days:this.__aB})},__aq:function(){for(var e=this.__aB,t=this.__az,a=this.__aA,i=this.__ay,s={},d=1;d<=i;d++)if("1"!=e.charAt(d-1)){var n=new Date(t,a,d);s[r[n.getDay()]]=1}return _.keys(s)},"__e<change,click>":function(e){e.stopPropagation();var t=i(e.node),a=this.updater.get(),s=t.data("day"),r=this.__aC,d=this.__aD;"add"==e.action?r[s]?(t.removeClass("_bN"),delete r[s],"drag"==e.mode&&(d[s]=1)):(t.addClass("_bN"),r[s]=1,"drag"==e.mode&&delete d[s]):"remove"==e.action&&(d[s]?(t.addClass("_bN"),r[s]=1,"drag"==e.mode&&delete d[s]):(t.removeClass("_bN"),delete r[s],"drag"==e.mode&&(d[s]=1)));for(var n=this.__ay,h="",o=0;o<n;o++)_.has(r,o)?h+="1":h+="0";a.selected=this.__aB=h,"click"==e.mode&&this.__h.trigger({type:"change",days:h})},"__aF<dragbegin>":function(e){e.stopPropagation();this.__aE=this.__aB,this.__aD={}},"__aG<dragfinish>":function(e){e.stopPropagation();this.__aB!=this.__aE&&this.__h.trigger({type:"change",days:this.__aB}),delete this.__aD}})});