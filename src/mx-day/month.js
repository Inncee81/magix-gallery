define("mx-day/month",["magix","$","mx-dragselect/index"],(e,t,a)=>{e("mx-dragselect/index");var _=e("magix");_.applyStyle("_l","._bU{padding:0;height:38.4px;overflow:hidden;cursor:default;border:none;border-right:1px solid #e6e6e6}._bV{border-right:none}._bW{background-color:#f37b63}._bX{opacity:0}._bY{cursor:not-allowed;background-color:#fbfbfb}");var i=e("$"),s={MON:1,TUE:2,WED:3,THU:4,FRI:5,SAT:6,SUN:0},r={1:"MON",2:"TUE",3:"WED",4:"THU",5:"FRI",6:"SAT",0:"SUN"},d=function(e,t){e=(e=e||"").slice(0,t);for(var a=0;a<t;a++)e.length<=a&&(e+="0");return e};a.exports=_.View.extend({tmpl:{html:'<table class="_W _X"><tbody><tr mx-guid="g0" mx-change="__e()" mx-dragbegin="__aY()" mx-dragfinish="__aZ()" mx-view="mx-dragselect/index?selector=td%5Benable%3Dtrue%5D">1</tr></tbody></table>',subs:[{keys:["days","selected"],path:'tr[mx-guid="g0"]',tmpl:'<%for(var _=0;_<31;_++){%><td data-day="<%=_%>" enable="<%=_<$$.days?true:false%>" class="_bU<%if($$.selected.charAt(_)===\'1\'){%> _bW<%}if(_==30){%> _bV<%}if(_>=$$.days){%> _bY<%}%>"><span class="_bX"><%=(\'0\'+(_+1)).slice(-2)%></span></td><%}%>',s:"1"}]},init:function(e){this.assign(e),this.__h=i("#"+this.id)},assign:function(e){var t,a,_=(t=e.year,a=e.month,32-new Date(t,a,32).getDate());return this.__aR=_,this.__aS=e.year,this.__aT=e.month,this.__aU=d(e.selected,_),!0},__p:function(e){if(e){var t=this.__aR;this.__aU=d(e,t),this.render()}},__aM:function(e,t){for(var a=this.__aU,_=this.__aS,i=this.__aT,r=this.__aR,d=s[e],n=1;n<=r;n++){new Date(_,i,n).getDay()===d&&(a=a.slice(0,n-1)+(t?"1":"0")+a.slice(n))}this.__aU=a,this.render(!0)},render:function(e){this.updater.digest({days:this.__aR,selected:this.__aU}),this.__aV=function(e){for(var t={},a=e.length;a--;)"1"===e.charAt(a)&&(t[a]=1);return t}(this.__aU),this.__h.trigger({type:"sync",ignoreSync:e,days:this.__aU})},__aJ:function(){for(var e=this.__aU,t=this.__aS,a=this.__aT,i=this.__aR,s={},d=1;d<=i;d++)if("1"!=e.charAt(d-1)){var n=new Date(t,a,d);s[r[n.getDay()]]=1}return _.keys(s)},"__e<change,click>":function(e){e.stopPropagation();var t=i(e.node),a=this.updater.get(),s=t.data("day"),r=this.__aV,d=this.__aW;"add"==e.action?r[s]?(t.removeClass("_bW"),delete r[s],"drag"==e.mode&&(d[s]=1)):(t.addClass("_bW"),r[s]=1,"drag"==e.mode&&delete d[s]):"remove"==e.action&&(d[s]?(t.addClass("_bW"),r[s]=1,"drag"==e.mode&&delete d[s]):(t.removeClass("_bW"),delete r[s],"drag"==e.mode&&(d[s]=1)));for(var n=this.__aR,h="",o=0;o<n;o++)_.has(r,o)?h+="1":h+="0";a.selected=this.__aU=h,"click"==e.mode&&this.__h.trigger({type:"change",days:h})},"__aY<dragbegin>":function(e){e.stopPropagation();this.__aX=this.__aU,this.__aW={}},"__aZ<dragfinish>":function(e){e.stopPropagation();this.__aU!=this.__aX&&this.__h.trigger({type:"change",days:this.__aU}),delete this.__aW}})});