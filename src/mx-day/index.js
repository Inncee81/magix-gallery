define("mx-day/index",["magix","$","mx-dropdown/index","./month"],(e,a,t)=>{e("mx-dropdown/index"),e("./month");var _=e("magix"),i=e("$");_.applyStyle("_l","._bX{padding:0;height:38.4px}._bY{border:none}._bZ{border-right:1px solid #e6e6e6}");var s=function(e,a){var t=a[e];if(!t){t=[];for(var _=12;_--;)t[_]="";a[e]=t}return t},n=[{key:"MON",day:"一"},{key:"TUE",day:"二"},{key:"WED",day:"三"},{key:"THU",day:"四"},{key:"FRI",day:"五"},{key:"SAT",day:"六"},{key:"SUN",day:"日"}];t.exports=_.View.extend({tmpl:{html:'<table class="_W"><thead><tr><th class="_bX _a_" width="120">周期设置</th><th class="_bX _Z" colspan="31"><%for(var _=0;_<$$.weeks.length;_++){%><label class="_h _t"><input mx-change="__aT({key:\'<%=$eq($$.weeks[_].key)%>\'})" id="<%=$$.viewId%>_<%=$$.weeks[_].key%>" type="checkbox" class="_as">每周<%=$$.weeks[_].day%></label><%}%></th></tr><tr><th class="_bX _a_"><div mx-change="__aR()" style="width:100px" class="_g _s" mx-view="mx-dropdown/index?list=<%@$$.years%>&selected=<%!$eu($$.selectedYear)%>"></div></th><th colspan="31" class="_bX"><table class="_W _X"><tbody><tr><%for(var a=1;a<32;a++){%><td class="_bX _a_ _bY<%if(a<30){%> _bZ<%}%>"><%=(\'0\'+a).slice(-2)%></td><%}%></tr></tbody></table></th></tr></thead><tbody><%for(var b=0;b<12;b++){%><tr><td class="_bX _ad _a_" mx-click="__aW({m:<%!b%>})"><%=(\'0\'+(b+1)).slice(-2)%></td><td class="_bX" colspan="31" id="months_<%=b%>_<%=$$.viewId%>" mx-change="__aV({m:<%!b%>})" mx-sync="__aV({m:<%!b%>})" mx-view="mx-day/month?year=<%!$eu($$.selectedYear)%>&month=<%!$eu(b)%>&selected=<%!$eu($$.days[b])%>"></td></tr><%}%></tbody></table>'},init:function(e){this.assign(e);var a=i("#"+this.id);this.__i=a},assign:function(e){return e.years||(e.years=[(new Date).getFullYear()]),this.__aM=e.years,this.__aN=e.selectedYear||e.years[0],this.__aO=function(e){e=e||{};for(var a in e){var t=e[a];(t=((t=t||"")+"").split(",")).length>12&&(t=t.slice(0,12));for(var _=0;_<12;_++)t[_]||(t[_]="");e[a]=t}return e}(e.selectedDays),!0},render:function(){var e=this.__aN,a=s(e,this.__aO);this.updater.digest({viewId:this.id,weeks:n,years:this.__aM,selectedYear:e,days:a})},__aQ:function(){for(var e={},a=n.length;a--;)e[n[a].key]=1;this.__i.find('[mx-view*="mx-day/month"]').each(function(a,t){for(var _=t.vframe.invoke("__aP"),i=_.length;i--;)delete e[_[i]]});for(a=n.length;a--;){var t=n[a].key;i("#"+this.id+"_"+t).prop("checked",!!e[t])}},"__aR<change>":function(e){e.stopPropagation();var a=s(e.value,this.__aO);this.updater.digest({days:a,selectedYear:this.__aN=e.value})},__v:function(){var e=this.__aO;this.__i.val(e).trigger({type:"change",days:e})},"__aT<change>":function(e){e.stopPropagation();this.__i.find('[mx-view*="mx-day/month"]').each(function(a,t){var _=t.vframe;_&&_.invoke("__aS",[e.params.key,e.eventTarget.checked])}),this.__v()},"__aV<change,sync>":function(e){e.stopPropagation();var a=this;s(a.__aN,a.__aO)[e.params.m]=e.days,e.ignoreSync||(clearTimeout(a.__aU),a.__aU=setTimeout(function(){a.__aQ()},20)),"change"==e.type&&a.__v()},"__aW<click>":function(e){var a=e.params.m,t=i("#months_"+a+"_"+this.id),_=s(this.__aN,this.__aO)[a];_=new Array(_.length+1).join(_.indexOf("0")>-1?"1":0),t.invokeView("__q",[_]),this.__v()}})});