define("mx-slider/range",["magix","$","../mx-dragdrop/index","./style"],(_,t,e)=>{var i=_("magix"),s=_("$"),a=_("../mx-dragdrop/index");_("./style"),e.exports=i.View.extend({tmpl:function(_){var t="",e={"&":"amp","<":"lt",">":"gt",'"':"#34","'":"#39","`":"#96"},i=/[&<>"'`]/g,s=function(_){return null==_?"":""+_},a=function(_){return"&"+e[_]+";"},h=function(_){return s(_).replace(i,a)};return t+='<div class="_eE',_.vertical?t+=" _eG":t+=" _eF",t+='" mx-contextmenu="__G()" style="',_.vertical?t+="height:"+h(_.height):t+="width:"+h(_.width),t+='px"><div class="_eH',_.vertical?t+=" _eJ":t+=" _eI",t+='"></div><div tabindex="0" mx-keydown="__eL({start:true})" class="_eK',_.vertical?t+=" _eM":t+=" _eL",t+='" mx-mousedown="__eH({start:true})" id="left_'+h(_.viewId)+'"></div><div class="_eN',_.vertical?t+=" _eT":t+=" _eS",t+='" id="leftl_'+h(_.viewId)+'"></div><div tabindex="0" mx-keydown="__eL()" class="_eK',_.vertical?t+=" _eM":t+=" _eL",t+='" mx-mousedown="__eH({end:true})" id="right_'+h(_.viewId)+'"></div><div class="_eN',_.vertical?t+=" _eT":t+=" _eS",t+='" id="rightl_'+h(_.viewId)+'"></div><div class="',_.vertical?t+="_eQ":t+="_eO",t+='">'+h(_.min)+'</div><div class="',_.vertical?t+="_eR":t+="_eP",t+='">'+h(_.max)+"</div></div>"},mixins:[a],init:function(_){var t=this,e=s("#"+t.id);e.addClass("_eD"),t.assign(_);var a=function(_){if(!t.__eB&&!t.__cx){var s=e.offset(),a=t.__eC(),h=((t.__eD?a.rMax-_.pageY+s.top:_.pageX-s.left)-a.half)/a.max,r=t.__eE(h),d=+t.__as,n=+t.__bg;Math.abs(d-r)<Math.abs(n-r)?(t.__eI(r),t.__as=r,t.__x(),i.node("left_"+t.id).focus()):(t.__eJ(r),t.__bg=r,t.__x(),i.node("right_"+t.id).focus())}};e.on("click",a),t.on("destroy",function(){e.off("click",a)}),t.__k=e},assign:function(_){this.__dv=+_.width||340,this.__eG=+_.height||340,this.__H=+_.min||0,this.__I=+_.max||100,this.__dM=+_.step||1,this.__cx=_.disabled+""=="true",this.__eD=_.vertical+""=="true";var t=this.__dM+"",e=t.indexOf(".");e=e>=0?t.slice(e+1).length:0,this.__dO=e;var i=_.value;return i?(i=(i+"").split(","),this.__as=+i[0]||0,this.__bg=+i[1]||0):(this.__as=0,this.__bg=0),!0},render:function(){this.updater.digest({min:this.__H.toFixed(this.__dO),max:this.__I.toFixed(this.__dO),viewId:this.id,height:this.__eG,width:this.__dv,vertical:this.__eD}),this.__k[this.__cx?"addClass":"removeClass"]("_eU"),this.val([this.__as,this.__bg])},__eC:function(){var _=this.__k.find("._eE"),t=this.__k.find("._eH"),e=s("#left_"+this.id),i=s("#right_"+this.id),a=this.__eD?_.height():_.width(),h=e.outerWidth()/2,r=a-2*h;return{rail:_,iLeftL:s("#leftl_"+this.id),iRightL:s("#rightl_"+this.id),tracker:t,iLeft:e,iRight:i,left:parseInt(e.css(this.__eD?"bottom":"left"),10),right:parseInt(i.css(this.__eD?"bottom":"left"),10),rMax:a,max:r,half:h}},__eI:function(_){_=+_;var t=this.__I,e=this.__H;_>t?_=t:_<e&&(_=e);var i=(_-e)/(t-e),s=this.__eC(),a=i*s.max;this.__eD?s.iLeft.css({bottom:a}):s.iLeft.css({left:a}),_=this.__eE(i);var h=s.iLeftL;h.html(_);var r=a+s.half;if(this.__eD){r-=d=h.height()/2,h.css({bottom:r}),s.tracker.css({bottom:a+s.half}).height(s.right-a)}else{var d;r<(d=h.width()/2)?r=0:r+d>s.rMax?r=s.rMax-2*d:r-=d,h.css({left:r}),s.tracker.css({left:a+s.half}).width(s.right-a)}return _},__eJ:function(_){_=+_;var t=this.__I,e=this.__H;_>t?_=t:_<e&&(_=e);var i=(_-e)/(t-e),s=this.__eC(),a=i*s.max;this.__eD?s.iRight.css({bottom:a}):s.iRight.css({left:a}),_=this.__eE(i);var h=s.iRightL;h.html(_);var r=a+s.half;if(this.__eD){r-=d=h.height()/2,h.css({bottom:r}),s.tracker.height(a-s.left)}else{var d;r<(d=h.width()/2)?r=0:r+d>s.rMax?r=s.rMax-2*d:r-=d,h.css({left:r}),s.tracker.width(a-s.left)}return _},val:function(_){if(_){var t=(_+"").split(","),e=+t[0]||0,i=+t[1]||0;e>i&&(e=(s=[i,e])[0],i=s[1]),this.__k.prop("value",[e,i]),e=this.__eI(e),i=this.__eJ(i),this.__as==e&&this.__bg==i||(this.__as=e,this.__bg=i,this.__x())}return[+this.__as,+this.__bg];var s},__eE:function(_){var t,e=this.__I,i=this.__H,s=this.__dM;return 0===_?t=i:1===_?t=e:(t=i+(e-i)*_,t=Math.round(t/s)*s),t=t.toFixed(this.__dO)},__x:function(){var _=[+this.__as,+this.__bg];this.__k.prop("value",_).trigger({type:"change",value:_,start:+this.__as,end:+this.__bg})},__eK:function(_,t){_==this.__as&&t==this.__bg||(this.__as=_,this.__bg=t,this.__x())},"__eH<mousedown>":function(_){var t=this;if(!t.__cx){var e=s(_.eventTarget),h=e.outerWidth(),r=-1;r=t.__eD?e.parent().height()-h:e.parent().width()-h;var d=parseInt(e.css(t.__eD?"bottom":"left"),10),n=t.__as,o=t.__bg;t.__eF=1,t.dragdrop(_.eventTarget,function(e){a.clear();var s=-1;(s=t.__eD?d+_.pageY-e.pageY:d+e.pageX-_.pageX)<0?s=0:s>r&&(s=r);var h=s/r,l=t.__eE(h),c=+l;if(_.params.end){var f=+t.__as;c>=f?(t.__as!=n&&(n=t.__eI(f)),o=t.__eJ(l),i.node("right_"+t.id).focus()):(t.__as!=o&&(o=t.__eJ(f)),n=t.__eI(l),i.node("left_"+t.id).focus())}else{var v=+t.__bg;c<=v?(t.__bg!=o&&(o=t.__eJ(v)),n=t.__eI(l),i.node("left_"+t.id).focus()):(t.__bg!=n&&(n=t.__eI(v)),o=t.__eJ(l),i.node("right_"+t.id).focus())}},function(){t.__eK(n,o),t.__eB=!0,setTimeout(t.wrapAsync(function(){delete t.__eB}),20),delete t.__eF})}},"__eL<keydown>":function(_){var t,e=this.__dM;if(!this.__eF&&(37==_.keyCode||40==_.keyCode?(_.preventDefault(),e=-e,t=!0):39!=_.keyCode&&38!=_.keyCode||(_.preventDefault(),t=!0),t)){var s=this.__as,a=+s,h=this.__bg,r=+h,d=_.params.start;d?a+=e:r+=e,a>r?(d?i.node("right_"+this.id).focus():i.node("left_"+this.id).focus(),r!=+s&&(s=this.__eI(r)),a!=+h&&(h=this.__eJ(a))):d?s=this.__eI(a):h=this.__eJ(r),this.__eK(s,h)}},"__G<contextmenu>":function(_){_.preventDefault()}})});