define("mx-color/index",["magix","$","../mx-dragdrop/index"],(t,i,s)=>{var a=t("magix"),o=t("$"),e=t("../mx-dragdrop/index");a.applyStyle("_j",'._bC{padding:10px;background-color:#fff;display:inline-block;border:1px solid #ccc;border-radius:5px;position:relative;z-index:1}._bD{width:225px;zoom:1}._bD:after,._bD:before{display:table;content:""}._bD:after{clear:both}._bE{border:1px solid #000;float:left;width:15px;height:15px;margin:-1px 0 0 -1px;position:relative}._bF:before{content:" ";position:absolute;left:2px;top:2px;border:2px solid #e8e8e8;border-style:inset;width:9px;height:9px}._bG{margin:10px 0;height:200px}._bH{position:relative;float:left;width:196px;height:196px}._bI{position:absolute;width:8px;height:8px;box-shadow:0 0 0 1.5px #fff,inset 0 0 1px 1px rgba(0,0,0,.3),0 0 1px 2px rgba(0,0,0,.4);border-radius:50%}._bJ{width:18px;height:196px;position:relative;float:left;margin-left:10px}._bK{position:absolute;left:2px;top:-2px;height:4px;width:14px;box-shadow:0 0 0 1.5px #fff,inset 0 0 1px 1px rgba(0,0,0,.3),0 0 1px 2px rgba(0,0,0,.4);background:#fff}._bL{height:25px}._bM{width:104px;margin-right:5px;vertical-align:middle}._bN{width:50px;border-radius:4px;height:32px;display:inline-block;margin-right:10px;vertical-align:middle;border:1px solid #ddd}._bO{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAIAAADZF8uwAAAAGUlEQVQYV2M4gwH+YwCGIasIUwhT25BVBADtzYNYrHvv4gAAAABJRU5ErkJggg==);width:224px;height:12px;margin-bottom:10px}._bP{height:100%}._bQ{position:absolute;left:-2px;top:2px;height:8px;width:4px;box-shadow:0 0 0 1.5px #fff,inset 0 0 1px 1px rgba(0,0,0,.3),0 0 1px 2px rgba(0,0,0,.4);background:#fff}');var _="_bF",d="_bC",r=["d81e06","f4ea2a","1afa29","1296db","13227a","d4237a","ffffff","e6e6e6","dbdbdb","cdcdcd","bfbfbf","8a8a8a","707070","515151","2c2c2c","000000","ea986c","eeb174","f3ca7e","f9f28b","c8db8c","aad08f","87c38f","83c6c2","7dc5eb","87a7d6","8992c8","a686ba","bd8cbb","be8dbd","e89abe","e8989a","e16632","e98f36","efb336","f6ef37","afcd51","7cba59","36ab60","1baba8","17ace3","3f81c1","4f68b0","594d9c","82529d","a4579d","db649b","dd6572","d84e06","e0620d","ea9518","f4ea2a","8cbb1a","2ba515","0e932e","0c9890","1295db","0061b2","0061b0","004198","122179","88147f","d3227b","d6204b"],p=function(t,i,s){var a,o,e,_,d;t=t%360/60,a=o=e=s-(d=s*i);var r=255*(a+=[d,_=d*(1-Math.abs(t%2-1)),0,0,_,d][t=~~t]),p=255*(o+=[_,d,d,_,0,0][t]),c=255*(e+=[0,0,_,d,d,_][t]);return{r:r,g:p,b:c,hex:"#"+(16777216|c|p<<8|r<<16).toString(16).slice(1)}};s.exports=a.View.extend({mixins:[e],tmpl:function(t,i){i=i||"";var s="",a={"&":"amp","<":"lt",">":"gt",'"':"#34","'":"#39","`":"#96"},o=/[&<>"'`]/g,e=function(t){return null==t?"":""+t},_=function(t){return"&"+a[t]+";"},d=function(t){return e(t).replace(o,_)},r=/[\\'"]/g;s+='<div id="scs_'+d(t.id)+'"><ul mxa="_2:_" class="_bD">';for(var p=0;p<t.shortcuts.length;p++)s+='<li class="_bE _ad" id="sc_'+d(t.shortcuts[p])+"_"+d(t.id)+'" style="background:#'+d(t.shortcuts[p])+'" mx-click="'+i+"__aJ({color:'#"+d((c=t.shortcuts[p],e(c).replace(r,"\\$&")))+"'})\"></li>";var c;return s+='</ul></div><div mxa="_2:a" class="_bG"><div class="_bH _ad" id="cz_'+d(t.id)+'" mx-mousedown="'+i+'__aH()"><svg mxa="_2:b" xmlns="http://www.w3.org/2000/svg" version="1.1" width="100%" height="100%"><defs><lineargradient id="gb_'+d(t.id)+'" x1="0%" y1="100%" x2="0%" y2="0%"><stop mxs="_2:_" offset="0%" stop-color="#000000" stop-opacity="1"></stop><stop mxs="_2:_" offset="100%" stop-color="#CC9A81" stop-opacity="0"></stop></lineargradient><lineargradient id="gw_'+d(t.id)+'" x1="0%" y1="100%" x2="100%" y2="100%"><stop mxs="_2:a" offset="0%" stop-color="#FFFFFF" stop-opacity="1"></stop><stop mxs="_2:_" offset="100%" stop-color="#CC9A81" stop-opacity="0"></stop></lineargradient></defs><rect x="0" y="0" width="100%" height="100%" fill="url(#gw_'+d(t.id)+')"></rect><rect x="0" y="0" width="100%" height="100%" fill="url(#gb_'+d(t.id)+')"></rect></svg><div class="_bI" id="ci_'+d(t.id)+'"></div></div><div mxa="_2:c" class="_bJ _ad" mx-mousedown="'+i+'__aG()"><svg mxa="_2:b" xmlns="http://www.w3.org/2000/svg" version="1.1" width="100%" height="100%"><defs><lineargradient id="ghsv_'+d(t.id)+'" x1="0%" y1="100%" x2="0%" y2="0%"><stop mxs="_2:b" offset="0%" stop-color="#FF0000" stop-opacity="1"></stop><stop mxs="_2:_" offset="13%" stop-color="#FF00FF" stop-opacity="1"></stop><stop mxs="_2:_" offset="25%" stop-color="#8000FF" stop-opacity="1"></stop><stop mxs="_2:_" offset="38%" stop-color="#0040FF" stop-opacity="1"></stop><stop mxs="_2:_" offset="50%" stop-color="#00FFFF" stop-opacity="1"></stop><stop mxs="_2:_" offset="63%" stop-color="#00FF40" stop-opacity="1"></stop><stop mxs="_2:_" offset="75%" stop-color="#0BED00" stop-opacity="1"></stop><stop mxs="_2:_" offset="88%" stop-color="#FFFF00" stop-opacity="1"></stop><stop mxs="_2:a" offset="100%" stop-color="#FF0000" stop-opacity="1"></stop></lineargradient></defs><rect x="0" y="0" width="100%" height="100%" fill="url(#ghsv_'+d(t.id)+')"></rect></svg><div class="_bK" id="si_'+d(t.id)+'"></div></div></div>',t.alpha&&(s+='<div mxa="_2:d" class="_bO _ag"><div class="_bP _ag _ad" id="at_'+d(t.id)+'" mx-mousedown="'+i+'__aI()"><div class="_bQ" id="ai_'+d(t.id)+'"></div></div></div>'),s+='<div mxa="_2:e" class="_bL"><span class="_bN" id="bc_'+d(t.id)+'"></span><input class="_ap _bM" readonly="readonly" id="v_'+d(t.id)+'"/>',t.btns&&(s+='<button mxs="_2:_" class="_an _ao" type="button" mx-click="'+i+'__aK();">确定</button>'),s+="</div>"},init:function(t){this.__aw=t.color||"#ffffff",this.__ax=t.showAlpha+""=="true",this.__ay=t.showBtns+""=="true",this.__az={h:0,s:1,v:1},o("#"+this.id).addClass(d)},render:function(){this.updater.digest({id:this.id,alpha:this.__ax,btns:this.__ay,shortcuts:r}),this.__aA(this.__aw)},__aD:function(t,i){var s=this.__az;s.h=t.h%360,s.s=t.s,s.v=t.v;var a=p(t.h,t.s,t.v).hex,e=o("#cz_"+this.id),d=e.width(),r=p(t.h,1,1);if(e.css("background",r.hex),this.__aB=a,this.__aC(),!i){o("#scs_"+this.id+" li").removeClass(_);var c=o("#si_"+this.id).height()/2,n=Math.round(s.h*d/360-c),h=o("#ci_"+this.id).width()/2;o("#si_"+this.id).css({top:n}),n=Math.round((1-s.v)*d-h);var f=Math.round(s.s*d-h);o("#ci_"+this.id).css({left:f,top:n})}o("#sc_"+a.substr(1,6)+"_"+this.id).addClass(_)},__aA:function(t){var i=parseInt(t.substr(1,2),16),s=parseInt(t.substr(3,2),16),a=parseInt(t.substr(5,2),16),o=parseInt(t.substr(7,2),16);isNaN(o)&&(o=255),this.__aE=("0"+o.toString(16)).slice(-2);var e=function(t,i,s){t/=255,i/=255,s/=255;var a,o;return{h:(0==(o=(a=Math.max(t,i,s))-Math.min(t,i,s))?null:a==t?(i-s)/o+(i<s?6:0):a==i?(s-t)/o+2:(t-i)/o+4)%6*60,s:0===o?0:o/a,v:a}}(i,s,a);this.__aD(e),this.__ax&&this.__aF(o)},"__aG<mousedown>":function(t){var i=this,s=o(t.eventTarget),a=o("#si_"+i.id),e=t,_=o("#cz_"+i.id).width(),d=o("#si_"+i.id).height()/2,r=s.offset(),p=(t.pageY-r.top)/_*360;i.__aD({h:p,s:i.__az.s,v:i.__az.v});var c=parseInt(a.css("top"),10);i.dragdrop(t.eventTarget,function(t){var s=t.pageY-e.pageY;(s+=c)<=-d?s=-d:s>=_-d&&(s=_-d),a.css({top:s});var o=(s+d)/_*360;i.__aD({h:o,s:i.__az.s,v:i.__az.v},!0)},function(){i.__x()})},"__aH<mousedown>":function(t){var i=this,s=o("#cz_"+i.id).width(),a=o("#ci_"+i.id).width()/2,e=o(t.eventTarget).offset(),_=t.pageX-e.left,d=t.pageY-e.top,r=_/s,p=(s-d)/s;i.__aD({h:i.__az.h,s:r,v:p});var c=o("#ci_"+i.id),n=parseInt(c.css("left"),10),h=parseInt(c.css("top"),10),f=t;i.dragdrop(t.eventTarget,function(t){var o=t.pageY-f.pageY,e=t.pageX-f.pageX;(o+=h)<=-a?o=-a:o>=s-a&&(o=s-a),(e+=n)<=-a?e=-a:e>=s-a&&(e=s-a),c.css({top:o,left:e});var _=(e+a)/s,d=(s-(o+a))/s;i.__aD({h:i.__az.h,s:_,v:d})},function(){i.__x()})},__aF:function(t){t/=255,t*=o("#at_"+this.id).width(),t-=o("#si_"+this.id).height()/2,o("#ai_"+this.id).css({left:t})},__aC:function(){var t=this.__aB;o("#at_"+this.id).css({background:"linear-gradient(to right, "+t+"00 0%,"+t+" 100%)"}),this.__ax&&(t+=this.__aE),o("#bc_"+this.id).css("background",t),o("#v_"+this.id).val(t)},"__aI<mousedown>":function(t){var i=o(t.eventTarget),s=t,a=this,e=o("#ai_"+a.id),_=o("#at_"+a.id).width(),d=o("#si_"+a.id).height()/2,r=i.offset(),p=(t.pageX-r.left)/_*255|0;a.__aE=("0"+p.toString(16)).slice(-2),a.__aF(p),a.__aC();var c=parseInt(e.css("left"),10);a.dragdrop(t.eventTarget,function(t){var i=t.pageX-s.pageX;(i+=c)<=-d?i=-d:i>=_-d&&(i=_-d),e.css({left:i});var o=Math.round((i+d)/_*255);a.__aE=("0"+o.toString(16)).slice(-2),a.__aC()},function(){a.__x()})},"__aJ<click>":function(t){this.__aA(t.params.color),o(t.eventTarget).addClass(_),this.__x()},__x:function(t){if(!this.__ay||t){var i=o("#v_"+this.id).val();i!=this.__aw&&o("#"+this.id).trigger({type:"change",color:this.__aw=i})}},"__aK<click>":function(){this.__x(1)}})});