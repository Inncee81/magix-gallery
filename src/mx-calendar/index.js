define("mx-calendar/index",["magix","$","mx-time/index"],(e,t,a)=>{e("mx-time/index");var i=e("magix");i.applyStyle("_g","._aS{background-color:#fff;display:inline-block;border:1px solid #e6e6e6;padding:0;border-radius:4px;overflow-y:hidden;z-index:10;color:#333;text-align:center;position:relative}._aT{color:#777}._aU{height:32px;line-height:32px;padding:1px}._aV,._aW{color:#ccc;display:inline-block;padding:6px 7px;line-height:100%;vertical-align:top;cursor:pointer}._aV:focus,._aV:hover,._aW:focus,._aW:hover{color:#f96447}._aX{display:inline-block;cursor:pointer;padding:5px 10px;border-radius:4px;line-height:1}._aX:hover{background-color:#eee}._aY{width:245px}._aZ{color:#333;background-color:#fafafa;padding:0 10px}._b_{padding:10px}._ba,._bb{padding:1px 0;position:absolute;top:-100%;left:0;right:0;transition:top .15s;background-color:#fff}._bc{top:0}._bd{height:59px;margin:2px;float:left;width:77px;cursor:pointer;line-height:59px;border-radius:4px;font-size:16px}._be:hover,._bd:hover{background:#f0f0f0}._be,._bf{width:28px;height:28px;line-height:28px;margin:3px 2px;float:left;border-radius:4px;cursor:pointer}._bg,._bg:hover{color:#fff;background-color:#f96447}._bh,._bh:hover{color:#eee;cursor:not-allowed;background:#fff}._bi{padding:5px}._bj,._bi{border-top:1px solid #e6e6e6}._bj{margin:10px;padding:10px 0 0;text-align:left}._bk{-webkit-transform:scaleX(-1);transform:scaleX(-1)}");var n=e("$"),s=function(e,t){return 32-new Date(e,t-1,32).getDate()},r=["日","一","二","三","四","五","六"],_=function(e){return("0"+e).slice(-2)},o=function(e,t,a){var i,n=e.getTime();return t&&(i=n<t.getTime()),i||(i=!!a&&n>a.getTime()),i},l=function(e,t,a,i){var n,s=parseInt(e+_(t),10);return a&&(n=s<(a=parseInt(a.getFullYear()+_(a.getMonth()),10))),!n&&i&&(n=s>(i=parseInt(i.getFullYear()+_(i.getMonth()),10))),n},d=function(e,t,a){var i;return t&&(i=e<t.getFullYear()),!i&&a&&(i=e>a.getFullYear()),i},c={y:{reg:/y+/gi,fn:function(e,t){return String(t.getFullYear()).slice(-e.length)}},M:{reg:/M+/g,fn:function(e,t,a){return a=t.getMonth()+1,_(a).slice(-e.length)}},d:{reg:/d+/gi,fn:function(e,t,a){return a=t.getDate(),_(a).slice(-e.length)}},h:{reg:/h+/gi,fn:function(e,t,a){return a=t.getHours(),_(a).slice(-e.length)}},m:{reg:/m+/g,fn:function(e,t,a){return a=t.getMinutes(),_(a).slice(-e.length)}},s:{reg:/s+/g,fn:function(e,t,a){return a=t.getSeconds(),_(a).slice(-e.length)}},S:{reg:/S+/g,fn:function(e,t,a){return a=t.getMilliseconds(),String(a).substring(0,e.length)}}},h=function(e){return e instanceof Date?e:(e=new Date(Date.parse(String(e).replace(/-/g,"/"))))instanceof Date&&"Invalid Date"!=e&&!isNaN(e)?e:null},u=function(e,t){e=h(e),t=t||"YYYY-MM-dd";var a,i=function(t){return c[a].fn(t,e)};for(a in c)t=t.replace(c[a].reg,i);return t};a.exports=i.View.extend({tmpl:function(e,t){var a="",i={"&":"amp","<":"lt",">":"gt",'"':"#34","'":"#39","`":"#96"},n=/[&<>"'`]/g,s=function(e){return null==e?"":""+e},r=function(e){return"&"+i[e]+";"},_=function(e){return s(e).replace(n,r)},o={"!":"%21","'":"%27","(":"%28",")":"%29","*":"%2A"},l=function(e){return o[e]},d=/[!')(*]/g,c=function(e){return encodeURIComponent(s(e)).replace(d,l)},h=/[\\'"]/g,u=function(e){return s(e).replace(h,"\\$&")};if(a+='<div mxa="_Z:_" class="_aS _aj" mx-contextmenu="'+(t=t||"")+'__G()">',e.types.day){a+='<div id="days_'+_(e.id)+'" class="_ai"><div mxa="_Z:a" class="_aU"><span mxs="_Z:_" class="__ _aV _aa" mx-click="'+t+'__y()">&#xe61e;</span><h4 mx-click="'+t+"",e.types.month?a+="__A":a+="__B",a+='()" class="_aX">'+_(e.year)+"-"+_(("0"+e.month).slice(-2))+'</h4><span mxs="_Z:_" class="__ _aW _bk _ab" mx-click="'+t+'__y({next:true})">&#xe61e;</span></div><div mxa="_Z:b" class="_aY"><div mxa="_Z:c" class="_aZ _ai">';for(var p=0;p<e.weekText.length;p++)a+='<span mxa="_Z:d" class="_bf">'+_(e.weekText[p])+"</span>";a+='</div><div mxa="_Z:e" class="_b_ _ai">';for(var g=0;g<e.days.length;g++)for(var m=e.days[g],f=0;f<m.length;f++)a+='<span class="_be',m[f].otherMonth&&(a+=" _aT"),m[f].disabled&&(a+=" _bh"),m[f].selected&&(a+=" _bg"),a+='" ',m[f].disabled||(a+=' mx-click="'+t+"__E({toMonth:"+_(m[f].month)+",date:'"+_(u(m[f].full))+"'})\" "),a+=' title="'+_(m[f].full)+'">'+_(m[f].day)+"</span>";a+="</div></div>",e.timeType&&(a+='<div class="_ai _bi" mx-change="'+t+'__F()" mx-view="mx-time/index?time='+s(c(e.timeValue))+"&types="+s(c(e.timeType))+'"></div>',e.hasBtn&&(a+='<div mxs="_Z:_" class="_bj"><button type="button" class="_an _ao" mx-click="'+t+'__b({enter:true})">确定</button><button type="button" class="_an _s" mx-click="'+t+'__b()">取消</button></div>')),a+="</div>"}if(e.types.month){a+='<div class="_ai',e.types.day&&(a+=" _ba"),e.showMonth&&(a+=" _bc"),a+='"><div mxa="_Z:a" class="_aU"><span mxs="_Z:_" class="__ _aV _aa" mx-click="'+t+'__z()">&#xe61e;</span><h4 mxa="_Z:f" mx-click="'+t+'__B()" class="_aX">'+_(e.year)+'</h4><span mxs="_Z:_" class="__ _aW _ab _bk" mx-click="'+t+'__z({next:true})">&#xe61e;</span></div><div mxa="_Z:g" class="_aY _ai">';for(var x,b=0;b<e.months.length;b++)a+='<span class="_bd',(x=e.months[b]).disabled&&(a+=" _bh"),x.selected&&(a+=" _bg"),a+='" ',x.disabled||(a+=' mx-click="'+t+"__D({month:'"+_(u(x.month))+"'})\" "),a+=">"+_(x.month)+"</span>";a+="</div></div>"}if(e.types.year){a+='<div class="_ai',(e.types.day||e.types.month)&&(a+=" _bb"),e.showYear&&(a+=" _bc"),a+='"><div mxa="_Z:a" class="_aU"><span mxs="_Z:_" class="__ _aV _aa" mx-click="'+t+'__z({range:true})">&#xe61e;</span><h4 mxa="_Z:h" class="_aX">'+_(e.startYear)+"-"+_(e.endYear)+'</h4><span mxs="_Z:_" class="__ _aW _ab _bk" mx-click="'+t+'__z({range:true,next:true})">&#xe61e;</span></div><div mxa="_Z:g" class="_aY _ai">';for(var v,y=0;y<e.years.length;y++)a+='<span class="_bd',(v=e.years[y]).selected&&(a+=" _bg"),v.disabled&&(a+=" _bh"),y&&y!=e.years.length-1||(a+=" _aT"),a+='" ',v.disabled||(a+=' mx-click="'+t+"__C({year:'"+_(u(v.year))+"'})\" "),a+=">"+_(v.year)+"</span>";a+="</div></div>"}return a+="</div>"},init:function(e){this.__f=e},render:function(){this.update(this.__f)},__p:function(){var e=this.updater;e.set({showYear:0,showMonth:0});e.get().timeType&&(this.__r&&(this.__s(this.__r),this.__t(),this.__u(),this.__v(),delete this.__r),this.__w&&(e.set({timeValue:this.__w}),delete this.__w)),e.digest()},update:function(e){(e=e||{}).selected||(e.selected=new Date);var t=function(e){e||(e="all");var t={year:!0,month:!0,day:!0};if("all"!=e)for(var a in t)-1===e.indexOf(a)&&delete t[a];return t}(e.dateType),a=0|e.weekStart,i=h(e.selected),n=this.updater,s=h(e.max),_=h(e.min),o=e.timeType,l=u(i,"hh:mm:ss");n.set({types:t,showYear:0,showMonth:0,timeType:o,timeValue:l,hasBtn:e.hasBtn,dateValue:u(i,e.formatter),max:s,min:_,id:this.id,weekStart:a,weekText:function(e){for(var t=[],a=0;a<7;a++)t[a]=r[(a+e)%7];return t}(a)}),this.__s(i),this.__t(),this.__u(),this.__v(!0)},__s:function(e){var t=this.updater;(e=h(e))&&t.set({year:e.getFullYear(),month:e.getMonth()+1,selectedYear:e.getFullYear(),selectedMonth:e.getMonth()+1,selected:u(e)})},__t:function(e){for(var t=this.updater,a=t.get(),i=a.year,n=a.min,s=a.max,r=i-i%10-1,_=r+11,o=[],l=r;l<=_;l++)o.push({year:l,selected:l==a.selectedYear,disabled:d(l,n,s)});t.set({startYear:r,endYear:_,years:o}),e&&t.digest()},__u:function(e){for(var t=[],a=this.updater,i=a.get(),n=i.year,s=i.min,r=i.max,_=1;_<=12;_++)t.push({month:_,selected:n==i.selectedYear&&_==i.selectedMonth,disabled:l(n,_-1,s,r)});a.set({months:t}),e&&a.digest()},__v:function(e){var t,a,i,n,r=[],_=this.updater,l=_.get("weekStart"),d=_.get("year"),c=_.get("month"),h=(7-l+new Date(d,c-1,1).getDay())%7,p=[],g=s(d,c),m=s(d,c-1),f=_.get("max"),x=_.get("min"),b=_.get("selected");for(t=1;t<=h;t++)a=m-(h-t),i=new Date(d,c-2,a),p.push({month:c-1,full:u(i),day:a,otherMonth:!0,disabled:o(i,x,f)});for(t=1;t<=g;t++)i=new Date(d,c-1,t),n=u(i),p.push({selected:n==b,day:t,month:c,full:n,disabled:o(i,x,f)}),(t+h)%7==0&&(r.push(p),p=[]);var v=p.length;for(t=v;t<14&&(a=t-v+1,i=new Date(d,c,a),p.push({month:c+1,day:a,otherMonth:!0,full:u(i),disabled:o(i,x,f)}),(t+1)%7!=0||(r.push(p),p=[],6!=r.length));t++);_.set({days:r}),e&&_.digest()},__x:function(e){var t=this.updater.get();t.types.day?t.timeType&&t.hasBtn?e&&n("#"+this.id).trigger({type:"change",date:t.dateValue,time:t.timeType?t.timeValue:null}):n("#"+this.id).trigger({type:"change",date:t.dateValue,time:t.timeType?t.timeValue:null}):n("#"+this.id).trigger({type:"change",date:t.selectedYear+(t.types.month?"-"+("0"+t.selectedMonth).slice(-2):"")})},"__y<click>":function(e){var t=this.updater,a=t.get("month"),i=t.get("year");e.params.next?(a+=1)>12&&(a=1,i++):(a-=1)<1&&(a=12,i--),t.set({year:i,month:a}),this.__v(!0)},"__z<click>":function(e){var t=e.params,a=this.updater,i=a.get("year");t.range?i+=t.next?10:-10:i+=t.next?1:-1,a.set({year:i}),t.range?this.__t(!0):this.__u(!0)},"__A<click>":function(){this.updater.set({showMonth:1}),this.__u(!0)},"__B<click>":function(){this.updater.set({showYear:1}),this.__t(!0)},"__C<click>":function(e){var t=e.params.year,a=this.updater.get().types;a.day||a.month?(this.updater.set({showYear:0,year:+t}),a.month?this.__u(!0):this.__v(!0)):(this.__s(t+"-01-01"),this.__t(!0),this.__x())},"__D<click>":function(e){var t=e.params.month,a=this.updater,i=a.get();i.types.day?(a.set({showMonth:0,month:+t}),this.__v(!0)):(this.__s(i.year+"-"+t+"-01"),this.__u(!0),this.__x())},"__E<click>":function(e){var t=this.updater,a=t.get("month"),i=e.params.toMonth!=a;this.__s(e.params.date),this.__r||(this.__r=t.get("dateValue")),i&&(this.__t(),this.__u()),t.set({dateValue:e.params.date}),this.__v(!0),this.__x()},"__F<change>":function(e){e.stopPropagation();this.__w||(this.__w=this.updater.get("timeValue")),this.updater.set({timeValue:e.time}),this.__v(!0),this.__x()},"__b<click>":function(e){if(e.params.enter)return delete this.__r,delete this.__w,void this.__x(!0);n("#"+this.id).trigger("cancel")},"__G<contextmenu>":function(e){e.preventDefault()}},{parse:h,format:u,dateDisabled:o})});