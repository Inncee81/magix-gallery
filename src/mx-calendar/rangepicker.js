define("mx-calendar/rangepicker",["magix","$","../mx-monitor/index","./index","./range"],(t,_,i)=>{var e=t("magix"),n=t("$"),a=t("../mx-monitor/index"),s=t("./index"),r=t("./range"),o=["today","yesterday","passed7","lastestThisMonth","preMonth","lastest15"],h=e.View.extend({tmpl:function(t,_){var i,e="",n={"&":"amp","<":"lt",">":"gt",'"':"#34","'":"#39","`":"#96"},a=/[&<>"'`]/g,s=function(t){return null==t?"":""+t},r=function(t){return"&"+n[t]+";"};return e+='<div mx-change="__W()" mx-cancel="__a()" id="rpcnt_'+(i=_.viewId,s(i).replace(a,r))+'"></div>'},init:function(t){var _=this,i=t.start,e=t.end,h=t.timeType,c=t.formatter||"YYYY-MM-dd"+(h?" hh:mm:ss":""),d=s.format(new Date,c);_.__O=c,_.__T=!0,_.__M=h,_.__N=t.dateType,i||(_.__T=!1,i=d),e||(_.__T=!1,e=d),_.__U="false"!=t.shortcuts,_.__H=t.max,_.__G=t.min,_.__K=t.placement,_.__L=t.align,_.__J=_.__U?o:[],_.__I=r.getDescription(i,e,_.__J,c),a.__e();var f=n("#"+_.id);_.__f=f,(f=f.prev("input")).prop("vframe",_.owner);var p=function(){_.__g()},u=function(t){t.dates||t.stopPropagation()};_.on("destroy",function(){a.__h(_),a.__i(),f.off("click",p).off("change",u)}),f.on("click",p).on("change",u),_.__j=f,f.prop("autocomplete","off")},__k:function(t){var _=e.inside(t,this.id)||e.inside(t,this.__j[0]);if(!_)for(var i=this.owner.children(),n=i.length-1;n>=0;n--){var a=e.Vframe.get(i[n]);if(a&&(_=a.invoke("__k",[t])),_)break}return _},__V:function(){var t=this.__I;t.quickDateText?this.__j.val(t.quickDateText):this.__j.val(t.startStr+" ~ "+t.endStr)},render:function(){this.updater.digest({viewId:this.id}),this.__T&&this.__V()},__g:function(){if(!this.__l){var t=this.__f,_=this.__j;t.show(),this.__l=!0,this.__n||(this.__n=!0,this.owner.mountVframe("rpcnt_"+this.id,"mx-calendar/range",{min:this.__G,max:this.__H,timeType:this.__M,dateType:this.__N,formatter:this.__O,dates:this.__I,quickDates:this.__J,placement:this.__K,align:this.__L})),a.__m(this);var i=_.offset(),e=void 0,n=void 0;switch(this.__K){case"top":n=i.top-t.outerHeight()-5;break;default:n=i.top+_.outerHeight()+5}switch(this.__L){case"right":e=i.left+_.outerWidth()-t.outerWidth();break;default:e=i.left}t.offset({left:e,top:n})}},__a:function(t){if(this.__l){this.__f.hide();var _=n("#rpcnt_"+this.id);this.__l=!1,a.__h(this),t||_.invokeView("__P")}},"__W<change>":function(t){t.stopPropagation(),this.__I=t.dates,this.__V(),this.__a(!0),this.__j.trigger({type:"change",dates:t.dates})},"__a<cancel>":function(t){t.stopPropagation(),this.__a()}});i.exports=h});