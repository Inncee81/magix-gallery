define("mx-hour/week",["magix","$","../mx-monitor/index","./index"],(t,_,a)=>{var i=t("magix"),e=t("$"),d=t("../mx-monitor/index");i.applyStyle("_x","._dB{padding:0;height:38.4px;text-align:center}._dC{text-align:left;padding-left:10px}._dD{border:none}._dE{border-right:1px solid #e6e6e6}._dF{visibility:hidden}._dG:hover ._dF{visibility:visible}._dH{position:absolute;display:none;background-color:#fff;border:1px solid #e6e6e6;border-radius:4px;padding:10px;margin-top:10px;z-index:10}._dI{margin-bottom:10px;width:300px;border-bottom:1px solid #e6e6e6}._dJ{margin:0 25px 10px 0}._dK{visibility:visible}");var s=t("./index"),n="111111111111111111111111",r="000000000000000000000000",l=function(t){var _=0;for(t=(t=(t+"").split(",")).slice(_,7);_<7;)t[_]=s.improve(t[_]),_++;return t};a.exports=i.View.extend({tmpl:function(t,_){_=_||"";var a="",i={"&":"amp","<":"lt",">":"gt",'"':"#34","'":"#39","`":"#96"},e=/[&<>"'`]/g,d=function(t){return null==t?"":""+t},s=function(t){return"&"+i[t]+";"},n=function(t){return d(t).replace(e,s)};a+='<div class="_dH" id="dlg_'+n(t.viewId)+'"><div mxa="_^:_" class="_dI">';for(var r=0;r<t.days.length;r++)a+='<label class="_dJ',r==t.currentClone&&(a+=" _am"),a+='"><input class="_h" type="checkbox" value="'+n(r)+'" ',r==t.currentClone&&(a+=" disabled"),a+="/>周"+n(t.days.charAt(r))+"</label>";a+='</div><div mxs="_^:_"><button type="button" class="_an _ao" mx-click="'+_+'__df()">确认</button><button type="button" mx-click="'+_+'__de()" class="_an _s">取消</button></div></div><table mxa="_^:a" class="_W"><thead><tr><th mxs="_^:a" class="_dB" width="100">快捷设置</th><th mxa="_^:b" colspan="2" class="_dB _dC"><label mxa="_^:c" class="_t"><input class="_at" type="radio" mx-change="'+_+'__dc({type:0})" name="st-'+n(t.viewId)+'" ',t.allDays&&(a+=" checked"),a+='/> 全日程投放</label><label mxa="_^:d" class="_v"><input class="_at" type="radio" mx-change="'+_+'__dc({type:1})" name="st-'+n(t.viewId)+'" ',t.weekdays&&(a+=" checked"),a+='/> 工作日（周一至周五）投放</label><label mxa="_^:d" class="_v"><input class="_at" type="radio" mx-change="'+_+'__dc({type:2})" name="st-'+n(t.viewId)+'" ',t.weekends&&(a+=" checked"),a+='/> 休息日（周六、周日）投放</label></th></tr><tr><th mxs="_^:b" class="_dB">时间</th><th mxa="_^:e" class="_dB"><table mxa="_^:a" class="_W"><tbody><tr>';for(var l=0;l<24;l++)a+='<td class="_dB _dD',l<23&&(a+=" _dE"),a+='">'+n(("0"+l).slice(-2))+"</td>";a+='</tr></tbody></table></th><th mxs="_^:c" width="80" class="_dB">操作</th></tr></thead><tbody>';for(var c=0;c<t.days.length;c++)a+='<tr mxa="_^:f" class="_dG"><td class="_dB _ad" mx-click="'+_+"__aY({day:"+n(c)+'})">周'+n(t.days.charAt(c))+'</td><td mxa="_^:e" class="_dB"><table mxa="_^:a" class="_W"><tbody id="hours_'+n(t.viewId)+"_"+n(c)+'" mx-view="mx-hour/index?border=no" mx-change="'+_+"__cX({day:"+n(c)+'})"></tbody></table></td><td mxa="_^:e" class="_dB"><div mxa="_^:g" class="_dF"><a mx-click="'+_+"__dd({day:"+n(c)+'})" href="#">复制到</a></div></td></tr>';return a+="</tbody></table>"},init:function(t){var _=this;_.__aZ=l(t.days||[r,r,r,r,r,r,r]),d.__g(),_.__k=e("#"+_.id),_.on("destroy",function(){d.__i(_),d.__j()})},render:function(){this.updater.digest({viewId:this.id,days:"一二三四五六日"}),this.val(this.__aZ)},__l:function(t){var _=i.inside(t,"dlg_"+this.id);if(!_&&this.__d_){var a=this.__d_.parent();_=i.inside(t,a[0])}return _},__da:function(){var t=this.__aZ.slice(0,5).join(""),_=this.__aZ.slice(-2).join(""),a=t.indexOf("1")>-1,i=_.indexOf("1")>-1,e=-1==t.indexOf("0"),d=-1==_.indexOf("0"),s=e&&d;this.updater.digest({allDays:s,weekdays:!i&&e,weekends:d&&!a})},__db:function(){for(var t=this.__aZ,_=0,a=void 0,e=void 0;_<t.length;_++)a=t[_],(e=i.Vframe.get("hours_"+this.id+"_"+_))&&e.invoke("val",[a])},val:function(t){return t&&(this.__aZ=l(t),this.__da(),this.__db()),this.__aZ},__e:function(){if(!this.__m){this.__m=!0,d.__n(this);var t=this.__d_,_=e("#dlg_"+this.id);_.show();var a=t.offset(),i=a.left+t.outerWidth()-_.outerWidth(),s=a.top+t.outerHeight()+10;_.offset({left:i,top:s}),t.parent().addClass("_dK")}},__b:function(){if(this.__m){this.__m=!1,d.__i(this),e("#dlg_"+this.id).hide();var t=this.__d_;t&&t.parent().removeClass("_dK")}},__x:function(){var t=this.__aZ;this.__k.val(t).trigger({type:"change",days:t})},"__dc<change>":function(t){switch(t.stopPropagation(),t.params.type){case 0:this.__aZ=[n,n,n,n,n,n,n];break;case 1:this.__aZ=[n,n,n,n,n,r,r];break;case 2:this.__aZ=[r,r,r,r,r,n,n]}this.__da(),this.__db(),this.__x()},"__cX<change>":function(t){t.stopPropagation();var _=this;_.__aZ[t.params.day]=t.range,clearTimeout(_.__cS),_.__cS=setTimeout(_.wrapAsync(function(){_.__da()}),100),_.__x()},"__aY<click>":function(t){var _=t.params.day,a=i.Vframe.get("hours_"+this.id+"_"+_);if(a){a.invoke("val").indexOf("0")>-1?a.invoke("val",[this.__aZ[_]=n]):a.invoke("val",[this.__aZ[_]=r]),this.__da(),this.__x()}},"__dd<click>":function(t){t.preventDefault();var _=e(t.eventTarget);this.__m||(this.updater.digest({currentClone:t.params.day}),this.__d_=_,this.__e())},"__de<click>":function(){this.__b()},"__df<click>":function(){var t=this,_=t.updater.get("currentClone"),a=t.__aZ[_];e("#dlg_"+t.id+" input:checked").each(function(_,i){t.__aZ[i.value]=a}),t.__b(),t.__db(),t.__da()}})});