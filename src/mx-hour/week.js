define("mx-hour/week",["magix","$","../mx-monitor/index","./index"],(t,i,_)=>{var a=t("magix"),e=t("$"),d=t("../mx-monitor/index");a.applyStyle("_y","._dH{padding:0;height:38.4px;text-align:center}._dI{text-align:left;padding-left:10px}._dJ{border:none}._dK{border-right:1px solid #e6e6e6}._dL{visibility:hidden}._dM:hover ._dL{visibility:visible}._dN{position:absolute;display:none;background-color:#fff;border:1px solid #e6e6e6;border-radius:4px;padding:10px;margin-top:10px;z-index:10}._dO{margin-bottom:10px;width:300px;border-bottom:1px solid #e6e6e6}._dP{margin:0 25px 10px 0}._dQ{visibility:visible}");var s=t("./index"),n="111111111111111111111111",c="000000000000000000000000",l=function(t){var i=0;for(t=(t=(t+"").split(",")).slice(i,7);i<7;)t[i]=s.improve(t[i]),i++;return t};_.exports=a.View.extend({tmpl:{html:'<div class="_dN" id="dlg_<%=$$.viewId%>"><div class="_dO"><%for(var _=0;_<$$.days.length;_++){%><label class="_dP<%if(_==$$.currentClone){%> _am<%}%>"><input class="_h" type="checkbox" value="<%=_%>" <%if(_==$$.currentClone){%> disabled<%}%>>周<%=$$.days.charAt(_)%></label><%}%></div><div><button type="button" class="_an _ao" mx-click="__dd()">确认</button><button type="button" mx-click="__dc()" class="_an _s">取消</button></div></div><table class="_W"><thead><tr><th class="_dH" width="100">快捷设置</th><th colspan="2" class="_dH _dI"><label class="_t"><input class="_at" type="radio" mx-change="__da({type:0})" name="st-<%=$$.viewId%>" <%if($$.allDays){%> checked<%}%>> 全日程投放</label><label class="_v"><input class="_at" type="radio" mx-change="__da({type:1})" name="st-<%=$$.viewId%>" <%if($$.weekdays){%> checked<%}%>> 工作日（周一至周五）投放</label><label class="_v"><input class="_at" type="radio" mx-change="__da({type:2})" name="st-<%=$$.viewId%>" <%if($$.weekends){%> checked<%}%>> 休息日（周六、周日）投放</label></th></tr><tr><th class="_dH">时间</th><th class="_dH"><table class="_W"><tbody><tr><%for(var a=0;a<24;a++){%><td class="_dH _dJ<%if(a<23){%> _dK<%}%>"><%=(\'0\'+a).slice(-2)%></td><%}%></tr></tbody></table></th><th width="80" class="_dH">操作</th></tr></thead><tbody><%for(var b=0;b<$$.days.length;b++){%><tr class="_dM"><td class="_dH _ad" mx-click="__aW({day:<%=b%>})">周<%=$$.days.charAt(b)%></td><td class="_dH"><table class="_W"><tbody id="hours_<%=$$.viewId%>_<%=b%>" mx-view="mx-hour/index?border=no" mx-change="__cV({day:<%=b%>})"></tbody></table></td><td class="_dH"><div class="_dL"><a mx-click="__db({day:<%=b%>})" href="#">复制到</a></div></td></tr><%}%></tbody></table>'},init:function(t){var i=this;i.__aX=l(t.days||[c,c,c,c,c,c,c]),d.__d(),i.__i=e("#"+i.id),i.on("destroy",function(){d.__g(i),d.__h()})},render:function(){this.updater.digest({viewId:this.id,days:"一二三四五六日"}),this.val(this.__aX)},__j:function(t){var i=a.inside(t,"dlg_"+this.id);if(!i&&this.__cY){var _=this.__cY.parent();i=a.inside(t,_[0])}return i},__cZ:function(){var t=this.__aX.slice(0,5).join(""),i=this.__aX.slice(-2).join(""),_=t.indexOf("1")>-1,a=i.indexOf("1")>-1,e=-1==t.indexOf("0"),d=-1==i.indexOf("0"),s=e&&d;this.updater.digest({allDays:s,weekdays:!a&&e,weekends:d&&!_})},__d_:function(){for(var t=this.__aX,i=0,_=void 0,e=void 0;i<t.length;i++)_=t[i],(e=a.Vframe.get("hours_"+this.id+"_"+i))&&e.invoke("val",[_])},val:function(t){return t&&(this.__aX=l(t),this.__d_(),this.__cZ()),this.__aX},__f:function(){if(!this.__k){this.__k=!0,d.__l(this);var t=this.__cY,i=e("#dlg_"+this.id);i.show();var _=t.offset(),a=_.left+t.outerWidth()-i.outerWidth(),s=_.top+t.outerHeight()+10;i.offset({left:a,top:s}),t.parent().addClass("_dQ")}},__a:function(){if(this.__k){this.__k=!1,d.__g(this),e("#dlg_"+this.id).hide();var t=this.__cY;t&&t.parent().removeClass("_dQ")}},__v:function(){var t=this.__aX;this.__i.val(t).trigger({type:"change",days:t})},"__da<change>":function(t){switch(t.stopPropagation(),t.params.type){case 0:this.__aX=[n,n,n,n,n,n,n];break;case 1:this.__aX=[n,n,n,n,n,c,c];break;case 2:this.__aX=[c,c,c,c,c,n,n]}this.__cZ(),this.__d_(),this.__v()},"__cV<change>":function(t){t.stopPropagation();var i=this;i.__aX[t.params.day]=t.range,clearTimeout(i.__cQ),i.__cQ=setTimeout(i.wrapAsync(function(){i.__cZ()}),100),i.__v()},"__aW<click>":function(t){var i=t.params.day,_=a.Vframe.get("hours_"+this.id+"_"+i);if(_){_.invoke("val").indexOf("0")>-1?_.invoke("val",[this.__aX[i]=n]):_.invoke("val",[this.__aX[i]=c]),this.__cZ(),this.__v()}},"__db<click>":function(t){t.preventDefault();var i=e(t.eventTarget);this.__cY=i,this.__f(),this.updater.digest({currentClone:t.params.day})},"__dc<click>":function(){this.__a()},"__dd<click>":function(){var t=this,i=t.updater.get("currentClone"),_=t.__aX[i];e("#dlg_"+t.id+" input:checked").each(function(i,a){t.__aX[a.value]=_}),t.__a(),t.__d_(),t.__cZ()}})});