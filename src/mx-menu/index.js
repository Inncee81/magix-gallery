define("mx-menu/index",["magix","$","../mx-monitor/index"],(e,_,t)=>{var i=e("magix"),d=e("$"),a=e("../mx-monitor/index"),n=i.Vframe;i.applyStyle("_z","._dQ{-webkit-transition:margin-left .25s;transition:margin-left .25s}._dR{background-color:#fff;border:1px solid #e6e6e6;border-radius:4px;cursor:default;padding:4px 0}._dS{height:29px;line-height:29px;cursor:default;border-radius:4px;padding:0 12px;margin:0 4px}._dT{color:#fff;background-color:#f96447}._dU{margin-left:10px}._dV{margin-left:-10px}._dW{font-size:12px;-webkit-transform:scaleX(-1);transform:scaleX(-1);top:25%;color:#e6e6e6}");var r=null,s={left:"_dV",right:"_dU"};t.exports=i.View.extend({tmpl:{html:'<div mx-guid="g0" style="width:<%=$$.width%>px;<%if($$.isChild||$$.contextMenu){%>position:absolute;left:-1000000px<%}%>" mx-mouseover="__dl();" class="_dQ" mx-contextmenu="__D()"><ul mx-guid="g1" class="_dR _aj">2</ul></div>',subs:[{keys:["width","isChild","contextMenu"],path:'div[mx-guid="g0"]',attr:'style="width:<%=$$.width%>px;<%if($$.isChild||$$.contextMenu){%>position:absolute;left:-1000000px<%}%>"',attrs:[{n:"style"}]},{keys:["list","valueKey","textKey","viewId"],path:'ul[mx-guid="g1"]',tmpl:'<%for(var _=0,a;_<$$.list.length;_++){a=$$.list[_]%><li class="_al _dS" mx-mouseover="__dk({id:\'<%=$eq(a[$$.valueKey])%>\'})" mx-mouseout="__dk({id:\'<%=$eq(a[$$.valueKey])%>\'});\n            " <%if(!a.children){%> mx-click="__bX({id:\'<%=$eq(a[$$.valueKey])%>\'})" <%}%> title="<%=a[$$.textKey]%>" id="<%=$$.viewId%>_<%=a[$$.valueKey]%>"><%=a[$$.textKey]%> <%if(a.children){%><span class="_ab __ _dW">&#xe61e;</span><%}%></li><%}%>',s:"2"}]},init:function(e){var _=this;_.assign(e),_.__cU=e.__cU,_.__cV=e.__cV,_.__cW=e.picked,_.__cX?_.on("destroy",function(){d("#"+_.id).remove()}):(a.__d(),_.on("destroy",function(){a.__f(_),a.__g(),_.__cU&&d("#"+_.id).remove()}))},assign:function(e){var _=this,t=e.width||340,d=e.valueKey||"id",a=e.parentKey||"pId",n=e.textKey||"text",r=e.__cX;if(r)_.__c_=e.__c_,_.__bL=e.list;else{var s=function(e,_,t){for(var d={},a={},n=[],r=0,s=e.length;r<s;r++){var o=i.mix({},e[r]);d[o[_]]=o,a[o[_]]&&(o.children=a[o[_]]),i.has(o,t)&&""!==o[t]?d[o[t]]?(d[o[t]].children||(d[o[t]].children=[])).push(o):a[o[t]]?a[o[t]].push(o):a[o[t]]=[o]:n.push(o)}return{list:n,map:d}}(e.list,d,a);_.__c_=s.map,_.__bL=s.list}return _.__cX=r,_.__cY=t,_.__cZ=d,_.__d_=a,_.__da=n,_.__db=e.pId,_.__dc=e.__dc,!0},render:function(){var e=this;e.updater.digest({viewId:e.id,contextMenu:e.__cU,isChild:e.__cX,list:e.__bL,width:e.__cY,valueKey:e.__cZ,textKey:e.__da}),e.__cU&&e.__e(e.__cV)},__i:function(e){var _=this,t=i.inside(e,_.id);if(!t)for(var d=0,a=_.owner.children();d<a.length;d++){var r=a[d],s=n.get(r);if(s&&(t=s.invoke("__i",e)))break}return t},__e:function(e,_){var t=this;if(!t.__j){t.__j=1;var i=d("#"+t.id+" div"),n=d(document),o=-1,c=-1,l="right",u=i.outerWidth(),f=i.outerHeight(),v=0,m=0;if(_){var h=_.offset();v=_.outerWidth(),m=_.outerHeight(),o=h.left+v,c=h.top}else o=e.pageX,c=e.pageY;o+u>n.width()&&(l="left",(o=o-u-v)<0&&(o=0)),c+f>n.height()&&(c-=f,(c+=m)<0&&(c=0)),_&&("right"==l?o-=10:o+=10);var p=t.__dc||t;r!=p&&(r=p),t.__cX?i.css({left:o,top:c}).addClass(s[l]):i.css({left:o,top:c}),p.__dd||(p.__dd=1,a.__k(p))}},__a:function(){for(var e=this,_=e.owner.children(),t=_.length-1;t>=0;t--){var i=n.get(_[t]);i&&i.invoke("__a")}if(e.__j){e.__j=!1;var r=d("#"+e.id+" div");e.__cX?(r.removeClass(s.left).removeClass(s.right),r.css({left:-1e5}),e.__cX.removeClass("_dT")):(e.__cU&&r.css({left:-1e4}),delete e.__dd,a.__f(e))}},__df:function(e){clearTimeout(this["__de"+e])},__dh:function(e,_,t){var i=this;i["__dg"+_]=setTimeout(i.wrapAsync(function(){var a=i.id+"_menu_"+_,r=n.get(a);r||(d("body").append('<div id="'+a+'" />'),r=i.owner.mountVframe(a,"mx-menu/index",{__cX:d("#"+i.id+"_"+_),width:i.__cY,valueKey:i.__cZ,textKey:i.__da,parentKey:i.__d_,list:t,pId:_,__dc:i.__dc||i,__c_:i.__c_})),r.invoke("__e",[null,e],!0)}),250)},__di:function(e){var _=this,t=_.id+"_menu_"+e,i=n.get(t);i&&(_["__de"+e]=setTimeout(_.wrapAsync(function(){i.invoke("__a")}),50))},"__dk<mouseover,mouseout>":function(e){var _=this;if(!i.inside(e.relatedTarget,e.eventTarget)){var t=d(e.eventTarget);t["mouseout"==e.type?"removeClass":"addClass"]("_dT");var a=e.params.id;if(_.__di(_.__dj),"mouseover"==e.type){var n=_.__c_[a].children;n&&(_.__df(a),_.__dh(t,a,n),_.__dj=a)}else clearTimeout(_["__dg"+a])}},"__dl<mouseover>":function(e){var _=this;!i.inside(e.relatedTarget,e.eventTarget)&&(_.__cX||r==_||r&&r.__a(),_.__cX&&(d(_.__cX).addClass("_dT"),_.owner.parent().invoke("__df",[_.__db])))},"__bX<click>":function(e){var _=this.__dc||this,t=d("#"+_.id),i={type:"pick",item:this.__c_[e.params.id]};t.trigger(i),_.__a();var a=this.__cW;a&&a(i.item)},"__D<contextmenu>":function(e){e.preventDefault()}},{show:function(e,_,t){var a=_.eventTarget;a.id||(a.id=i.guid());var n="ctx_"+a.id,r=i.Vframe.get(n);r?r.invoke("__e",[_],!0):(d("body").append('<div id="'+n+'" />'),t=t||{},i.mix(t,{__cU:1,__cV:_}),r=e.owner.mountVframe(n,"mx-menu/index",t))}})});