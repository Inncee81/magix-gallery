define("mx-taginput/suggest",["magix","$","../mx-monitor/index"],(t,_,i)=>{var e=t("magix"),s=t("$"),r=t("../mx-monitor/index");e.applyStyle("_M","._ft{border:1px solid #e6e6e6;font-size:14px;max-height:260px;overflow:auto;list-style:none;border-radius:4px;background-color:#fff;padding:3px 0;line-height:1.8;position:relative;z-index:1}._fu{padding:0 4px;cursor:pointer;margin:2px 0}._fv{color:#666;display:block;width:100%;padding:0 6px;height:29px;line-height:29px;border-radius:4px}._fw,._fv:active,._fv:focus,._fv:hover{color:#333;background-color:#f0f0f0}._fw{border-radius:4px;text-decoration:none;outline:0}"),i.exports=e.View.extend({tmpl:function(t){var _="",i={"&":"amp","<":"lt",">":"gt",'"':"#34","'":"#39","`":"#96"},e=/[&<>"'`]/g,s=function(t){return null==t?"":""+t},r=function(t){return"&"+i[t]+";"},o=function(t){return s(t).replace(e,r)},h=function(_,i,e){for(e=t[""];--e;)if(t[i=""+e]===_)return i;return t[i=""+t[""]++]=_,i};if(_+='<ul class="',t.rList&&t.list.length&&(_+="_ft "),_+='_aj" style="width:'+o(t.width)+'px;" mx-mouseout="__ei()" mx-mousemove="__fe()" mx-contextmenu="__G()">',t.rList)for(var n,f=0;f<t.list.length;f++)n=t.list[f],_+='<li class="_fu"><a href="#" class="_fv" data-idx="'+o(f)+'" mx-click="__fd({item:\'',_+=h(n),_+='\'})" id="sg_'+o(t.viewId)+"_"+o(f)+'">'+o(t.textKey?n[t.textKey]:n)+"</a></li>";return _+="</ul>"},init:function(t){var _=this;_.__gp=t.scrollTop||0,_.__eS=t.list||[],_.__gq=0|(t.offsetLeft||0),r.__f(),_.on("destroy",function(){r.__i(_),r.__j(),_.__k.off("keyup paste input",_.__eT).off("focus",_.__eU)}),_.updater.set({viewId:_.id,width:t.width||340,textKey:t.textKey,valueKey:t.valueKey}),_.__gr=-1,_.__gs=[_.id].concat(t.relateIds.split(","))},__l:function(t){for(var _=this.__gs,i=0;i<_.length;i++)if(e.inside(t,_[i]))return!0;return!1},__gu:function(t,_){_||(this.__eS=t),this.__gr=-1,this.updater.digest({list:this.__gt=t})},render:function(){var t=this,_=s("#"+t.id);t.__g=_,_=_.prev("input"),t.__k=_,_.on("focus",t.__eU=s.proxy(t.__h,t)).on("keyup paste input",t.__eT=s.proxy(t.__eY,t)),t.__gu(t.__eS),t.__eZ=s("#"+t.id+" ul"),setTimeout(t.wrapAsync(function(){t.__eZ.prop("scrollTop",t.__gp)}),0)},__eY:function(t){this.__m||this.__h();var _=this.__gt;if(40==t.keyCode)this.__f_(),this.__gr++,this.__gr>=_.length&&(this.__gr=0),this.__fa();else if(38==t.keyCode)this.__f_(),this.__gr--,this.__gr<0&&(this.__gr=_.length-1),this.__fa();else if(13==t.keyCode){if(this.__gr>-1&&this.__gr<this.__gt.length){var i=this.__gt[this.__gr];this.__f_(),this.__gr=-1,this.__b(),this.__k.trigger({type:"pick",item:i})}}else{var e=s.trim(t.target.value);if(e!=this.__cL)if(this.__cL=e,e){for(var r=[],o=this.__eS.slice(),h=this.updater.get("textKey"),n=0,f=void 0;n<o.length;n++)f=o[n],((h?f[h]:f)+"").indexOf(e)>=0&&r.push(f);this.__gu(r,!0)}else this.__gu(this.__eS,!0)}},__h:function(){var t=this.updater;if(!this.__m){this.__m="from show ";t.get("rList")||t.digest({rList:!0}),r.__n(this);var _=this.__k.position();this.__g.show().css({display:"block",left:_.left+this.__gq,top:_.top+this.__k.outerHeight()+10}),this.__k.trigger("showlist")}},__f_:function(){s("#sg_"+this.id+"_"+this.__gr).removeClass("_fw")},__fa:function(t){var _=s("#sg_"+this.id+"_"+this.__gr);if(_.addClass("_fw"),!t&&_.length){this.__fc=1;var i=_.outerHeight(),e=(this.__gr+1)*i,r=this.__eZ,o=r.height(),h=r.prop("scrollTop"),n=Math.ceil(o/i);e<h+i?r.prop("scrollTop",e-i):e>h+o&&r.prop("scrollTop",(this.__gr+2-n)*i)}},__b:function(){this.__m&&(this.__m=!1,r.__i(this),this.__g.hide(),this.__k.trigger("hidelist"))},"__fd<click>":function(t){t.preventDefault();var _=t.params.item;this.__b(),this.__k.trigger({type:"pick",item:_,scrollTop:this.__eZ.prop("scrollTop")})},"__ei<mouseout>":function(t){if(!e.inside(t.relateTarget,t.eventTarget)){this.__f_(),this.__gr=-1}},"__fe<mousemove>":function(t){if(this.__fc)delete this.__fc;else{var _=s(t.target);if(_.is("li")){var i=_.data("idx");i!=this.__gr&&(this.__f_(),this.__gr=i,this.__fa(!0))}}},"__G<contextmenu>":function(t){t.preventDefault()}})});