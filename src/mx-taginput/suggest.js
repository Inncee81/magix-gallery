define("mx-taginput/suggest",["magix","$","../mx-monitor/index"],(t,_,i)=>{var e=t("magix"),s=t("$"),o=t("../mx-monitor/index");e.applyStyle("_M","._ft{border:1px solid #e6e6e6;font-size:14px;max-height:260px;overflow:auto;list-style:none;border-radius:4px;background-color:#fff;padding:3px 0;line-height:1.8;position:relative;z-index:1}._fu{padding:0 4px;cursor:pointer;margin:2px 0}._fv{color:#666;display:block;width:100%;padding:0 6px;height:29px;line-height:29px;border-radius:4px}._fw,._fv:active,._fv:focus,._fv:hover{color:#333;background-color:#f0f0f0}._fw{border-radius:4px;text-decoration:none;outline:0}"),i.exports=e.View.extend({tmpl:function(t,_){var i="",e={"&":"amp","<":"lt",">":"gt",'"':"#34","'":"#39","`":"#96"},s=/[&<>"'`]/g,o=function(t){return null==t?"":""+t},r=function(t){return"&"+e[t]+";"},h=function(t){return o(t).replace(s,r)},n=function(i,e,s){for(s=_[t];--s;)if(_[e=t+s]===i)return e;return _[e=t+_[t]++]=i,e};if(i+='<ul class="',_.rList&&_.list.length&&(i+="_ft "),i+='_aj" style="width:'+h(_.width)+'px;" mx-mouseout="__eh()" mx-mousemove="__fd()" mx-contextmenu="__F()">',_.rList)for(var f,l=0;l<_.list.length;l++)f=_.list[l],i+='<li class="_fu"><a href="#" class="_fv" data-idx="'+h(l)+'" mx-click="__fc({item:\'',i+=n(f),i+='\'})" id="sg_'+h(_.viewId)+"_"+h(l)+'">'+h(_.textKey?f[_.textKey]:f)+"</a></li>";return i+="</ul>"},init:function(t){var _=this;_.__go=t.scrollTop||0,_.__eR=t.list||[],_.__gp=0|(t.offsetLeft||0),o.__e(),_.on("destroy",function(){o.__h(_),o.__i(),_.__j.off("keyup paste input",_.__eS).off("focus",_.__eT)}),_.updater.set({viewId:_.id,width:t.width||340,textKey:t.textKey,valueKey:t.valueKey}),_.__gq=-1,_.__gr=[_.id].concat(t.relateIds.split(","))},__k:function(t){for(var _=this.__gr,i=0;i<_.length;i++)if(e.inside(t,_[i]))return!0;return!1},__gt:function(t,_){_||(this.__eR=t),this.__gq=-1,this.updater.digest({list:this.__gs=t})},render:function(){var t=this,_=s("#"+t.id);t.__f=_,_=_.prev("input"),t.__j=_,_.on("focus",t.__eT=s.proxy(t.__g,t)).on("keyup paste input",t.__eS=s.proxy(t.__eX,t)),t.__gt(t.__eR),t.__eY=s("#"+t.id+" ul"),setTimeout(t.wrapAsync(function(){t.__eY.prop("scrollTop",t.__go)}),0)},__eX:function(t){this.__l||this.__g();var _=this.__gs;if(40==t.keyCode)this.__eZ(),this.__gq++,this.__gq>=_.length&&(this.__gq=0),this.__f_();else if(38==t.keyCode)this.__eZ(),this.__gq--,this.__gq<0&&(this.__gq=_.length-1),this.__f_();else if(13==t.keyCode){if(this.__gq>-1&&this.__gq<this.__gs.length){var i=this.__gs[this.__gq];this.__eZ(),this.__gq=-1,this.__a(),this.__j.trigger({type:"pick",item:i})}}else{var e=s.trim(t.target.value);if(e!=this.__cK)if(this.__cK=e,e){for(var o=[],r=this.__eR.slice(),h=this.updater.get("textKey"),n=0,f=void 0;n<r.length;n++)f=r[n],((h?f[h]:f)+"").indexOf(e)>=0&&o.push(f);this.__gt(o,!0)}else this.__gt(this.__eR,!0)}},__g:function(){var t=this.updater;if(!this.__l){this.__l="from show ";t.get("rList")||t.digest({rList:!0}),o.__m(this);var _=this.__j.position();this.__f.show().css({display:"block",left:_.left+this.__gp,top:_.top+this.__j.outerHeight()+10}),this.__j.trigger("showlist")}},__eZ:function(){s("#sg_"+this.id+"_"+this.__gq).removeClass("_fw")},__f_:function(t){var _=s("#sg_"+this.id+"_"+this.__gq);if(_.addClass("_fw"),!t&&_.length){this.__fb=1;var i=_.outerHeight(),e=(this.__gq+1)*i,o=this.__eY,r=o.height(),h=o.prop("scrollTop"),n=Math.ceil(r/i);e<h+i?o.prop("scrollTop",e-i):e>h+r&&o.prop("scrollTop",(this.__gq+2-n)*i)}},__a:function(){this.__l&&(this.__l=!1,o.__h(this),this.__f.hide(),this.__j.trigger("hidelist"))},"__fc<click>":function(t){t.preventDefault();var _=t.params.item;this.__a(),this.__j.trigger({type:"pick",item:_,scrollTop:this.__eY.prop("scrollTop")})},"__eh<mouseout>":function(t){if(!e.inside(t.relateTarget,t.eventTarget)){this.__eZ(),this.__gq=-1}},"__fd<mousemove>":function(t){if(this.__fb)delete this.__fb;else{var _=s(t.target);if(_.is("li")){var i=_.data("idx");i!=this.__gq&&(this.__eZ(),this.__gq=i,this.__f_(!0))}}},"__F<contextmenu>":function(t){t.preventDefault()}})});