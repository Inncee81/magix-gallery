define("mx-taginput/suggest",["magix","$","../mx-monitor/index"],(_,t,i)=>{var e=_("magix"),s=_("$"),o=_("../mx-monitor/index");e.applyStyle("_M","._fu{border:1px solid #e6e6e6;font-size:14px;max-height:260px;overflow:auto;list-style:none;border-radius:4px;background-color:#fff;padding:3px 0;line-height:1.8;position:relative;z-index:1}._fv{padding:0 4px;cursor:pointer;margin:2px 0}._fw{color:#666;display:block;width:100%;padding:0 6px;height:29px;line-height:29px;border-radius:4px}._fx,._fw:active,._fw:focus,._fw:hover{color:#333;background-color:#f0f0f0}._fx{border-radius:4px;text-decoration:none;outline:0}"),i.exports=e.View.extend({tmpl:{html:'<ul class="<%if($$.rList&&$$.list.length){%>_fu <%}%>_aj" style="width:<%=$$.width%>px;" mx-mouseout="__eg()" mx-mousemove="__fc()" mx-contextmenu="__E()"><%if($$.rList){for(var _=0,a;_<$$.list.length;_++){a=$$.list[_]%><li class="_fv"><a href="#" class="_fw" data-idx="<%=_%>" mx-click="__fb({item:\'<%@a%>\'})" id="sg_<%=$$.viewId%>_<%=_%>"><%=$$.textKey?a[$$.textKey]:a%></a></li><%}}%></ul>'},init:function(_){var t=this;t.__gn=_.scrollTop||0,t.__eQ=_.list||[],t.__go=0|(_.offsetLeft||0),o.__d(),t.on("destroy",function(){o.__g(t),o.__h(),t.__i.off("keyup paste input",t.__eR).off("focus",t.__eS)}),t.updater.set({viewId:t.id,width:_.width||340,textKey:_.textKey,valueKey:_.valueKey}),t.__gp=-1,t.__gq=[t.id].concat(_.relateIds.split(","))},__j:function(_){for(var t=this.__gq,i=0;i<t.length;i++)if(e.inside(_,t[i]))return!0;return!1},__gs:function(_,t){t||(this.__eQ=_),this.__gp=-1,this.updater.digest({list:this.__gr=_})},render:function(){var _=this,t=s("#"+_.id);_.__e=t,t=t.prev("input"),_.__i=t,t.on("focus",_.__eS=s.proxy(_.__f,_)).on("keyup paste input",_.__eR=s.proxy(_.__eW,_)),_.__gs(_.__eQ),_.__eX=s("#"+_.id+" ul"),setTimeout(_.wrapAsync(function(){_.__eX.prop("scrollTop",_.__gn)}),0)},__eW:function(_){this.__k||this.__f();var t=this.__gr;if(40==_.keyCode)this.__eY(),this.__gp++,this.__gp>=t.length&&(this.__gp=0),this.__eZ();else if(38==_.keyCode)this.__eY(),this.__gp--,this.__gp<0&&(this.__gp=t.length-1),this.__eZ();else if(13==_.keyCode){if(this.__gp>-1&&this.__gp<this.__gr.length){var i=this.__gr[this.__gp];this.__eY(),this.__gp=-1,this.__a(),this.__i.trigger({type:"pick",item:i})}}else{var e=s.trim(_.target.value);if(e!=this.__cJ)if(this.__cJ=e,e){for(var o=[],h=this.__eQ.slice(),r=this.updater.get("textKey"),n=0,p=void 0;n<h.length;n++)p=h[n],((r?p[r]:p)+"").indexOf(e)>=0&&o.push(p);this.__gs(o,!0)}else this.__gs(this.__eQ,!0)}},__f:function(){var _=this.updater;if(!this.__k){this.__k="from show ";_.get("rList")||_.digest({rList:!0}),o.__l(this);var t=this.__i.position();this.__e.show().css({display:"block",left:t.left+this.__go,top:t.top+this.__i.outerHeight()+10}),this.__i.trigger("showlist")}},__eY:function(){s("#sg_"+this.id+"_"+this.__gp).removeClass("_fx")},__eZ:function(_){var t=s("#sg_"+this.id+"_"+this.__gp);if(t.addClass("_fx"),!_&&t.length){this.__fa=1;var i=t.outerHeight(),e=(this.__gp+1)*i,o=this.__eX,h=o.height(),r=o.prop("scrollTop"),n=Math.ceil(h/i);e<r+i?o.prop("scrollTop",e-i):e>r+h&&o.prop("scrollTop",(this.__gp+2-n)*i)}},__a:function(){this.__k&&(this.__k=!1,o.__g(this),this.__e.hide(),this.__i.trigger("hidelist"))},"__fb<click>":function(_){_.preventDefault();var t=_.params.item;this.__a(),this.__i.trigger({type:"pick",item:t,scrollTop:this.__eX.prop("scrollTop")})},"__eg<mouseout>":function(_){if(!e.inside(_.relateTarget,_.eventTarget)){this.__eY(),this.__gp=-1}},"__fc<mousemove>":function(_){if(this.__fa)delete this.__fa;else{var t=s(_.target);if(t.is("li")){var i=t.data("idx");i!=this.__gp&&(this.__eY(),this.__gp=i,this.__eZ(!0))}}},"__E<contextmenu>":function(_){_.preventDefault()}})});