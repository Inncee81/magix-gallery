define("mx-storage/index",["magix"],(e,t,a)=>{var i,_,r,n=e("magix"),o={},c=!1,s={};_="localStorage";var d=function(){var e=(+new Date).toString(),t=JSON.stringify(s);o.__eH=t,o.__eI=e,"__eJ"==_&&(r.setAttribute("__eI",e),r.setAttribute("__eH",t),r.save("__eK"))},l=n.mix({set:function(e,t){s[e]=t,d()},get:function(e){return s[e]},del:function(e){delete s[e],d()}},n.Event);if(_ in window)try{localStorage.setItem(_,n.guid()),c=!0,localStorage.removeItem(_)}catch(e){}if(c)o=localStorage,i=o.__eI;else if((_="globalStorage")in window)try{var g=window[_];o="localhost"==location.hostname?g.__eL:g[location.hostname],i=o.__eI}catch(e){}else if((r=document.createElement("link")).addBehavior){r.style.behavior="url(#default#userData)",document.getElementsByTagName("head")[0].appendChild(r);try{r.load("__eK")}catch(e){r.setAttribute("__eK","{}"),r.save("__eK"),r.load("__eK")}var f="{}";try{f=r.getAttribute("__eK"),i=r.getAttribute("__eI")}catch(e){}_="__eJ",o.__eH=f}var u=function(){var e;clearTimeout(u.timer),u.timer=setTimeout(function(){if("__eJ"==_){r.load("__eK");try{e=r.getAttribute("__eI")}catch(e){}}else e=o.__eI;if(e&&e!=i){i=e;var t=void 0,a="{}";if("__eJ"==_){r.load("__eK");try{a=r.getAttribute("__eK")}catch(e){}o.__eH=a}t=JSON.parse(o.__eH);for(var c={},d=0,g=n.keys(s).concat(n.keys(t));d<g.length;d++){var f=g[d];if(1!==c[f]){c[f]=1;var u=JSON.stringify(s[f]);JSON.stringify(t[f])!=u&&l.fire("change",{key:f,from:s[f],to:t[f]})}}s=t}},25)};if("addEventListener"in window&&window.addEventListener("pageshow",function(e){e.persisted&&u()},!1),"__eJ"==_?setInterval(u,1e3):"addEventListener"in window?window.addEventListener("storage",u,!1):document.attachEvent("onstorage",u),o.__eH)try{s=JSON.parse(o.__eH)}catch(e){o.__eH="{}"}else o.__eH="{}";a.exports=l});