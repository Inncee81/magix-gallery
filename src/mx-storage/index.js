define("mx-storage/index",["magix"],(e,t,a)=>{var i,_,r,n=e("magix"),o={},c=!1,s={};_="localStorage";var d=function(){var e=(+new Date).toString(),t=JSON.stringify(s);o.__eL=t,o.__eM=e,"__eN"==_&&(r.setAttribute("__eM",e),r.setAttribute("__eL",t),r.save("__eO"))},l=n.mix({set:function(e,t){s[e]=t,d()},get:function(e){return s[e]},del:function(e){delete s[e],d()}},n.Event);if(_ in window)try{localStorage.setItem(_,n.guid()),c=!0,localStorage.removeItem(_)}catch(e){}if(c)o=localStorage,i=o.__eM;else if((_="globalStorage")in window)try{var g=window[_];o="localhost"==location.hostname?g.__eP:g[location.hostname],i=o.__eM}catch(e){}else if((r=document.createElement("link")).addBehavior){r.style.behavior="url(#default#userData)",document.getElementsByTagName("head")[0].appendChild(r);try{r.load("__eO")}catch(e){r.setAttribute("__eO","{}"),r.save("__eO"),r.load("__eO")}var f="{}";try{f=r.getAttribute("__eO"),i=r.getAttribute("__eM")}catch(e){}_="__eN",o.__eL=f}var u=function(){var e;clearTimeout(u.timer),u.timer=setTimeout(function(){if("__eN"==_){r.load("__eO");try{e=r.getAttribute("__eM")}catch(e){}}else e=o.__eM;if(e&&e!=i){i=e;var t=void 0,a="{}";if("__eN"==_){r.load("__eO");try{a=r.getAttribute("__eO")}catch(e){}o.__eL=a}t=JSON.parse(o.__eL);for(var c={},d=0,g=n.keys(s).concat(n.keys(t));d<g.length;d++){var f=g[d];if(1!==c[f]){c[f]=1;var u=JSON.stringify(s[f]);JSON.stringify(t[f])!=u&&l.fire("change",{key:f,from:s[f],to:t[f]})}}s=t}},25)};if("addEventListener"in window&&window.addEventListener("pageshow",function(e){e.persisted&&u()},!1),"__eN"==_?setInterval(u,1e3):"addEventListener"in window?window.addEventListener("storage",u,!1):document.attachEvent("onstorage",u),o.__eL)try{s=JSON.parse(o.__eL)}catch(e){o.__eL="{}"}else o.__eL="{}";a.exports=l});