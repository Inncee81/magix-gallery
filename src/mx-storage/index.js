define("mx-storage/index",["magix"],(e,t,a)=>{var r,i,_,n=e("magix"),o={},s=!1,c={};i="localStorage";var d=function(){var e=(+new Date).toString(),t=JSON.stringify(c);o.__er=t,o.__es=e,"__et"==i&&(_.setAttribute("__es",e),_.setAttribute("__er",t),_.save("__eu"))},l=n.mix({set:function(e,t){c[e]=t,d()},get:function(e){return c[e]},del:function(e){delete c[e],d()}},n.Event);if(i in window)try{localStorage.setItem(i,n.guid()),s=!0,localStorage.removeItem(i)}catch(e){}if(s)o=localStorage,r=o.__es;else if((i="globalStorage")in window)try{var u=window[i];o="localhost"==location.hostname?u.__ev:u[location.hostname],r=o.__es}catch(e){}else if((_=document.createElement("link")).addBehavior){_.style.behavior="url(#default#userData)",document.getElementsByTagName("head")[0].appendChild(_);try{_.load("__eu")}catch(e){_.setAttribute("__eu","{}"),_.save("__eu"),_.load("__eu")}var g="{}";try{g=_.getAttribute("__eu"),r=_.getAttribute("__es")}catch(e){}i="__et",o.__er=g}var v=function(){var e;clearTimeout(v.timer),v.timer=setTimeout(function(){if("__et"==i){_.load("__eu");try{e=_.getAttribute("__es")}catch(e){}}else e=o.__es;if(e&&e!=r){r=e;var t=void 0,a="{}";if("__et"==i){_.load("__eu");try{a=_.getAttribute("__eu")}catch(e){}o.__er=a}t=JSON.parse(o.__er);for(var s={},d=0,u=n.keys(c).concat(n.keys(t));d<u.length;d++){var g=u[d];if(1!==s[g]){s[g]=1;var v=JSON.stringify(c[g]);JSON.stringify(t[g])!=v&&l.fire("change",{key:g,from:c[g],to:t[g]})}}c=t}},25)};if("addEventListener"in window&&window.addEventListener("pageshow",function(e){e.persisted&&v()},!1),"__et"==i?setInterval(v,1e3):"addEventListener"in window?window.addEventListener("storage",v,!1):document.attachEvent("onstorage",v),o.__er)try{c=JSON.parse(o.__er)}catch(e){o.__er="{}"}else o.__er="{}";a.exports=l});