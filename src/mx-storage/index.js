define("mx-storage/index",["magix"],(e,t,a)=>{var i,_,r,n=e("magix"),o={},c=!1,s={};_="localStorage";var d=function(){var e=(+new Date).toString(),t=JSON.stringify(s);o.__eN=t,o.__eO=e,"__eP"==_&&(r.setAttribute("__eO",e),r.setAttribute("__eN",t),r.save("__eQ"))},l=n.mix({set:function(e,t){s[e]=t,d()},get:function(e){return s[e]},del:function(e){delete s[e],d()}},n.Event);if(_ in window)try{localStorage.setItem(_,n.guid()),c=!0,localStorage.removeItem(_)}catch(e){}if(c)o=localStorage,i=o.__eO;else if((_="globalStorage")in window)try{var g=window[_];o="localhost"==location.hostname?g.__eR:g[location.hostname],i=o.__eO}catch(e){}else if((r=document.createElement("link")).addBehavior){r.style.behavior="url(#default#userData)",document.getElementsByTagName("head")[0].appendChild(r);try{r.load("__eQ")}catch(e){r.setAttribute("__eQ","{}"),r.save("__eQ"),r.load("__eQ")}var f="{}";try{f=r.getAttribute("__eQ"),i=r.getAttribute("__eO")}catch(e){}_="__eP",o.__eN=f}var u=function(){var e;clearTimeout(u.timer),u.timer=setTimeout(function(){if("__eP"==_){r.load("__eQ");try{e=r.getAttribute("__eO")}catch(e){}}else e=o.__eO;if(e&&e!=i){i=e;var t=void 0,a="{}";if("__eP"==_){r.load("__eQ");try{a=r.getAttribute("__eQ")}catch(e){}o.__eN=a}t=JSON.parse(o.__eN);for(var c={},d=0,g=n.keys(s).concat(n.keys(t));d<g.length;d++){var f=g[d];if(1!==c[f]){c[f]=1;var u=JSON.stringify(s[f]);JSON.stringify(t[f])!=u&&l.fire("change",{key:f,from:s[f],to:t[f]})}}s=t}},25)};if("addEventListener"in window&&window.addEventListener("pageshow",function(e){e.persisted&&u()},!1),"__eP"==_?setInterval(u,1e3):"addEventListener"in window?window.addEventListener("storage",u,!1):document.attachEvent("onstorage",u),o.__eN)try{s=JSON.parse(o.__eN)}catch(e){o.__eN="{}"}else o.__eN="{}";a.exports=l});