define("mx-form/index",["$","magix"],(t,e,r)=>{var n=t("$"),i=t("magix");i.applyStyle("_t","._dq,._dq:hover{border-color:#a62a22!important}._dr{display:none;position:absolute;white-space:nowrap;word-wrap:normal;pointer-events:none;color:#666;font-size:10px;top:1px;line-height:1}");var a=function(t){return t.replace(/[^\x00-\xff]/g,"xl").length},o={required:function(t,e){return!e||n.trim(t)},number:function(t,e){return!(t=n.trim(t))||!e||t.indexOf(".")==t.lastIndexOf(".")&&/^-?[\d\.]+$/.test(t)},length:function(t,e){return!(t.length<e[0]||t.length>e[1])},blength:function(t,e){var r=a(t);return!(r<e[0]||r>e[1])},minLength:function(t,e){return!((t=n.trim(t))&&t.length<e)},maxLength:function(t,e){return!((t=n.trim(t))&&t.length>e)},range:function(t,e){return t=parseFloat(t),!isNaN(t)&&!(t<e[0]||t>e[1])},equalto:function(t,e){return n(e).val()==t},pattern:function(t,e){if(t=n.trim(t)){return new RegExp(e).test(t)}return!0},max:function(t,e){return!(+t>+e)},min:function(t,e){return!(+t<+e)}},s={required:function(){return"必填"},number:function(){return"数字"},length:function(t,e){return t[0]+"-"+t[1]+"个字之间,当前:"+e.length},blength:function(t,e){return t[0]+"-"+t[1]+"个字符之间,当前:"+a(e)},range:function(t){return t[0]+"-"+t[1]+"之间的数字"},equalto:function(t){return"与"+t+"同样的内容"},pattern:function(){return"格式有误"},minLength:function(t){return"最小长度:"+t},maxLength:function(t){return"最大长度:"+t},max:function(t){return"不能大于 "+t},min:function(t){return"不能小于 "+t}},f=function(t,e){var r,n,a=!0;for(var s in t)if(i.has(t,s)){var f=o[s];if(f&&!(a=f(e,n=t[s]))){r=s;break}}return{f:a,v:n,a:e,r:r}},u=function(t,e,r,a){var o=n('[mx-ssid="'+t+'"]');if(o.length)return o.addClass("_dq"),o.each(function(t,o){var f=(o=n(o)).attr("id");f||(f=i.guid(),o.attr("id",f));var u=f+"_msg",c=n("#"+u);if(!c.length){var l=o.parent();"static"==l.css("position")&&l.addClass("_ag"),o.after('<div class="_dr" id="'+u+'"/>'),c=n("#"+u)}c.html(s[e](r,a)).show();var d=o.outerWidth()-3,h=c.width(),v=o.position();c.css({top:v.top+2,left:v.left+d-h})}),!0},c=function(t){var e=n('[mx-ssid="'+t+'"]');e.removeClass("_dq"),e.each(function(t,e){var r=(e=n(e)).attr("id")+"_msg";n("#"+r).hide()})},l=function(t,e){var r=t.params;if(r.m){var n=e[r.m+""+t.type];n&&(t.params=r.a,n.call(e,t))}};r.exports={fromKeys:function(t,e){e=(e+"").split(",");for(var r={},n=0,a=void 0;n<e.length;n++)r[a=e[n]]=i.has(t,a)?t[a]:"";return r},isValid:function(t){var e=!0,r=this.owner.children(),a=!1;t||(t=[],a=!0);for(var o=0;o<r.length;o++){!1===i.Vframe.get(r[o]).invoke("isValid",[t])&&(e=!1)}n("#"+this.id+' [mx-ssid^="'+this.id+'"]').each(function(t,e){n(e).trigger({type:"change",from:"faker"})});var s=this.updater.$form;if(s){var f=i.keys(s);f.length&&(t.push(f[0]),e=!1)}if(a){for(var u=1e20,c=void 0,l=(o=t.length,void 0),d=void 0;o--;)(l=n('[mx-ssid="'+t[o]+'"]')).length&&(d=l.offset()).top<u&&(c=l[0],u=d.top);c&&(c.scrollIntoViewIfNeeded?c.scrollIntoViewIfNeeded():c.scrollIntoView&&c.scrollIntoView())}return e},triggerParent:function(t){n("#"+this.id).trigger({type:"change",from:"subview",values:t})},"__b<focusin>":function(t){t.stopPropagation();var e=n(t.eventTarget);c(e.attr("mx-ssid")),l(t,this)},"__b<focusout>":function(t){t.stopPropagation();n(t.eventTarget).trigger({type:"change",from:"faker"}),l(t,this)},"__b<change>":function(t){var e=n(t.eventTarget);if(!t.viewId||t.viewId==this.id){t.viewId=this.id;var r="faker"==t.from||"subview"==t.from;t.stopPropagation();var i=t.params,a=this.updater;a.$form||(a.$form={});var o=a.$form,s=a.$keys||a.$k,d=i.c?i.c.slice():[i],h=!1,v=!0;n("#"+this.id).removeAttr("mx-ssid");for(var p=!1,m=function(t,e,r){n('input[name="'+t+'"]:checked').each(function(t,n){var i=n.value;r.number&&(i=parseFloat(i)),-1===e.indexOf(i)&&e.push(i)})};d.length;){for(var g=d.shift(),x=g.p.split("."),_=g.f||{},b=x.pop(),w=void 0,y=void 0,$=void 0,k=a.get();k&&x.length;)w=x.shift(),$||($=w),k=k[w];if($=$||b,"subview"==t.from)y=t.values[_.from||b];else if("checkbox"==e.prop("type")){var I=k[b],q=e.prop("checked");if(!0===I||!1===I)y=q;else if(y=e.val(),_.number&&(y=parseFloat(y)),n.isArray(I)){var V=e.prop("name");if(V)m(V,I=[],_);else{y=e.val(),_.number&&(y=parseFloat(y));var P=I.indexOf(y);q?-1===P&&I.push(y):P>-1&&I.splice(P,1)}y=I}else n.isPlainObject(I)?(q?I[y]=y:delete I[y],y=I):y=q?y:""}else y=e.val(),_.number&&(y=parseFloat(y));if(k&&k[b]!==y&&(k[b]=y,_.refresh&&(h=!0),!h&&_.silent||(s[$]=1,a.$c=1),p=!0),v){var F=f(_,y),O=e.attr("mx-ssid");F.f?(delete o[O],c(O)):(o[O]=F,v=!1,u(O,F.r,F.v,F.a))}}v&&h&&a.digest(),p&&this.triggerParent(a.get()),r||l(t,this)}},"$doc<htmlchanged>":function(t){var e=this.updater.$form;t.vId==this.id&&(clearTimeout(this.__cR),this.__cR=setTimeout(this.wrapAsync(function(){if(e)for(var t in e){var r=e[t];u(t,r.r,r.v,r.a)||delete e[t]}}),0))}}});