define("mx-linkage/index",["magix","$","../mx-monitor/index"],(t,e,i)=>{var d=t("magix"),s=t("$"),_=t("../mx-monitor/index");d.applyStyle("_y","._dL{height:32px;padding:0 9px;position:relative;border:1px solid #e6e6e6;border-radius:4px;width:340px;line-height:32px;z-index:10}._dL:hover{border-color:#ccc}._dM{cursor:not-allowed;background-color:#fbfbfb}._dM:hover{border-color:#e6e6e6}._dN{color:#999;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}._dO{position:absolute;border:1px solid #e6e6e6;font-size:14px;max-height:260px;overflow:auto;list-style:none;border-radius:4px;background-color:#fff;z-index:10;padding:3px 0;line-height:1.8;left:-1px;right:-1px}._dP{border-bottom:1px solid #e6e6e6;margin:0 10px;padding-bottom:3px}._dQ{cursor:pointer;display:inline-block;padding:0 12px;height:29px;line-height:29px;border-radius:4px}._dQ:active,._dQ:focus,._dQ:hover{color:#333;background-color:#f0f0f0}._dR{margin:0 10px;padding-top:3px}._dS{width:32%;float:left;margin:0 0 2px 2px;color:#666;display:block;cursor:pointer;padding:0 12px;height:29px;line-height:29px;border-radius:4px}._dS:active,._dS:focus,._dS:hover{color:#333;background-color:#f0f0f0}._dT{margin-left:-1px}._dU{float:left;height:24px;line-height:24px;padding:0 1px;max-width:31%;overflow:hidden;margin-top:3px}._dV{cursor:pointer;border-radius:4px}._dV:active,._dV:focus,._dV:hover{color:#333;background-color:#f0f0f0}._dM ._dT{cursor:not-allowed}._dM ._dV:active,._dM ._dV:focus,._dM ._dV:hover{background-color:transparent;cursor:not-allowed}._dW,._dW:active,._dW:focus,._dW:hover{color:#fff;background-color:#f96447}");i.exports=d.View.extend({tmpl:function(t){var e="",i={"&":"amp","<":"lt",">":"gt",'"':"#34","'":"#39","`":"#96"},d=/[&<>"'`]/g,s=function(t){return null==t?"":""+t},_=function(t){return"&"+i[t]+";"},r=function(t){return s(t).replace(d,_)},o=function(e,i,d){for(d=t[""];--d;)if(t[i=""+d]===e)return i;return t[i=""+t[""]++]=e,i};if(e+='<div class="_aj ',t.texts.length?e+="_dT _ai":e+="_dN",e+='" mx-click="__h()">',t.texts.length)for(var l=0;l<t.texts.length;l++)e+='<div class="_dU _al _dV" title="'+r(t.texts[l])+'" mx-click="__do({i:'+s(l)+'})">'+r(t.texts[l])+"</div>",l<t.texts.length-1&&(e+='<div class="_dU">'+r(t.splitter)+"</div>");else e+=" "+r(t.placeholder)+" ";e+='</div><div class="_aj _dO',t.show||(e+=" _ah"),e+='" style="',t.show&&(e+="left:"+r(t.left)+"px;top:"+r(t.top)+"px;"),e+='"><div class="_dP">';for(var n=0;n<t.headers.length;n++){var a=t.headers[n];e+='<span title="'+r(a)+'" class="_dQ',n==t.active&&(e+=" _dW"),e+='" ',n!==t.active&&(e+=' mx-click="__do({i:'+s(n)+'})" '),e+=">"+r(a)+"</span>"}if(e+='</div><div class="_dR">',t.list&&t.list.length){var h=t.selected[t.active];e+="<ul>";for(var c=0,p=t.list;c<p.length;c++){var u=p[c];e+='<li class="_dS _al',u[t.valueKey]+""==h+""&&(e+=" _dW"),e+='" title="'+r(u[t.textKey])+'" mx-click="__cw({o:\'',e+=o(u),e+="'})\">"+r(u[t.textKey])+"</li>"}e+="</ul>"}return e+="</div></div>"},init:function(t){var e=this;e.assign(t),_.__f(),e.on("destroy",function(){_.__i(e),_.__j()});var i=s("#"+e.id);i.addClass("_dL"),e.__k=i},assign:function(t){this.__dg=t.placeholder;var e=t.valueKey||"id",i=t.parentKey||"pId",s=t.parentKey||"text",_=function(t,e,i){e=e||"id",i=i||"pId";for(var s={},_={},r=[],o=0,l=t.length;o<l;o++){var n=d.mix({},t[o]);s[n[e]]=n,_[n[e]]&&(n.children=_[n[e]]),d.has(n,i)&&""!==n[i]?s[n[i]]?(s[n[i]].children||(s[n[i]].children=[])).push(n):_[n[i]]?_[n[i]].push(n):_[n[i]]=[n]:r.push(n)}return{list:r,map:s}}(t.list,e,i);this.__dh=_,this.__di=t.headers,this.__dj=0;var r=d.has(t,"selected")?t.selected:"";return r=r?(r+"").split(","):[],this.__bb=r,this.__co=t.disabled+""=="true",this.updater.set({splitter:t.splitter||"/",textKey:s,valueKey:e,selected:r}),!0},render:function(){this.updater.digest({placeholder:this.__dg,headers:this.__di,viewId:this.id,texts:this.__dk(),active:this.__dj,list:this.__dl()}),this.__k[this.__co?"addClass":"removeClass"]("_dM")},__dk:function(){for(var t=[],e=this.__dh,i=this.__bb,d=this.updater.get("textKey"),s=0,_=i;s<_.length;s++){var r=_[s];t.push(e.map[r][d])}return t},__dl:function(){var t=this.__dh,e=this.__bb,i=this.__dj;if(0===i)return t.list;var d=e[i-1];return d?t.map[d].children:null},__dm:function(t){this.updater.digest({active:this.__dj=t,list:this.__dl(),selected:this.__bb})},__l:function(t){return d.inside(t,this.id)},__b:function(){this.__m&&(this.__m=!1,_.__i(this),this.__dm(0),this.updater.digest({show:!1}))},__h:function(){this.__m||(this.__m=!0,_.__n(this),this.updater.digest({show:!0,top:this.__k.outerHeight()+5}))},__dn:function(){this.updater.digest({placeholder:this.__dg,texts:this.__dk()})},"__h<click>":function(){this.__k.hasClass("_dM")||this.__h()},"__do<click>":function(t){this.__dm(t.params.i)},"__cw<click>":function(t){var e=this.__dj,i=this.__di,d=this.__bb,s=this.updater.get("valueKey"),_=t.params.o[s];(d=d.slice(0,e)).push(_),e++;var r=this.__dh;this.__bb=d,e<i.length&&r.map[_].children?this.__dm(e):(this.__dn(),this.__b(),this.__k.trigger({type:"change",selected:d}))}})});