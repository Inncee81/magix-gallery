define("mx-linkage/index",["magix","$","../mx-monitor/index"],(t,e,i)=>{var d=t("magix"),_=t("$"),s=t("../mx-monitor/index");d.applyStyle("_y","._dL{height:32px;padding:0 9px;position:relative;border:1px solid #e6e6e6;border-radius:4px;width:340px;line-height:32px;z-index:10}._dL:hover{border-color:#ccc}._dM{cursor:not-allowed;background-color:#fbfbfb}._dM:hover{border-color:#e6e6e6}._dN{color:#999;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}._dO{position:absolute;border:1px solid #e6e6e6;font-size:14px;max-height:260px;overflow:auto;list-style:none;border-radius:4px;background-color:#fff;z-index:10;padding:3px 0;line-height:1.8;left:-1px;right:-1px}._dP{border-bottom:1px solid #e6e6e6;margin:0 10px;padding-bottom:3px}._dQ{cursor:pointer;display:inline-block;padding:0 12px;height:29px;line-height:29px;border-radius:4px}._dQ:active,._dQ:focus,._dQ:hover{color:#333;background-color:#f0f0f0}._dR{margin:0 10px;padding-top:3px}._dS{width:32%;float:left;margin:0 0 2px 2px;color:#666;display:block;cursor:pointer;padding:0 12px;height:29px;line-height:29px;border-radius:4px}._dS:active,._dS:focus,._dS:hover{color:#333;background-color:#f0f0f0}._dT{margin-left:-1px}._dU{float:left;height:24px;line-height:24px;padding:0 1px;max-width:31%;overflow:hidden;margin-top:3px}._dV{cursor:pointer;border-radius:4px}._dV:active,._dV:focus,._dV:hover{color:#333;background-color:#f0f0f0}._dM ._dT{cursor:not-allowed}._dM ._dV:active,._dM ._dV:focus,._dM ._dV:hover{background-color:transparent;cursor:not-allowed}._dW,._dW:active,._dW:focus,._dW:hover{color:#fff;background-color:#f96447}");i.exports=d.View.extend({tmpl:function(t,e){e=e||"";var i="",d={"&":"amp","<":"lt",">":"gt",'"':"#34","'":"#39","`":"#96"},_=/[&<>"'`]/g,s=function(t){return null==t?"":""+t},r=function(t){return"&"+d[t]+";"},o=function(t){return s(t).replace(_,r)},l=function(e,i,d){for(d=t[""];--d;)if(t[i=""+d]===e)return i;return t[i=""+t[""]++]=e,i};if(i+='<div class="_aj ',t.texts.length?i+="_dT _ai":i+="_dN",i+='" mx-click="'+e+'__e()">',t.texts.length)for(var n=0;n<t.texts.length;n++)i+='<div class="_dU _al _dV" title="'+o(t.texts[n])+'" mx-click="'+e+"__do({i:"+s(n)+'})">'+o(t.texts[n])+"</div>",n<t.texts.length-1&&(i+='<div mxa="_&:_" class="_dU">'+o(t.splitter)+"</div>");else i+=" "+o(t.placeholder)+" ";i+='</div><div class="_aj _dO',t.show||(i+=" _ah"),i+='" style="',t.show&&(i+="left:"+o(t.left)+"px;top:"+o(t.top)+"px;"),i+='"><div mxa="_&:a" class="_dP">';for(var a=0;a<t.headers.length;a++){var h=t.headers[a];i+='<span title="'+o(h)+'" class="_dQ',a==t.active&&(i+=" _dW"),i+='" ',a!==t.active&&(i+=' mx-click="'+e+"__do({i:"+s(a)+'})" '),i+=">"+o(h)+"</span>"}if(i+='</div><div mxa="_&:b" class="_dR">',t.list&&t.list.length){var c=t.selected[t.active];i+="<ul>";for(var p=0,u=t.list;p<u.length;p++){var x=u[p];i+='<li class="_dS _al',x[t.valueKey]+""==c+""&&(i+=" _dW"),i+='" title="'+o(x[t.textKey])+'" mx-click="'+e+"__cw({o:'",i+=l(x),i+="'})\">"+o(x[t.textKey])+"</li>"}i+="</ul>"}return i+="</div></div>"},init:function(t){var e=this;e.assign(t),s.__g(),e.on("destroy",function(){s.__i(e),s.__j()});var i=_("#"+e.id);i.addClass("_dL"),e.__k=i},assign:function(t){this.__dg=t.placeholder;var e=t.valueKey||"id",i=t.parentKey||"pId",_=t.parentKey||"text",s=function(t,e,i){e=e||"id",i=i||"pId";for(var _={},s={},r=[],o=0,l=t.length;o<l;o++){var n=d.mix({},t[o]);_[n[e]]=n,s[n[e]]&&(n.children=s[n[e]]),d.has(n,i)&&""!==n[i]?_[n[i]]?(_[n[i]].children||(_[n[i]].children=[])).push(n):s[n[i]]?s[n[i]].push(n):s[n[i]]=[n]:r.push(n)}return{list:r,map:_}}(t.list,e,i);this.__dh=s,this.__di=t.headers,this.__dj=0;var r=d.has(t,"selected")?t.selected:"";return r=r?(r+"").split(","):[],this.__bb=r,this.__co=t.disabled+""=="true",this.updater.set({splitter:t.splitter||"/",textKey:_,valueKey:e,selected:r}),!0},render:function(){this.updater.digest({placeholder:this.__dg,headers:this.__di,viewId:this.id,texts:this.__dk(),active:this.__dj,list:this.__dl()}),this.__k[this.__co?"addClass":"removeClass"]("_dM")},__dk:function(){for(var t=[],e=this.__dh,i=this.__bb,d=this.updater.get("textKey"),_=0,s=i;_<s.length;_++){var r=s[_];t.push(e.map[r][d])}return t},__dl:function(){var t=this.__dh,e=this.__bb,i=this.__dj;if(0===i)return t.list;var d=e[i-1];return d?t.map[d].children:null},__dm:function(t){this.updater.digest({active:this.__dj=t,list:this.__dl(),selected:this.__bb})},__l:function(t){return d.inside(t,this.id)},__b:function(){this.__m&&(this.__m=!1,s.__i(this),this.__dm(0),this.updater.digest({show:!1}))},__e:function(){this.__m||(this.__m=!0,s.__n(this),this.updater.digest({show:!0,top:this.__k.outerHeight()+5}))},__dn:function(){this.updater.digest({placeholder:this.__dg,texts:this.__dk()})},"__e<click>":function(){this.__k.hasClass("_dM")||this.__e()},"__do<click>":function(t){this.__dm(t.params.i)},"__cw<click>":function(t){var e=this.__dj,i=this.__di,d=this.__bb,_=this.updater.get("valueKey"),s=t.params.o[_];(d=d.slice(0,e)).push(s),e++;var r=this.__dh;this.__bb=d,e<i.length&&r.map[s].children?this.__dm(e):(this.__dn(),this.__b(),this.__k.trigger({type:"change",selected:d}))}})});