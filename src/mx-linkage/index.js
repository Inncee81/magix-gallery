define("mx-linkage/index",["magix","$","../mx-monitor/index"],(t,e,i)=>{var d=t("magix"),s=t("$"),_=t("../mx-monitor/index");d.applyStyle("_y","._dL{height:32px;padding:0 9px;position:relative;border:1px solid #e6e6e6;border-radius:4px;width:340px;line-height:32px;z-index:10}._dL:hover{border-color:#ccc}._dM{cursor:not-allowed;background-color:#fbfbfb}._dM:hover{border-color:#e6e6e6}._dN{color:#999;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}._dO{position:absolute;border:1px solid #e6e6e6;font-size:14px;max-height:260px;overflow:auto;list-style:none;border-radius:4px;background-color:#fff;z-index:10;padding:3px 0;line-height:1.8;left:-1px;right:-1px}._dP{border-bottom:1px solid #e6e6e6;margin:0 10px;padding-bottom:3px}._dQ{cursor:pointer;display:inline-block;padding:0 12px;height:29px;line-height:29px;border-radius:4px}._dQ:active,._dQ:focus,._dQ:hover{color:#333;background-color:#f0f0f0}._dR{margin:0 10px;padding-top:3px}._dS{width:32%;float:left;margin:0 0 2px 2px;color:#666;display:block;cursor:pointer;padding:0 12px;height:29px;line-height:29px;border-radius:4px}._dS:active,._dS:focus,._dS:hover{color:#333;background-color:#f0f0f0}._dT{margin-left:-1px}._dU{float:left;height:24px;line-height:24px;padding:0 1px;max-width:31%;overflow:hidden;margin-top:3px}._dV{cursor:pointer;border-radius:4px}._dV:active,._dV:focus,._dV:hover{color:#333;background-color:#f0f0f0}._dM ._dT{cursor:not-allowed}._dM ._dV:active,._dM ._dV:focus,._dM ._dV:hover{background-color:transparent;cursor:not-allowed}._dW,._dW:active,._dW:focus,._dW:hover{color:#fff;background-color:#f96447}");i.exports=d.View.extend({tmpl:function(t,e){var i="",d={"&":"amp","<":"lt",">":"gt",'"':"#34","'":"#39","`":"#96"},s=/[&<>"'`]/g,_=function(t){return null==t?"":""+t},r=function(t){return"&"+d[t]+";"},o=function(t){return _(t).replace(s,r)},l=function(i,d,s){for(s=e[t];--s;)if(e[d=t+s]===i)return d;return e[d=t+e[t]++]=i,d};if(i+='<div class="_aj ',e.texts.length?i+="_dT _ai":i+="_dN",i+='" mx-click="__g()">',e.texts.length)for(var n=0;n<e.texts.length;n++)i+='<div class="_dU _al _dV" title="'+o(e.texts[n])+'" mx-click="__dn({i:'+_(n)+'})">'+o(e.texts[n])+"</div>",n<e.texts.length-1&&(i+='<div class="_dU">'+o(e.splitter)+"</div>");else i+=" "+o(e.placeholder)+" ";i+='</div><div class="_aj _dO',e.show||(i+=" _ah"),i+='" style="',e.show&&(i+="left:"+o(e.left)+"px;top:"+o(e.top)+"px;"),i+='"><div class="_dP">';for(var a=0;a<e.headers.length;a++){var h=e.headers[a];i+='<span title="'+o(h)+'" class="_dQ',a==e.active&&(i+=" _dW"),i+='" ',a!==e.active&&(i+=' mx-click="__dn({i:'+_(a)+'})" '),i+=">"+o(h)+"</span>"}if(i+='</div><div class="_dR">',e.list&&e.list.length){var c=e.selected[e.active];i+="<ul>";for(var p=0,u=e.list;p<u.length;p++){var f=u[p];i+='<li class="_dS _al',f[e.valueKey]+""==c+""&&(i+=" _dW"),i+='" title="'+o(f[e.textKey])+'" mx-click="__cv({o:\'',i+=l(f),i+="'})\">"+o(f[e.textKey])+"</li>"}i+="</ul>"}return i+="</div></div>"},init:function(t){var e=this;e.assign(t),_.__e(),e.on("destroy",function(){_.__h(e),_.__i()});var i=s("#"+e.id);i.addClass("_dL"),e.__j=i},assign:function(t){this.__df=t.placeholder;var e=t.valueKey||"id",i=t.parentKey||"pId",s=t.parentKey||"text",_=function(t,e,i){e=e||"id",i=i||"pId";for(var s={},_={},r=[],o=0,l=t.length;o<l;o++){var n=d.mix({},t[o]);s[n[e]]=n,_[n[e]]&&(n.children=_[n[e]]),d.has(n,i)&&""!==n[i]?s[n[i]]?(s[n[i]].children||(s[n[i]].children=[])).push(n):_[n[i]]?_[n[i]].push(n):_[n[i]]=[n]:r.push(n)}return{list:r,map:s}}(t.list,e,i);this.__dg=_,this.__dh=t.headers,this.__di=0;var r=d.has(t,"selected")?t.selected:"";return r=r?(r+"").split(","):[],this.__ba=r,this.__cn=t.disabled+""=="true",this.updater.set({splitter:t.splitter||"/",textKey:s,valueKey:e,selected:r}),!0},render:function(){this.updater.digest({placeholder:this.__df,headers:this.__dh,viewId:this.id,texts:this.__dj(),active:this.__di,list:this.__dk()}),this.__j[this.__cn?"addClass":"removeClass"]("_dM")},__dj:function(){for(var t=[],e=this.__dg,i=this.__ba,d=this.updater.get("textKey"),s=0,_=i;s<_.length;s++){var r=_[s];t.push(e.map[r][d])}return t},__dk:function(){var t=this.__dg,e=this.__ba,i=this.__di;if(0===i)return t.list;var d=e[i-1];return d?t.map[d].children:null},__dl:function(t){this.updater.digest({active:this.__di=t,list:this.__dk(),selected:this.__ba})},__k:function(t){return d.inside(t,this.id)},__a:function(){this.__l&&(this.__l=!1,_.__h(this),this.__dl(0),this.updater.digest({show:!1}))},__g:function(){this.__l||(this.__l=!0,_.__m(this),this.updater.digest({show:!0,top:this.__j.outerHeight()+5}))},__dm:function(){this.updater.digest({placeholder:this.__df,texts:this.__dj()})},"__g<click>":function(){this.__j.hasClass("_dM")||this.__g()},"__dn<click>":function(t){this.__dl(t.params.i)},"__cv<click>":function(t){var e=this.__di,i=this.__dh,d=this.__ba,s=this.updater.get("valueKey"),_=t.params.o[s];(d=d.slice(0,e)).push(_),e++;var r=this.__dg;this.__ba=d,e<i.length&&r.map[_].children?this.__dl(e):(this.__dm(),this.__a(),this.__j.trigger({type:"change",selected:d}))}})});