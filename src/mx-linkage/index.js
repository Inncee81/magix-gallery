define("mx-linkage/index",["magix","$","../mx-monitor/index"],(e,t,i)=>{var _=e("magix"),d=e("$"),s=e("../mx-monitor/index");_.applyStyle("_z","._dR{height:32px;padding:0 9px;position:relative;border:1px solid #e6e6e6;border-radius:4px;width:340px;line-height:32px;z-index:10}._dR:hover{border-color:#ccc}._dS{cursor:not-allowed;background-color:#fbfbfb}._dS:hover{border-color:#e6e6e6}._dT{color:#999;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}._dU{position:absolute;border:1px solid #e6e6e6;font-size:14px;max-height:260px;overflow:auto;list-style:none;border-radius:4px;background-color:#fff;z-index:10;padding:3px 0;line-height:1.8;left:-1px;right:-1px}._dV{border-bottom:1px solid #e6e6e6;margin:0 10px;padding-bottom:3px}._dW{cursor:pointer;display:inline-block;padding:0 12px;height:29px;line-height:29px;border-radius:4px}._dW:active,._dW:focus,._dW:hover{color:#333;background-color:#f0f0f0}._dX{margin:0 10px;padding-top:3px}._dY{width:32%;float:left;margin:0 0 2px 2px;color:#666;display:block;cursor:pointer;padding:0 12px;height:29px;line-height:29px;border-radius:4px}._dY:active,._dY:focus,._dY:hover{color:#333;background-color:#f0f0f0}._dZ{margin-left:-1px}._e_{float:left;height:24px;line-height:24px;padding:0 1px;max-width:31%;overflow:hidden;margin-top:3px}._ea{cursor:pointer;border-radius:4px}._ea:active,._ea:focus,._ea:hover{color:#333;background-color:#f0f0f0}._dS ._dZ{cursor:not-allowed}._dS ._ea:active,._dS ._ea:focus,._dS ._ea:hover{background-color:transparent;cursor:not-allowed}._eb,._eb:active,._eb:focus,._eb:hover{color:#fff;background-color:#f96447}");i.exports=_.View.extend({tmpl:{html:'<div class="_aj <%if($$.texts.length){%>_dZ _ai<%}else{%>_dT<%}%>" mx-click="__f()"><%if($$.texts.length){for(var _=0;_<$$.texts.length;_++){%><div class="_e_ _al _ea" title="<%=$$.texts[_]%>" mx-click="__dm({i:<%!_%>})"><%=$$.texts[_]%></div><%if(_<$$.texts.length-1){%><div class="_e_"><%=$$.splitter%></div><%}}}else{%> <%=$$.placeholder%> <%}%></div><div class="_aj _dU<%if(!$$.show){%> _ah<%}%>" style="<%if($$.show){%>left:<%=$$.left%>px;top:<%=$$.top%>px;<%}%>"><div class="_dV"><%for(var a=0;a<$$.headers.length;a++){var b=$$.headers[a]%><span title="<%=b%>" class="_dW<%if(a==$$.active){%> _eb<%}%>" <%if(a!==$$.active){%> mx-click="__dm({i:<%!a%>})" <%}%>><%=b%></span><%}%></div><div class="_dX"><%if($$.list&&$$.list.length){var c=$$.selected[$$.active]%><ul><%for(var d=0,e=$$.list;d<e.length;d++){var f=e[d];%><li class="_dY _al<%if((f[$$.valueKey]+\'\')==(c+\'\')){%> _eb<%}%>" title="<%=f[$$.textKey]%>" mx-click="__cu({o:\'<%@f%>\'})"><%=f[$$.textKey]%></li><%}%></ul><%}%></div></div>'},init:function(e){var t=this;t.assign(e),s.__d(),t.on("destroy",function(){s.__g(t),s.__h()});var i=d("#"+t.id);i.addClass("_dR"),t.__i=i},assign:function(e){this.__de=e.placeholder;var t=e.valueKey||"id",i=e.parentKey||"pId",d=e.parentKey||"text",s=function(e,t,i){t=t||"id",i=i||"pId";for(var d={},s={},r=[],a=0,o=e.length;a<o;a++){var l=_.mix({},e[a]);d[l[t]]=l,s[l[t]]&&(l.children=s[l[t]]),_.has(l,i)&&""!==l[i]?d[l[i]]?(d[l[i]].children||(d[l[i]].children=[])).push(l):s[l[i]]?s[l[i]].push(l):s[l[i]]=[l]:r.push(l)}return{list:r,map:d}}(e.list,t,i);this.__df=s,this.__dg=e.headers,this.__dh=0;var r=_.has(e,"selected")?e.selected:"";return r=r?(r+"").split(","):[],this.__b_=r,this.__cm=e.disabled+""=="true",this.updater.set({splitter:e.splitter||"/",textKey:d,valueKey:t,selected:r}),!0},render:function(){this.updater.digest({placeholder:this.__de,headers:this.__dg,viewId:this.id,texts:this.__di(),active:this.__dh,list:this.__dj()}),this.__i[this.__cm?"addClass":"removeClass"]("_dS")},__di:function(){for(var e=[],t=this.__df,i=this.__b_,_=this.updater.get("textKey"),d=0,s=i;d<s.length;d++){var r=s[d];e.push(t.map[r][_])}return e},__dj:function(){var e=this.__df,t=this.__b_,i=this.__dh;if(0===i)return e.list;var _=t[i-1];return _?e.map[_].children:null},__dk:function(e){this.updater.digest({active:this.__dh=e,list:this.__dj(),selected:this.__b_})},__j:function(e){return _.inside(e,this.id)},__a:function(){this.__k&&(this.__k=!1,s.__g(this),this.__dk(0),this.updater.digest({show:!1}))},__f:function(){this.__k||(this.__k=!0,s.__l(this),this.updater.digest({show:!0,top:this.__i.outerHeight()+5}))},__dl:function(){this.updater.digest({placeholder:this.__de,texts:this.__di()})},"__f<click>":function(){this.__i.hasClass("_dS")||this.__f()},"__dm<click>":function(e){this.__dk(e.params.i)},"__cu<click>":function(e){var t=this.__dh,i=this.__dg,_=this.__b_,d=this.updater.get("valueKey"),s=e.params.o[d];(_=_.slice(0,t)).push(s),t++;var r=this.__df;this.__b_=_,t<i.length&&r.map[s].children?this.__dk(t):(this.__dl(),this.__a(),this.__i.trigger({type:"change",selected:_}))}})});