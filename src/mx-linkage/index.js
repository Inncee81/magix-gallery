define("mx-linkage/index",["magix","$","../mx-monitor/index"],(e,t,i)=>{var _=e("magix"),d=e("$"),s=e("../mx-monitor/index");_.applyStyle("_x","._dC{height:32px;padding:0 9px;position:relative;border:1px solid #e6e6e6;border-radius:4px;width:340px;line-height:32px}._dC:hover{border-color:#ccc}._dD{cursor:not-allowed;background-color:#fbfbfb}._dD:hover{border-color:#e6e6e6}._dE{color:#999;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}._dF{position:absolute;border:1px solid #e6e6e6;font-size:14px;max-height:260px;overflow:auto;list-style:none;border-radius:4px;background-color:#fff;z-index:10;padding:3px 0;line-height:1.8;left:-1px;right:-1px}._dG{border-bottom:1px solid #e6e6e6;margin:0 10px;padding-bottom:3px}._dH{cursor:pointer;display:inline-block;padding:0 12px;height:29px;line-height:29px;border-radius:4px}._dH:active,._dH:focus,._dH:hover{color:#333;background-color:#f0f0f0}._dI{margin:0 10px;padding-top:3px}._dJ{width:32%;float:left;margin:0 0 2px 2px;color:#666;display:block;cursor:pointer;padding:0 12px;height:29px;line-height:29px;border-radius:4px}._dJ:active,._dJ:focus,._dJ:hover{color:#333;background-color:#f0f0f0}._dK{margin-left:-1px}._dL{float:left;height:24px;line-height:24px;padding:0 1px;max-width:31%;overflow:hidden;margin-top:3px}._dM{cursor:pointer;border-radius:4px}._dM:active,._dM:focus,._dM:hover{color:#333;background-color:#f0f0f0}._dD ._dK{cursor:not-allowed}._dD ._dM:active,._dD ._dM:focus,._dD ._dM:hover{background-color:transparent;cursor:not-allowed}._dN,._dN:active,._dN:focus,._dN:hover{color:#fff;background-color:#f96447}");i.exports=_.View.extend({tmpl:{html:'<div mx-guid="g0" class="_aj <%if($$.texts.length){%>_dK _ai<%}else{%>_dE<%}%>" mx-click="__e()">1</div><div class="_aj _ah _dF" id="db_<%=$$.viewId%>"><div mx-guid="g2" class="_dG">3</div><div mx-guid="g3" class="_dI">4</div></div>',subs:[{keys:["texts","placeholder"],path:'div[mx-guid="g0"]',tmpl:'<%if($$.texts.length){for(var _=0;_<$$.texts.length;_++){%><div class="_dL _al _dM" title="<%=$$.texts[_]%>" mx-click="__cR({i:<%!_%>})"><%=$$.texts[_]%></div><%if(_<$$.texts.length-1){%><div mx-guid="g1" class="_dL">2</div><%}}}else{%> <%=$$.placeholder%> <%}%>',s:"1",attr:'class="_aj <%if($$.texts.length){%>_dK _ai<%}else{%>_dE<%}%>"',attrs:[{n:"class",p:1,f:"className"}],mask:"31"},{keys:["splitter"],path:'div[mx-guid="g1"]',pKeys:["texts","placeholder"],tmpl:"<%=$$.splitter%>",s:"2"},{keys:["headers","active"],path:'div[mx-guid="g2"]',tmpl:'<%for(var a=0;a<$$.headers.length;a++){var b=$$.headers[a]%><span title="<%=b%>" class="_dH<%if(a==$$.active){%> _dN<%}%>" <%if(a!==$$.active){%> mx-click="__cR({i:<%!a%>})" <%}%>><%=b%></span><%}%>',s:"3"},{keys:["list","selected","active","valueKey","textKey"],path:'div[mx-guid="g3"]',tmpl:"<%if($$.list&&$$.list.length){var c=$$.selected[$$.active]%><ul><%for(var d=0,e=$$.list;d<e.length;d++){var f=e[d];%><li class=\"_dJ _al<%if((f[$$.valueKey]+'')==(c+'')){%> _dN<%}%>\" title=\"<%=f[$$.textKey]%>\" mx-click=\"__bX({o:'<%@f%>'})\"><%=f[$$.textKey]%></li><%}%></ul><%}%>",s:"4"}]},init:function(e){var t=this;t.assign(e),s.__d(),t.on("destroy",function(){s.__f(t),s.__g()})},assign:function(e){var t=this;t.__cH=e.placeholder;var i=e.valueKey||"id",d=e.parentKey||"pId",s=e.parentKey||"text",r=function(e,t,i){t=t||"id",i=i||"pId";for(var d={},s={},r=[],a=0,l=e.length;a<l;a++){var c=_.mix({},e[a]);d[c[t]]=c,s[c[t]]&&(c.children=s[c[t]]),_.has(c,i)&&""!==c[i]?d[c[i]]?(d[c[i]].children||(d[c[i]].children=[])).push(c):s[c[i]]?s[c[i]].push(c):s[c[i]]=[c]:r.push(c)}return{list:r,map:d}}(e.list,i,d);t.__cI=r,t.__cJ=e.headers,t.__cK=0;var a=_.has(e,"selected")?e.selected:"";return a=a?(a+"").split(","):[],t.__aB=a,t.__bQ=e.disabled+""=="true",t.updater.set({splitter:e.splitter||"/",textKey:s,valueKey:i,selected:a}),!0},render:function(){var e=this;e.updater.digest({placeholder:e.__cH,headers:e.__cJ,viewId:e.id,texts:e.__cL(),active:e.__cK,list:e.__cM()});var t=d("#"+e.id);t.addClass("_dC"),t[e.__bQ?"addClass":"removeClass"]("_dD"),e.__h=t,e.__cN=d("#db_"+e.id)},__cL:function(){for(var e=[],t=this.__cI,i=this.__aB,_=this.updater.get("textKey"),d=0,s=i;d<s.length;d++){var r=s[d];e.push(t.map[r][_])}return e},__cM:function(){var e=this.__cI,t=this.__aB,i=this.__cK;if(0===i)return e.list;var _=t[i-1];return _?e.map[_].children:null},__cO:function(e){this.updater.digest({active:this.__cK=e,list:this.__cM(),selected:this.__aB})},__i:function(e){return _.inside(e,this.id)},__b:function(){var e=this;e.__j&&(e.__j=!1,s.__f(e),e.__cN.hide(),e.__cO(0))},__e:function(){var e=this;if(!e.__j){e.__j=!0,s.__k(e);var t=e.__h.position();e.__cN.show().css({left:t.left+e.__cP,top:e.__h.outerHeight()+5})}},__cQ:function(){this.updater.digest({placeholder:this.__cH,texts:this.__cL()})},"__e<click>":function(){var e=this;e.__h.hasClass("_dD")||e.__e()},"__cR<click>":function(e){this.__cO(e.params.i)},"__bX<click>":function(e){var t=this,i=t.__cK,_=t.__cJ,d=t.__aB,s=t.updater.get("valueKey"),r=e.params.o[s];(d=d.slice(0,i)).push(r),i++;var a=t.__cI;t.__aB=d,i<_.length&&a.map[r].children?t.__cO(i):(t.__cQ(),t.__b(),t.__h.trigger({type:"change",selected:d}))}})});