define("mx-linkage/index",["magix","$","../mx-monitor/index"],(e,t,i)=>{var d=e("magix"),s=e("$"),_=e("../mx-monitor/index");d.applyStyle("_y","._dL{height:32px;padding:0 9px;position:relative;border:1px solid #e6e6e6;border-radius:4px;width:340px;line-height:32px}._dL:hover{border-color:#ccc}._dM{cursor:not-allowed;background-color:#fbfbfb}._dM:hover{border-color:#e6e6e6}._dN{color:#999;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}._dO{position:absolute;border:1px solid #e6e6e6;font-size:14px;max-height:260px;overflow:auto;list-style:none;border-radius:4px;background-color:#fff;z-index:10;padding:3px 0;line-height:1.8;left:-1px;right:-1px}._dP{border-bottom:1px solid #e6e6e6;margin:0 10px;padding-bottom:3px}._dQ{cursor:pointer;display:inline-block;padding:0 12px;height:29px;line-height:29px;border-radius:4px}._dQ:active,._dQ:focus,._dQ:hover{color:#333;background-color:#f0f0f0}._dR{margin:0 10px;padding-top:3px}._dS{width:32%;float:left;margin:0 0 2px 2px;color:#666;display:block;cursor:pointer;padding:0 12px;height:29px;line-height:29px;border-radius:4px}._dS:active,._dS:focus,._dS:hover{color:#333;background-color:#f0f0f0}._dT{margin-left:-1px}._dU{float:left;height:24px;line-height:24px;padding:0 1px;max-width:31%;overflow:hidden;margin-top:3px}._dV{cursor:pointer;border-radius:4px}._dV:active,._dV:focus,._dV:hover{color:#333;background-color:#f0f0f0}._dM ._dT{cursor:not-allowed}._dM ._dV:active,._dM ._dV:focus,._dM ._dV:hover{background-color:transparent;cursor:not-allowed}._dW,._dW:active,._dW:focus,._dW:hover{color:#fff;background-color:#f96447}");i.exports=d.View.extend({tmpl:{html:'<div mx-guid="g0" class="_aj <%if($$.texts.length){%>_dT _ai<%}else{%>_dN<%}%>" mx-click="__e()">1</div><div class="_aj _ah _dO" id="db_<%=$$.viewId%>"><div mx-guid="g2" class="_dP">3</div><div mx-guid="g3" class="_dR">4</div></div>',subs:[{keys:["texts","placeholder"],path:'div[mx-guid="g0"]',tmpl:'<%if($$.texts.length){for(var _=0;_<$$.texts.length;_++){%><div class="_dU _al _dV" title="<%=$$.texts[_]%>" mx-click="__dg({i:<%!_%>})"><%=$$.texts[_]%></div><%if(_<$$.texts.length-1){%><div mx-guid="g1" class="_dU">2</div><%}}}else{%> <%=$$.placeholder%> <%}%>',s:"1",attr:'class="_aj <%if($$.texts.length){%>_dT _ai<%}else{%>_dN<%}%>"',attrs:[{n:"class",p:1,f:"className"}],mask:"31"},{keys:["splitter"],path:'div[mx-guid="g1"]',pKeys:["texts","placeholder"],tmpl:"<%=$$.splitter%>",s:"2"},{keys:["headers","active"],path:'div[mx-guid="g2"]',tmpl:'<%for(var a=0;a<$$.headers.length;a++){var b=$$.headers[a]%><span title="<%=b%>" class="_dQ<%if(a==$$.active){%> _dW<%}%>" <%if(a!==$$.active){%> mx-click="__dg({i:<%!a%>})" <%}%>><%=b%></span><%}%>',s:"3"},{keys:["list","selected","active","valueKey","textKey"],path:'div[mx-guid="g3"]',tmpl:"<%if($$.list&&$$.list.length){var c=$$.selected[$$.active]%><ul><%for(var d=0,e=$$.list;d<e.length;d++){var f=e[d];%><li class=\"_dS _al<%if((f[$$.valueKey]+'')==(c+'')){%> _dW<%}%>\" title=\"<%=f[$$.textKey]%>\" mx-click=\"__cm({o:'<%@f%>'})\"><%=f[$$.textKey]%></li><%}%></ul><%}%>",s:"4"}]},init:function(e){var t=this;t.assign(e),_.__d(),t.on("destroy",function(){_.__f(t),_.__g()})},assign:function(e){this.__cX=e.placeholder;var t=e.valueKey||"id",i=e.parentKey||"pId",s=e.parentKey||"text",_=function(e,t,i){t=t||"id",i=i||"pId";for(var s={},_={},a=[],r=0,l=e.length;r<l;r++){var o=d.mix({},e[r]);s[o[t]]=o,_[o[t]]&&(o.children=_[o[t]]),d.has(o,i)&&""!==o[i]?s[o[i]]?(s[o[i]].children||(s[o[i]].children=[])).push(o):_[o[i]]?_[o[i]].push(o):_[o[i]]=[o]:a.push(o)}return{list:a,map:s}}(e.list,t,i);this.__cY=_,this.__cZ=e.headers,this.__d_=0;var a=d.has(e,"selected")?e.selected:"";return a=a?(a+"").split(","):[],this.__aU=a,this.__cf=e.disabled+""=="true",this.updater.set({splitter:e.splitter||"/",textKey:s,valueKey:t,selected:a}),!0},render:function(){this.updater.digest({placeholder:this.__cX,headers:this.__cZ,viewId:this.id,texts:this.__da(),active:this.__d_,list:this.__db()});var e=s("#"+this.id);e.addClass("_dL"),e[this.__cf?"addClass":"removeClass"]("_dM"),this.__h=e,this.__dc=s("#db_"+this.id)},__da:function(){for(var e=[],t=this.__cY,i=this.__aU,d=this.updater.get("textKey"),s=0,_=i;s<_.length;s++){var a=_[s];e.push(t.map[a][d])}return e},__db:function(){var e=this.__cY,t=this.__aU,i=this.__d_;if(0===i)return e.list;var d=t[i-1];return d?e.map[d].children:null},__dd:function(e){this.updater.digest({active:this.__d_=e,list:this.__db(),selected:this.__aU})},__i:function(e){return d.inside(e,this.id)},__a:function(){this.__j&&(this.__j=!1,_.__f(this),this.__dc.hide(),this.__dd(0))},__e:function(){if(!this.__j){this.__j=!0,_.__k(this);var e=this.__h.position();this.__dc.show().css({left:e.left+this.__de,top:this.__h.outerHeight()+5})}},__df:function(){this.updater.digest({placeholder:this.__cX,texts:this.__da()})},"__e<click>":function(){this.__h.hasClass("_dM")||this.__e()},"__dg<click>":function(e){this.__dd(e.params.i)},"__cm<click>":function(e){var t=this.__d_,i=this.__cZ,d=this.__aU,s=this.updater.get("valueKey"),_=e.params.o[s];(d=d.slice(0,t)).push(_),t++;var a=this.__cY;this.__aU=d,t<i.length&&a.map[_].children?this.__dd(t):(this.__df(),this.__a(),this.__h.trigger({type:"change",selected:d}))}})});