define("mx-dropdown/index",["magix","$","../mx-monitor/index"],(t,e,i)=>{var s=t("magix"),c=t("$"),o=t("../mx-monitor/index");s.applyStyle("_p",'._cr{outline:0;position:relative;width:340px;background-color:#fff;border:1px solid #e6e6e6;border-radius:4px;display:inline-block;vertical-align:middle;height:32px}._cr:hover{border-color:#ccc}._cs{color:#333;position:relative;width:100%;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;padding:0 30px 0 12px}._ct{cursor:not-allowed;background-color:#fbfbfb}._ct:hover{border-color:#e6e6e6}._ct ._cs{cursor:not-allowed}._cu{position:absolute;right:0;top:2px;font-size:28px;color:#ccc;-webkit-transition:top .3s,-webkit-transform .3s;transition:top .3s,-webkit-transform .3s;transition:transform .3s,top .3s;transition:transform .3s,top .3s,-webkit-transform .3s}._cv ._cu{-webkit-transform:rotate(180deg);transform:rotate(180deg);top:0}._cr[tabindex="0"]:focus,._cv,._cv:hover{border-color:#f96447}._cw{height:30px;line-height:30px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}._cx{color:#999}._cy{position:absolute;top:100%;left:-1px;right:-1px;margin-top:5px;border-radius:4px;z-index:300;border:1px solid #e6e6e6;background-color:#fff;display:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}._cv ._cy{display:block}._cz{overflow:auto;max-height:196px;padding:4px 0}._cA{display:block;width:100%;padding:9px 9px 4px}._cB{padding:0;width:100%}._cC{color:#ccc;position:absolute;left:15px;top:16px}._cD{padding-left:28px;height:28px;line-height:28px;width:100%}._cE{padding:5px;color:#999;display:block;cursor:default}._cF{padding:0 4px;margin:2px 0}._cG{cursor:pointer;color:#666;display:block;width:100%;padding:0 12px;height:29px;line-height:29px;border-radius:4px}._cG:hover{color:#333;background-color:#f0f0f0}._cH,._cH:active,._cH:focus,._cH:hover{color:#fff;background-color:#f96447}'),i.exports=s.View.extend({tmpl:function(t,e){var i="",s={"&":"amp","<":"lt",">":"gt",'"':"#34","'":"#39","`":"#96"},c=/[&<>"'`]/g,o=function(t){return null==t?"":""+t},_=function(t){return"&"+s[t]+";"},r=function(t){return o(t).replace(c,_)},a=function(i,s,c){for(c=e[t];--c;)if(e[s=t+c]===i)return s;return e[s=t+e[t]++]=i,s};if(i+='<div class="_cs" mx-click="__aX()" title="'+r(e.selectedText)+'"><span class="_cw',""===e.selected&&(i+=" _cx"),i+='">'+r(e.selectedText)+'</span><span class="__ _cu">&#xe692;</span></div><div class="_cy">',e.rList){e.searchbox&&(i+='<div class="_cA"><label class="_cB"><span class="__ _cC">&#xe608;</span><input placeholder="搜索关键词" mx-keyup="__cu()" mx-paste="__cu()" mx-change="__at()" mx-focusin="__at()" mx-focusout="__at()" class="_ap _cD" value="'+r(e.keyword)+'"></label></div>'),i+='<ul class="_cz" id="list_'+r(e.viewId)+'">';for(var n=void 0,l=void 0,d=0,p=e.list;d<p.length;d++){var u=p[d];if(e.textKey&&e.valueKey?(n=u[e.textKey],l=u[e.valueKey]):(n=u,l=u),u&&u.group)i+='<li class="_cE _al" title="'+r(u[e.textKey])+'">'+r(u[e.textKey])+"</li>";else{i+='<li title="'+r(n)+'" class="_cF">';i+='<span class="_cG _al',l+""==e.selected+""&&(i+=" _cH"),i+='" mx-click="__cv({item:\'',i+=a(u),i+="'})\">"+r(n)+"</span></li>"}}i+="</ul>"}return i+="</div>"},init:function(t){var e=this;o.__e();var i=c("#"+e.id);i.addClass("_cr"),i.on("keydown",function(t){13==t.keyCode&&e["__aX<click>"]()}),e.on("destroy",function(){i.off("keydown"),o.__h(e),o.__i()}),e.updater.set({viewId:e.id}),e.__j=i,e.__ch=!t.list,e.assign(t,{node:i})},assign:function(t,e){var i=e.node,o=e.inner;this.__ci=t.list;var _=this.__ba=t.selected,r=this.__cj=t.textKey||"",a=this.__ck=t.valueKey||"",n=this.__cl=t.emptyText||"";if(this.__cm=t.searchbox+""=="true",this.__cn=t.disabled+""=="true",this.__ch){var l,d=[];(i=o?c(o):c(i).children()).each(function(t,e){e=c(e),l="true"==e.attr("group"),d.push({group:l,text:e.text(),value:l?s.guid():e.attr("value")})}),r=this.__cj="text",a=this.__ck="value",this.__ci=d}var p=this.__ci,u=s.toMap(p,a);if(n)if(r&&a){if(!u[""]){var h={};h[r]=n,h[a]="",p.unshift(h),u[""]=h}}else u[n]||(p.unshift(n),u[n]=n);return _||!n||r||a||(_=n),_&&u[_]||(_=u[_]||p[0],r&&a&&(_=_[a])),this.__ba=_,this.__co=r&&a?u[_][r]:_,!0},__k:function(t){return s.inside(t,this.id)},render:function(){this.__j[this.__cn?"addClass":"removeClass"]("_ct").prop("tabindex",this.__cn?-1:0),this.__cp(!0)},__a:function(){this.__j.hasClass("_cv")&&(this.__j.removeClass("_cv").trigger("focusout"),o.__h(this))},__g:function(){if(!this.__j.hasClass("_cv")){this.updater.get("rList")||this.updater.digest({rList:!0}),this.__j.addClass("_cv").trigger("focusin");var t=c("#list_"+this.id),e=t.find("._cH").position(),i=t.height(),s=t.prop("scrollTop");if(e.top<0||e.top>i){var _=e.top-i+s+i/2;t.prop("scrollTop",_)}o.__m(this)}},__cp:function(t){var e=this.__ba;this.updater.digest({textKey:this.__cj,valueKey:this.__ck,selected:e,searchbox:this.__cm,selectedText:this.__co,list:this.__ci.slice()}),this.__j.val(e),t||this.__w(e)},__cr:function(t,e){var i=this;clearTimeout(i.__cq);var s=i.__ci,c=[],o=0,_=s.length,r=i.__cj,a=i.__ck;if(t){var n=function(){if(o<_){for(var l=Math.min(o+400,_),d=o,p=void 0,u=void 0,h=void 0;d<l;d++)u=p=s[d],h=p,r&&a&&(u=p[r],h=p[a]),((u+"").indexOf(t)>=0||(h+"").indexOf(t)>=0)&&c.push(p);o=l,i.__cq=setTimeout(i.wrapAsync(n),20)}else e(c)};n()}else e(s)},__w:function(t,e){var i=this.updater,s=this.__ck,o=this.__cj,_=this.__ba,r=t,a=t;if(o&&s&&(a=t[o],r=t[s]),!e||_!==r){i.set({selected:this.__ba=r});var n=c.Event("change",{item:t,keys:{text:o,value:s},value:s?t[s]:t,text:o?t[o]:t});n.isDefaultPrevented()?i.set({selected:_}):i.digest({selected:r,selectedText:a}),this.__j.val(s?t[s]:t).trigger(n)}},"__aX<click>":function(){var t=this.__j;t.hasClass("_cv")?this.__a():t.hasClass("_ct")||this.__g()},"__cu<keyup,paste>":function(t){var e=this;t.stopPropagation(),clearTimeout(e.__cs);var i=c.trim(t.eventTarget.value);e.updater.set({keyword:i}),e.__cs=setTimeout(e.wrapAsync(function(){i!=e.__ct&&e.__cr(e.__ct=i,function(t){e.updater.digest({list:t})})}),300)},"__cv<click>":function(t){this.__w(t.params.item,!0),this.__a()},"__at<change,focusin,focusout>":function(t){t.stopPropagation()}})});