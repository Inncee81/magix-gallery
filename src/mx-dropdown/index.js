define("mx-dropdown/index",["magix","$","../mx-monitor/index"],(e,t,i)=>{var s=e("magix"),c=e("$"),_=e("../mx-monitor/index");s.applyStyle("_p",'._cr{outline:0;position:relative;width:340px;background-color:#fff;border:1px solid #e6e6e6;border-radius:4px;display:inline-block;vertical-align:middle;height:32px}._cr:hover{border-color:#ccc}._cs{color:#333;position:relative;width:100%;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;padding:0 30px 0 12px}._ct{cursor:not-allowed;background-color:#fbfbfb}._ct:hover{border-color:#e6e6e6}._ct ._cs{cursor:not-allowed}._cu{position:absolute;right:0;top:2px;font-size:28px;color:#ccc;-webkit-transition:top .3s,-webkit-transform .3s;transition:top .3s,-webkit-transform .3s;transition:transform .3s,top .3s;transition:transform .3s,top .3s,-webkit-transform .3s}._cv ._cu{-webkit-transform:rotate(180deg);transform:rotate(180deg);top:0}._cr[tabindex="0"]:focus,._cv,._cv:hover{border-color:#f96447}._cw{height:30px;line-height:30px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}._cx{color:#999}._cy{position:absolute;top:100%;left:-1px;right:-1px;margin-top:5px;border-radius:4px;z-index:300;border:1px solid #e6e6e6;background-color:#fff;display:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}._cv ._cy{display:block}._cz{overflow:auto;max-height:196px;padding:4px 0}._cA{display:block;width:100%;padding:9px 9px 4px}._cB{padding:0;width:100%}._cC{color:#ccc;position:absolute;left:15px;top:16px}._cD{padding-left:28px;height:28px;line-height:28px;width:100%}._cE{padding:5px;color:#999;display:block;cursor:default}._cF{padding:0 4px;margin:2px 0}._cG{cursor:pointer;color:#666;display:block;width:100%;padding:0 12px;height:29px;line-height:29px;border-radius:4px}._cG:hover{color:#333;background-color:#f0f0f0}._cH,._cH:active,._cH:focus,._cH:hover{color:#fff;background-color:#f96447}');var a=function(e,t,i,c,_){if(!e[t]||s.has(i,c)){var a=i[c]||"";_||(a+=""),e[t]=a}return e[t]};i.exports=s.View.extend({tmpl:{html:'<div mx-guid="g0" class="_cs" mx-click="__aQ()" title="<%=$$.selectedText%>"><span mx-guid="g1" class="_cw<%if($$.selected===\'\'){%> _cx<%}%>">2</span><span class="__ _cu">&#xe692;</span></div><div mx-guid="g2" class="_cy">3</div>',subs:[{keys:["selectedText"],path:'div[mx-guid="g0"]',attr:'title="<%=$$.selectedText%>"',attrs:[{n:"title",p:1}]},{keys:["selected","selectedText"],path:'span[mx-guid="g1"]',tmpl:"<%=$$.selectedText%>",s:"2",attr:"class=\"_cw<%if($$.selected===''){%> _cx<%}%>\"",attrs:[{n:"class",p:1,f:"className"}],mask:"21"},{keys:["rList","searchbox"],path:'div[mx-guid="g2"]',tmpl:'<%if($$.rList){if($$.searchbox){%><div class="_cA"><label class="_cB"><span class="__ _cC">&#xe608;</span><input placeholder="搜索关键词" mx-keyup="__cl()" mx-paste="__cl()" mx-change="__am()" mx-focusin="__am()" mx-focusout="__am()" class="_ap _cD"></label></div><%}%><ul mx-guid="g3" class="_cz" id="list_<%=$$.viewId%>">4</ul><%}%>',s:"3"},{keys:["list","textKey","valueKey","selected"],path:'ul[mx-guid="g3"]',pKeys:["rList","searchbox"],tmpl:'<%var _=void 0,a=void 0;for(var b=0,c=$$.list;b<c.length;b++){var d=c[b];if($$.textKey&&$$.valueKey){_=d[$$.textKey];a=d[$$.valueKey];}else{_=d;a=d;}if(d&&d.group){%><li class="_cE _al" title="<%=d[$$.textKey]%>"><%=d[$$.textKey]%></li><%}else{%><li title="<%=_%>" class="_cF"><%var e=(a+\'\')===($$.selected+\'\')%><span class="_cG _al<%if(e){%> _cH<%}%>" mx-click="__cm({item:\'<%@d%>\'})"><%=_%></span></li><%}}%>',s:"4"}]},init:function(e){var t=this;_.__d();var i=c("#"+t.id);i.addClass("_cr"),i.on("keydown",function(e){13==e.keyCode&&t["__aQ<click>"]()}),t.on("destroy",function(){i.off("keydown"),_.__f(t),_.__g()}),t.updater.set({viewId:t.id}),t.__h=i,t.assign(e)},assign:function(e){a(this,"__ca",e,"list",1);var t=a(this,"__aU",e,"selected"),i=a(this,"__cb",e,"textKey"),_=a(this,"__cc",e,"valueKey"),o=a(this,"__cd",e,"emptyText");if(this.__ce=e.searchbox+""=="true",this.__cf=e.disabled+""=="true",!this.__ca){var r,l=[];this.__h.children().each(function(e,t){t=c(t),r="true"==t.attr("group"),l.push({group:r,text:t.text(),value:r?s.guid():t.attr("value")})}),i=this.__cb="text",_=this.__cc="value",this.__ca=l}var n=this.__ca,d=s.toMap(n,_);if(o)if(i&&_){if(!d[""]){var p={};p[i]=o,p[_]="",n.unshift(p),d[""]=p}}else d[o]||(n.unshift(o),d[o]=o);return t||!o||i||_||(t=o),t&&d[t]||(t=d[t]||n[0],i&&_&&(t=t[_])),this.__aU=t,this.__cg=i&&_?d[t][i]:t,!0},__i:function(e){return s.inside(e,this.id)},render:function(){this.__h[this.__cf?"addClass":"removeClass"]("_ct").prop("tabindex",this.__cf?-1:0),this.__ch(!0)},__a:function(){this.__h.hasClass("_cv")&&(this.__h.removeClass("_cv").trigger("focusout"),_.__f(this))},__e:function(){if(!this.__h.hasClass("_cv")){this.updater.get("rList")||this.updater.digest({rList:!0}),this.__h.addClass("_cv").trigger("focusin");var e=c("#list_"+this.id),t=e.find("._cH").position(),i=e.height(),s=e.prop("scrollTop");if(t.top<0||t.top>i){var a=t.top-i+s+i/2;e.prop("scrollTop",a)}_.__k(this)}},__ch:function(e){var t=this.__aU;this.updater.digest({textKey:this.__cb,valueKey:this.__cc,selected:t,searchbox:this.__ce,selectedText:this.__cg,list:this.__ca.slice()}),this.__h.val(t),e||this.__u(t)},__cj:function(e,t){var i=this;clearTimeout(i.__ci);var s=i.__ca,c=[],_=0,a=s.length,o=i.__cb,r=i.__cc;if(e){var l=function(){if(_<a){for(var n=Math.min(_+400,a),d=_,p=void 0,h=void 0,u=void 0;d<n;d++)h=p=s[d],u=p,o&&r&&(h=p[o],u=p[r]),((h+"").indexOf(e)>=0||(u+"").indexOf(e)>=0)&&c.push(p);_=n,i.__ci=setTimeout(i.wrapAsync(l),20)}else t(c)};l()}else t(s)},__u:function(e,t){var i=this.updater,s=this.__cc,_=this.__cb,a=this.__aU,o=e,r=e;if(_&&s&&(r=e[_],o=e[s]),!t||a!==o){i.set({selected:this.__aU=o});var l=c.Event("change",{item:e,keys:{text:_,value:s},value:s?e[s]:e,text:_?e[_]:e});this.__h.val(s?e[s]:e).trigger(l),l.isDefaultPrevented()?i.set({selected:a}):i.digest({selected:o,selectedText:r})}},"__aQ<click>":function(){var e=this.__h;e.hasClass("_cv")?this.__a():e.hasClass("_ct")||this.__e()},"__cl<keyup,paste>":function(e){var t=this;e.stopPropagation(),clearTimeout(t.__ck);var i=c.trim(e.eventTarget.value);t.__ck=setTimeout(t.wrapAsync(function(){i!=t.$lVal&&t.__cj(t.$lVal=i,function(e){t.updater.digest({list:e})})}),300)},"__cm<click>":function(e){this.__u(e.params.item,!0),this.__a()},"__am<change,focusin,focusout>":function(e){e.stopPropagation()}})});