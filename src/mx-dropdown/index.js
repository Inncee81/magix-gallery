define("mx-dropdown/index",["magix","$","../mx-monitor/index"],(e,t,i)=>{var s=e("magix"),c=e("$"),_=e("../mx-monitor/index");s.applyStyle("_q",'._cx{outline:0;position:relative;width:340px;background-color:#fff;border:1px solid #e6e6e6;border-radius:4px;display:inline-block;vertical-align:middle;height:32px}._cx:hover{border-color:#ccc}._cy{color:#333;position:relative;width:100%;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;padding:0 30px 0 12px}._cz{cursor:not-allowed;background-color:#fbfbfb}._cz:hover{border-color:#e6e6e6}._cz ._cy{cursor:not-allowed}._cA{position:absolute;right:0;top:2px;font-size:28px;color:#ccc;-webkit-transition:top .3s,-webkit-transform .3s;transition:top .3s,-webkit-transform .3s;transition:transform .3s,top .3s;transition:transform .3s,top .3s,-webkit-transform .3s}._cB ._cA{-webkit-transform:rotate(180deg);transform:rotate(180deg);top:0}._cx[tabindex="0"]:focus,._cB,._cB:hover{border-color:#f96447}._cC{height:30px;line-height:30px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}._cD{color:#999}._cE{position:absolute;top:100%;left:-1px;right:-1px;margin-top:5px;border-radius:4px;z-index:300;border:1px solid #e6e6e6;background-color:#fff;display:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}._cB ._cE{display:block}._cF{overflow:auto;max-height:196px;padding:4px 0}._cG{display:block;width:100%;padding:9px 9px 4px}._cH{padding:0;width:100%}._cI{color:#ccc;position:absolute;left:15px;top:16px}._cJ{padding-left:28px;height:28px;line-height:28px;width:100%}._cK{padding:5px;color:#999;display:block;cursor:default}._cL{padding:0 4px;margin:2px 0}._cM{cursor:pointer;color:#666;display:block;width:100%;padding:0 12px;height:29px;line-height:29px;border-radius:4px}._cM:hover{color:#333;background-color:#f0f0f0}._cN,._cN:active,._cN:focus,._cN:hover{color:#fff;background-color:#f96447}');var o=function(e,t,i,c,_){if(!e[t]||s.has(i,c)){var o=i[c]||"";_||(o+=""),e[t]=o}return e[t]};i.exports=s.View.extend({tmpl:{html:'<div class="_cy" mx-click="__aW()" title="<%=$$.selectedText%>"><span class="_cC<%if($$.selected===\'\'){%> _cD<%}%>"><%=$$.selectedText%></span><span class="__ _cA">&#xe692;</span></div><div class="_cE"><%if($$.rList){if($$.searchbox){%><div class="_cG"><label class="_cH"><span class="__ _cI">&#xe608;</span><input placeholder="搜索关键词" mx-keyup="__ct()" mx-paste="__ct()" mx-change="__as()" mx-focusin="__as()" mx-focusout="__as()" class="_ap _cJ" value="<%=$$.keyword%>"></label></div><%}%><ul class="_cF" id="list_<%=$$.viewId%>"><%var _=void 0,a=void 0;for(var b=0,c=$$.list;b<c.length;b++){var d=c[b];if($$.textKey&&$$.valueKey){_=d[$$.textKey];a=d[$$.valueKey];}else{_=d;a=d;}if(d&&d.group){%><li class="_cK _al" title="<%=d[$$.textKey]%>"><%=d[$$.textKey]%></li><%}else{%><li title="<%=_%>" class="_cL"><%var e=(a+\'\')===($$.selected+\'\')%><span class="_cM _al<%if(e){%> _cN<%}%>" mx-click="__cu({item:\'<%@d%>\'})"><%=_%></span></li><%}}%></ul><%}%></div>'},init:function(e){var t=this;_.__d();var i=c("#"+t.id);i.addClass("_cx"),i.on("keydown",function(e){13==e.keyCode&&t["__aW<click>"]()}),t.on("destroy",function(){i.off("keydown"),_.__g(t),_.__h()}),t.updater.set({viewId:t.id}),t.__i=i,t.__cg=!e.list,t.assign(e,{node:i})},assign:function(e,t){var i=t.node;o(this,"__ch",e,"list",1);var _=o(this,"__b_",e,"selected"),a=o(this,"__ci",e,"textKey"),r=o(this,"__cj",e,"valueKey"),n=o(this,"__ck",e,"emptyText");if(this.__cl=e.searchbox+""=="true",this.__cm=e.disabled+""=="true",this.__cg){var l,d=[];(i=c(i)).children().each(function(e,t){t=c(t),l="true"==t.attr("group"),d.push({group:l,text:t.text(),value:l?s.guid():t.attr("value")})}),a=this.__ci="text",r=this.__cj="value",this.__ch=d}var p=this.__ch,h=s.toMap(p,r);if(n)if(a&&r){if(!h[""]){var u={};u[a]=n,u[r]="",p.unshift(u),h[""]=u}}else h[n]||(p.unshift(n),h[n]=n);return _||!n||a||r||(_=n),_&&h[_]||(_=h[_]||p[0],a&&r&&(_=_[r])),this.__b_=_,this.__cn=a&&r?h[_][a]:_,!0},__j:function(e){return s.inside(e,this.id)},render:function(){this.__i[this.__cm?"addClass":"removeClass"]("_cz").prop("tabindex",this.__cm?-1:0),this.__co(!0)},__a:function(){this.__i.hasClass("_cB")&&(this.__i.removeClass("_cB").trigger("focusout"),_.__g(this))},__f:function(){if(!this.__i.hasClass("_cB")){this.updater.get("rList")||this.updater.digest({rList:!0}),this.__i.addClass("_cB").trigger("focusin");var e=c("#list_"+this.id),t=e.find("._cN").position(),i=e.height(),s=e.prop("scrollTop");if(t.top<0||t.top>i){var o=t.top-i+s+i/2;e.prop("scrollTop",o)}_.__l(this)}},__co:function(e){var t=this.__b_;this.updater.digest({textKey:this.__ci,valueKey:this.__cj,selected:t,searchbox:this.__cl,selectedText:this.__cn,list:this.__ch.slice()}),this.__i.val(t),e||this.__v(t)},__cq:function(e,t){var i=this;clearTimeout(i.__cp);var s=i.__ch,c=[],_=0,o=s.length,a=i.__ci,r=i.__cj;if(e){var n=function(){if(_<o){for(var l=Math.min(_+400,o),d=_,p=void 0,h=void 0,u=void 0;d<l;d++)h=p=s[d],u=p,a&&r&&(h=p[a],u=p[r]),((h+"").indexOf(e)>=0||(u+"").indexOf(e)>=0)&&c.push(p);_=l,i.__cp=setTimeout(i.wrapAsync(n),20)}else t(c)};n()}else t(s)},__v:function(e,t){var i=this.updater,s=this.__cj,_=this.__ci,o=this.__b_,a=e,r=e;if(_&&s&&(r=e[_],a=e[s]),!t||o!==a){i.set({selected:this.__b_=a});var n=c.Event("change",{item:e,keys:{text:_,value:s},value:s?e[s]:e,text:_?e[_]:e});n.isDefaultPrevented()?i.set({selected:o}):i.digest({selected:a,selectedText:r}),this.__i.val(s?e[s]:e).trigger(n)}},"__aW<click>":function(){var e=this.__i;e.hasClass("_cB")?this.__a():e.hasClass("_cz")||this.__f()},"__ct<keyup,paste>":function(e){var t=this;e.stopPropagation(),clearTimeout(t.__cr);var i=c.trim(e.eventTarget.value);t.__cr=setTimeout(t.wrapAsync(function(){i!=t.__cs&&t.__cq(t.__cs=i,function(e){t.updater.digest({list:e})})}),300)},"__cu<click>":function(e){this.__v(e.params.item,!0),this.__a()},"__as<change,focusin,focusout>":function(e){e.stopPropagation()}})});