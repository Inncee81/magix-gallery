define("mx-dropdown/index",["magix","$","../mx-monitor/index"],(t,e,i)=>{var s=t("magix"),c=t("$"),o=t("../mx-monitor/index");s.applyStyle("_p",'._cr{outline:0;position:relative;width:340px;background-color:#fff;border:1px solid #e6e6e6;border-radius:4px;display:inline-block;vertical-align:middle;height:32px}._cr:hover{border-color:#ccc}._cs{color:#333;position:relative;width:100%;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;padding:0 30px 0 12px}._ct{cursor:not-allowed;background-color:#fbfbfb}._ct:hover{border-color:#e6e6e6}._ct ._cs{cursor:not-allowed}._cu{position:absolute;right:0;top:2px;font-size:28px;color:#ccc;transition:top .3s,-webkit-transform .3s;transition:transform .3s,top .3s;transition:transform .3s,top .3s,-webkit-transform .3s}._cv ._cu{-webkit-transform:rotate(180deg);transform:rotate(180deg);top:0}._cr[tabindex="0"]:focus,._cv,._cv:hover{border-color:#f96447}._cw{height:30px;line-height:30px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}._cx{color:#999}._cy{position:absolute;top:100%;left:-1px;right:-1px;margin-top:5px;border-radius:4px;z-index:300;border:1px solid #e6e6e6;background-color:#fff;display:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}._cv ._cy{display:block}._cz{overflow:auto;max-height:196px;padding:4px 0}._cA{display:block;width:100%;padding:9px 9px 4px}._cB{padding:0;width:100%}._cC{color:#ccc;position:absolute;left:15px;top:16px}._cD{padding-left:28px;height:28px;line-height:28px;width:100%}._cE{padding:5px;color:#999;display:block;cursor:default}._cF{padding:0 4px;margin:2px 0}._cG{cursor:pointer;color:#666;display:block;width:100%;padding:0 12px;height:29px;line-height:29px;border-radius:4px}._cG:hover{color:#333;background-color:#f0f0f0}._cH,._cH:active,._cH:focus,._cH:hover{color:#fff;background-color:#f96447}'),i.exports=s.View.extend({tmpl:function(t){var e="",i={"&":"amp","<":"lt",">":"gt",'"':"#34","'":"#39","`":"#96"},s=/[&<>"'`]/g,c=function(t){return null==t?"":""+t},o=function(t){return"&"+i[t]+";"},_=function(t){return c(t).replace(s,o)},r=function(e,i,s){for(s=t[""];--s;)if(t[i=""+s]===e)return i;return t[i=""+t[""]++]=e,i};if(e+='<div class="_cs" mx-click="__aY()" title="'+_(t.selectedText)+'"><span class="_cw',""===t.selected&&(e+=" _cx"),e+='">'+_(t.selectedText)+'</span><span class="__ _cu">&#xe692;</span></div><div class="_cy">',t.rList){t.searchbox&&(e+='<div class="_cA"><label class="_cB"><span class="__ _cC">&#xe608;</span><input placeholder="搜索关键词" mx-keyup="__cv()" mx-paste="__cv()" mx-change="__au()" mx-focusin="__au()" mx-focusout="__au()" class="_ap _cD" value="'+_(t.keyword)+'"/></label></div>'),e+='<ul class="_cz" id="list_'+_(t.viewId)+'">';for(var n=void 0,a=void 0,l=0,d=t.list;l<d.length;l++){var p=d[l];if(t.textKey&&t.valueKey?(n=p[t.textKey],a=p[t.valueKey]):(n=p,a=p),p&&p.group)e+='<li class="_cE _al" title="'+_(p[t.textKey])+'">'+_(p[t.textKey])+"</li>";else{e+='<li title="'+_(n)+'" class="_cF">';e+='<span class="_cG _al',a+""==t.selected+""&&(e+=" _cH"),e+='" mx-click="__cw({item:\'',e+=r(p),e+="'})\">"+_(n)+"</span></li>"}}e+="</ul>"}return e+="</div>"},init:function(t){var e=this;o.__f();var i=c("#"+e.id);i.on("keydown",function(t){13==t.keyCode&&e["__aY<click>"]()}),e.on("destroy",function(){i.off("keydown"),o.__i(e),o.__j()}),e.updater.set({viewId:e.id}),e.__k=i,e.__ci=!t.list,e.assign(t,{node:i})},assign:function(t,e){var i=e.node,o=e.inner;this.__cj=t.list;var _=this.__bb=t.selected,r=this.__ck=t.textKey||"",n=this.__cl=t.valueKey||"",a=this.__cm=t.emptyText||"";if(this.__cn=t.searchbox+""=="true",this.__co=t.disabled+""=="true",this.__ci){var l,d=[];(i=o?c(o):c(i).children()).each(function(t,e){e=c(e),l="true"==e.attr("group"),d.push({group:l,text:e.text(),value:l?s.guid():e.attr("value")})}),r=this.__ck="text",n=this.__cl="value",this.__cj=d}var p=this.__cj,u=s.toMap(p,n);if(a)if(r&&n){if(!u[""]){var h={};h[r]=a,h[n]="",p.unshift(h),u[""]=h}}else u[a]||(p.unshift(a),u[a]=a);return _||!a||r||n||(_=a),_&&u[_]||(_=u[_]||p[0],r&&n&&(_=_[n])),this.__bb=_,this.__cp=r&&n?u[_][r]:_,!0},__l:function(t){return s.inside(t,this.id)},render:function(){var t=this.__k;t.addClass("_cr"),t[this.__co?"addClass":"removeClass"]("_ct").prop("tabindex",this.__co?-1:0),this.__cq(!0)},__b:function(){this.__k.hasClass("_cv")&&(this.__k.removeClass("_cv").trigger("focusout"),o.__i(this))},__h:function(){if(!this.__k.hasClass("_cv")){this.updater.get("rList")||this.updater.digest({rList:!0}),this.__k.addClass("_cv").trigger("focusin");var t=c("#list_"+this.id),e=t.find("._cH").position(),i=t.height(),s=t.prop("scrollTop");if(e.top<0||e.top>i){var _=e.top-i+s+i/2;t.prop("scrollTop",_)}o.__n(this)}},__cq:function(t){var e=this.__bb;this.updater.digest({textKey:this.__ck,valueKey:this.__cl,selected:e,searchbox:this.__cn,selectedText:this.__cp,list:this.__cj.slice()}),this.__k.val(e),t||this.__x(e)},__cs:function(t,e){var i=this;clearTimeout(i.__cr);var s=i.__cj,c=[],o=0,_=s.length,r=i.__ck,n=i.__cl;if(t){var a=function(){if(o<_){for(var l=Math.min(o+400,_),d=o,p=void 0,u=void 0,h=void 0;d<l;d++)u=p=s[d],h=p,r&&n&&(u=p[r],h=p[n]),((u+"").indexOf(t)>=0||(h+"").indexOf(t)>=0)&&c.push(p);o=l,i.__cr=setTimeout(i.wrapAsync(a),20)}else e(c)};a()}else e(s)},__x:function(t,e){var i=this.updater,s=this.__cl,o=this.__ck,_=this.__bb,r=t,n=t;if(o&&s&&(n=t[o],r=t[s]),!e||_!==r){i.set({selected:this.__bb=r});var a=c.Event("change",{item:t,keys:{text:o,value:s},value:s?t[s]:t,text:o?t[o]:t});a.isDefaultPrevented()?i.set({selected:_}):i.digest({selected:r,selectedText:n}),this.__k.val(s?t[s]:t).trigger(a)}},"__aY<click>":function(){var t=this.__k;t.hasClass("_cv")?this.__b():t.hasClass("_ct")||this.__h()},"__cv<keyup,paste>":function(t){var e=this;t.stopPropagation(),clearTimeout(e.__ct);var i=c.trim(t.eventTarget.value);e.updater.set({keyword:i}),e.__ct=setTimeout(e.wrapAsync(function(){i!=e.__cu&&e.__cs(e.__cu=i,function(t){e.updater.digest({list:t})})}),300)},"__cw<click>":function(t){this.__x(t.params.item,!0),this.__b()},"__au<change,focusin,focusout>":function(t){t.stopPropagation()}})});