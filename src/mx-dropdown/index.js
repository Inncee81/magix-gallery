define("mx-dropdown/index",["magix","$","../mx-monitor/index"],(e,t,i)=>{var s=e("magix"),_=e("$"),o=e("../mx-monitor/index");s.applyStyle("_o",'._ci{outline:0;position:relative;width:340px;background-color:#fff;border:1px solid #e6e6e6;border-radius:4px;display:inline-block;vertical-align:middle;height:32px}._ci:hover{border-color:#ccc}._cj{color:#333;position:relative;width:100%;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;padding:0 30px 0 12px}._ck{cursor:not-allowed;background-color:#fbfbfb}._ck:hover{border-color:#e6e6e6}._ck ._cj{cursor:not-allowed}._cl{position:absolute;right:0;top:2px;font-size:28px;color:#ccc;-webkit-transition:top .3s,-webkit-transform .3s;transition:top .3s,-webkit-transform .3s;transition:transform .3s,top .3s;transition:transform .3s,top .3s,-webkit-transform .3s}._cm ._cl{-webkit-transform:rotate(180deg);transform:rotate(180deg);top:0}._ci[tabindex="0"]:focus,._cm,._cm:hover{border-color:#f96447}._cn{height:30px;line-height:30px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}._co{color:#999}._cp{position:absolute;top:100%;left:-1px;right:-1px;margin-top:5px;border-radius:4px;z-index:300;border:1px solid #e6e6e6;background-color:#fff;display:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}._cm ._cp{display:block}._cq{overflow:auto;max-height:196px;padding:4px 0}._cr{display:block;width:100%;padding:9px 9px 4px}._cs{padding:0;width:100%}._ct{color:#ccc;position:absolute;left:15px;top:16px}._cu{padding-left:28px;height:28px;line-height:28px;width:100%}._cv{padding:5px;color:#999;display:block;cursor:default}._cw{padding:0 4px;margin:2px 0}._cx{cursor:pointer;color:#666;display:block;width:100%;padding:0 12px;height:29px;line-height:29px;border-radius:4px}._cx:hover{color:#333;background-color:#f0f0f0}._cy,._cy:active,._cy:focus,._cy:hover{color:#fff;background-color:#f96447}');var a=function(e,t,i,_,o){if(!e[t]||s.has(i,_)){var a=i[_]||"";o||(a+=""),e[t]=a}return e[t]};i.exports=s.View.extend({tmpl:{html:'<div mx-guid="g0" class="_cj" mx-click="__ax()" title="<%=$$.selectedText%>"><span mx-guid="g1" class="_cn<%if($$.selected===\'\'){%> _co<%}%>">2</span><span class="__ _cl">&#xe692;</span></div><div mx-guid="g2" class="_cp">3</div>',subs:[{keys:["selectedText"],path:'div[mx-guid="g0"]',attr:'title="<%=$$.selectedText%>"',attrs:[{n:"title",p:1}]},{keys:["selected","selectedText"],path:'span[mx-guid="g1"]',tmpl:"<%=$$.selectedText%>",s:"2",attr:"class=\"_cn<%if($$.selected===''){%> _co<%}%>\"",attrs:[{n:"class",p:1,f:"className"}],mask:"21"},{keys:["rList","searchbox"],path:'div[mx-guid="g2"]',tmpl:'<%if($$.rList){if($$.searchbox){%><div class="_cr"><label class="_cs"><span class="__ _ct">&#xe608;</span><input placeholder="搜索关键词" mx-keyup="__bW()" mx-paste="__bW()" mx-change="__bY()" mx-focusin="__bY()" mx-focusout="__bY()" class="_ap _cu"></label></div><%}%><ul mx-guid="g3" class="_cq" id="list_<%=$$.viewId%>">4</ul><%}%>',s:"3"},{keys:["list","textKey","valueKey","selected"],path:'ul[mx-guid="g3"]',pKeys:["rList","searchbox"],tmpl:'<%var _=void 0,a=void 0;for(var b=0,c=$$.list;b<c.length;b++){var d=c[b];if($$.textKey&&$$.valueKey){_=d[$$.textKey];a=d[$$.valueKey];}\nelse{_=d;a=d;}if(d&&d.group){%><li class="_cv _al" title="<%=d[$$.textKey]%>"><%=d[$$.textKey]%></li><%}\nelse{%><li title="<%=_%>" class="_cw"><%var e=(a+\'\')===($$.selected+\'\')%><span class="_cx _al<%if(e){%> _cy<%}%>" mx-click="__bX({item:\'<%@d%>\'})"><%=_%></span></li><%}}%>',s:"4"}]},init:function(e){var t=this;o.__d();var i=_("#"+t.id);i.addClass("_ci"),i.on("keydown",function(e){13==e.keyCode&&t["__ax<click>"]()}),t.on("destroy",function(){i.off("keydown"),o.__f(t),o.__g()}),t.updater.set({viewId:t.id}),t.__h=i,t.assign(e)},assign:function(e){var t=this;a(t,"__bL",e,"list",1);var i=a(t,"__aB",e,"selected"),o=a(t,"__bM",e,"textKey"),c=a(t,"__bN",e,"valueKey"),r=a(t,"__bO",e,"emptyText");if(t.__bP=e.searchbox+""=="true",t.__bQ=e.disabled+""=="true",!t.__bL){var l,n=[];t.__h.children().each(function(e,t){t=_(t),l="true"==t.attr("group"),n.push({group:l,text:t.text(),value:l?s.guid():t.attr("value")})}),o=t.__bM="text",c=t.__bN="value",t.__bL=n}var d=t.__bL,p=s.toMap(d,c);if(r)if(o&&c){if(!p[""]){var u={};u[o]=r,u[c]="",d.unshift(u),p[""]=u}}else p[r]||(d.unshift(r),p[r]=r);return i||!r||o||c||(i=r),i&&p[i]||(i=p[i]||d[0],o&&c&&(i=i[c])),t.__aB=i,t.__bR=o&&c?p[i][o]:i,!0},__i:function(e){return s.inside(e,this.id)},render:function(){this.__h[this.__bQ?"addClass":"removeClass"]("_ck").prop("tabindex",this.__bQ?-1:0),this.__bS(!0)},__a:function(){var e=this;e.__h.hasClass("_cm")&&(e.__h.removeClass("_cm").trigger("focusout"),o.__f(e))},__e:function(){var e=this;if(!e.__h.hasClass("_cm")){e.updater.get("rList")||e.updater.digest({rList:!0}),e.__h.addClass("_cm").trigger("focusin");var t=_("#list_"+e.id),i=t.find("._cy").position(),s=t.height(),a=t.prop("scrollTop");if(i.top<0||i.top>s){var c=i.top-s+a+s/2;t.prop("scrollTop",c)}o.__k(e)}},__bS:function(e){var t=this,i=t.__aB;t.updater.digest({textKey:t.__bM,valueKey:t.__bN,selected:i,searchbox:t.__bP,selectedText:t.__bR,list:t.__bL.slice()}),t.__h.val(i),e||t.__u(i)},__bU:function(e,t){var i=this;clearTimeout(i.__bT);var s=i.__bL,_=[],o=0,a=s.length,c=i.__bM,r=i.__bN;if(e){var l=function(){if(o<a){for(var n=Math.min(o+400,a),d=o,p=void 0,u=void 0,x=void 0;d<n;d++)u=p=s[d],x=p,c&&r&&(u=p[c],x=p[r]),((u+"").indexOf(e)>=0||(x+"").indexOf(e)>=0)&&_.push(p);o=n,i.__bT=setTimeout(i.wrapAsync(l),20)}else t(_)};l()}else t(s)},__u:function(e,t){var i=this,s=i.updater,o=i.__bN,a=i.__bM,c=i.__aB,r=e,l=e;if(a&&o&&(l=e[a],r=e[o]),!t||c!==r){s.set({selected:i.__aB=r});var n=_.Event("change",{item:e,keys:{text:a,value:o},value:o?e[o]:e,text:a?e[a]:e});i.__h.val(o?e[o]:e).trigger(n),n.isDefaultPrevented()?s.set({selected:c}):s.digest({selected:r,selectedText:l})}},"__ax<click>":function(){var e=this,t=e.__h;t.hasClass("_cm")?e.__a():t.hasClass("_ck")||e.__e()},"__bW<keyup,paste>":function(e){var t=this;e.stopPropagation(),clearTimeout(t.__bV);var i=_.trim(e.eventTarget.value);t.__bV=setTimeout(t.wrapAsync(function(){i!=t.$lVal&&t.__bU(t.$lVal=i,function(e){t.updater.digest({list:e})})}),300)},"__bX<click>":function(e){this.__u(e.params.item,!0),this.__a()},"__bY<change,focusin,focusout>":function(e){e.stopPropagation()}})});