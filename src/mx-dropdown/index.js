define("mx-dropdown/index",["magix","$","../mx-monitor/index"],(t,e,i)=>{var s=t("magix"),c=t("$"),_=t("../mx-monitor/index");s.applyStyle("_p",'._cr{outline:0;position:relative;width:340px;background-color:#fff;border:1px solid #e6e6e6;border-radius:4px;display:inline-block;vertical-align:middle;height:32px}._cr:hover{border-color:#ccc}._cs{color:#333;position:relative;width:100%;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;padding:0 30px 0 12px}._ct{cursor:not-allowed;background-color:#fbfbfb}._ct:hover{border-color:#e6e6e6}._ct ._cs{cursor:not-allowed}._cu{position:absolute;right:0;top:2px;font-size:28px;color:#ccc;transition:top .3s,-webkit-transform .3s;transition:transform .3s,top .3s;transition:transform .3s,top .3s,-webkit-transform .3s}._cv ._cu{-webkit-transform:rotate(180deg);transform:rotate(180deg);top:0}._cr[tabindex="0"]:focus,._cv,._cv:hover{border-color:#f96447}._cw{height:30px;line-height:30px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}._cx{color:#999}._cy{position:absolute;top:100%;left:-1px;right:-1px;margin-top:5px;border-radius:4px;z-index:300;border:1px solid #e6e6e6;background-color:#fff;display:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}._cv ._cy{display:block}._cz{overflow:auto;max-height:196px;padding:4px 0}._cA{display:block;width:100%;padding:9px 9px 4px}._cB{padding:0;width:100%}._cC{color:#ccc;position:absolute;left:15px;top:16px}._cD{padding-left:28px;height:28px;line-height:28px;width:100%}._cE{padding:5px;color:#999;display:block;cursor:default}._cF{padding:0 4px;margin:2px 0}._cG{cursor:pointer;color:#666;display:block;width:100%;padding:0 12px;height:29px;line-height:29px;border-radius:4px}._cG:hover{color:#333;background-color:#f0f0f0}._cH,._cH:active,._cH:focus,._cH:hover{color:#fff;background-color:#f96447}'),i.exports=s.View.extend({tmpl:function(t,e){var i="",s={"&":"amp","<":"lt",">":"gt",'"':"#34","'":"#39","`":"#96"},c=/[&<>"'`]/g,_=function(t){return null==t?"":""+t},o=function(t){return"&"+s[t]+";"},r=function(t){return _(t).replace(c,o)},a=function(e,i,s){for(s=t[""];--s;)if(t[i=""+s]===e)return i;return t[i=""+t[""]++]=e,i};if(i+='<div class="_cs" mx-click="'+(e=e||"")+'__aY()" title="'+r(t.selectedText)+'"><span class="_cw',""===t.selected&&(i+=" _cx"),i+='">'+r(t.selectedText)+'</span><span mxs="_9:_" class="__ _cu">&#xe692;</span></div><div mxa="_9:_" class="_cy">',t.rList){t.searchbox&&(i+='<div mxa="_9:a" class="_cA"><label mxa="_9:b" class="_cB"><span mxs="_9:_" class="__ _cC">&#xe608;</span><input placeholder="搜索关键词" mx-keyup="'+e+'__cv()" mx-paste="'+e+'__cv()" mx-change="'+e+'__au()" mx-focusin="'+e+'__au()" mx-focusout="'+e+'__au()" class="_ap _cD" value="'+r(t.keyword)+'"/></label></div>'),i+='<ul class="_cz" id="list_'+r(t.viewId)+'">';for(var n=void 0,l=void 0,d=0,p=t.list;d<p.length;d++){var u=p[d];if(t.textKey&&t.valueKey?(n=u[t.textKey],l=u[t.valueKey]):(n=u,l=u),u&&u.group)i+='<li class="_cE _al" title="'+r(u[t.textKey])+'">'+r(u[t.textKey])+"</li>";else{i+='<li title="'+r(n)+'" class="_cF">';i+='<span class="_cG _al',l+""==t.selected+""&&(i+=" _cH"),i+='" mx-click="'+e+"__cw({item:'",i+=a(u),i+="'})\">"+r(n)+"</span></li>"}}i+="</ul>"}return i+="</div>"},init:function(t){var e=this;_.__g();var i=c("#"+e.id);i.on("keydown",function(t){13==t.keyCode&&e["__aY<click>"]()}),e.on("destroy",function(){i.off("keydown"),_.__i(e),_.__j()}),e.updater.set({viewId:e.id}),e.__k=i,e.__ci=!t.list,e.assign(t,{node:i})},assign:function(t,e){var i=e.node,_=e.inner;this.__cj=t.list;var o=this.__bb=t.selected,r=this.__ck=t.textKey||"",a=this.__cl=t.valueKey||"",n=this.__cm=t.emptyText||"";if(this.__cn=t.searchbox+""=="true",this.__co=t.disabled+""=="true",this.__ci){var l,d=[];(i=_?c(_):c(i).children()).each(function(t,e){e=c(e),l="true"==e.attr("group"),d.push({group:l,text:e.text(),value:l?s.guid():e.attr("value")})}),r=this.__ck="text",a=this.__cl="value",this.__cj=d}var p=this.__cj,u=s.toMap(p,a);if(n)if(r&&a){if(!u[""]){var h={};h[r]=n,h[a]="",p.unshift(h),u[""]=h}}else u[n]||(p.unshift(n),u[n]=n);return o||!n||r||a||(o=n),o&&u[o]||(o=u[o]||p[0],r&&a&&(o=o[a])),this.__bb=o,this.__cp=r&&a?u[o][r]:o,!0},__l:function(t){return s.inside(t,this.id)},render:function(){var t=this.__k;t.addClass("_cr"),t[this.__co?"addClass":"removeClass"]("_ct").prop("tabindex",this.__co?-1:0),this.__cq(!0)},__b:function(){this.__k.hasClass("_cv")&&(this.__k.removeClass("_cv").trigger("focusout"),_.__i(this))},__e:function(){if(!this.__k.hasClass("_cv")){this.updater.get("rList")||this.updater.digest({rList:!0}),this.__k.addClass("_cv").trigger("focusin");var t=c("#list_"+this.id),e=t.find("._cH").position(),i=t.height(),s=t.prop("scrollTop");if(e.top<0||e.top>i){var o=e.top-i+s+i/2;t.prop("scrollTop",o)}_.__n(this)}},__cq:function(t){var e=this.__bb;this.updater.digest({textKey:this.__ck,valueKey:this.__cl,selected:e,searchbox:this.__cn,selectedText:this.__cp,list:this.__cj.slice()}),this.__k.val(e),t||this.__x(e)},__cs:function(t,e){var i=this;clearTimeout(i.__cr);var s=i.__cj,c=[],_=0,o=s.length,r=i.__ck,a=i.__cl;if(t){var n=function(){if(_<o){for(var l=Math.min(_+400,o),d=_,p=void 0,u=void 0,h=void 0;d<l;d++)u=p=s[d],h=p,r&&a&&(u=p[r],h=p[a]),((u+"").indexOf(t)>=0||(h+"").indexOf(t)>=0)&&c.push(p);_=l,i.__cr=setTimeout(i.wrapAsync(n),20)}else e(c)};n()}else e(s)},__x:function(t,e){var i=this.updater,s=this.__cl,_=this.__ck,o=this.__bb,r=t,a=t;if(_&&s&&(a=t[_],r=t[s]),!e||o!==r){i.set({selected:this.__bb=r});var n=c.Event("change",{item:t,keys:{text:_,value:s},value:s?t[s]:t,text:_?t[_]:t});n.isDefaultPrevented()?i.set({selected:o}):i.digest({selected:r,selectedText:a}),this.__k.val(s?t[s]:t).trigger(n)}},"__aY<click>":function(){var t=this.__k;t.hasClass("_cv")?this.__b():t.hasClass("_ct")||this.__e()},"__cv<keyup,paste>":function(t){var e=this;t.stopPropagation(),clearTimeout(e.__ct);var i=c.trim(t.eventTarget.value);e.updater.set({keyword:i}),e.__ct=setTimeout(e.wrapAsync(function(){i!=e.__cu&&e.__cs(e.__cu=i,function(t){e.updater.digest({list:t})})}),300)},"__cw<click>":function(t){this.__x(t.params.item,!0),this.__b()},"__au<change,focusin,focusout>":function(t){t.stopPropagation()}})});