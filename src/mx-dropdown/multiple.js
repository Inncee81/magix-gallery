define("mx-dropdown/multiple",["magix","$","../mx-monitor/index"],(t,e,i)=>{var s=t("magix"),_=t("$"),c=t("../mx-monitor/index");s.applyStyle("_r",'._cO{outline:0;position:relative;width:340px;background-color:#fff;border:1px solid #e6e6e6;border-radius:4px;display:inline-block;vertical-align:middle;height:32px}._cO:hover{border-color:#ccc}._cP{color:#333;position:relative;width:100%;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;padding:0 30px 0 12px;border-radius:3px}._cQ{cursor:not-allowed;background-color:#fbfbfb}._cQ:hover{border-color:#e6e6e6}._cQ ._cP{cursor:not-allowed}._cR{position:absolute;right:0;top:2px;font-size:28px;color:#ccc;-webkit-transition:top .3s,-webkit-transform .3s;transition:top .3s,-webkit-transform .3s;transition:transform .3s,top .3s;transition:transform .3s,top .3s,-webkit-transform .3s}._cS ._cR{-webkit-transform:rotate(180deg);transform:rotate(180deg);top:0}._cO[tabindex="0"]:focus,._cS,._cS:hover{border-color:#f96447}._cT{height:30px;line-height:30px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}._cU{color:#999}._cV{position:absolute;top:100%;left:-1px;width:350px;margin-top:5px;border-radius:4px;z-index:300;border:1px solid #e6e6e6;background-color:#fff;display:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}._cS ._cV{display:block}._cW{overflow:auto;max-height:192px;padding:4px 0}._cX{display:block;width:100%;padding:9px 9px 4px}._cY{padding:0;width:100%}._cZ{color:#ccc;position:absolute;left:15px;top:18px}._d_{padding-left:28px;width:100%;height:28px;line-height:28px}._da{padding:5px;color:#999;display:block;cursor:default}._db{padding:3px 4px}._dc{cursor:pointer;color:#666;display:block;width:100%;padding:0 6px;height:26px;line-height:26px;border-radius:4px}._dd{width:32%;float:left;margin-left:2px;margin-bottom:2px}._de{cursor:pointer;color:#666;display:block;padding:0 12px;height:29px;line-height:29px;border-radius:4px}._dc:hover,._de:hover{color:#333;background-color:#f0f0f0}._df,._df:active,._df:focus,._df:hover{color:#fff;background-color:#f96447}._dg{border-top:1px solid #e6e6e6;margin:0 10px;padding:10px 0}._dh{border-left:1px solid #e6e6e6}');var a=function(t,e,i,_,c){if(!t[e]||s.has(i,_)){var a=i[_]||"";c||(a+=""),t[e]=a}return t[e]};i.exports=s.View.extend({tmpl:{html:'<div class="_cP" mx-click="__aW()" title="<%=$$.selectedText%>"><span class="_cT<%if($$.phLabel){%> _cU<%}%>"><%=$$.selectedText%></span><span class="__ _cR">&#xe692;</span></div><div class="_cV"><%if($$.rList){if($$.searchbox){%><div class="_cX"><label class="_cY"><span class="__ _cZ">&#xe608;</span><input mx-keyup="__ct()" mx-paste="__ct()" mx-change="__as()" mx-focusin="__as()" mx-focusout="__as()" placeholder="搜索关键词" class="_ap _d_" value="<%=$$.keyword%>"></label></div><%}%><ul class="_cW" id="list_<%=$$.viewId%>"><%var _=$$.selected.split(\',\'),a=void 0,b=void 0;for(var c=0;c<$$.list.length;c++){var d=$$.list[c];if(d&&d.group){%><li class="_da _al" title="<%=d[$$.textKey]%>"><%=d[$$.textKey]%></li><%}else{if($$.textKey&&$$.valueKey){a=d[$$.textKey];b=d[$$.valueKey];}else{a=d;b=d;}if($$.emptyText===b&&c===0){b=\'\';d=\'\';}var e=$$.inArray(b+\'\',_)>-1;if(b===\'\'){%><li title="<%=a%>" class="_db"><span class="_dc _al <%if(e){%> _df<%}%>" mx-click="__cu({item:\'<%@d%>\'})"><%=a%></span></li><%}else{%><li class="_db _ai"><ul><%for(;c<$$.list.length;c++){d=$$.list[c];if(d&&d.group){c--;break;}if($$.textKey&&$$.valueKey){a=d[$$.textKey];b=d[$$.valueKey];}else{a=d;b=d;}var f=$$.inArray(b+\'\',_)>-1%><li class="_dd"><span class="_de _al<%if(f){%> _df<%}%>" mx-click="__cu({item:\'<%@d%>\'})"><%=a%></span></li><%}%></ul></li><%}}}%></ul><div class="_dg _ai"><div class="_aa"><button type="button" class="_an _ao" mx-click="__a({enter:true})">确定</button><button type="button" class="_an _s" mx-click="__a()">取消</button></div><div class="_aa _t _dh _R"><button type="button" class="_an" mx-click="__cB()">全选/不选</button><button type="button" class="_an _s" mx-click="__cC()">反选</button></div></div><%}%></div>'},init:function(t){var e=this;c.__d();var i=_("#"+e.id);e.__i=i,i.addClass("_cO"),i.on("keydown",function(t){13==t.keyCode&&e["__aW<click>"]()}),e.on("destroy",function(){i.off("keydown"),c.__g(e),c.__h()}),e.updater.set({viewId:e.id,inArray:_.inArray}),e.__cg=!t.list,e.assign(t,{node:i})},assign:function(t,e){var i=e.node;a(this,"__ch",t,"list",1);var c=a(this,"__b_",t,"selected"),o=a(this,"__ci",t,"textKey"),r=a(this,"__cj",t,"valueKey"),l=a(this,"__ck",t,"emptyText");if(this.__cl=t.searchbox+""=="true",this.__cv=t.disabled+""=="true",this.__cg){var d,n=[];(i=_(i)).children().each(function(t,e){e=_(e),d="true"==e.attr("group"),n.push({group:d,text:e.text(),value:d?s.guid():e.attr("value")})}),o=this.__ci="text",r=this.__cj="value",this.__ch=n}var p=this.__ch,h=s.toMap(p,r);if(l)if(o&&r){if(!h[""]){var u={};u[o]=l,u[r]="",p.unshift(u),h[""]=u}}else h[l]||(p.unshift(l),h[""]=l);return this.__b_=c,this.__cw=h,this.updater.set({list:p}),!0},__j:function(t){return s.inside(t,this.id)},render:function(){this.__i[this.__cv?"addClass":"removeClass"]("_cQ").prop("tabindex",this.__cm?-1:0),this.__cx(this.__b_)},__a:function(t){if(this.__i.hasClass("_cS")){var e=this.updater.get();if(this.__i.removeClass("_cS").trigger("focusout"),c.__g(this),s.has(this,"__cy")){var i=t&&e.selected!==this.__cy;t?this.__cx(e.selected):this.__cx(this.__cy),delete this.__cy,i&&this.__i.val(e.selected).trigger({type:"change",keys:{text:e.textKey,value:e.valueKey},values:(e.selected+"").split(",")})}}},__f:function(){if(!this.__i.hasClass("_cS")){this.updater.get("rList")||this.updater.digest({rList:!0}),this.__i.addClass("_cS").trigger("focusin");var t=_("#list_"+this.id),e=t.find("._df").position();if(e){var i=t.height(),s=t.prop("scrollTop");if(e.top<0||e.top>i){var a=e.top-i+s+i/2;t.prop("scrollTop",a)}}c.__l(this)}},__cz:function(t,e){for(var i=this.__cw,s=[],_=0,c=t;_<c.length;_++){var a=c[_],o=i[a]||{};e?s.push(o[e]):s.push(a||o)}return s},__cx:function(t){t=t||"",t+="";var e=this.__ci||"",i=this.__cj||"",s=t.split(","),_="",c=this.__ch;s.length?_=this.__cz(s,e):(t=c[0],_=c[0],e&&i&&(_=(t=t[i])[e])),this.updater.digest({textKey:e,valueKey:i,emptyText:this.__ck,searchbox:this.__cl,phLabel:""===t,selected:this.__b_=t,selectedText:_}),this.__i.val(t)},__cq:function(t,e){var i=this;clearTimeout(i.__cp);var s=i.__ch,_=[],c=0,a=s.length,o=i.__ci,r=i.__cj;if(t){var l=function(){if(c<a){for(var d=Math.min(c+400,a),n=c,p=void 0,h=void 0,u=void 0;n<d;n++)h=p=s[n],u=p,o&&r&&(h=p[o],u=p[r]),((h+"").indexOf(t)>=0||(u+"").indexOf(t)>=0)&&_.push(p);c=d,i.__cp=setTimeout(i.wrapAsync(l),20)}else e(_)};l()}else e(s)},"__aW<click>":function(){var t=this.__i;t.hasClass("_cS")?this.__a():t.hasClass("_cQ")||this.__f()},"__ct<keyup,paste>":function(t){var e=this;clearTimeout(e.__cr);var i=_.trim(t.eventTarget.value);e.__cr=setTimeout(e.wrapAsync(function(){i!=e.__cA&&e.__cq(e.__cA=i,function(t){e.updater.digest({list:t})})}),300)},"__cu<click>":function(t){var e=t.params.item,i=this.updater,c=i.get();s.has(this,"__cy")||(this.__cy=c.selected);var a=this.__cj,o=this.__ci,r=e;o&&a&&(e[o],r=e[a]);var l=[""];r&&(l=c.selected.split(","));var d=_.inArray("",l);d>-1&&l.splice(d,1),-1==(d=_.inArray(r+"",l))?l.push(r):l.splice(d,1),l.length||c.emptyText&&(l=[""]),r=l.join(","),i.digest({selected:this.__b_=r})},"__as<change,focusin,focusout>":function(t){t.stopPropagation()},"__a<click>":function(t){this.__a(t.params.enter)},"__cB<click>":function(){var t=this.__b_,e=this.__ch,i=this.__cj,_=this.updater;if(s.has(this,"__cy")||(this.__cy=t),t)t="";else{t="";for(var c=this.__ck?1:0,a=void 0;c<e.length;c++)a=e[c],i?a.group||(t+=a[i]+","):t+=a+",";t=t.slice(0,-1)}_.digest({selected:this.__b_=t})},"__cC<click>":function(){var t=this.__b_,e=this.__ch,i=this.__cj,c=this.updater;s.has(this,"__cy")||(this.__cy=t);var a=t.split(",");t="";for(var o=this.__ck?1:0,r=void 0;o<e.length;o++)r=e[o],i?r.group||-1!=_.inArray(r[i]+"",a)||(t+=r[i]+","):-1==_.inArray(r+"",a)&&(t+=r+",");t=t.slice(0,-1),c.digest({selected:this.__b_=t})}})});