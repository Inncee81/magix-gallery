define("mx-dropdown/multiple",["magix","$","../mx-monitor/index"],(t,e,i)=>{var s=t("magix"),_=t("$"),a=t("../mx-monitor/index");s.applyStyle("_p",'._cz{outline:0;position:relative;width:340px;background-color:#fff;border:1px solid #e6e6e6;border-radius:4px;display:inline-block;vertical-align:middle;height:32px}._cz:hover{border-color:#ccc}._cA{color:#333;position:relative;width:100%;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;padding:0 30px 0 12px;border-radius:3px}._cB{cursor:not-allowed;background-color:#fbfbfb}._cB:hover{border-color:#e6e6e6}._cB ._cA{cursor:not-allowed}._cC{position:absolute;right:0;top:2px;font-size:28px;color:#ccc;-webkit-transition:top .3s,-webkit-transform .3s;transition:top .3s,-webkit-transform .3s;transition:transform .3s,top .3s;transition:transform .3s,top .3s,-webkit-transform .3s}._cD ._cC{-webkit-transform:rotate(180deg);transform:rotate(180deg);top:0}._cz[tabindex="0"]:focus,._cD,._cD:hover{border-color:#f96447}._cE{height:30px;line-height:30px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block}._cF{color:#999}._cG{position:absolute;top:100%;left:-1px;width:350px;margin-top:5px;border-radius:4px;z-index:300;border:1px solid #e6e6e6;background-color:#fff;display:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}._cD ._cG{display:block}._cH{overflow:auto;max-height:192px;padding:4px 0}._cI{display:block;width:100%;padding:9px 9px 4px}._cJ{padding:0;width:100%}._cK{color:#ccc;position:absolute;left:15px;top:18px}._cL{padding-left:28px;width:100%;height:28px;line-height:28px}._cM{padding:5px;color:#999;display:block;cursor:default}._cN{padding:3px 4px}._cO{cursor:pointer;color:#666;display:block;width:100%;padding:0 6px;height:26px;line-height:26px;border-radius:4px}._cP{width:32%;float:left;margin-left:2px;margin-bottom:2px}._cQ{cursor:pointer;color:#666;display:block;padding:0 12px;height:29px;line-height:29px;border-radius:4px}._cO:hover,._cQ:hover{color:#333;background-color:#f0f0f0}._cR,._cR:active,._cR:focus,._cR:hover{color:#fff;background-color:#f96447}._cS{border-top:1px solid #e6e6e6;margin:0 10px;padding:10px 0}._cT{border-left:1px solid #e6e6e6}');var c=function(t,e,i,_,a){if(!t[e]||s.has(i,_)){var c=i[_]||"";a||(c+=""),t[e]=c}return t[e]};i.exports=s.View.extend({tmpl:{html:'<div mx-guid="g0" class="_cA" mx-click="__ax()" title="<%=$$.selectedText%>"><span mx-guid="g1" class="_cE<%if($$.phLabel){%> _cF<%}%>">2</span><span class="__ _cC">&#xe692;</span></div><div mx-guid="g2" class="_cG">3</div>',subs:[{keys:["selectedText"],path:'div[mx-guid="g0"]',attr:'title="<%=$$.selectedText%>"',attrs:[{n:"title",p:1}]},{keys:["phLabel","selectedText"],path:'span[mx-guid="g1"]',tmpl:"<%=$$.selectedText%>",s:"2",attr:'class="_cE<%if($$.phLabel){%> _cF<%}%>"',attrs:[{n:"class",p:1,f:"className"}],mask:"21"},{keys:["rList","searchbox"],path:'div[mx-guid="g2"]',tmpl:'<%if($$.rList){if($$.searchbox){%><div class="_cI"><label class="_cJ"><span class="__ _cK">&#xe608;</span><input mx-keyup="__bW()" mx-paste="__bW()" mx-change="__bY()" mx-focusin="__bY()" mx-focusout="__bY()" placeholder="搜索关键词" class="_ap _cL"></label></div><%}%><ul mx-guid="g3" class="_cH" id="list_<%=$$.viewId%>">4</ul><div class="_cS _ai"><div class="_aa"><button type="button" class="_an _ao" mx-click="__a({enter:true})">确定</button><button type="button" class="_an _s" mx-click="__a()">取消</button></div><div class="_aa _t _cT _R"><button type="button" class="_an" mx-click="__ce()">全选/不选</button><button type="button" class="_an _s" mx-click="__cf()">反选</button></div></div><%}%>',s:"3"},{keys:["selected","list","textKey","valueKey","emptyText"],path:'ul[mx-guid="g3"]',pKeys:["rList","searchbox"],tmpl:'<%var _=$$.selected.split(\',\'),a=void 0,b=void 0;for(var c=0;c<$$.list.length;c++){var d=$$.list[c];if(d&&d.group){%><li class="_cM _al" title="<%=d[$$.textKey]%>"><%=d[$$.textKey]%></li><%}else{if($$.textKey&&$$.valueKey){a=d[$$.textKey];b=d[$$.valueKey];}else{a=d;b=d;}if($$.emptyText===b&&c===0){b=\'\';d=\'\';}var e=$$.inArray(b+\'\',_)>-1;if(b===\'\'){%><li title="<%=a%>" class="_cN"><span class="_cO _al <%if(e){%> _cR<%}%>" mx-click="__bX({item:\'<%@d%>\'})"><%=a%></span></li><%}else{%><li class="_cN _ai"><ul><%for(;c<$$.list.length;c++){d=$$.list[c];if(d&&d.group){c--;break;}if($$.textKey&&$$.valueKey){a=d[$$.textKey];b=d[$$.valueKey];}else{a=d;b=d;}var f=$$.inArray(b+\'\',_)>-1%><li class="_cP"><span class="_cQ _al<%if(f){%> _cR<%}%>" mx-click="__bX({item:\'<%@d%>\'})"><%=a%></span></li><%}%></ul></li><%}}}%>',s:"4"}]},init:function(t){var e=this;a.__d();var i=_("#"+e.id);e.__h=i,i.addClass("_cz"),i.on("keydown",function(t){13==t.keyCode&&e["__ax<click>"]()}),e.on("destroy",function(){i.off("keydown"),a.__f(e),a.__g()}),e.updater.set({viewId:e.id,inArray:_.inArray}),e.assign(t)},assign:function(t){c(this,"__bL",t,"list",1);var e=c(this,"__aB",t,"selected"),i=c(this,"__bM",t,"textKey"),a=c(this,"__bN",t,"valueKey"),o=c(this,"__bO",t,"emptyText");if(this.__bP=t.searchbox+""=="true",this.__bZ=t.disabled+""=="true",!this.__bL){var r,l=[];this.__h.children().each(function(t,e){e=_(e),r="true"==e.attr("group"),l.push({group:r,text:e.text(),value:r?s.guid():e.attr("value")})}),i=this.__bM="text",a=this.__bN="value",this.__bL=l}var n=this.__bL,d=s.toMap(n,a);if(o)if(i&&a){if(!d[""]){var p={};p[i]=o,p[a]="",n.unshift(p),d[""]=p}}else d[o]||(n.unshift(o),d[""]=o);return this.__aB=e,this.__c_=d,this.updater.set({list:n}),!0},__i:function(t){return s.inside(t,this.id)},render:function(){this.__h[this.__bZ?"addClass":"removeClass"]("_cB").prop("tabindex",this.__bQ?-1:0),this.__ca(this.__aB)},__a:function(t){if(this.__h.hasClass("_cD")){var e=this.updater.get();if(s.has(this,"__cb")){var i=t&&e.selected!==this.__cb;t?this.__ca(e.selected):this.__ca(this.__cb),i&&this.__h.val(e.selected).trigger({type:"change",keys:{text:e.textKey,value:e.valueKey},values:(e.selected+"").split(",")}),delete this.__cb}this.__h.removeClass("_cD").trigger("focusout"),a.__f(this)}},__e:function(){if(!this.__h.hasClass("_cD")){this.updater.get("rList")||this.updater.digest({rList:!0}),this.__h.addClass("_cD").trigger("focusin");var t=_("#list_"+this.id),e=t.find("._cR").position();if(e){var i=t.height(),s=t.prop("scrollTop");if(e.top<0||e.top>i){var c=e.top-i+s+i/2;t.prop("scrollTop",c)}}a.__k(this)}},__cc:function(t,e){for(var i=this.__c_,s=[],_=0,a=t;_<a.length;_++){var c=a[_],o=i[c]||{};e?s.push(o[e]):s.push(c||o)}return s},__ca:function(t){t=t||"",t+="";var e=this.__bM||"",i=this.__bN||"",s=t.split(","),_="",a=this.__bL;s.length?_=this.__cc(s,e):(t=a[0],_=a[0],e&&i&&(_=(t=t[i])[e])),this.updater.digest({textKey:e,valueKey:i,emptyText:this.__bO,searchbox:this.__bP,phLabel:""===t,selected:this.__aB=t,selectedText:_}),this.__h.val(t)},__bU:function(t,e){var i=this;clearTimeout(i.__bT);var s=i.__bL,_=[],a=0,c=s.length,o=i.__bM,r=i.__bN;if(t){var l=function(){if(a<c){for(var n=Math.min(a+400,c),d=a,p=void 0,h=void 0,u=void 0;d<n;d++)h=p=s[d],u=p,o&&r&&(h=p[o],u=p[r]),((h+"").indexOf(t)>=0||(u+"").indexOf(t)>=0)&&_.push(p);a=n,i.__bT=setTimeout(i.wrapAsync(l),20)}else e(_)};l()}else e(s)},"__ax<click>":function(){var t=this.__h;t.hasClass("_cD")?this.__a():t.hasClass("_cB")||this.__e()},"__bW<keyup,paste>":function(t){var e=this;clearTimeout(e.__bV);var i=_.trim(t.eventTarget.value);e.__bV=setTimeout(e.wrapAsync(function(){i!=e.__cd&&e.__bU(e.__cd=i,function(t){e.updater.digest({list:t})})}),300)},"__bX<click>":function(t){var e=t.params.item,i=this.updater,a=i.get();s.has(this,"__cb")||(this.__cb=a.selected);var c=this.__bN,o=this.__bM,r=e;o&&c&&(e[o],r=e[c]);var l=[""];r&&(l=a.selected.split(","));var n=_.inArray("",l);n>-1&&l.splice(n,1),-1==(n=_.inArray(r+"",l))?l.push(r):l.splice(n,1),l.length||a.emptyText&&(l=[""]),r=l.join(","),i.digest({selected:this.__aB=r})},"__bY<change,focusin,focusout>":function(t){t.stopPropagation()},"__a<click>":function(t){this.__a(t.params.enter)},"__ce<click>":function(){var t=this.__aB,e=this.__bL,i=this.__bN,_=this.updater;if(s.has(this,"__cb")||(this.__cb=t),t)t="";else{t="";for(var a=this.__bO?1:0,c=void 0;a<e.length;a++)c=e[a],i?c.group||(t+=c[i]+","):t+=c+",";t=t.slice(0,-1)}_.digest({selected:this.__aB=t})},"__cf<click>":function(){var t=this.__aB,e=this.__bL,i=this.__bN,a=this.updater;s.has(this,"__cb")||(this.__cb=t);var c=t.split(",");t="";for(var o=this.__bO?1:0,r=void 0;o<e.length;o++)r=e[o],i?r.group||-1!=_.inArray(r[i]+"",c)||(t+=r[i]+","):-1==_.inArray(r+"",c)&&(t+=r+",");t=t.slice(0,-1),a.digest({selected:this.__aB=t})}})});