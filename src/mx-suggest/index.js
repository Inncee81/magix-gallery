define("mx-suggest/index",["magix","$","../mx-monitor/index"],(t,e,i)=>{var _=t("magix"),s=t("$"),h=t("../mx-monitor/index");_.applyStyle("_I","._eV{border:1px solid #e6e6e6;font-size:14px;max-height:260px;overflow:auto;list-style:none;border-radius:4px;background-color:#fff;z-index:10;padding:3px 0;line-height:1.8;position:relative}._eW{padding:0 4px;cursor:pointer;margin:2px 0}._eX{color:#666;display:block;width:100%;padding:0 6px;height:29px;line-height:29px;border-radius:4px}._eY,._eX:active,._eX:focus,._eX:hover{color:#333;background-color:#f0f0f0}._eY{border-radius:4px;text-decoration:none;outline:0}"),i.exports=_.View.extend({tmpl:function(t,e){var i="",_={"&":"amp","<":"lt",">":"gt",'"':"#34","'":"#39","`":"#96"},s=/[&<>"'`]/g,h=function(t){return null==t?"":""+t},r=function(t){return"&"+_[t]+";"},o=function(t){return h(t).replace(s,r)},n=function(i,_,s){for(s=e[t];--s;)if(e[_=t+s]===i)return _;return e[_=t+e[t]++]=i,_};if(i+='<ul class="',e.rList&&e.list.length&&(i+="_eV "),i+='_aj" style="width:'+o(e.width)+'px;" mx-mouseout="__eh()" mx-mousemove="__fd()" mx-contextmenu="__at()">',e.rList)for(var a,l=0;l<e.list.length;l++)a=e.list[l],i+='<li class="_eW" title="'+o(e.textKey?a[e.textKey]:a)+'"><a href="#" class="_eX _al" data-idx="'+o(l)+'" mx-click="__fc({item:\'',i+=n(a),i+='\'})" id="sg_'+o(e.viewId)+"_"+o(l)+'">'+o(e.textKey?a[e.textKey]:a)+"</a></li>";return i+="</ul>"},init:function(t){var e=this;e.__eR=t.list||[],h.__e(),e.on("destroy",function(){h.__h(e),h.__i(),e.__j.off("keyup paste input",e.__eS).off("focus",e.__eT)}),e.updater.set({viewId:e.id,textKey:t.textKey,valueKey:t.valueKey}),e.__eU=-1},__k:function(t){return _.inside(t,this.id)||_.inside(t,this.__j[0])},update:function(t,e){var i=this;clearTimeout(i.__eV),i.__eV=setTimeout(i.wrapAsync(function(){e||(i.__eR=t),i.__eU=-1,i.updater.digest({list:i.__eW=t})}),20)},render:function(){var t=s("#"+this.id),e=this.id;t=t.prev("input"),this.__j=t,t.on("focus",this.__eT=s.proxy(this.__g,this)).on("keyup paste input",this.__eS=s.proxy(this.__eX,this)),t.prop("vframe",this.owner),this.updater.set({width:t.outerWidth()}),this.update(this.__eR),this.__f=s("#"+e),this.__eY=s("#"+e+" ul")},__eX:function(t){this.__l||this.__g();var e=this.__eW;if(40==t.keyCode)this.__eZ(),this.__eU++,this.__eU>=e.length&&(this.__eU=0),this.__f_();else if(38==t.keyCode)this.__eZ(),this.__eU--,this.__eU<0&&(this.__eU=e.length-1),this.__f_();else if(13==t.keyCode){if(this.__eU>-1&&this.__eU<this.__eW.length){var i=this.__eW[this.__eU];this.__j.trigger({type:"pick",item:i});var _=this.updater.get("textKey");_&&(i=i[_]),this.__j.val(i).trigger("change"),this.__eX({target:this.__j[0]}),this.__eZ(),this.__eU=-1,this.__a()}}else{var h=s.trim(t.target.value);if(h!=this.__fa)if(this.__fa=h,h){for(var r=[],o=this.__eR.slice(),n=this.updater.get("textKey"),a=0,l=void 0;a<o.length;a++)l=o[a],((n?l[n]:l)+"").indexOf(h)>=0&&r.push(l);this.update(r,!0)}else this.update(this.__eR,!0)}},__g:function(){var t=this.updater;if(!this.__l){this.__l=!0;t.get("rList")||t.digest({rList:!0}),h.__m(this);var e=this.__j.position();this.__f.css({display:"block",left:e.left,top:e.top+this.__j.outerHeight()+5}),this.__j.trigger("showlist")}},__eZ:function(){s("#sg_"+this.id+"_"+this.__eU).removeClass("_eY")},__f_:function(t){var e=s("#sg_"+this.id+"_"+this.__eU);if(e.addClass("_eY"),!t&&e.length){this.__fb=1;var i=e.outerHeight(),_=(this.__eU+1)*i,h=this.__eY,r=h.height(),o=h.prop("scrollTop"),n=Math.ceil(r/i);_<o+i?h.prop("scrollTop",_-i):_>o+r&&h.prop("scrollTop",(this.__eU+2-n)*i)}},__a:function(){this.__l&&(this.__l=!1,h.__h(this),this.__f.hide(),this.__j.trigger("hidelist"))},"__fc<click>":function(t){t.preventDefault();var e=t.params.item;this.__j.trigger({type:"pick",item:e});var i=this.updater.get("textKey");i&&(e=e[i]),this.__j.val(e).trigger("change"),this.__eX({target:this.__j[0]}),this.__a()},"__eh<mouseout>":function(t){if(!_.inside(t.relatedTarget,t.eventTarget)){this.__eZ(),this.__eU=-1}},"__fd<mousemove>":function(t){if(this.__fb)delete this.__fb;else{var e=s(t.target);if(e.is("li")){var i=e.data("idx");i!=this.__eU&&(this.__eZ(),this.__eU=i,this.__f_(!0))}}},"__at<contextmenu>":function(t){t.preventDefault()}})});