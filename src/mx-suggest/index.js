define("mx-suggest/index",["magix","$","../mx-monitor/index"],(t,e,i)=>{var _=t("magix"),s=t("$"),h=t("../mx-monitor/index");_.applyStyle("_I","._eV{border:1px solid #e6e6e6;font-size:14px;max-height:260px;overflow:auto;list-style:none;border-radius:4px;background-color:#fff;z-index:10;padding:3px 0;line-height:1.8;position:relative}._eW{padding:0 4px;cursor:pointer;margin:2px 0}._eX{color:#666;display:block;width:100%;padding:0 6px;height:29px;line-height:29px;border-radius:4px}._eY,._eX:active,._eX:focus,._eX:hover{color:#333;background-color:#f0f0f0}._eY{border-radius:4px;text-decoration:none;outline:0}"),i.exports=_.View.extend({tmpl:function(t){var e="",i={"&":"amp","<":"lt",">":"gt",'"':"#34","'":"#39","`":"#96"},_=/[&<>"'`]/g,s=function(t){return null==t?"":""+t},h=function(t){return"&"+i[t]+";"},r=function(t){return s(t).replace(_,h)},o=function(e,i,_){for(_=t[""];--_;)if(t[i=""+_]===e)return i;return t[i=""+t[""]++]=e,i};if(e+='<ul class="',t.rList&&t.list.length&&(e+="_eV "),e+='_aj" style="width:'+r(t.width)+'px;" mx-mouseout="__ei()" mx-mousemove="__fe()" mx-contextmenu="__au()">',t.rList)for(var n,a=0;a<t.list.length;a++)n=t.list[a],e+='<li class="_eW" title="'+r(t.textKey?n[t.textKey]:n)+'"><a href="#" class="_eX _al" data-idx="'+r(a)+'" mx-click="__fd({item:\'',e+=o(n),e+='\'})" id="sg_'+r(t.viewId)+"_"+r(a)+'">'+r(t.textKey?n[t.textKey]:n)+"</a></li>";return e+="</ul>"},init:function(t){var e=this;e.__eS=t.list||[],h.__f(),e.on("destroy",function(){h.__i(e),h.__j(),e.__k.off("keyup paste input",e.__eT).off("focus",e.__eU)}),e.updater.set({viewId:e.id,textKey:t.textKey,valueKey:t.valueKey}),e.__eV=-1},__l:function(t){return _.inside(t,this.id)||_.inside(t,this.__k[0])},update:function(t,e){var i=this;clearTimeout(i.__eW),i.__eW=setTimeout(i.wrapAsync(function(){e||(i.__eS=t),i.__eV=-1,i.updater.digest({list:i.__eX=t})}),20)},render:function(){var t=s("#"+this.id),e=this.id;t=t.prev("input"),this.__k=t,t.on("focus",this.__eU=s.proxy(this.__h,this)).on("keyup paste input",this.__eT=s.proxy(this.__eY,this)),t.prop("vframe",this.owner),this.updater.set({width:t.outerWidth()}),this.update(this.__eS),this.__g=s("#"+e),this.__eZ=s("#"+e+" ul")},__eY:function(t){this.__m||this.__h();var e=this.__eX;if(40==t.keyCode)this.__f_(),this.__eV++,this.__eV>=e.length&&(this.__eV=0),this.__fa();else if(38==t.keyCode)this.__f_(),this.__eV--,this.__eV<0&&(this.__eV=e.length-1),this.__fa();else if(13==t.keyCode){if(this.__eV>-1&&this.__eV<this.__eX.length){var i=this.__eX[this.__eV];this.__k.trigger({type:"pick",item:i});var _=this.updater.get("textKey");_&&(i=i[_]),this.__k.val(i).trigger("change"),this.__eY({target:this.__k[0]}),this.__f_(),this.__eV=-1,this.__b()}}else{var h=s.trim(t.target.value);if(h!=this.__fb)if(this.__fb=h,h){for(var r=[],o=this.__eS.slice(),n=this.updater.get("textKey"),a=0,u=void 0;a<o.length;a++)u=o[a],((n?u[n]:u)+"").indexOf(h)>=0&&r.push(u);this.update(r,!0)}else this.update(this.__eS,!0)}},__h:function(){var t=this.updater;if(!this.__m){this.__m=!0;t.get("rList")||t.digest({rList:!0}),h.__n(this);var e=this.__k.position();this.__g.css({display:"block",left:e.left,top:e.top+this.__k.outerHeight()+5}),this.__k.trigger("showlist")}},__f_:function(){s("#sg_"+this.id+"_"+this.__eV).removeClass("_eY")},__fa:function(t){var e=s("#sg_"+this.id+"_"+this.__eV);if(e.addClass("_eY"),!t&&e.length){this.__fc=1;var i=e.outerHeight(),_=(this.__eV+1)*i,h=this.__eZ,r=h.height(),o=h.prop("scrollTop"),n=Math.ceil(r/i);_<o+i?h.prop("scrollTop",_-i):_>o+r&&h.prop("scrollTop",(this.__eV+2-n)*i)}},__b:function(){this.__m&&(this.__m=!1,h.__i(this),this.__g.hide(),this.__k.trigger("hidelist"))},"__fd<click>":function(t){t.preventDefault();var e=t.params.item;this.__k.trigger({type:"pick",item:e});var i=this.updater.get("textKey");i&&(e=e[i]),this.__k.val(e).trigger("change"),this.__eY({target:this.__k[0]}),this.__b()},"__ei<mouseout>":function(t){if(!_.inside(t.relatedTarget,t.eventTarget)){this.__f_(),this.__eV=-1}},"__fe<mousemove>":function(t){if(this.__fc)delete this.__fc;else{var e=s(t.target);if(e.is("li")){var i=e.data("idx");i!=this.__eV&&(this.__f_(),this.__eV=i,this.__fa(!0))}}},"__au<contextmenu>":function(t){t.preventDefault()}})});