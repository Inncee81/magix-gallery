define("mx-suggest/index",["magix","$","../mx-monitor/index"],(e,_,t)=>{var i=e("magix"),r=e("$"),s=e("../mx-monitor/index");i.applyStyle("_H","._eO{position:absolute;border:1px solid #e6e6e6;font-size:14px;max-height:260px;overflow:auto;list-style:none;border-radius:4px;background-color:#fff;display:none;z-index:10;padding:3px 0;line-height:1.8}._eP{padding:0 4px;cursor:pointer;margin:2px 0}._eQ{color:#666;display:block;width:100%;padding:0 6px;height:29px;line-height:29px;border-radius:4px}._eR,._eQ:active,._eQ:focus,._eQ:hover{color:#333;background-color:#f0f0f0}._eR{border-radius:4px;text-decoration:none;outline:0}"),t.exports=i.View.extend({tmpl:{html:'<ul mx-guid="g0" class="_eO _aj" style="width:<%=$$.width%>px;" mx-mouseout="__eH()" mx-mousemove="__eI()" mx-contextmenu="__bY()">1</ul>',subs:[{keys:["width","rList","list","textKey","viewId"],path:'ul[mx-guid="g0"]',tmpl:'<%if($$.rList){for(var _=0,a;_<$$.list.length;_++){a=$$.list[_]%><li class="_eP" title="<%=$$.textKey?a[$$.textKey]:a%>"><a href="#" class="_eQ _al" data-idx="<%=_%>" mx-click="__eG({item:\'<%@a%>\'})" id="sg_<%=$$.viewId%>_<%=_%>"><%=$$.textKey?a[$$.textKey]:a%></a></li><%}}%>',s:"1",attr:'style="width:<%=$$.width%>px;"',attrs:[{n:"style"}],mask:"21111"}]},init:function(e){var _=this;_.__ew=e.list||[],s.__d(),_.on("destroy",function(){s.__f(_),s.__g(),_.__h.off("keyup paste input",_.__ex).off("focus",_.__ey),r("#suggest_"+_.id).remove()}),_.updater.set({viewId:_.id,textKey:e.textKey,valueKey:e.valueKey}),_.__ez=-1},__i:function(e){return i.inside(e,this.id)||i.inside(e,"suggest_"+this.id)},update:function(e,_){var t=this;_||(t.__ew=e),t.__ez=-1,t.updater.digest({list:t.__eA=e}),t.__dL&&(e&&e.length?t.__dL.addClass("_eO"):t.__dL.removeClass("_eO"))},render:function(){var e=this,_=r("#"+e.id);e.__h=_,_.on("focus",e.__ey=r.proxy(e.__e,e)).on("keyup paste input",e.__ex=r.proxy(e.__eB,e));var t="suggest_"+e.id;r("<div />").attr("id",t).insertAfter(_),e.updater.to(t),e.updater.set({width:_.outerWidth()}),e.update(e.__ew),e.__dL=r("#"+t+" ul"),e.__ew&&e.__ew.length||e.__dL.removeClass("_eO")},__eB:function(e){var _=this;_.__j||_.__e();var t=_.__eA;if(40==e.keyCode)_.__eC(),_.__ez++,_.__ez>=t.length&&(_.__ez=0),_.__eD();else if(38==e.keyCode)_.__eC(),_.__ez--,_.__ez<0&&(_.__ez=t.length-1),_.__eD();else if(13==e.keyCode){if(_.__ez>-1&&_.__ez<_.__eA.length){var i=_.__eA[_.__ez];_.__h.trigger({type:"pick",item:i});var s=_.updater.get("textKey");s&&(i=i[s]),_.__h.val(i).trigger("change"),_.__eB({target:_.__h[0]}),_.__eC(),_.__ez=-1,_.__a()}}else{var a=r.trim(e.target.value);if(a!=_.__eE)if(_.__eE=a,a){for(var o=[],d=_.__ew.slice(),n=_.updater.get("textKey"),l=0,u=void 0;l<d.length;l++)u=d[l],((n?u[n]:u)+"").indexOf(a)>=0&&o.push(u);_.update(o,!0)}else _.update(_.__ew,!0)}},__e:function(){var e=this,_=e.updater;if(!e.__j){e.__j=!0;_.get("rList")||_.digest({rList:!0}),s.__k(e);var t=e.__h.position();e.__dL.css({display:"block",left:t.left+e.$offsetLeft,top:t.top+e.__h.outerHeight()+5}),e.__h.trigger("showlist")}},__eC:function(){r("#sg_"+this.id+"_"+this.__ez).removeClass("_eR")},__eD:function(e){var _=this,t=r("#sg_"+_.id+"_"+_.__ez);if(t.addClass("_eR"),!e&&t.length){_.__eF=1;var i=t.outerHeight(),s=(_.__ez+1)*i,a=_.__dL,o=a.height(),d=a.prop("scrollTop"),n=Math.ceil(o/i);s<d+i?a.prop("scrollTop",s-i):s>d+o&&a.prop("scrollTop",(_.__ez+2-n)*i)}},__a:function(){var e=this;e.__j&&(e.__j=!1,s.__f(e),e.__dL.hide(),e.__h.trigger("hidelist"))},"__eG<click>":function(e){e.preventDefault();var _=this,t=e.params.item;_.__h.trigger({type:"pick",item:t});var i=_.updater.get("textKey");i&&(t=t[i]),_.__h.val(t).trigger("change"),_.__eB({target:_.__h[0]}),_.__a()},"__eH<mouseout>":function(e){if(!i.inside(e.relatedTarget,e.eventTarget)){var _=this;_.__eC(),_.__ez=-1}},"__eI<mousemove>":function(e){var _=this;if(_.__eF)delete _.__eF;else{var t=r(e.target);if(t.is("li")){var i=t.data("idx");i!=_.__ez&&(_.__eC(),_.__ez=i,_.__eD(!0))}}},"__bY<contextmenu>":function(e){e.preventDefault()}})});