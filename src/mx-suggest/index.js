define("mx-suggest/index",["magix","$","../mx-monitor/index"],(t,e,i)=>{var _=t("magix"),s=t("$"),h=t("../mx-monitor/index");_.applyStyle("_H","._eO{position:absolute;border:1px solid #e6e6e6;font-size:14px;max-height:260px;overflow:auto;list-style:none;border-radius:4px;background-color:#fff;display:none;z-index:10;padding:3px 0;line-height:1.8}._eP{padding:0 4px;cursor:pointer;margin:2px 0}._eQ{color:#666;display:block;width:100%;padding:0 6px;height:29px;line-height:29px;border-radius:4px}._eR,._eQ:active,._eQ:focus,._eQ:hover{color:#333;background-color:#f0f0f0}._eR{border-radius:4px;text-decoration:none;outline:0}"),i.exports=_.View.extend({tmpl:{html:'<ul mx-guid="g0" class="_eO _aj" style="width:<%=$$.width%>px;" mx-mouseout="__eH()" mx-mousemove="__eI()" mx-contextmenu="__bY()">1</ul>',subs:[{keys:["width","rList","list","textKey","viewId"],path:'ul[mx-guid="g0"]',tmpl:'<%if($$.rList){for(var _=0,a;_<$$.list.length;_++){a=$$.list[_]%><li class="_eP" title="<%=$$.textKey?a[$$.textKey]:a%>"><a href="#" class="_eQ _al" data-idx="<%=_%>" mx-click="__eG({item:\'<%@a%>\'})" id="sg_<%=$$.viewId%>_<%=_%>"><%=$$.textKey?a[$$.textKey]:a%></a></li><%}}%>',s:"1",attr:'style="width:<%=$$.width%>px;"',attrs:[{n:"style"}],mask:"21111"}]},init:function(t){var e=this;e.__ew=t.list||[],h.__d(),e.on("destroy",function(){h.__f(e),h.__g(),e.__h.off("keyup paste input",e.__ex).off("focus",e.__ey),s("#suggest_"+e.id).remove()}),e.updater.set({viewId:e.id,textKey:t.textKey,valueKey:t.valueKey}),e.__ez=-1},__i:function(t){return _.inside(t,this.id)||_.inside(t,"suggest_"+this.id)},update:function(t,e){e||(this.__ew=t),this.__ez=-1,this.updater.digest({list:this.__eA=t}),this.__dL&&(t&&t.length?this.__dL.addClass("_eO"):this.__dL.removeClass("_eO"))},render:function(){var t=s("#"+this.id);this.__h=t,t.on("focus",this.__ey=s.proxy(this.__e,this)).on("keyup paste input",this.__ex=s.proxy(this.__eB,this));var e="suggest_"+this.id;s("<div />").attr("id",e).insertAfter(t),this.updater.to(e),this.updater.set({width:t.outerWidth()}),this.update(this.__ew),this.__dL=s("#"+e+" ul"),this.__ew&&this.__ew.length||this.__dL.removeClass("_eO")},__eB:function(t){this.__j||this.__e();var e=this.__eA;if(40==t.keyCode)this.__eC(),this.__ez++,this.__ez>=e.length&&(this.__ez=0),this.__eD();else if(38==t.keyCode)this.__eC(),this.__ez--,this.__ez<0&&(this.__ez=e.length-1),this.__eD();else if(13==t.keyCode){if(this.__ez>-1&&this.__ez<this.__eA.length){var i=this.__eA[this.__ez];this.__h.trigger({type:"pick",item:i});var _=this.updater.get("textKey");_&&(i=i[_]),this.__h.val(i).trigger("change"),this.__eB({target:this.__h[0]}),this.__eC(),this.__ez=-1,this.__a()}}else{var h=s.trim(t.target.value);if(h!=this.__eE)if(this.__eE=h,h){for(var r=[],a=this.__ew.slice(),o=this.updater.get("textKey"),d=0,n=void 0;d<a.length;d++)n=a[d],((o?n[o]:n)+"").indexOf(h)>=0&&r.push(n);this.update(r,!0)}else this.update(this.__ew,!0)}},__e:function(){var t=this.updater;if(!this.__j){this.__j=!0;t.get("rList")||t.digest({rList:!0}),h.__k(this);var e=this.__h.position();this.__dL.css({display:"block",left:e.left+this.$offsetLeft,top:e.top+this.__h.outerHeight()+5}),this.__h.trigger("showlist")}},__eC:function(){s("#sg_"+this.id+"_"+this.__ez).removeClass("_eR")},__eD:function(t){var e=s("#sg_"+this.id+"_"+this.__ez);if(e.addClass("_eR"),!t&&e.length){this.__eF=1;var i=e.outerHeight(),_=(this.__ez+1)*i,h=this.__dL,r=h.height(),a=h.prop("scrollTop"),o=Math.ceil(r/i);_<a+i?h.prop("scrollTop",_-i):_>a+r&&h.prop("scrollTop",(this.__ez+2-o)*i)}},__a:function(){this.__j&&(this.__j=!1,h.__f(this),this.__dL.hide(),this.__h.trigger("hidelist"))},"__eG<click>":function(t){t.preventDefault();var e=t.params.item;this.__h.trigger({type:"pick",item:e});var i=this.updater.get("textKey");i&&(e=e[i]),this.__h.val(e).trigger("change"),this.__eB({target:this.__h[0]}),this.__a()},"__eH<mouseout>":function(t){if(!_.inside(t.relatedTarget,t.eventTarget)){this.__eC(),this.__ez=-1}},"__eI<mousemove>":function(t){if(this.__eF)delete this.__eF;else{var e=s(t.target);if(e.is("li")){var i=e.data("idx");i!=this.__ez&&(this.__eC(),this.__ez=i,this.__eD(!0))}}},"__bY<contextmenu>":function(t){t.preventDefault()}})});