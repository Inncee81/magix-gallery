define("mx-suggest/index",["magix","$","../mx-monitor/index"],(e,t,i)=>{var _=e("magix"),s=e("$"),h=e("../mx-monitor/index");_.applyStyle("_I","._eW{border:1px solid #e6e6e6;font-size:14px;max-height:260px;overflow:auto;list-style:none;border-radius:4px;background-color:#fff;z-index:10;padding:3px 0;line-height:1.8;position:relative}._eX{padding:0 4px;cursor:pointer;margin:2px 0}._eY{color:#666;display:block;width:100%;padding:0 6px;height:29px;line-height:29px;border-radius:4px}._eZ,._eY:active,._eY:focus,._eY:hover{color:#333;background-color:#f0f0f0}._eZ{border-radius:4px;text-decoration:none;outline:0}"),i.exports=_.View.extend({tmpl:{html:'<ul class="<%if($$.rList&&$$.list.length){%>_eW <%}%>_aj" style="width:<%=$$.width%>px;" mx-mouseout="__eg()" mx-mousemove="__fc()" mx-contextmenu="__as()"><%if($$.rList){for(var _=0,a;_<$$.list.length;_++){a=$$.list[_]%><li class="_eX" title="<%=$$.textKey?a[$$.textKey]:a%>"><a href="#" class="_eY _al" data-idx="<%=_%>" mx-click="__fb({item:\'<%@a%>\'})" id="sg_<%=$$.viewId%>_<%=_%>"><%=$$.textKey?a[$$.textKey]:a%></a></li><%}}%></ul>'},init:function(e){var t=this;t.__eQ=e.list||[],h.__d(),t.on("destroy",function(){h.__g(t),h.__h(),t.__i.off("keyup paste input",t.__eR).off("focus",t.__eS)}),t.updater.set({viewId:t.id,textKey:e.textKey,valueKey:e.valueKey}),t.__eT=-1},__j:function(e){return _.inside(e,this.id)||_.inside(e,this.__i[0])},update:function(e,t){var i=this;clearTimeout(i.__eU),i.__eU=setTimeout(i.wrapAsync(function(){t||(i.__eQ=e),i.__eT=-1,i.updater.digest({list:i.__eV=e})}),20)},render:function(){var e=s("#"+this.id),t=this.id;e=e.prev("input"),this.__i=e,e.on("focus",this.__eS=s.proxy(this.__f,this)).on("keyup paste input",this.__eR=s.proxy(this.__eW,this)),e.prop("vframe",this.owner),this.updater.set({width:e.outerWidth()}),this.update(this.__eQ),this.__e=s("#"+t),this.__eX=s("#"+t+" ul")},__eW:function(e){this.__k||this.__f();var t=this.__eV;if(40==e.keyCode)this.__eY(),this.__eT++,this.__eT>=t.length&&(this.__eT=0),this.__eZ();else if(38==e.keyCode)this.__eY(),this.__eT--,this.__eT<0&&(this.__eT=t.length-1),this.__eZ();else if(13==e.keyCode){if(this.__eT>-1&&this.__eT<this.__eV.length){var i=this.__eV[this.__eT];this.__i.trigger({type:"pick",item:i});var _=this.updater.get("textKey");_&&(i=i[_]),this.__i.val(i).trigger("change"),this.__eW({target:this.__i[0]}),this.__eY(),this.__eT=-1,this.__a()}}else{var h=s.trim(e.target.value);if(h!=this.__f_)if(this.__f_=h,h){for(var r=[],a=this.__eQ.slice(),o=this.updater.get("textKey"),n=0,l=void 0;n<a.length;n++)l=a[n],((o?l[o]:l)+"").indexOf(h)>=0&&r.push(l);this.update(r,!0)}else this.update(this.__eQ,!0)}},__f:function(){var e=this.updater;if(!this.__k){this.__k=!0;e.get("rList")||e.digest({rList:!0}),h.__l(this);var t=this.__i.position();this.__e.css({display:"block",left:t.left,top:t.top+this.__i.outerHeight()+5}),this.__i.trigger("showlist")}},__eY:function(){s("#sg_"+this.id+"_"+this.__eT).removeClass("_eZ")},__eZ:function(e){var t=s("#sg_"+this.id+"_"+this.__eT);if(t.addClass("_eZ"),!e&&t.length){this.__fa=1;var i=t.outerHeight(),_=(this.__eT+1)*i,h=this.__eX,r=h.height(),a=h.prop("scrollTop"),o=Math.ceil(r/i);_<a+i?h.prop("scrollTop",_-i):_>a+r&&h.prop("scrollTop",(this.__eT+2-o)*i)}},__a:function(){this.__k&&(this.__k=!1,h.__g(this),this.__e.hide(),this.__i.trigger("hidelist"))},"__fb<click>":function(e){e.preventDefault();var t=e.params.item;this.__i.trigger({type:"pick",item:t});var i=this.updater.get("textKey");i&&(t=t[i]),this.__i.val(t).trigger("change"),this.__eW({target:this.__i[0]}),this.__a()},"__eg<mouseout>":function(e){if(!_.inside(e.relatedTarget,e.eventTarget)){this.__eY(),this.__eT=-1}},"__fc<mousemove>":function(e){if(this.__fa)delete this.__fa;else{var t=s(e.target);if(t.is("li")){var i=t.data("idx");i!=this.__eT&&(this.__eY(),this.__eT=i,this.__eZ(!0))}}},"__as<contextmenu>":function(e){e.preventDefault()}})});