define("mx-calendar/rangepicker",["magix","$","../mx-util/monitor","mx-calendar/util","mx-medusa/util","./range"],(e,r,a)=>{e("./range");var n=e("magix"),l=e("$"),t=e("../mx-util/monitor"),_=e("mx-calendar/util"),i=_.dateFormat,s=_.getDefaultDate,c=_.getQuickInfos,d=_.getOffsetDate,g=e("mx-medusa/util");n.applyStyle("_zs_gallery_mx-calendar_rangepicker_",'._zs_gallery_mx-calendar_rangepicker_-result {\n  padding: 0 10px;\n}\n/* 左对齐 */\n._zs_gallery_mx-calendar_rangepicker_-result-left ._zs_gallery_mx-calendar_rangepicker_-center {\n  padding: 0 5px;\n}\n/* 居中对齐 */\n._zs_gallery_mx-calendar_rangepicker_-result-center ._zs_gallery_mx-calendar_rangepicker_-center {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  width: 40px;\n  height: 30px;\n  margin-left: -20px;\n  margin-top: -15px;\n  line-height: 30px;\n  text-align: center;\n}\n._zs_gallery_mx-calendar_rangepicker_-result-center ._zs_gallery_mx-calendar_rangepicker_-co {\n  display: inline-block;\n  width: 50%;\n  text-align: center;\n}\n._zs_gallery_mx-calendar_rangepicker_-result-center ._zs_gallery_mx-calendar_rangepicker_-co-left {\n  padding-right: 10px;\n}\n._zs_gallery_mx-calendar_rangepicker_-result-center ._zs_gallery_mx-calendar_rangepicker_-co-right {\n  padding-left: 10px;\n}\n._zs_gallery_mx-calendar_rangepicker_-result-vs ._zs_gallery_mx-calendar_rangepicker_-co-left {\n  color: var(--color-brand);\n}\n._zs_gallery_mx-calendar_rangepicker_-result-vs ._zs_gallery_mx-calendar_rangepicker_-co-right {\n  color: var(--color-brand-vs);\n}\n[mx-view*="mx-calendar/rangepicker"] {\n  min-width: 180px;\n}\n[mx-view*="mx-calendar/rangepicker"][mx-view*="disabled=true"] ._zs_gallery_mx-calendar_rangepicker_-result ._zs_gallery_mx-calendar_rangepicker_-co-left,\n[mx-view*="mx-calendar/datepicker"][mx-view*="disabled=true"] ._zs_gallery_mx-calendar_rangepicker_-result ._zs_gallery_mx-calendar_rangepicker_-co-left,\n[mx-view*="mx-calendar/rangepicker"][mx-view*="disabled=true"]:hover ._zs_gallery_mx-calendar_rangepicker_-result ._zs_gallery_mx-calendar_rangepicker_-co-left,\n[mx-view*="mx-calendar/datepicker"][mx-view*="disabled=true"]:hover ._zs_gallery_mx-calendar_rangepicker_-result ._zs_gallery_mx-calendar_rangepicker_-co-left,\n[mx-view*="mx-calendar/rangepicker"][mx-disabled] ._zs_gallery_mx-calendar_rangepicker_-result ._zs_gallery_mx-calendar_rangepicker_-co-left,\n[mx-view*="mx-calendar/datepicker"][mx-disabled] ._zs_gallery_mx-calendar_rangepicker_-result ._zs_gallery_mx-calendar_rangepicker_-co-left,\n[mx-view*="mx-calendar/rangepicker"][mx-disabled]:hover ._zs_gallery_mx-calendar_rangepicker_-result ._zs_gallery_mx-calendar_rangepicker_-co-left,\n[mx-view*="mx-calendar/datepicker"][mx-disabled]:hover ._zs_gallery_mx-calendar_rangepicker_-result ._zs_gallery_mx-calendar_rangepicker_-co-left,\n[mx-view*="mx-calendar/rangepicker"][mx-view*="disabled=true"] ._zs_gallery_mx-calendar_rangepicker_-result-vs ._zs_gallery_mx-calendar_rangepicker_-co-left,\n[mx-view*="mx-calendar/datepicker"][mx-view*="disabled=true"] ._zs_gallery_mx-calendar_rangepicker_-result-vs ._zs_gallery_mx-calendar_rangepicker_-co-left,\n[mx-view*="mx-calendar/rangepicker"][mx-view*="disabled=true"]:hover ._zs_gallery_mx-calendar_rangepicker_-result-vs ._zs_gallery_mx-calendar_rangepicker_-co-left,\n[mx-view*="mx-calendar/datepicker"][mx-view*="disabled=true"]:hover ._zs_gallery_mx-calendar_rangepicker_-result-vs ._zs_gallery_mx-calendar_rangepicker_-co-left,\n[mx-view*="mx-calendar/rangepicker"][mx-disabled] ._zs_gallery_mx-calendar_rangepicker_-result-vs ._zs_gallery_mx-calendar_rangepicker_-co-left,\n[mx-view*="mx-calendar/datepicker"][mx-disabled] ._zs_gallery_mx-calendar_rangepicker_-result-vs ._zs_gallery_mx-calendar_rangepicker_-co-left,\n[mx-view*="mx-calendar/rangepicker"][mx-disabled]:hover ._zs_gallery_mx-calendar_rangepicker_-result-vs ._zs_gallery_mx-calendar_rangepicker_-co-left,\n[mx-view*="mx-calendar/datepicker"][mx-disabled]:hover ._zs_gallery_mx-calendar_rangepicker_-result-vs ._zs_gallery_mx-calendar_rangepicker_-co-left,\n[mx-view*="mx-calendar/rangepicker"][mx-view*="disabled=true"] ._zs_gallery_mx-calendar_rangepicker_-result ._zs_gallery_mx-calendar_rangepicker_-co-right,\n[mx-view*="mx-calendar/datepicker"][mx-view*="disabled=true"] ._zs_gallery_mx-calendar_rangepicker_-result ._zs_gallery_mx-calendar_rangepicker_-co-right,\n[mx-view*="mx-calendar/rangepicker"][mx-view*="disabled=true"]:hover ._zs_gallery_mx-calendar_rangepicker_-result ._zs_gallery_mx-calendar_rangepicker_-co-right,\n[mx-view*="mx-calendar/datepicker"][mx-view*="disabled=true"]:hover ._zs_gallery_mx-calendar_rangepicker_-result ._zs_gallery_mx-calendar_rangepicker_-co-right,\n[mx-view*="mx-calendar/rangepicker"][mx-disabled] ._zs_gallery_mx-calendar_rangepicker_-result ._zs_gallery_mx-calendar_rangepicker_-co-right,\n[mx-view*="mx-calendar/datepicker"][mx-disabled] ._zs_gallery_mx-calendar_rangepicker_-result ._zs_gallery_mx-calendar_rangepicker_-co-right,\n[mx-view*="mx-calendar/rangepicker"][mx-disabled]:hover ._zs_gallery_mx-calendar_rangepicker_-result ._zs_gallery_mx-calendar_rangepicker_-co-right,\n[mx-view*="mx-calendar/datepicker"][mx-disabled]:hover ._zs_gallery_mx-calendar_rangepicker_-result ._zs_gallery_mx-calendar_rangepicker_-co-right,\n[mx-view*="mx-calendar/rangepicker"][mx-view*="disabled=true"] ._zs_gallery_mx-calendar_rangepicker_-result-vs ._zs_gallery_mx-calendar_rangepicker_-co-right,\n[mx-view*="mx-calendar/datepicker"][mx-view*="disabled=true"] ._zs_gallery_mx-calendar_rangepicker_-result-vs ._zs_gallery_mx-calendar_rangepicker_-co-right,\n[mx-view*="mx-calendar/rangepicker"][mx-view*="disabled=true"]:hover ._zs_gallery_mx-calendar_rangepicker_-result-vs ._zs_gallery_mx-calendar_rangepicker_-co-right,\n[mx-view*="mx-calendar/datepicker"][mx-view*="disabled=true"]:hover ._zs_gallery_mx-calendar_rangepicker_-result-vs ._zs_gallery_mx-calendar_rangepicker_-co-right,\n[mx-view*="mx-calendar/rangepicker"][mx-disabled] ._zs_gallery_mx-calendar_rangepicker_-result-vs ._zs_gallery_mx-calendar_rangepicker_-co-right,\n[mx-view*="mx-calendar/datepicker"][mx-disabled] ._zs_gallery_mx-calendar_rangepicker_-result-vs ._zs_gallery_mx-calendar_rangepicker_-co-right,\n[mx-view*="mx-calendar/rangepicker"][mx-disabled]:hover ._zs_gallery_mx-calendar_rangepicker_-result-vs ._zs_gallery_mx-calendar_rangepicker_-co-right,\n[mx-view*="mx-calendar/datepicker"][mx-disabled]:hover ._zs_gallery_mx-calendar_rangepicker_-result-vs ._zs_gallery_mx-calendar_rangepicker_-co-right {\n  color: #999;\n}\n'),a.exports=n.View.extend({tmpl:function(e,r,a,n,l,t,_,i){if(a||(a=e),!l){var s={"&":"amp","<":"lt",">":"gt",'"':"#34","'":"#39","`":"#96"},c=/[&<>"'`]/g,d=function(e){return"&"+s[e]+";"};l=function(e){return""+(null==e?"":e)},n=function(e){return l(e).replace(c,d)}}if(!t){var g={"!":"%21","'":"%27","(":"%28",")":"%29","*":"%2A"},m=function(e){return g[e]},x=/[!')(*]/g;t=function(e){return encodeURIComponent(l(e)).replace(x,m)}}if(!i){var p=/[\\'"]/g;i=function(e){return l(e).replace(p,"\\$&")}}_||(_=function(e,r,a,n){for(n=e[k];--n;)if(e[a=k+n]===r)return a;return e[a=k+e[k]++]=r,a});var o,u,v,k="",h="",y=e.textAlign,f=e.rangeInfo,z=e.viewId,w=e.result,b=e.show,S=e.left,I=e.top;try{h+='<div class="mx-trigger _zs_gallery_mx-calendar_rangepicker_-result ',v=1,u="=textAlign",h+=(o="<%=textAlign%>",n(y)+" "),v=1,u="if rangeInfo.vs",o="<%if (rangeInfo.vs) {%>",f.vs&&(h+=" _zs_gallery_mx-calendar_rangepicker_-result-vs ",v=1,u="/if",o="<%}%>"),h+='" id="trigger_',v=1,u="=viewId",h+=(o="<%=viewId%>",n(z)+'" mx-click="'+r+'@{toggle}()" mx-change="'+r+'@{stop}()">'),v=4,u="if result.endStr",o="<%if (result.endStr) {%>",w.endStr?(h+='<span mxa="_zs_gallery::_" class="_zs_gallery_mx-calendar_rangepicker_-co _zs_gallery_mx-calendar_rangepicker_-co-left">',v=5,u="=result.startStr",h+=(o="<%=result.startStr%>",n(w.startStr)+'</span><span mxa="_zs_gallery::a" class="_zs_gallery_mx-calendar_rangepicker_-center color-9">'),v=6,u="=result.centetTip",h+=(o="<%=result.centetTip%>",n(w.centetTip)+'</span><span mxa="_zs_gallery::b" class="_zs_gallery_mx-calendar_rangepicker_-co _zs_gallery_mx-calendar_rangepicker_-co-right">'),v=7,u="=result.endStr",h+=(o="<%=result.endStr%>",n(w.endStr)+"</span>"),v=8,u="else",o="<%}else {%>"):(h+=" ",v=9,u="=result.startStr",h+=(o="<%=result.startStr%>",n(w.startStr)+" "),v=10,u="/if",o="<%}%>"),h+='</div><div mxv="rangeInfo" class="mx-output mx-output-bottom ',v=13,u="if show",o="<%if (show) {%>",b&&(h+=" mx-output-open ",v=13,u="/if",o="<%}%>"),h+='" style="left:',v=14,u="=left",h+=(o="<%=left%>",n(S)+"px;top:"),v=14,u="=top",h+=(o="<%=top%>",n(I)+'px;" id="rpcnt_'),v=15,u="=viewId",h+=(o="<%=viewId%>",n(z)+'" mx-view="mx-calendar/range?configs='),v=16,u="@rangeInfo",h+=(o="<%@rangeInfo%>",_(a,f)+'" mx-change="'+r+'@{range.picked}()" mx-cancel="'+r+'@{hide}()"></div>')}catch(e){var D="render view error:"+(e.message||e);throw u&&(D+="\r\n\tsrc art:{{"+u+"}}\r\n\tat line:"+v),D+="\r\n\t"+(u?"translate to:":"expr:"),D+=o+"\r\n\tat file:mx-calendar/rangepicker.html"}return h},init:function(e){var r=this;t["@{setup}"](),r.on("destroy",function(){t["@{remove}"](r),t["@{teardown}"]()}),r.updater.snapshot(),r.assign(e)},assign:function(e){var r=this.updater.altered();this["@{ui.disabled}"]=e.disabled+""=="true"||l("#"+this.id)[0].hasAttribute("mx-disabled");var a=/^true$/i.test(e.vsenable)||!1,n=!1;a&&(n=/^true$/i.test(e.vs)||!1);var t=a&&/^true$/i.test(e.single)||!1,d=e.timeType,g=e.formatter||"YYYY-MM-dd"+(d?" hh:mm:ss":""),m=e.dateType,x=/^true$/i.test(e.startDisabled)||!1,p=/^true$/i.test(e.endDisabled)||!1,o=!/^false$/i.test(e.shortcuts),u=o?e.shortkeys||["today","yesterday","preWeekMon","lastestWeekMon","preMonth","lastestThisMonth"]:[];if(x){o=!1;for(var v=0;v<u.length;v++)u[v].indexOf("dynamic")<0&&u[v].indexOf("forever")<0&&u.splice(v--,1)}p&&(o=!1,u=[]);var k=e.start,h=e.end,y=e.min,f=e.max;k||(k=s(y,f,g)),h||o&&!(u.indexOf("forever")<0)||(h=s(y,f,g));var z,w,b=new Date(i(k,g)),S=i(b,g);h==_.foreverStr?z=w=_.foreverStr:(z=new Date(i(h,g)),w=i(z,g));for(var I,D,T=c(u,S,g),$=0;$<T.length;$++){var A=T[$];if(A.start==S&&A.end==w){I=A.text,D=A.key;break}}var q={start:b,startStr:S,end:z,endStr:w,formatter:g,quickDateText:I,quickDateKey:D},G={min:y,max:f,timeType:d,dateType:m,formatter:g,quickDates:u,quickGap:e.quickGap,align:e.align,vsEnable:a,vs:n,vsSingle:t,startDisabled:x,endDisabled:p,dates:q,disabledWeeks:e.disabledWeeks||[],minGap:+e.minGap||0,maxGap:+e.maxGap||0};return this.updater.set({viewId:this.id,rangeInfo:G,textAlign:{"result-left":"_zs_gallery_mx-calendar_rangepicker_-result-left","result-center":"_zs_gallery_mx-calendar_rangepicker_-result-center"}["result-"+(e.textAlign||"center")]}),this["@{owner.node}"]=l("#"+this.id),this["@{owner.node}"].val(JSON.stringify({start:q.startStr,end:q.endStr,vs:n})),r||(r=this.updater.altered()),!!r&&(this.updater.snapshot(),!0)},render:function(){this["@{fill.to.node}"]()},"@{fill.to.node}":function(){var e,r=this.updater.get("rangeInfo"),a=r.dates,n=r.vs,l=r.vsSingle,t=r.formatter,s=a.startStr,c=a.endStr,m=a.quickDateText,x={centetTip:n?g["calendar.vs"]:g["calendar.to"]},p=i(d(0),t),o=i(d(-1),t),u=i(d(1),t),v=((e={})[p]=g["calendar.today"],e[o]=g["calendar.yesterday"],e[u]=g["calendar.tomorrow"],e),k=function(e){return v[e]||e};n?(x.startStr=k(s),x.endStr=k(c)):l?x.startStr=k(s):m?m==_.foreverStr?(x.startStr=s,x.endStr=_.foreverStr):x.startStr=m:(x.startStr=s,x.endStr=c),this.updater.digest({result:x})},"@{stop}<change,focusin,focusout>":function(e){e.dates||e.stopPropagation()},"@{toggle}<click>":function(e){this["@{ui.disabled}"]||(e.preventDefault(),this.updater.get("show")?this["@{hide}"]():this["@{show}"]())},"@{show}":function(){var e=this.updater,r=e.get("rangeInfo");if(!e.get("show")){e.digest({show:!0});var a=l("#trigger_"+this.id),n=l("#rpcnt_"+this.id),_=0,i=a.outerHeight();"right"==r.align&&(_=a.outerWidth()-n.outerWidth()),e.digest({top:i,left:_}),t["@{add}"](this)}},"@{hide}":function(){this.updater.get("show")&&(this.updater.digest({show:!1}),t["@{remove}"](this))},"@{range.picked}<change>":function(e){e.stopPropagation();var r=this.updater.get("rangeInfo"),a=e.dates,l=e.vs;n.mix(r,{dates:a,vs:l}),this["@{fill.to.node}"](),this["@{hide}"]();var t=JSON.stringify({start:a.startStr,end:a.endStr,vs:l});this["@{owner.node}"].val(t).trigger({type:"change",start:a.startStr,end:a.endStr,vs:l,dates:a})},"@{hide}<cancel>":function(e){e.stopPropagation(),this["@{hide}"]()},"@{inside}":function(e){var r=n.inside(e,this.id)||n.inside(e,this["@{owner.node}"][0]);if(!r)for(var a=this.owner.children(),l=a.length-1;l>=0;l--){var t=n.Vframe.get(a[l]);if(t&&(r=t.invoke("@{inside}",[e])),r)break}return r}})});