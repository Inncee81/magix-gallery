define("mx-dropdown/index",["magix","$","../mx-util/monitor","../mx-medusa/util"],(e,t,i)=>{var r=e("magix"),a=e("$"),n=e("../mx-util/monitor"),o=e("../mx-medusa/util");r.applyStyle("_zs_gallery_mx-dropdown_index_","._zs_gallery_mx-dropdown_index_-dropdown-menu-group {\n  min-width: 600px;\n}\n._zs_gallery_mx-dropdown_index_-dropdown-menu-group ._zs_gallery_mx-dropdown_index_-dropdown-group-item {\n  float: left;\n  width: 25%;\n}\n._zs_gallery_mx-dropdown_index_-dropdown-menu-group ._zs_gallery_mx-dropdown_index_-dropdown-group-wrapper {\n  margin-bottom: 10px;\n}\n._zs_gallery_mx-dropdown_index_-oper-wrapper {\n  padding-top: 10px;\n  padding-right: 10px;\n  padding-left: 18px;\n  padding-right: 18px;\n  line-height: 16px;\n}\n._zs_gallery_mx-dropdown_index_-oper-wrapper ._zs_gallery_mx-dropdown_index_-oper {\n  float: left;\n  padding-right: 20px;\n  color: #999;\n}\n._zs_gallery_mx-dropdown_index_-oper-wrapper ._zs_gallery_mx-dropdown_index_-oper:hover {\n  color: var(--color-brand);\n}\n._zs_gallery_mx-dropdown_index_-oper-wrapper._zs_gallery_mx-dropdown_index_-has-group {\n  padding-left: 12px;\n  padding-right: 12px;\n}\n._zs_gallery_mx-dropdown_index_-dropdown-output ._zs_gallery_mx-dropdown_index_-dropdown-output-link {\n  height: auto;\n}\n._zs_gallery_mx-dropdown_index_-selected-text img {\n  display: none;\n}\n"),i.exports=r.View.extend({tmpl:function(e,t,i,r,a,n,o,d){if(i||(i=e),!a){var l={"&":"amp","<":"lt",">":"gt",'"':"#34","'":"#39","`":"#96"},s=/[&<>"'`]/g,p=function(e){return"&"+l[e]+";"};a=function(e){return""+(null==e?"":e)},r=function(e){return a(e).replace(s,p)}}if(!n){var u={"!":"%21","'":"%27","(":"%28",")":"%29","*":"%2A"},c=function(e){return u[e]},x=/[!')(*]/g;n=function(e){return encodeURIComponent(a(e)).replace(x,c)}}if(!d){var m=/[\\'"]/g;d=function(e){return a(e).replace(m,"\\$&")}}o||(o=function(e,t,i,r){for(r=e[h];--r;)if(e[i=h+r]===t)return i;return e[i=h+e[h]++]=t,i});var _,g,v,h="",f="",y=e.viewId,w=e.expand,b=e.name,z=e.selectedText,k=e.placementClass,K=e.rList,T=e.searchbox,j=e.text,I=e.keyword,L=e.list,C=e.height,A=e.textKey,q=e.valueKey,O=e.selected,P=e.spm;try{if(f+='<div id="toggle_',v=1,g="=viewId",f+=(_="<%=viewId%>",r(y)+'" class="mx-trigger '),_="<%if (expand) {%>",w&&(f+=" mx-trigger-open ",_="<%}%>"),f+='"><span mxa="_zs_gallerybj:_" class="mx-trigger-label">',_="<%if (name) {%>",b&&(f+='<span mxa="_zs_gallerybj:a" class="color-9">'+(_="<%=name%>",r(b))+"ï¼š</span>",_="<%}%>"),f+='<span mxa="_zs_gallerybj:b" class="_zs_gallery_mx-dropdown_index_-selected-text">'+(_="<%!selectedText%>",a(z))+'</span></span><span mxs="_zs_gallerybj:_" class="mc-iconfont mx-trigger-arrow">&#xe692;</span></div><div mxv id="menu_',v=9,g="=viewId",f+=(_="<%=viewId%>",r(y)+'" class="_zs_gallery_mx-dropdown_index_-dropdown-output mx-output '+(_="<%=placementClass%>",r(k))+" "),_="<%if (expand) {%>",w&&(f+=" mx-output-open ",_="<%}%>"),f+='">',_="<%if (rList) {%>",K){if(f+=" ",_="<%if (searchbox) {%>",T&&(f+='<div mxv mxa="_zs_gallerybj:c" class="mx-output-search"><div mxv mxa="_zs_gallerybj:d" class="search-box" style="width: 100%;"><i mxs="_zs_gallerybj:a" class="mc-iconfont search-icon">&#xe651;</i><input class="input search-input" placeholder="'+(_="<%=text.search%>",r(j.search))+'" mx-keyup="'+t+'@{search}()" mx-paste="'+t+'@{search}()" mx-change="'+t+'@{stop}()" mx-focusin="'+t+'@{stop}()" mx-focusout="'+t+'@{stop}()" value="'+(_="<%=keyword%>",r(I))+'"/></div></div>',_="<%}%>"),f+=" ",_="<%if (list.length) {%>",L.length){f+='<ul class="mx-output-list" id="list_'+(_="<%=viewId%>",r(y))+'" style="max-height:',v=27,g="=height",f+=(_="<%=height%>",r(C)+'px;">'),_="<%var text = void 0, value = void 0%>";j=void 0;var $=void 0;f+=" ",_="<%for (var _i = 0, list_1 = list; _i < list_1.length; _i++) {            var item = list_1[_i];%>";for(var M=0,S=L;M<S.length;M++){var D=S[M];if(f+=" ",_="<%text = item[textKey];            value = item[valueKey]%>",j=D[A],$=D[q],f+=" ",_="<%if (item && item.group) {%>",D&&D.group)f+='<li class="mx-output-header" title="'+(_="<%=item[textKey]%>",r(D[A]))+'">'+(_="<%=item[textKey]%>",r(D[A]))+"</li>",_="<%}            else {%>";else{f+='<li class="mx-output-item" title="'+(_="<%=(item.tip ? item.tip : text)%>",r(D.tip?D.tip:j))+'">',_="<%var equal = (value + '') === (selected + '')%>";var E=$+""==O+"";f+='<span class="_zs_gallery_mx-dropdown_index_-dropdown-output-link mx-output-link ',_="<%if (equal) {%>",E&&(f+=" mx-output-link-active ",_="<%}%>"),f+='" data-active="'+(_="<%=equal%>",r(E))+'" mx-click="'+t+"@{select}({item:'"+(_="<%@item%>",o(i,D))+"'})\" ",_="<%if (spm) {%>",P&&(f+=' data-spm-click="'+(_="<%=spm%>",r(P))+(_="<%=value%>",r($))+'" ',_="<%}%>"),f+=">"+(_="<%!text%>",a(j))+"</span></li>",_="<%}%>"}f+=" ",_="<%}%>"}f+="</ul>",_="<%}    else {%>"}else f+='<div mxa="_zs_gallerybj:e" class="text-center color-9 pt20 pb20">',v=48,g="!text.empty",f+=(_="<%!text.empty%>",a(j.empty)+"</div>"),_="<%}%>";f+=" ",_="<%}%>"}f+="</div>"}catch(e){var J="render view error:"+(e.message||e);throw g&&(J+="\r\n\tsrc art:{{"+g+"}}\r\n\tat line:"+v),J+="\r\n\t"+(g?"translate to:":"expr:"),J+=_+"\r\n\tat file:mx-dropdown/index.html"}return f},init:function(e){var t=this;n["@{setup}"](),t.on("destroy",function(){n["@{remove}"](t),n["@{teardown}"]()}),t["@{owner.node}"]=a("#"+t.id),t["@{ui.disabled}"]=e.disabled+""=="true"||a("#"+t.id)[0].hasAttribute("mx-disabled"),t["@{ui.expand}"]=!1;var i="mx-output-"+(e.placement||"bottom");t["@{trigger.type}"]=e.triggerType||"click";var d=t["@{selected}"]=e.selected,l=t["@{textKey}"]=e.textKey||"text",s=t["@{valueKey}"]=e.valueKey||"value",p=t["@{emptyText}"]=e.emptyText||"",u=[];if(e.list){try{u=JSON.parse(e.list)}catch(t){u=e.list}"object"==typeof u[0]||(u=u.map(function(e){var t={};return t[l]=e,t[s]=e,t}))}else{var c;t["@{owner.node}"].children().each(function(e,t){t=a(t),c="true"==t.attr("group"),u.push({group:c,text:t.text(),value:c?r.guid():t.attr("value")})}),l=t["@{textKey}"]="text",s=t["@{valueKey}"]="value"}t["@{list}"]=u;var x=r.toMap(u,s);if(p&&!x[""]){var m={};m[l]=p,m[s]="",u.unshift(m),x[""]=m}if(!d||!x[d]){for(var _={},g=0;g<u.length;g++)if(!u[g].group){_=u[g];break}d=x[d]||_,l&&s&&(d=d[s])}t.updater.set({viewId:t.id,textKey:t["@{textKey}"],valueKey:t["@{valueKey}"],selected:t["@{selected}"]=d,searchbox:e.searchbox+""=="true",selectedText:t["@{selected.text}"]=(x[d]||{})[l],keyword:t["@{last.search.value}"]=e.keyword||"",expand:t["@{ui.expand}"],height:e.height||250,spm:t["@{owner.node}"].attr("data-spm-click")||"",name:e.name||"",placementClass:i,text:{search:o["dropdown.search"],empty:o["empty.text"]}}),t["@{owner.node}"].val(d)},render:function(){var e,t=this,i=t.updater.get("searchbox"),r=function(){t.updater.digest({list:e});var i=t["@{trigger.type}"],r=a("#toggle_"+t.id);switch(i){case"click":r.on("click",function(){t["@{ui.expand}"]?t["@{hide}"]():t["@{ui.disabled}"]||t["@{show}"]()});break;case"hover":r.hover(function(){clearTimeout(t["@{dealy.hide.timer}"]),t["@{ui.disabled}"]||t["@{show}"]()},function(){t["@{delay.hide}"]()}),a("#menu_"+t.id).hover(function(){clearTimeout(t["@{dealy.hide.timer}"])},function(){t["@{delay.hide}"]()})}};i?t["@{fn.search}"](t["@{last.search.value}"],function(t){e=t,r()}):(e=t["@{list}"],r())},"@{inside}":function(e){return r.inside(e,this.id)},"@{delay.hide}":function(){var e=this;clearTimeout(e["@{dealy.hide.timer}"]),e["@{dealy.hide.timer}"]=setTimeout(e.wrapAsync(function(){e["@{hide}"]()}),250)},"@{hide}":function(){var e=this;e["@{ui.expand}"]&&(e.updater.digest({expand:e["@{ui.expand}"]=!1}),e["@{owner.node}"].trigger("focusout"),n["@{remove}"](e))},"@{show}":function(){var e=this;if(!e["@{ui.expand}"]){var t={expand:e["@{ui.expand}"]=!0};e.updater.get("rList")||(t.rList=!0),e.updater.digest(t),e["@{owner.node}"].trigger("focusin");var i=a("#list_"+e.id),r=i.find('[data-active="true"]').position(),o=i.height(),d=i.prop("scrollTop");if(r&&(r.top<0||r.top>o)){var l=r.top-o+d+o/2;i.prop("scrollTop",l)}n["@{add}"](e)}},"@{fn.search}":function(e,t){var i=this;clearTimeout(i["@{search.timer}"]);var r=i["@{list}"],a=[],n=0,o=r.length,d=i["@{textKey}"],l=i["@{valueKey}"];if(e){var s=function(){if(n<o){for(var p=Math.min(n+400,o),u=n,c=void 0,x=void 0,m=void 0;u<p;u++){x=c=r[u],m=c,d&&l&&(x=c[d],m=c[l]);var _=(e+"").toLocaleLowerCase();((x+"").toLocaleLowerCase().indexOf(_)>=0||(m+"").indexOf(e)>=0)&&a.push(c)}n=p,i["@{search.timer}"]=setTimeout(i.wrapAsync(s),20)}else t(a)};s()}else t(r)},"@{search}<keyup,paste>":function(e){var t=this;e.stopPropagation(),clearTimeout(t["@{search.delay.timer}"]);var i=a.trim(e.eventTarget.value);t.updater.set({keyword:i}),t["@{search.delay.timer}"]=setTimeout(t.wrapAsync(function(){i!=t["@{last.search.value}"]&&t["@{fn.search}"](t["@{last.search.value}"]=i,function(e){t.updater.digest({list:e})})}),250)},"@{select}<click>":function(e){var t=this,i=e.params.item,r=t.updater,n=t["@{valueKey}"],o=t["@{textKey}"],d=t["@{selected}"],l=t["@{last.search.value}"],s=i[n],p=i[o];if(d!==s){r.set({selected:t["@{selected}"]=s});var u=a.Event("change",{item:i,keyword:l,keys:{text:o,value:n},value:i[n],text:i[o],selected:i[n]});u.isDefaultPrevented()?r.set({selected:d}):r.digest({selected:s,selectedText:p}),t["@{owner.node}"].val(n?i[n]:i).trigger(u)}t["@{hide}"]()},"@{stop}<change,focusin,focusout>":function(e){e.stopPropagation()}})});