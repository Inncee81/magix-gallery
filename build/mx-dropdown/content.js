define("mx-dropdown/content",["magix","../mx-medusa/util"],(e,t,i)=>{var a=e("magix"),r=e("../mx-medusa/util");a.applyStyle("_zs_gallery_mx-dropdown_index_","._zs_gallery_mx-dropdown_index_-dropdown-menu-group {\n  min-width: 600px;\n}\n._zs_gallery_mx-dropdown_index_-dropdown-menu-group ._zs_gallery_mx-dropdown_index_-dropdown-group-item {\n  float: left;\n  width: 25%;\n}\n._zs_gallery_mx-dropdown_index_-dropdown-menu-group ._zs_gallery_mx-dropdown_index_-dropdown-group-wrapper {\n  margin-bottom: 10px;\n}\n._zs_gallery_mx-dropdown_index_-oper-wrapper {\n  padding-top: 10px;\n  padding-right: 10px;\n  padding-left: 18px;\n  padding-right: 18px;\n  line-height: 16px;\n}\n._zs_gallery_mx-dropdown_index_-oper-wrapper ._zs_gallery_mx-dropdown_index_-oper {\n  float: left;\n  padding-right: 20px;\n  color: #999;\n}\n._zs_gallery_mx-dropdown_index_-oper-wrapper ._zs_gallery_mx-dropdown_index_-oper:hover {\n  color: var(--color-brand);\n}\n._zs_gallery_mx-dropdown_index_-oper-wrapper._zs_gallery_mx-dropdown_index_-has-group {\n  padding-left: 12px;\n  padding-right: 12px;\n}\n._zs_gallery_mx-dropdown_index_-dropdown-output ._zs_gallery_mx-dropdown_index_-dropdown-output-link {\n  height: auto;\n}\n._zs_gallery_mx-dropdown_index_-selected-text img {\n  display: none;\n}\n"),i.exports=a.View.extend({tmpl:function(e,t,i,a,r,n,s,l){if(i||(i=e),!r){var d={"&":"amp","<":"lt",">":"gt",'"':"#34","'":"#39","`":"#96"},c=/[&<>"'`]/g,o=function(e){return"&"+d[e]+";"};r=function(e){return""+(null==e?"":e)},a=function(e){return r(e).replace(c,o)}}if(!n){var p={"!":"%21","'":"%27","(":"%28",")":"%29","*":"%2A"},m=function(e){return p[e]},x=/[!')(*]/g;n=function(e){return encodeURIComponent(r(e)).replace(x,m)}}if(!l){var u=/[\\'"]/g;l=function(e){return r(e).replace(u,"\\$&")}}s||(s=function(e,t,i,a){for(a=e[g];--a;)if(e[i=g+a]===t)return i;return e[i=g+e[g]++]=t,i});var _,f,h,g="",b="",w=e.searchbox,v=e.text,y=e.keyword,k=e.multiple,z=e.spm,I=e.allHide,$=e.height,j=e.parents,E=e.hasGroups;try{if(h=1,f="if searchbox",_="<%if (searchbox) {%>",w&&(b+='<div mxv mxa="_zs_gallerybi:_" class="mx-output-search"><div mxv mxa="_zs_gallerybi:a" class="search-box" style="width: 100%;"><i mxs="_zs_gallerybi:_" class="mc-iconfont search-icon">&#xe651;</i><input class="input search-input" placeholder="',h=6,f="=text.search",b+=(_="<%=text.search%>",a(v.search)+'" mx-keyup="'+t+'@{search}()" mx-paste="'+t+'@{search}()" mx-change="'+t+'@{stop}()" mx-focusin="'+t+'@{stop}()" mx-focusout="'+t+'@{stop}()" value="'),h=12,f="=keyword",b+=(_="<%=keyword%>",a(y)+'"/></div></div>'),h=15,f="/if",_="<%}%>"),b+=" ",h=16,f="if multiple",_="<%if (multiple) {%>",k&&(b+='<div mxa="_zs_gallerybi:b" class="_zs_gallery_mx-dropdown_index_-oper-wrapper _zs_gallery_mx-dropdown_index_-has-group clearfix"><a class="_zs_gallery_mx-dropdown_index_-oper" href="javascript:;" mx-click="'+t+'@{checkAll}({checked:true})" data-spm-click="',h=18,f="=spm",b+=(_="<%=spm%>",a(z)+'a">'),h=18,f="=text.select",b+=(_="<%=text.select%>",a(v.select)+'</a><a class="_zs_gallery_mx-dropdown_index_-oper" href="javascript:;" mx-click="'+t+'@{checkAll}({checked:false})" data-spm-click="'),h=19,f="=spm",b+=(_="<%=spm%>",a(z)+'ua">'),h=19,f="=text.unselect",b+=(_="<%=text.unselect%>",a(v.unselect)+"</a></div>"),h=21,f="/if",_="<%}%>"),b+=" ",h=22,f="if !allHide",_="<%if (!allHide) {%>",I)b+='<div mxa="_zs_gallerybi:c" class="text-center color-9 pt20 pb20">',h=55,f="=text.empty",b+=(_="<%=text.empty%>",a(v.empty)+"</div>"),h=56,f="/if",_="<%}%>";else{b+='<ul mxv class="mx-output-list" style="max-height:',h=23,f="=height",b+=(_="<%=height%>",a($)+'px;">'),h=24,f="each parents as parent parentIndex",_="<%for (var parentIndex = 0, $art_cftaombcncb$art_c = parents.length; parentIndex < $art_cftaombcncb$art_c; parentIndex++) {        var parent = parents[parentIndex]%>";for(var O=0,A=j.length;O<A;O++){var G=j[O];if(b+=" ",h=25,f="if !parent.hide",_="<%if (!parent.hide) {%>",!G.hide){b+=" ",h=26,f="if hasGroups",_="<%if (hasGroups) {%>",E&&(b+='<li class="mx-output-header" title="',h=27,f="=parent.text",b+=(_="<%=parent.text%>",a(G.text)+'">'),h=27,f="=parent.text",b+=(_="<%=parent.text%>",a(G.text)+"</li>"),h=28,f="/if",_="<%}%>"),b+=" ",h=29,f="each parent.list as item itemIndex",_="<%for (var itemIndex = 0, $art_objemwcxfrbh$art_obj = parent.list, $art_cbozdxicrdcb$art_c = $art_objemwcxfrbh$art_obj.length; itemIndex < $art_cbozdxicrdcb$art_c; itemIndex++) {                var item = $art_objemwcxfrbh$art_obj[itemIndex]%>";for(var H=0,L=G.list,C=L.length;H<C;H++){var T=L[H];b+=" ",h=30,f="if !item.hide",_="<%if (!item.hide) {%>",T.hide||(b+='<li mxv class="mx-output-item" title="',h=31,f="=item.text",b+=(_="<%=item.text%>",a(T.text)+'">'),h=32,f="if multiple",_="<%if (multiple) {%>",k?(b+='<label mxv class="mx-output-link ',h=33,f="if item.disabled",_="<%if (item.disabled) {%>",T.disabled&&(b+=" mx-output-link-disabled ",h=33,f="/if",_="<%}%>"),b+='"><input type="checkbox" class="checkbox" ',h=35,f="if item.selected",_="<%if (item.selected) {%>",T.selected&&(b+=' checked="true" ',h=35,f="/if",_="<%}%>"),b+=" ",h=36,f="if item.disabled",_="<%if (item.disabled) {%>",T.disabled&&(b+=' disabled="true" ',h=36,f="/if",_="<%}%>"),b+=' mx-focusout="'+t+'@{stop}()" mx-change="'+t+"@{check}({parentIndex:'",h=38,f="=parentIndex",b+=(_="<%=$eq(parentIndex)%>",a(l(O))+"',itemIndex:'"),h=38,f="=itemIndex",b+=(_="<%=$eq(itemIndex)%>",a(l(H))+'\'})" data-spm-click="'),h=39,f="=spm",b+=(_="<%=spm%>",a(z)+'"/>'),h=40,f="=item.text",b+=(_="<%=item.text%>",a(T.text)+"</label>"),h=42,f="else",_="<%}                    else {%>"):(b+='<span class="mx-output-link ',h=43,f="if item.selected",_="<%if (item.selected) {%>",T.selected&&(b+=" mx-output-link-active ",h=43,f="/if",_="<%}%>"),b+=" ",h=43,f="if item.disabled",_="<%if (item.disabled) {%>",T.disabled&&(b+=" mx-output-link-disabled ",h=43,f="/if",_="<%}%>"),b+='" ',h=44,f="if !item.disabled",_="<%if (!item.disabled) {%>",T.disabled||(b+=' mx-click="'+t+"@{select}({item:'",h=44,f="@item",b+=(_="<%@item%>",s(i,T)+'\'})" data-spm-click="'),h=44,f="=spm",b+=(_="<%=spm%>",a(z)+'" '),h=44,f="/if",_="<%}%>"),b+=">",h=45,f="=item.text",b+=(_="<%=item.text%>",a(T.text)+"</span>"),h=47,f="/if",_="<%}%>"),b+="</li>",h=49,f="/if",_="<%}%>"),b+=" ",h=50,f="/each",_="<%}%>"}b+=" ",h=51,f="/if",_="<%}%>"}b+=" ",h=52,f="/each",_="<%}%>"}b+="</ul>",h=54,f="else",_="<%}else {%>"}b+=" ",h=57,f="if multiple",_="<%if (multiple) {%>",k&&(b+='<div mxa="_zs_gallerybi:d" class="mx-output-footer"><a mxa="_zs_gallerybi:e" href="javascript:;" class="btn btn-small btn-brand mr10" mx-click="'+t+'@{submit}()">',h=59,f="=text.submit",b+=(_="<%=text.submit%>",a(v.submit)+'</a><a mxa="_zs_gallerybi:f" href="javascript:;" class="btn btn-small" mx-click="'+t+'@{cancel}()">'),h=60,f="=text.cancel",b+=(_="<%=text.cancel%>",a(v.cancel)+"</a></div>"),h=62,f="/if",_="<%}%>")}catch(e){var q="render view error:"+(e.message||e);throw f&&(q+="\r\n\tsrc art:{{"+f+"}}\r\n\tat line:"+h),q+="\r\n\t"+(f?"translate to:":"expr:"),q+=_+"\r\n\tat file:mx-dropdown/content.html"}return b},init:function(e){this.viewOptions=e;var t=e.data,i=$.extend(!0,[],t.parents),a=(t.selectedItems||[]).map(function(e){return e.value+""});i.forEach(function(e){e.list.forEach(function(e){e.selected=a.indexOf(e.value+"")>-1})}),this.updater.set({parents:i,hasGroups:t.hasGroups,searchbox:t.searchbox,multiple:t.multiple,spm:t.spm,height:t.height,keyword:t.keyword||"",text:{search:r["dropdown.search"],select:r["select.all"],unselect:r["unselect.all"],submit:r["dialog.submit"],cancel:r["dialog.cancel"],empty:r["empty.text"]}})},render:function(){var e=this,t=e.updater.get("keyword");e["@{fn.search}"](e["@{last.value}"]=t,function(t){e.updater.digest(t)})},"@{select}<click>":function(e){var t=this.viewOptions;t.submit&&t.submit({keyword:this.updater.get("keyword"),selectedItems:[e.params.item]})},"@{checkAll}<click>":function(e){var t=e.params.checked,i=this.updater.get("parents");i.forEach(function(e){e.list.forEach(function(e){e.disabled||(e.selected=t)})}),this.updater.digest({parents:i})},"@{check}<change>":function(e){var t=e.params.parentIndex,i=e.params.itemIndex,a=this.updater.get("parents");a[t].list[i].selected=!a[t].list[i].selected,this.updater.digest({parents:a})},"@{submit}<click>":function(e){var t=this.viewOptions,i=this.updater.get(),a=i.parents,r=i.keyword,n=[];a.forEach(function(e){e.list.forEach(function(e){e.selected&&n.push(e)})}),t.submit&&t.submit({keyword:r,selectedItems:n})},"@{cancel}<click>":function(e){var t=this.viewOptions;t.cancel&&t.cancel()},"@{fn.search}":function(e,t){var i,a=this.updater.get().parents;if(e){i=!0;var r=(e+"").toLocaleLowerCase();a.forEach(function(e){var t=!0;e.list.forEach(function(e){var i=(e.text+"").toLocaleLowerCase();e.hide=i.indexOf(r)<0,t=t&&e.hide}),e.hide=t,i=i&&t})}else i=!1,a.forEach(function(e){e.hide=!1,e.list.forEach(function(e){e.hide=!1})});t({parents:a,allHide:i})},"@{search}<keyup,paste>":function(e){var t=this;clearTimeout(t["@{search.delay.timer}"]);var i=$.trim(e.eventTarget.value);t.updater.set({keyword:i}),t["@{search.delay.timer}"]=setTimeout(t.wrapAsync(function(){i!=t["@{last.value}"]&&t["@{fn.search}"](t["@{last.value}"]=i,function(e){t.updater.digest(e)})}),250)},"@{stop}<change,focusin,focusout>":function(e){e.stopPropagation()}})});