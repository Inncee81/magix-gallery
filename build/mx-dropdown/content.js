define("mx-dropdown/content",["magix","../mx-medusa/util"],(e,t,a)=>{var i=e("magix"),r=e("../mx-medusa/util");i.applyStyle("_zs_gallery_mx-dropdown_index_","._zs_gallery_mx-dropdown_index_-dropdown-menu-group {\n  min-width: 600px;\n}\n._zs_gallery_mx-dropdown_index_-dropdown-menu-group ._zs_gallery_mx-dropdown_index_-dropdown-group-item {\n  float: left;\n  width: 25%;\n}\n._zs_gallery_mx-dropdown_index_-dropdown-menu-group ._zs_gallery_mx-dropdown_index_-dropdown-group-wrapper {\n  margin-bottom: 10px;\n}\n._zs_gallery_mx-dropdown_index_-oper-wrapper {\n  padding-top: 10px;\n  padding-right: 10px;\n  padding-left: 18px;\n  padding-right: 18px;\n  line-height: 16px;\n}\n._zs_gallery_mx-dropdown_index_-oper-wrapper ._zs_gallery_mx-dropdown_index_-oper {\n  float: left;\n  padding-right: 20px;\n  color: #999;\n}\n._zs_gallery_mx-dropdown_index_-oper-wrapper ._zs_gallery_mx-dropdown_index_-oper:hover {\n  color: var(--color-brand);\n}\n._zs_gallery_mx-dropdown_index_-oper-wrapper._zs_gallery_mx-dropdown_index_-has-group {\n  padding-left: 12px;\n  padding-right: 12px;\n}\n._zs_gallery_mx-dropdown_index_-dropdown-output ._zs_gallery_mx-dropdown_index_-dropdown-output-link {\n  height: auto;\n}\n._zs_gallery_mx-dropdown_index_-selected-text img {\n  display: none;\n}\n"),a.exports=i.View.extend({tmpl:function(e,t,a,i,r,n,s,l){if(a||(a=e),!r){var d={"&":"amp","<":"lt",">":"gt",'"':"#34","'":"#39","`":"#96"},c=/[&<>"'`]/g,o=function(e){return"&"+d[e]+";"};r=function(e){return""+(null==e?"":e)},i=function(e){return r(e).replace(c,o)}}if(!n){var p={"!":"%21","'":"%27","(":"%28",")":"%29","*":"%2A"},m=function(e){return p[e]},x=/[!')(*]/g;n=function(e){return encodeURIComponent(r(e)).replace(x,m)}}if(!l){var u=/[\\'"]/g;l=function(e){return r(e).replace(u,"\\$&")}}s||(s=function(e,t,a,i){for(i=e[g];--i;)if(e[a=g+i]===t)return a;return e[a=g+e[g]++]=t,a});var _,h,f,g="",b="",v=e.searchbox,y=e.text,w=e.keyword,k=e.multiple,z=e.spm,I=e.allHide,$=e.height,j=e.parents,E=e.hasGroups;try{if(f=1,h="if searchbox",_="<%if (searchbox) {%>",v&&(b+='<div mxv mxa="_zs_gallerybh:_" class="mx-output-search"><div mxv mxa="_zs_gallerybh:a" class="search-box" style="width: 100%;"><i mxs="_zs_gallerybh:_" class="mc-iconfont search-icon">&#xe651;</i><input class="input search-input" placeholder="',f=6,h="=text.search",b+=(_="<%=text.search%>",i(y.search)+'" mx-keyup="'+t+'@{search}()" mx-paste="'+t+'@{search}()" mx-change="'+t+'@{stop}()" mx-focusin="'+t+'@{stop}()" mx-focusout="'+t+'@{stop}()" value="'),f=12,h="=keyword",b+=(_="<%=keyword%>",i(w)+'"/></div></div>'),f=15,h="/if",_="<%}%>"),b+=" ",f=16,h="if multiple",_="<%if (multiple) {%>",k&&(b+='<div mxa="_zs_gallerybh:b" class="_zs_gallery_mx-dropdown_index_-oper-wrapper _zs_gallery_mx-dropdown_index_-has-group clearfix"><a class="_zs_gallery_mx-dropdown_index_-oper" href="javascript:;" mx-click="'+t+'@{checkAll}({checked:true})" data-spm-click="',f=18,h="=spm",b+=(_="<%=spm%>",i(z)+'a">'),f=18,h="=text.select",b+=(_="<%=text.select%>",i(y.select)+'</a><a class="_zs_gallery_mx-dropdown_index_-oper" href="javascript:;" mx-click="'+t+'@{checkAll}({checked:false})" data-spm-click="'),f=19,h="=spm",b+=(_="<%=spm%>",i(z)+'ua">'),f=19,h="=text.unselect",b+=(_="<%=text.unselect%>",i(y.unselect)+"</a></div>"),f=21,h="/if",_="<%}%>"),b+=" ",f=22,h="if !allHide",_="<%if (!allHide) {%>",I)b+='<div mxa="_zs_gallerybh:c" class="text-center color-9 pt20 pb20">',f=55,h="=text.empty",b+=(_="<%=text.empty%>",i(y.empty)+"</div>"),f=56,h="/if",_="<%}%>";else{b+='<ul mxv class="mx-output-list" style="max-height:',f=23,h="=height",b+=(_="<%=height%>",i($)+'px;">'),f=24,h="each parents as parent parentIndex",_="<%for (var parentIndex = 0, $art_csdshks$art_c = parents.length; parentIndex < $art_csdshks$art_c; parentIndex++) {        var parent = parents[parentIndex]%>";for(var O=0,A=j.length;O<A;O++){var G=j[O];if(b+=" ",f=25,h="if !parent.hide",_="<%if (!parent.hide) {%>",!G.hide){b+=" ",f=26,h="if hasGroups",_="<%if (hasGroups) {%>",E&&(b+='<li class="mx-output-header" title="',f=27,h="=parent.text",b+=(_="<%=parent.text%>",i(G.text)+'">'),f=27,h="=parent.text",b+=(_="<%=parent.text%>",i(G.text)+"</li>"),f=28,h="/if",_="<%}%>"),b+=" ",f=29,h="each parent.list as item itemIndex",_="<%for (var itemIndex = 0, $art_objyssjuxyzj$art_obj = parent.list, $art_cxxclnrbu$art_c = $art_objyssjuxyzj$art_obj.length; itemIndex < $art_cxxclnrbu$art_c; itemIndex++) {                var item = $art_objyssjuxyzj$art_obj[itemIndex]%>";for(var H=0,L=G.list,C=L.length;H<C;H++){var T=L[H];b+=" ",f=30,h="if !item.hide",_="<%if (!item.hide) {%>",T.hide||(b+='<li mxv class="mx-output-item" title="',f=31,h="=item.text",b+=(_="<%=item.text%>",i(T.text)+'">'),f=32,h="if multiple",_="<%if (multiple) {%>",k?(b+='<label mxv class="mx-output-link ',f=33,h="if item.disabled",_="<%if (item.disabled) {%>",T.disabled&&(b+=" mx-output-link-disabled ",f=33,h="/if",_="<%}%>"),b+='"><input type="checkbox" class="checkbox" ',f=35,h="if item.selected",_="<%if (item.selected) {%>",T.selected&&(b+=' checked="true" ',f=35,h="/if",_="<%}%>"),b+=" ",f=36,h="if item.disabled",_="<%if (item.disabled) {%>",T.disabled&&(b+=' disabled="true" ',f=36,h="/if",_="<%}%>"),b+=' mx-focusout="'+t+'@{stop}()" mx-change="'+t+"@{check}({parentIndex:'",f=38,h="=parentIndex",b+=(_="<%=$eq(parentIndex)%>",i(l(O))+"',itemIndex:'"),f=38,h="=itemIndex",b+=(_="<%=$eq(itemIndex)%>",i(l(H))+'\'})" data-spm-click="'),f=39,h="=spm",b+=(_="<%=spm%>",i(z)+'"/>'),f=40,h="=item.text",b+=(_="<%=item.text%>",i(T.text)+"</label>"),f=42,h="else",_="<%}                    else {%>"):(b+='<span class="mx-output-link ',f=43,h="if item.selected",_="<%if (item.selected) {%>",T.selected&&(b+=" mx-output-link-active ",f=43,h="/if",_="<%}%>"),b+=" ",f=43,h="if item.disabled",_="<%if (item.disabled) {%>",T.disabled&&(b+=" mx-output-link-disabled ",f=43,h="/if",_="<%}%>"),b+='" ',f=44,h="if !item.disabled",_="<%if (!item.disabled) {%>",T.disabled||(b+=' mx-click="'+t+"@{select}({item:'",f=44,h="@item",b+=(_="<%@item%>",s(a,T)+'\'})" data-spm-click="'),f=44,h="=spm",b+=(_="<%=spm%>",i(z)+'" '),f=44,h="/if",_="<%}%>"),b+=">",f=45,h="=item.text",b+=(_="<%=item.text%>",i(T.text)+"</span>"),f=47,h="/if",_="<%}%>"),b+="</li>",f=49,h="/if",_="<%}%>"),b+=" ",f=50,h="/each",_="<%}%>"}b+=" ",f=51,h="/if",_="<%}%>"}b+=" ",f=52,h="/each",_="<%}%>"}b+="</ul>",f=54,h="else",_="<%}else {%>"}b+=" ",f=57,h="if multiple",_="<%if (multiple) {%>",k&&(b+='<div mxa="_zs_gallerybh:d" class="mx-output-footer"><a mxa="_zs_gallerybh:e" href="javascript:;" class="btn btn-small btn-brand mr10" mx-click="'+t+'@{submit}()">',f=59,h="=text.submit",b+=(_="<%=text.submit%>",i(y.submit)+'</a><a mxa="_zs_gallerybh:f" href="javascript:;" class="btn btn-small" mx-click="'+t+'@{cancel}()">'),f=60,h="=text.cancel",b+=(_="<%=text.cancel%>",i(y.cancel)+"</a></div>"),f=62,h="/if",_="<%}%>")}catch(e){var q="render view error:"+(e.message||e);throw h&&(q+="\r\n\tsrc art:{{"+h+"}}\r\n\tat line:"+f),q+="\r\n\t"+(h?"translate to:":"expr:"),q+=_+"\r\n\tat file:mx-dropdown/content.html"}return b},init:function(e){this.viewOptions=e;var t=e.data,a=$.extend(!0,[],t.parents),i=(t.selectedItems||[]).map(function(e){return e.value+""});a.forEach(function(e){e.list.forEach(function(e){e.selected=i.indexOf(e.value+"")>-1})}),this.updater.set({parents:a,hasGroups:t.hasGroups,searchbox:t.searchbox,multiple:t.multiple,spm:t.spm,height:t.height,keyword:t.keyword||"",text:{search:r["dropdown.search"],select:r["select.all"],unselect:r["unselect.all"],submit:r["dialog.submit"],cancel:r["dialog.cancel"],empty:r["empty.text"]}})},render:function(){var e=this,t=e.updater.get("keyword");e["@{fn.search}"](e["@{last.value}"]=t,function(t){e.updater.digest(t)})},"@{select}<click>":function(e){var t=this.viewOptions;t.submit&&t.submit({keyword:this.updater.get("keyword"),selectedItems:[e.params.item]})},"@{checkAll}<click>":function(e){var t=e.params.checked,a=this.updater.get("parents");a.forEach(function(e){e.list.forEach(function(e){e.disabled||(e.selected=t)})}),this.updater.digest({parents:a})},"@{check}<change>":function(e){var t=e.params.parentIndex,a=e.params.itemIndex,i=this.updater.get("parents");i[t].list[a].selected=!i[t].list[a].selected,this.updater.digest({parents:i})},"@{submit}<click>":function(e){var t=this.viewOptions,a=this.updater.get(),i=a.parents,r=a.keyword,n=[];i.forEach(function(e){e.list.forEach(function(e){e.selected&&n.push(e)})}),t.submit&&t.submit({keyword:r,selectedItems:n})},"@{cancel}<click>":function(e){var t=this.viewOptions;t.cancel&&t.cancel()},"@{fn.search}":function(e,t){var a,i=this.updater.get().parents;if(e){a=!0;var r=(e+"").toLocaleLowerCase();i.forEach(function(e){var t=!0;e.list.forEach(function(e){var a=(e.text+"").toLocaleLowerCase();e.hide=a.indexOf(r)<0,t=t&&e.hide}),e.hide=t,a=a&&t})}else a=!1,i.forEach(function(e){e.hide=!1,e.list.forEach(function(e){e.hide=!1})});t({parents:i,allHide:a})},"@{search}<keyup,paste>":function(e){var t=this;clearTimeout(t["@{search.delay.timer}"]);var a=$.trim(e.eventTarget.value);t.updater.set({keyword:a}),t["@{search.delay.timer}"]=setTimeout(t.wrapAsync(function(){a!=t["@{last.value}"]&&t["@{fn.search}"](t["@{last.value}"]=a,function(e){t.updater.digest(e)})}),250)},"@{stop}<change,focusin,focusout>":function(e){e.stopPropagation()}})});