define("mx-main/steps",["magix"],(e,t,n)=>{var r=e("magix"),i=r.Router,a=r.Vframe;r.applyStyle("_zs_gallery_mx-main_step_","._zs_gallery_mx-main_step_-step-error {\n  position: relative;\n  padding-top: 10px;\n  padding-left: 20px;\n  color: var(--color-red);\n}\n._zs_gallery_mx-main_step_-step-error ._zs_gallery_mx-main_step_-error-icon {\n  position: absolute;\n  left: 0;\n  top: 10px;\n  color: var(--color-red);\n}\n"),n.exports=r.View.extend({init:function(e){this.updater.set({alreadyStep:e.alreadyStep||1,stepInfos:e.stepInfos||[],viewId:this.id,viewHeight:$(window).height()}),this.observeLocation(["stepIndex"])},render:function(){var e=this.updater,t=+e.get("alreadyStep"),n=e.get("stepInfos"),r=i.parse().params,a=+(r.stepIndex||1);a>t&&(t=a);n.forEach(function(e,r){var i=r+1;e.index=i,e.locked=i>t,e.lineOn=i<t,e.current=i==a,e.icon=e.icon||'<span class="fontsize-16">'+e.index+"</span>";var p="";i>1&&!n[r-1].locked&&(p=e.prevTip||"返回上一步"),e.prevTip=p;var s="";i<n.length&&(s=e.nextTip||"下一步"),e.nextTip=s}),r.stepIndex+""==a+""?this.updater.digest({alreadyStep:t,stepInfos:n,curStepInfo:n[a-1],curStepIndex:a}):i.to({stepIndex:a})},"prev<click>":function(e){var t=this.updater.get("curStepIndex");i.to({stepIndex:+t-1})},"nav<click>":function(e){var t=e.params.stepIndex;i.to({stepIndex:t})},next:function(e){var t=this.updater.get("curStepIndex");e.stepIndex=+t+1,i.to(e)},"next<click>":function(e){var t=this,n=t.updater.get("curStepInfo");a.get(t.id+"_cur_content").invoke("check").then(function(e){var r=$("#"+t.id+"_error");e.ok?(r.html(""),n.nextFn?n.nextFn(e.remain,function(e){t.next(e)}):t.next({})):r.html('<div class="_zs_gallery_mx-main_step_-step-error"><i class="mc-iconfont _zs_gallery_mx-main_step_-error-icon">&#xe6ad;</i>'+e.msg+"</div>")})}})});