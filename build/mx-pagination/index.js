define("mx-pagination/index",["magix","$","../mx-medusa/util","mx-dropdown/index"],(i,n,e)=>{i("mx-dropdown/index");var a=i("magix"),_=i("$"),t=[10,20,30,40],l=i("../mx-medusa/util");a.applyStyle("_zs_gallery_mx-pagination_index_","._zs_gallery_mx-pagination_index_-pager {\n  color: #666;\n}\n._zs_gallery_mx-pagination_index_-pager ._zs_gallery_mx-pagination_index_-infos {\n  float: left;\n  line-height: var(--input-small-height);\n}\n._zs_gallery_mx-pagination_index_-pager ._zs_gallery_mx-pagination_index_-infos ._zs_gallery_mx-pagination_index_-pager-dropdown {\n  min-width: 66px;\n}\n._zs_gallery_mx-pagination_index_-pager ._zs_gallery_mx-pagination_index_-num-items {\n  display: inline-block;\n}\n._zs_gallery_mx-pagination_index_-pager ._zs_gallery_mx-pagination_index_-num-items ._zs_gallery_mx-pagination_index_-num-item {\n  float: left;\n  line-height: var(--input-small-height);\n}\n._zs_gallery_mx-pagination_index_-pager ._zs_gallery_mx-pagination_index_-num-items ._zs_gallery_mx-pagination_index_-num-item ._zs_gallery_mx-pagination_index_-num-item-inner,\n._zs_gallery_mx-pagination_index_-pager ._zs_gallery_mx-pagination_index_-num-items ._zs_gallery_mx-pagination_index_-num-item ._zs_gallery_mx-pagination_index_-num-item-icon {\n  display: block;\n  min-width: var(--input-small-height);\n  height: var(--input-small-height);\n  margin: 0 2px;\n  font-size: var(--font-size);\n  border-radius: var(--border-radius);\n  text-align: center;\n}\n._zs_gallery_mx-pagination_index_-pager ._zs_gallery_mx-pagination_index_-num-items ._zs_gallery_mx-pagination_index_-num-item ._zs_gallery_mx-pagination_index_-num-item-inner {\n  color: #666;\n}\n._zs_gallery_mx-pagination_index_-pager ._zs_gallery_mx-pagination_index_-num-items ._zs_gallery_mx-pagination_index_-num-item ._zs_gallery_mx-pagination_index_-num-item-inner:hover {\n  color: #333;\n}\n._zs_gallery_mx-pagination_index_-pager ._zs_gallery_mx-pagination_index_-num-items ._zs_gallery_mx-pagination_index_-num-item ._zs_gallery_mx-pagination_index_-num-item-inner._zs_gallery_mx-pagination_index_-active {\n  color: #333;\n  background-color: #eee;\n}\n._zs_gallery_mx-pagination_index_-pager ._zs_gallery_mx-pagination_index_-num-items ._zs_gallery_mx-pagination_index_-num-item ._zs_gallery_mx-pagination_index_-num-item-inner._zs_gallery_mx-pagination_index_-notallowed {\n  background: transparent;\n  cursor: not-allowed;\n}\n._zs_gallery_mx-pagination_index_-pager ._zs_gallery_mx-pagination_index_-num-items ._zs_gallery_mx-pagination_index_-num-item ._zs_gallery_mx-pagination_index_-num-item-icon {\n  color: #999;\n  line-height: calc(var(--input-small-height) + 2px);\n}\n._zs_gallery_mx-pagination_index_-pager ._zs_gallery_mx-pagination_index_-num-items ._zs_gallery_mx-pagination_index_-num-item ._zs_gallery_mx-pagination_index_-num-item-icon:hover {\n  color: #666;\n}\n._zs_gallery_mx-pagination_index_-pager ._zs_gallery_mx-pagination_index_-num-items ._zs_gallery_mx-pagination_index_-num-item ._zs_gallery_mx-pagination_index_-num-item-icon._zs_gallery_mx-pagination_index_-notallowed {\n  color: #eee;\n  background: transparent;\n  cursor: not-allowed;\n}\n._zs_gallery_mx-pagination_index_-pager ._zs_gallery_mx-pagination_index_-quick {\n  float: right;\n  margin-left: 15px;\n}\n._zs_gallery_mx-pagination_index_-pager ._zs_gallery_mx-pagination_index_-quick ._zs_gallery_mx-pagination_index_-quick-input {\n  width: 40px;\n  text-align: center;\n}\n"),e.exports=a.View.extend({tmpl:function(i,n,e,a,_,t,l,s){if(e||(e=i),!_){var r={"&":"amp","<":"lt",">":"gt",'"':"#34","'":"#39","`":"#96"},g=/[&<>"'`]/g,m=function(i){return"&"+r[i]+";"};_=function(i){return""+(null==i?"":i)},a=function(i){return _(i).replace(g,m)}}if(!t){var p={"!":"%21","'":"%27","(":"%28",")":"%29","*":"%2A"},o=function(i){return p[i]},x=/[!')(*]/g;t=function(i){return encodeURIComponent(_(i)).replace(x,o)}}if(!s){var d=/[\\'"]/g;s=function(i){return _(i).replace(d,"\\$&")}}l||(l=function(i,n,e,a){for(a=i[y];--a;)if(i[e=y+a]===n)return e;return i[e=y+i[y]++]=n,e});var c,u,z,y="",f="",h=i.simplify,v=i.mini,w=i.tipOffset,k=i.tipTotal,P=i.tipPer,b=i.sizesChange,j=i.sizesPlacement,T=i.sizes,$=i.size,I=i.tipUnit,J=i.jump,U=i.tipJumpTo,q=i.next,C=i.viewId,M=i.tipJumpUnit,S=i.hideTotal,O=i.page,D=i.pages,N=i.start,A=i.end;try{if(f+='<div mxv mxa="_zs_galleryc-:_" class="clearfix _zs_gallery_mx-pagination_index_-pager">',c="<%if (!simplify && !mini) {%>",h||v||(f+='<div mxv mxa="_zs_galleryc-:a" class="_zs_gallery_mx-pagination_index_-infos"><span>'+(c="<%!tipOffset%>",_(w))+"</span><span>"+(c="<%!tipTotal%>",_(k))+"，</span><span>"+(c="<%!tipPer%>",_(P))+"</span>",c="<%if (sizesChange) {%>",b?(f+='<div mxv="sizes,size" class="ml10 mr10 _zs_gallery_mx-pagination_index_-pager-dropdown" mx-change="'+n+'@{changeSize}()" mx-view="mx-dropdown/index?small=true&placement='+(c="<%!$eu(sizesPlacement)%>",t(j))+"&list="+(c="<%@sizes%>",l(e,T))+"&selected="+(c="<%@size%>",l(e,$))+'"></div>',c="<%}    else {%>"):(f+=" "+(c="<%=size%>",a($))+" ",c="<%}%>"),f+="<span>"+(c="<%!tipUnit%>",_(I))+"</span></div>",c="<%}%>"),f+=" ",c="<%if (!jump) {%>",J||(f+='<div mxv mxa="_zs_galleryc-:b" class="_zs_gallery_mx-pagination_index_-quick"><span mxa="_zs_galleryc-:c" class="mr5">'+(c="<%=tipJumpTo%>",a(U))+'</span><input class="input input-small _zs_gallery_mx-pagination_index_-quick-input mr5" value="',z=27,u="=next",f+=(c="<%=next%>",a(q)+'" id="'),z=27,u="=viewId",f+=(c="<%=viewId%>",a(C)+'_jump_input" mx-change="'+n+'@{stop}()" mx-focusin="'+n+'@{stop}()" mx-focusout="'+n+'@{stop}()"/><span mxa="_zs_galleryc-:d" class="mr10">'+(c="<%=tipJumpUnit%>",a(M))+'</span><a mxs="_zs_galleryc-:_" href="javascript:;" class="btn btn-small" mx-click="'+n+'@{jump}()">跳转</a></div>'),c="<%}%>"),f+='<ul class="clearfix _zs_gallery_mx-pagination_index_-num-items" ',c="<%if (!hideTotal) {%>",S||(f+=' style="float: right;" ',c="<%}%>"),f+='><li mxa="_zs_galleryc-:e" class="_zs_gallery_mx-pagination_index_-num-item"><a class="mc-iconfont _zs_gallery_mx-pagination_index_-num-item-icon ',c="<%if (page == 1) {%>",1==O&&(f+="_zs_gallery_mx-pagination_index_-notallowed",c="<%}%>"),f+='" href="#" mx-click="'+n+"",c="<%if (page > 1) {%>",O>1?(f+="@{toPage}({page:"+(c="<%=page - 1%>",a(O-1))+"})",c="<%}else {%>"):(f+="@{prevent}()",c="<%}%>"),f+='">&#xe61e;</a></li>',c="<%if (mini) {%>",v)f+='<li mxa="_zs_galleryc-:f" class="_zs_gallery_mx-pagination_index_-num-item">'+(c="<%=page%>",a(O))+" / "+(c="<%=pages%>",a(D))+"</li>",c="<%}else {%>";else{f+=" ",c="<%if (start > 1) {%>",N>1&&(f+='<li mxs="_zs_galleryc-:a" class="_zs_gallery_mx-pagination_index_-num-item"><a class="_zs_gallery_mx-pagination_index_-num-item-inner" href="#" mx-click="'+n+'@{toPage}({page:1})">1</a></li>',c="<%}%>"),f+=" ",c="<%if (start > 2) {%>",N>2&&(f+='<li mxs="_zs_galleryc-:b" class="_zs_gallery_mx-pagination_index_-num-item"><a class="_zs_gallery_mx-pagination_index_-num-item-inner _zs_gallery_mx-pagination_index_-notallowed" href="#" mx-click="'+n+'@{prevent}()">...</a></li>',c="<%}%>"),f+=" ",c="<%for (var i = start; i <= end; i++) {%>";for(var E=N;E<=A;E++)f+='<li mxa="_zs_galleryc-:g" class="_zs_gallery_mx-pagination_index_-num-item"><a class="_zs_gallery_mx-pagination_index_-num-item-inner ',c="<%if (i == page) {%>",E==O&&(f+="_zs_gallery_mx-pagination_index_-active",c="<%}%>"),f+='" href="#" mx-click="'+n+"@{toPage}({page:"+(c="<%=i%>",a(E))+'})">'+(c="<%=i%>",a(E))+"</a></li>",c="<%}%>";f+=" ",c="<%if (end + 2 <= pages) {%>",A+2<=D&&(f+='<li mxs="_zs_galleryc-:b" class="_zs_gallery_mx-pagination_index_-num-item"><a class="_zs_gallery_mx-pagination_index_-num-item-inner _zs_gallery_mx-pagination_index_-notallowed" href="#" mx-click="'+n+'@{prevent}()">...</a></li>',c="<%}%>"),f+=" ",c="<%if (end < pages) {%>",A<D&&(f+='<li mxa="_zs_galleryc-:h" class="_zs_gallery_mx-pagination_index_-num-item"><a class="_zs_gallery_mx-pagination_index_-num-item-inner" href="#" mx-click="'+n+"@{toPage}({page:"+(c="<%=pages%>",a(D))+'})">'+(c="<%=pages%>",a(D))+"</a></li>",c="<%}%>"),f+=" ",c="<%}%>"}f+='<li mxa="_zs_galleryc-:i" class="_zs_gallery_mx-pagination_index_-num-item"><a class="mc-iconfont _zs_gallery_mx-pagination_index_-num-item-icon rotate180 ',c="<%if (page == pages) {%>",O==D&&(f+="_zs_gallery_mx-pagination_index_-notallowed",c="<%}%>"),f+='" href="#" mx-click="'+n+"",c="<%if (page < pages) {%>",O<D?(f+="@{toPage}({page:"+(c="<%=page + 1%>",a(O+1))+"})",c="<%}else {%>"):(f+="@{prevent}()",c="<%}%>"),f+='">&#xe61e;</a></li>',c="<%if (!hideTotal) {%>",S||(f+='<li mxa="_zs_galleryc-:j" class="_zs_gallery_mx-pagination_index_-num-item ml10">'+(c="<%!tipTotal%>",_(k))+"</li>",c="<%}%>"),f+="</ul></div>"}catch(i){var R="render view error:"+(i.message||i);throw u&&(R+="\r\n\tsrc art:{{"+u+"}}\r\n\tat line:"+z),R+="\r\n\t"+(u?"translate to:":"expr:"),R+=c+"\r\n\tat file:mx-pagination/index.html"}return f},init:function(i){this.updater.snapshot(),this.assign(i)},assign:function(i){var n=this,e=n.updater.altered(),a=[];try{a=JSON.parse(i.sizes)}catch(n){a=i.sizes}a&&a.length||(a=t);var _=!0;/^false$/i.test(i.sizesChange)&&(_=!1);var l,s=i.size||40;return l=i.page?i.page:i.offset?parseInt(i.offset/s)+1:1,n.updater.set({viewId:n.id,step:i.step||5,simplify:i.simplify+""=="true",mini:i.mini+""=="true",hideTotal:i.hideTotal+""=="true",jump:i.jump+""=="false",total:0|i.total||0,page:l,size:s,sizesChange:_,sizesPlacement:i.sizesPlacement||"bottom",sizes:a}),e||(e=n.updater.altered()),!!e&&(n.updater.snapshot(),!0)},render:function(){var i=this["@{cal.page.info}"]();this.updater.digest(i)},"@{cal.page.info}":function(){var i=this.updater.get(),n=i.total,e=0|i.page,a=Math.ceil((i.total||1)/i.size);e>a&&(e=a);var _,t=0|i.step,s=t/2|0,r=Math.max(1,e-s),g=Math.min(a,r+t-1);(r=Math.max(1,g-t+1))<=2&&g+(_=3-r)<a&&(g+=_),g+2>a&&r-(_=2-(a-g))>1&&(r-=_),3==r&&(r-=1),g+2==a&&(g+=1);var m=(e-1)*i.size+1,p=Math.min(i.total,e*i.size);0==n&&(m=p=0);var o=e+1;return o>a&&(o=a),{pages:a,offsetStart:m,offsetEnd:p,page:e,start:r,end:g,next:o,tipOffset:l["pager.offset"].replace("${min}",""+m).replace("${max}",""+p),tipTotal:l["pager.total"].replace("${total}",""+n),tipPer:l["pager.per.page"],tipUnit:l["pager.unit"],tipJumpTo:l["pager.jump.to"],tipJumpUnit:l["pager.jump.unit"]}},"@{fire.event}":function(){var i=_("#"+this.id),n=this.updater.get(),e=+n.page,a=+n.size,t=(e-1)*a;i.trigger({type:"change",page:e,size:a,offset:t})},"@{toPage}<click>":function(i){i.preventDefault();this.updater.set(i.params),this.render(),this["@{fire.event}"]()},"@{changeSize}<change>":function(i){i.stopPropagation();this.updater.set({size:i.value}),this.render(),this["@{fire.event}"]()},"@{stop}<change,focusin,focusout>":function(i){i.stopPropagation()},"@{jump}<click>":function(i){i.stopPropagation();var n=+_("#"+this.id+"_jump_input").val();Number.isInteger(n)&&(this.updater.set({page:n}),this.render(),this["@{fire.event}"]())},"@{prevent}<click>":function(i){i.preventDefault()}})});