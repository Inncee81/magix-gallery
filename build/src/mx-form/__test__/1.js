define("mx-form/__test__/1",["magix","mx-form/index","mx-form/validator","__test__/example","$","mx-copy/index","__test__/hl"],(t,l,a)=>{t("mx-copy/index"),t("__test__/hl");var e=t("magix"),i=t("mx-form/index"),n=t("mx-form/validator"),s=t("__test__/example");t("$");e.applyStyle("_zs_galleryO","._zs_galleryfq{box-shadow:0 2px 4px rgba(51,51,51,.08);border:1px solid #eee}._zs_galleryfr{margin-bottom:20px;border:1px solid #e6e6e6}._zs_galleryfs tr._zs_galleryft th{height:68px;background-color:#fff;border-bottom:1px solid #e6e6e6}._zs_galleryfs tr._zs_galleryft th ._zs_galleryfu{position:relative}._zs_galleryfs tr._zs_galleryft th ._zs_galleryfu ._zs_galleryfv{position:absolute;top:0;left:-80px;width:70px;height:28px;line-height:28px;text-align:right}"),a.exports=s.extend({tmpl:function(t,l,a,e,i,n,s,r){if(a||(a=t),!i){var _={"&":"amp","<":"lt",">":"gt",'"':"#34","'":"#39","`":"#96"},d=/[&<>"'`]/g,c=function(t){return"&"+_[t]+";"};i=function(t){return""+(null==t?"":t)},e=function(t){return i(t).replace(d,c)}}if(!n){var g={"!":"%21","'":"%27","(":"%28",")":"%29","*":"%2A"},x=function(t){return g[t]},o=/[!')(*]/g;n=function(t){return encodeURIComponent(i(t)).replace(o,x)}}if(!r){var m=/[\\'"]/g;r=function(t){return i(t).replace(m,"\\$&")}}s||(s=function(t,l,a,e){for(e=t[h];--e;)if(t[a=h+e]===l)return a;return t[a=h+t[h]++]=l,a});var h="",u="",p=t.viewId,v=t.batchDiscount,y=t.batRules,f=t.list,z=t.rules,b=t.text1,w=t.text3,k=t.text2;u+='<div mxv mxa="_zs_gallerya?:_" class="_zs_galleryf"><div mxv mxa="_zs_gallerya?:a" class="_zs_galleryh"><div mxs="_zs_gallerya?:_" class="clearfix mb20 lh22"><div class="fl color-9">以下示例：</div><div class="fl"><div>填写1-300的整数，小于50给警告提示</div><div>双向绑定可以用&传递完整对象&#123;&#123;:value&rules&#125;&#125;，rules：object</div></div></div><div mxv mxa="_zs_gallerya?:b" class="_zs_galleryfr"><table mxv mxa="_zs_gallerya?:c" class="table"><thead mxv mxa="_zs_gallerya?:d" class="_zs_galleryfs"><tr mxs="_zs_gallerya?:a"><th>name</th><th width="200">出价</th><th width="200">link</th><th width="200">value</th></tr><tr mxv mxa="_zs_gallerya?:e" class="_zs_galleryft"><th mxs="_zs_gallerya?:b"></th><th mxv mxa="_zs_gallerya?:f" colspan="4"><div mxv mxa="_zs_gallerya?:g" class="_zs_galleryfu"><span mxs="_zs_gallerya?:c" class="_zs_galleryfv">批量出价</span><input mxe="'+l+"_0\" mxc=\"[{p:'batchDiscount',f:'"+s(a,y)+'\'}]" class="input input-small w80" id="'+e(p)+'_batch_input" value="'+e(v)+'" mx-focusout="'+l+'batch()"/><a mxs="_zs_gallerya?:d" href="javascript:;" class="btn btn-small ml10" mx-click="'+l+'batch()">应用</a></div></th></tr></thead><tbody mxv>';for(var D=0,V=f.length;D<V;D++){var j=f[D];u+="<tr mxv><td>"+e(j.name)+'</td><td mxv><input mxe="'+l+"_1_"+e(D)+'" mxc="[{p:\'list.'+e(D)+".discount',f:'"+s(a,z)+'\'}]" class="input input-small w80" value="'+e(j.discount)+'"/></td><td>'+e(j.link)+"</td><td>"+e(j.value)+"</td></tr>"}return u+='</tbody></table></div></div><div mxa="_zs_gallerya?:h" class="clearfix"><div mxa="_zs_gallerya?:i" class="_zs_galleryc"><div mxa="_zs_gallerya?:j" class="_zs_galleryi"><div mxs="_zs_gallerya?:e" class="_zs_galleryg">HTML Code</div><div class="_zs_galleryj" mx-success="'+l+'done({id:1})" mx-view="mx-copy/index?copyNode='+n(p)+'_text_1"><span mxa="_zs_gallerya?:k" class="_zs_galleryl">'+i(b)+'</span><i mxs="_zs_gallerya?:f" class="mc-iconfont _zs_galleryk">&#xe610;</i></div><pre mx-view="__test__/hl" id="'+e(p)+'_text_1">\n&lt;table class="table"&gt;\n    &lt;thead class="fixed-head"&gt;\n        &lt;tr&gt;\n            &lt;th&gt;name&lt;/th&gt;\n            &lt;th width="200"&gt;出价&lt;/th&gt;\n            &lt;th width="200"&gt;link&lt;/th&gt;\n            &lt;th width="200"&gt;value&lt;/th&gt;\n        &lt;/tr&gt;\n        &lt;tr class="batch-oper"&gt;\n            &lt;th&gt;&lt;/th&gt;\n            &lt;th colspan="4"&gt;\n                &lt;div class="batch-input"&gt;\n                    &lt;span class="batch-input-text"&gt;批量出价&lt;/span&gt;\n                    &lt;input type="text" class="input input-small w80"\n                        id="&#123;&#123;=viewId&#125;&#125;_batch_input" \n                        value="&#123;&#123;:batchDiscount&batRules&#125;&#125;"\n                        mx-focusout="batch()"/&gt;\n                    &lt;a href="javascript:;" class="btn btn-small ml10" mx-click="batch()"&gt;应用&lt;/a&gt;\n                &lt;/div&gt;\n            &lt;/th&gt;\n        &lt;/tr&gt;\n    &lt;/thead&gt;\n    &lt;tbody&gt;\n        &#123;&#123;each list as item index&#125;&#125;\n            &lt;tr&gt;\n                &lt;td&gt;&#123;&#123;=item.name&#125;&#125;&lt;/td&gt;\n                &lt;td&gt;\n                    &lt;input type="text" class="input input-small w80"\n                        value="&#123;&#123;:item.discount&rules&#125;&#125;"/&gt;\n                &lt;/td&gt;\n                &lt;td&gt;&#123;&#123;=item.link&#125;&#125;&lt;/td&gt;\n                &lt;td&gt;&#123;&#123;=item.value&#125;&#125;&lt;/td&gt;\n            &lt;/tr&gt;\n        &#123;&#123;/each&#125;&#125;\n    &lt;/tbody&gt;\n&lt;/table&gt;</pre></div><div mxa="_zs_gallerya?:l" class="_zs_galleryi"><div mxs="_zs_gallerya?:g" class="_zs_galleryg">CSS</div><div class="_zs_galleryj" mx-success="'+l+'done({id:3})" mx-view="mx-copy/index?copyNode='+n(p)+'_text_3"><span mxa="_zs_gallerya?:m" class="_zs_galleryl">'+i(w)+'</span><i mxs="_zs_gallerya?:f" class="mc-iconfont _zs_galleryk">&#xe610;</i></div><pre mx-view="__test__/hl" id="'+e(p)+'_text_3">\n@import \'../../mx-style/_vars\';\n\n.fixed-head &#123;\n    tr.batch-oper &#123;\n        th &#123;\n            height: 68px;\n            background-color: #fff;\n            border-bottom: 1px solid @color-border;\n\n            .batch-input &#123;\n                position: relative;\n\n                .batch-input-text &#123;\n                    position: absolute;\n                    top: 0;\n                    left: -80px;\n                    width: 70px;\n                    height: 28px;\n                    line-height: 28px;\n                    text-align: right;\n                &#125;\n            &#125;\n        &#125;\n    &#125;\n&#125;</pre></div></div><div mxa="_zs_gallerya?:n" class="_zs_galleryi _zs_galleryc _zs_galleryd"><div mxs="_zs_gallerya?:h" class="_zs_galleryg">JS Code</div><div class="_zs_galleryj" mx-success="'+l+'done({id:2})" mx-view="mx-copy/index?copyNode='+n(p)+'_text_2"><span mxa="_zs_gallerya?:o" class="_zs_galleryl">'+i(k)+'</span><i mxs="_zs_gallerya?:f" class="mc-iconfont _zs_galleryk">&#xe610;</i></div><pre mx-view="__test__/hl" id="'+e(p)+"_text_2\">\nlet Magix = require('magix');\nlet Form = require('@../index');\nlet Validator = require('@../validator');\nlet $ = require('$');\nMagix.applyStyle('@index.less');\n\nmodule.exports = Magix.View.extend(&#123;\n    tmpl: '@index.html',\n    mixins: [Form, Validator],\n    render() &#123;\n        let that = this;\n        let list = [];\n        for (var i = 0; i &lt; 3; i++) &#123;\n            list.push(&#123;\n                name: Magix.guid('name-'),\n                link: Magix.guid('link-'),\n                value: Magix.guid('value-')\n            &#125;)\n        &#125;\n\n        let tip = '请填写1-300之间的整数';\n        that.updater.digest(&#123;\n            viewId: that.id,\n            list,\n            batRules: &#123;\n                posint: true,\n                min: [1, tip],\n                max: [300, tip]\n            &#125;,\n            rules: &#123;\n                warn: &#123;\n                    min: [50, '低于50可能影响效果，建议提高']\n                &#125;,\n                required: [true, tip],\n                posint: true,\n                min: [1, tip],\n                max: [300, tip]\n            &#125;\n        &#125;);\n    &#125;,\n    'batch&lt;focusout,click&gt;'(e) &#123;\n        let that = this;\n\n        // 校验批量的按钮是否符合规则\n        // 符合规则再往下走\n        let check = that.isValid(&#123;\n            element: '#' + that.id + '_batch_input'\n        &#125;)\n\n        if (!check) &#123;\n            return;\n        &#125;\n\n        let data = that.updater.get();\n        let remain = that.fromKeys(data, 'batchDiscount');\n        let batchDiscount = remain.batchDiscount;\n        if (!batchDiscount) &#123;\n            return;\n        &#125;\n\n        let list = that.updater.get('list');\n        list.forEach(item =&gt; &#123;\n            item.discount = batchDiscount;\n        &#125;)\n        that.updater.digest(&#123;\n            list\n        &#125;)\n\n        // 可能批量校验的规则和单个的不一致\n        // 此处调用isValid校验整个view\n        that.isValid();\n    &#125;\n&#125;);</pre></div></div></div>"},mixins:[i,n],render:function(){for(var t=[],l=0;l<3;l++)t.push({name:e.guid("name-"),link:e.guid("link-"),value:e.guid("value-")});var a="请填写1-300之间的整数";this.updater.digest({viewId:this.id,list:t,batRules:{posint:!0,min:[1,a],max:[300,a]},rules:{warn:{min:[50,"低于50可能影响效果，建议提高"]},required:[!0,a],posint:!0,min:[1,a],max:[300,a]}})},"batch<focusout,click>":function(t){if(this.isValid({element:"#"+this.id+"_batch_input"})){var l=this.updater.get(),a=this.fromKeys(l,"batchDiscount").batchDiscount;if(a){var e=this.updater.get("list");e.forEach(function(t){t.discount=a}),this.updater.digest({list:e}),this.isValid()}}}})});