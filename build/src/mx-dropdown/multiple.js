define("mx-dropdown/multiple",["magix","$","../mx-monitor/index","../mx-medusa/util"],(e,a,t)=>{var r=e("magix"),l=e("$"),s=e("../mx-monitor/index"),o=e("../mx-medusa/util");r.applyStyle("_zs_galleryk",'._zs_gallerydo{box-shadow:0 2px 4px rgba(51,51,51,.08);border:1px solid #eee}@keyframes _zs_galleryc{0%{transform:translateY(-20%);-ms-transform:translateY(-20%);-moz-transform:translateY(-20%);-webkit-transform:translateY(-20%);-o-transform:translateY(-20%);opacity:0}to{transform:translate(0);-ms-transform:translate(0);-moz-transform:translate(0);-webkit-transform:translate(0);-o-transform:translate(0);opacity:1}}@-webkit-keyframes _zs_galleryc{0%{transform:translateY(-20%);-ms-transform:translateY(-20%);-moz-transform:translateY(-20%);-webkit-transform:translateY(-20%);-o-transform:translateY(-20%);opacity:0}to{transform:translate(0);-ms-transform:translate(0);-moz-transform:translate(0);-webkit-transform:translate(0);-o-transform:translate(0);opacity:1}}@keyframes _zs_galleryd{0%{transform:translateY(20%);-ms-transform:translateY(20%);-moz-transform:translateY(20%);-webkit-transform:translateY(20%);-o-transform:translateY(20%);opacity:0}to{transform:translate(0);-ms-transform:translate(0);-moz-transform:translate(0);-webkit-transform:translate(0);-o-transform:translate(0);opacity:1}}@-webkit-keyframes _zs_galleryd{0%{transform:translateY(20%);-ms-transform:translateY(20%);-moz-transform:translateY(20%);-webkit-transform:translateY(20%);-o-transform:translateY(20%);opacity:0}to{transform:translate(0);-ms-transform:translate(0);-moz-transform:translate(0);-webkit-transform:translate(0);-o-transform:translate(0);opacity:1}}@keyframes _zs_gallerye{0%{transform:translate(0);-ms-transform:translate(0);-moz-transform:translate(0);-webkit-transform:translate(0);-o-transform:translate(0)}25%{transform:translateY(-15%);-ms-transform:translateY(-15%);-moz-transform:translateY(-15%);-webkit-transform:translateY(-15%);-o-transform:translateY(-15%)}75%{transform:translateY(15%);-ms-transform:translateY(15%);-moz-transform:translateY(15%);-webkit-transform:translateY(15%);-o-transform:translateY(15%)}to{transform:translate(0);-ms-transform:translate(0);-moz-transform:translate(0);-webkit-transform:translate(0);-o-transform:translate(0)}}@-webkit-keyframes _zs_gallerye{0%{transform:translate(0);-ms-transform:translate(0);-moz-transform:translate(0);-webkit-transform:translate(0);-o-transform:translate(0)}25%{transform:translateY(-15%);-ms-transform:translateY(-15%);-moz-transform:translateY(-15%);-webkit-transform:translateY(-15%);-o-transform:translateY(-15%)}75%{transform:translateY(15%);-ms-transform:translateY(15%);-moz-transform:translateY(15%);-webkit-transform:translateY(15%);-o-transform:translateY(15%)}to{transform:translate(0);-ms-transform:translate(0);-moz-transform:translate(0);-webkit-transform:translate(0);-o-transform:translate(0)}}._zs_gallerydp{position:relative;width:100%;padding:0 25px 0 10px;border-radius:4px;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}._zs_gallerydp ._zs_gallerydq{display:block;width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}._zs_gallerydp ._zs_gallerydq._zs_gallerydr{color:#999}._zs_gallerydp ._zs_galleryds{position:absolute;right:0;top:50%;width:28px;height:28px;font-size:28px;line-height:28px;margin-top:-14px;color:#ccc;transition:top .25s,-webkit-transform .25s;transition:transform .25s,top .25s;transition:transform .25s,top .25s,-webkit-transform .25s}._zs_gallerydp._zs_gallerydt ._zs_galleryds{-webkit-transform:rotate(180deg);transform:rotate(180deg)}._zs_galleryar{display:block;width:100%;padding:0 8px;cursor:pointer;height:26px;line-height:26px;border-radius:4px}._zs_galleryar:hover{background-color:#f0f0f0}._zs_galleryar._zs_galleryas,._zs_galleryar._zs_galleryas:active,._zs_galleryar._zs_galleryas:focus,._zs_galleryar._zs_galleryas:hover{color:#fff;background-color:#4d7fff}._zs_gallerydu ._zs_galleryar:hover{background-color:transparent}._zs_gallerydv{display:none;position:absolute;left:0;z-index:99;min-width:100%;max-width:200%;border-radius:4px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:#fff;box-shadow:0 2px 4px rgba(51,51,51,.08);border:1px solid #eee}._zs_gallerydv ._zs_gallerydw{width:100%;padding:10px 10px 0}._zs_gallerydv ._zs_gallerydx{padding:8px 10px;overflow:auto}._zs_gallerydv ._zs_gallerydx ._zs_gallerydy{padding:2px 0}._zs_gallerydv ._zs_gallerydx ._zs_gallerydz{color:#999;cursor:default}._zs_gallerydv._zs_gallerydA{top:100%;margin-top:10px}._zs_gallerydv._zs_gallerydA._zs_gallerydt{display:block;-webkit-animation:_zs_galleryc .25s ease-out;animation:_zs_galleryc .25s ease-out;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}._zs_gallerydv._zs_gallerydB{bottom:100%;margin-bottom:10px}._zs_gallerydv._zs_gallerydB._zs_gallerydt{display:block;-webkit-animation:_zs_galleryd .25s ease-out;animation:_zs_galleryd .25s ease-out;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}._zs_gallerydC{min-width:600px}._zs_gallerydC ._zs_gallerydw{width:200px}._zs_gallerydC ._zs_gallerydx ._zs_gallerydD{margin-bottom:10px}._zs_gallerydC ._zs_gallerydx ._zs_gallerydD ._zs_gallerydy{float:left;width:25%}._zs_gallerydE,[mx-view*="mx-dropdown/index"],[mx-view*="mx-dropdown/multiple"]{position:relative;display:inline-block;min-width:100px;height:32px;line-height:30px;vertical-align:middle;background-color:#fff;outline:0}._zs_gallerydE ._zs_gallerydp,[mx-view*="mx-dropdown/index"] ._zs_gallerydp,[mx-view*="mx-dropdown/multiple"] ._zs_gallerydp{transition:all .25s;border:1px solid #e6e6e6;color:#999}._zs_gallerydE:hover ._zs_gallerydp,[mx-view*="mx-dropdown/index"]:hover ._zs_gallerydp,[mx-view*="mx-dropdown/multiple"]:hover ._zs_gallerydp{border-color:#ccc;color:#666}._zs_gallerydE[mx-disabled],._zs_gallerydE[mx-disabled]:hover,[mx-view*="mx-dropdown/index"][mx-disabled],[mx-view*="mx-dropdown/index"][mx-disabled]:hover,[mx-view*="mx-dropdown/multiple"][mx-disabled],[mx-view*="mx-dropdown/multiple"][mx-disabled]:hover{cursor:not-allowed}._zs_gallerydE[mx-disabled] ._zs_gallerydp,._zs_gallerydE[mx-disabled]:hover ._zs_gallerydp,[mx-view*="mx-dropdown/index"][mx-disabled] ._zs_gallerydp,[mx-view*="mx-dropdown/index"][mx-disabled]:hover ._zs_gallerydp,[mx-view*="mx-dropdown/multiple"][mx-disabled] ._zs_gallerydp,[mx-view*="mx-dropdown/multiple"][mx-disabled]:hover ._zs_gallerydp{border-color:#e6e6e6;color:#999;background-color:#eee}._zs_gallerydE[mx-disabled] ._zs_gallerydp ._zs_galleryds,._zs_gallerydE[mx-disabled]:hover ._zs_gallerydp ._zs_galleryds,[mx-view*="mx-dropdown/index"][mx-disabled] ._zs_gallerydp ._zs_galleryds,[mx-view*="mx-dropdown/index"][mx-disabled]:hover ._zs_gallerydp ._zs_galleryds,[mx-view*="mx-dropdown/multiple"][mx-disabled] ._zs_gallerydp ._zs_galleryds,[mx-view*="mx-dropdown/multiple"][mx-disabled]:hover ._zs_gallerydp ._zs_galleryds{color:#ccc}._zs_gallerydF{padding:10px 10px 0;line-height:16px}._zs_gallerydF ._zs_gallerydG{padding-right:20px;color:#999}._zs_gallerydF ._zs_gallerydG:hover{color:#4d7fff}._zs_gallerydH{padding:10px;border-top:1px solid #e6e6e6}'),t.exports=r.View.extend({tmpl:function(e,a,t,r,l,s,o,n){if(t||(t=e),!l){var i={"&":"amp","<":"lt",">":"gt",'"':"#34","'":"#39","`":"#96"},d=/[&<>"'`]/g,_=function(e){return"&"+i[e]+";"};l=function(e){return""+(null==e?"":e)},r=function(e){return l(e).replace(d,_)}}if(!s){var c={"!":"%21","'":"%27","(":"%28",")":"%29","*":"%2A"},m=function(e){return c[e]},p=/[!')(*]/g;s=function(e){return encodeURIComponent(l(e)).replace(p,m)}}if(!n){var g=/[\\'"]/g;n=function(e){return l(e).replace(g,"\\$&")}}var f="",u=e.expand,x=e.selected,y=e.selectedText,v=e.placementClass,h=e.over,z=e.menuStyles,b=e.rList,w=e.searchbox,k=e.text,Y=e.keyword,E=e.needAll,T=e.spm,j=e.viewId,A=e.height,I=e.groups;if(f+='<div class="_zs_gallerydp ',u&&(f+=" _zs_gallerydt "),f+='"><span class="_zs_gallerydq ',""===x&&(f+=" _zs_gallerydr "),f+='">'+r(y)+'</span><span mxs="_zs_galleryaE:_" class="mc-iconfont _zs_galleryds">&#xe692;</span></div><div mxv class="_zs_gallerydv '+r(v)+" ",u&&(f+=" _zs_gallerydt "),f+=" ",h&&(f+=" _zs_gallerydC "),f+='" ',z&&(f+=' style="'+r(z)+'" '),f+=">",b){f+=" ",w&&(f+='<div mxv mxa="_zs_galleryaE:_" class="_zs_gallerydw"><div mxv mxa="_zs_galleryaE:a" class="search-box"><i mxs="_zs_galleryaE:a" class="mc-iconfont search-icon">&#xe651;</i><input class="input search-input" placeholder="'+r(k.search)+'" mx-keyup="'+a+'__e()" mx-paste="'+a+'__e()" mx-change="'+a+'__l()" mx-focusin="'+a+'__l()" mx-focusout="'+a+'__l()" value="'+r(Y)+'"/></div></div>'),f+=" ",E||(f+='<div mxa="_zs_galleryaE:b" class="_zs_gallerydF"><a class="_zs_gallerydG" href="javascript:;" mx-click="'+a+'__bN({checked:true})" data-spm-click="'+r(T)+'">'+r(k.select)+'</a><a class="_zs_gallerydG" href="javascript:;" mx-click="'+a+'__bN({checked:false})" data-spm-click="'+r(T)+'">'+r(k.unselect)+"</a></div>"),f+='<div mxv class="_zs_gallerydx" id="list_'+r(j)+'" style="max-height:'+r(A)+'px;">';for(var C=0,L=I.length;C<L;C++){var B=I[C];f+=" ",B.text&&!B.hide&&(f+=" ",B.all?(f+='<div mxv title="'+r(B.text)+'" class="_zs_gallerydy _zs_gallerydu"><label mxv for="'+r(j)+"_"+r(B.value)+'" class="_zs_galleryar ellipsis"><input type="checkbox" class="checkbox" ',B.checked&&(f+=' checked="true" '),f+=' id="'+r(j)+"_"+r(B.value)+'" mx-focusout="'+a+'__l()" mx-change="'+a+"__bL({groupIndex:'"+r(n(C))+'\'})" data-spm-click="'+r(T)+'"/>'+r(B.text)+"</label></div>"):f+='<div class="_zs_gallerydz ellipsis" title="'+r(B.text)+'">'+r(B.text)+"</div>",f+=" "),f+='<div mxv mxa="_zs_galleryaE:c" class="clearfix _zs_gallerydD">';for(var G=0,D=B.list,O=D.length;G<O;G++){var F=D[G];f+=" ",F.hide||(f+='<div mxv title="'+r(F.text)+'" class="_zs_gallerydy"><label mxv for="'+r(j)+"_"+r(F.value)+'" class="_zs_galleryar ellipsis"><input type="checkbox" class="checkbox" ',F.checked&&(f+=' checked="true" '),f+=' id="'+r(j)+"_"+r(F.value)+'" mx-focusout="'+a+'__l()" mx-change="'+a+"__bG({groupIndex:'"+r(n(C))+"',value:'"+r(n(F.value))+'\'})" data-spm-click="'+r(T)+'"/>'+r(F.text)+"</label></div>"),f+=" "}f+="</div>"}f+='</div><div mxa="_zs_galleryaE:d" class="_zs_gallerydH"><button mxa="_zs_galleryaE:e" type="button" class="btn btn-small btn-brand mr10" mx-click="'+a+'__bM({enter:true})">'+r(k.submit)+'</button><button mxa="_zs_galleryaE:f" type="button" class="btn btn-small" mx-click="'+a+'__m()">'+r(k.cancel)+"</button></div>"}return f+="</div>"},init:function(e){var a=this;s.__f(),a.on("destroy",function(){s.__g(a),s.__h()}),a.updater.set({viewId:a.id});var t=l("#"+a.id);a.__j=t;var n=l("#"+a.id+"[mx-disabled]");a.__bp=n&&n.length>0;a.__bu={top:"_zs_gallerydB",bottom:"_zs_gallerydA"}[e.placement||"bottom"],a.__bv=e.triggerType||"click";var i=e.emptyText||o["dropdown.empty.text"],d=e.name||"",_=e.needAll+""=="false",c=e.searchbox+""=="true",m=e.textKey||"text",p=e.valueKey||"value",g=[];if(e.list){try{list=JSON.parse(e.list)}catch(a){list=e.list||[]}"object"==typeof list[0]?list=list.map(function(e){return{text:e[m],value:e[p]}}):list=list.map(function(e){return{text:e,value:e}}),g=[{list:list}]}else{var f=a.__j.children();if("true"==l(f[0]).attr("group"))f.each(function(e,a){if("true"==(a=l(a)).attr("group"))g.push({all:"true"==a.attr("all"),text:a.text(),value:r.guid(),list:[]});else{var t=g.length;g[t-1].list.push({text:a.text(),value:a.attr("value")})}});else{var u=[];f.each(function(e,a){a=l(a),u.push({text:a.text(),value:a.attr("value")})}),g=[{list:u}]}}var x,y=0,v={};e.selected?l.isArray(e.selected)?(a.__bH="array",x=e.selected.map(function(e){return""+e})):x=e.selected.split(","):x=[],g.forEach(function(e){var a=!0;e.list.forEach(function(e){y++,e.checked=x.indexOf(e.value+"")>-1,a=a&&e.checked,v[e.value]=e}),e.checked=a}),a.updater.set({viewId:a.id,expand:!1,emptyText:i,allText:d,needAll:_,searchbox:c,map:v,selected:x,over:y>20,groups:g,height:e.height||400,spm:a.__j.attr("data-spm-click")||"",placementClass:a.__bu,text:{search:o["dropdown.search"],select:o["select.all"],unselect:o["unselect.all"],submit:o["dialog.submit"],cancel:o["dialog.cancel"]}})},__k:function(e){return r.inside(e,this.id)},render:function(){var e=this,a=e.updater.get("selected");e.updater.digest({selectedText:e.__bI(a)}),e.__bJ();var t=e.__bv,r=l("#"+e.id+" ._zs_gallerydp"),s=l("#"+e.id+" ._zs_gallerydv");switch(t){case"click":r.on("click",function(){e.updater.get("expand")?e.__m():e.__bp||e.__n()});break;case"hover":r.hover(function(){clearTimeout(e.__bA),e.__n()},function(){e.__bB()}),s.hover(function(){clearTimeout(e.__bA)},function(){e.__bB()})}},__bB:function(){var e=this;clearTimeout(e.__bA),e.__bA=setTimeout(e.wrapAsync(function(){e.__m()}),250)},__bJ:function(){var e=this.updater.get("selected");"array"==this.__bH?this.__j.val(e):this.__j.val(e.join(","))},__m:function(){var e=this,a=e.updater.get();if(a.expand){e.updater.digest({expand:!1}),e.__j.trigger("focusout"),s.__g(e);var t=a.selected,r=a.groups;r.forEach(function(e){var a=!0;e.list.forEach(function(e){e.checked=t.indexOf(e.value+"")>-1,a=a&&e.checked}),e.checked=a}),e.updater.digest({groups:r,selected:t,selectedText:e.__bI(t)}),e.__bJ()}},__n:function(){var e=this,a=e.updater.get();if(!a.expand){var t={expand:!0};a.rList||(t.rList=!0);var r=l("#"+e.id+" ._zs_gallerydv"),o=l(window).width(),n=e.__j.offset(),i=r.outerWidth(),d=void 0;n.left+i>o&&(d=Math.min(n.left+i-o,n.left)),d>0&&(t.menuStyles="left:"+(0-d)+"px"),e.updater.digest(t),e.__j.trigger("focusin");var _=l("#list_"+e.id),c=_.find("._zs_galleryas").position();if(c){var m=_.height(),p=_.prop("scrollTop");if(c.top<0||c.top>m){var g=c.top-m+p+m/2;_.prop("scrollTop",g)}}s.__p(e)}},__bI:function(e){var a=this.updater.get(),t=a.emptyText;if(0==e.length)return t;for(var r=a.map,l=[],s=0,n=e;s<n.length;s++){var i=r[n[s]]||{};l.push(i.text)}var d=a.allText;return l.length==Object.keys(r).length?d?o["dropdown.all.custom"]+d:o["dropdown.all.default"]:l.join(",")},__bD:function(e,a){var t=this.updater.get().groups;if(!e)return t.forEach(function(e){e.hide=!1,e.list.forEach(function(e){e.hide=!1})}),void a(t);var r=(e+"").toLocaleLowerCase();t.forEach(function(e){var a=!0;e.list.forEach(function(e){var t=(e.text+"").toLocaleLowerCase();e.hide=t.indexOf(r)<0,a=a&&e.hide}),e.hide=a}),a(t)},"__e<keyup,paste>":function(e){var a=this;clearTimeout(a.__bE);var t=l.trim(e.eventTarget.value);a.updater.set({keyword:t}),a.__bE=setTimeout(a.wrapAsync(function(){t!=a.__bK&&a.__bD(a.__bK=t,function(e){a.updater.digest({groups:e})})}),300)},"__bL<change>":function(e){e.stopPropagation();var a=this.updater.get(),t=(e.params.value,e.params.groupIndex),r=e.target.checked,l=a.groups;l[t].list.forEach(function(e){e.checked=r}),l[t].checked=r,this.updater.digest({groups:l})},"__bG<change>":function(e){e.stopPropagation();for(var a=this.updater.get(),t=e.params.value,r=e.params.groupIndex,l=e.target.checked,s=a.groups,o=s[r].list,n=!0,i=0;i<o.length;i++)o[i].value==t&&(o[i].checked=l),n=n&&o[i].checked;s[r].checked=n,this.updater.digest({groups:s})},"__l<change,focusin,focusout>":function(e){e.stopPropagation()},"__bM<click>":function(e){var a=this,t=a.updater.get(),r=t.groups,s=[];r.forEach(function(e){e.list.forEach(function(e){e.checked&&s.push(e.value+"")})}),a.updater.set({selected:s}),a.__m();var o=t.map,n=s.map(function(e){return o[e].text});a.__j.trigger({type:"change",texts:n,values:s,selected:l("#"+a.id).val()})},"__m<click>":function(e){this.__m()},"__bN<click>":function(e){var a=this.updater.get("groups"),t=e.params.checked;a.forEach(function(e){e.list.forEach(function(e){e.checked=t}),e.checked=t}),this.updater.digest({groups:a})}})});