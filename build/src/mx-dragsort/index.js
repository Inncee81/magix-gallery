define("mx-dragsort/index",["magix","../mx-dragdrop/index","../mx-runner/index","$"],(_,e,t)=>{var i=_("magix"),o=_("../mx-dragdrop/index"),a=_("../mx-runner/index"),n=_("$");i.applyStyle("_zs_galleryH",'._zs_galleryeq{box-shadow:0 1px 1px 0 rgba(0,0,0,.08);border:1px solid #f5f5f6}._zs_galleryer{left:-1000px;top:0;background:#4d7fff}._zs_galleryer,._zs_galleryes{position:absolute;z-index:10000}._zs_galleryes{width:20px;height:20px;border-radius:4px}._zs_galleryes:after{position:absolute;left:0;right:0;top:0;bottom:0;font-size:12px;line-height:20px;text-align:center;color:#4d7fff}._zs_galleryet{background:#f6f9ff;border:1px solid #4d7fff}._zs_galleryet:after{content:"âœ“"}');var r=i.guid("dbar_"),d=i.guid("pt_"),l=n(window),h=n(document),b={__aQ:function(){n("#"+r).length||n('<div class="_zs_galleryer" id="'+r+'"/>').appendTo("body")},__aR:function(_){_.child&&(n(_.child).css({opacity:.4}),this.__aQ())},__aU:function(_){_&&_.child&&n(_.child).css({opacity:1}),this.__aS(),this.__aT()},__aS:function(){n("#"+r).css({left:-1e5})},__aV:function(_,e){var t=n("#"+r),i=!1;2&_.anchor&&(2&e?(t.css({height:2,width:_.bound.width,top:_.bound.y-1,left:_.bound.x}),i=!0):8&e&&(t.css({height:2,width:_.bound.width,top:_.bound.y+_.bound.height-1,left:_.bound.x}),i=!0)),!i&&1&_.anchor&&(1&e?t.css({height:_.bound.height,width:2,top:_.bound.y,left:_.bound.x-1}):4&e&&t.css({height:_.bound.height,width:2,top:_.bound.y,left:_.bound.x+_.bound.width-1}))},__aX:function(_){var e=this;_.atPlace&&_.child!=_.hover?(3==_.anchor?_.__aW&&e.__aV(_,_.side):_.__aX&&e.__aV(_,_.position),e.__aY(!0)):(e.__aS(),e.__aY())},__aZ:function(_){var e=n("#"+d);e.length||(e=n('<div class="_zs_galleryes" id="'+d+'"/>')).appendTo("body");var t=Math.max(0,Math.min(_.pageX+10,h.width()-e.width())),i=Math.max(0,Math.min(_.pageY+18,h.height()-e.height()));e.css({left:t,top:i,display:"block"})},__aY:function(_){var e=n("#"+d);_?e.addClass("_zs_galleryet"):e.removeClass("_zs_galleryet")},__aT:function(){n("#"+d).hide()}};t.exports=i.View.extend({mixins:[o],init:function(_){var e=this,t=n("#"+e.id);t.on("mousedown",_.selector,function(_){_.preventDefault(),e.__aR(_)}),e.on("destroy",function(){t.off("mousedown")}),e.__j=t;var o=[t.get(0)];_.drops&&(o=o.concat(_.drops.split(","))),e.__b_=o;var a=_.horizonal+""=="true",r=_.vertical+""=="true";a||r||(r=!0);var d=0;a&&(d|=1),r&&(d|=2),e.__ba=d;var l=!0;i.has(_,"sort")&&(l=_.sort+""=="true"),e.__bb=l},__bc:function(_){for(var e=0,t=this.__b_;e<t.length;e++){var o=t[e];if(i.inside(_,o))return i.node(o)}return null},__be:function(_,e){var t=null;if(e||(e=this.__bc(_)),!this.__bb&&this.__bd)return{child:this.__bd,zone:e};for(;e!=_;){if(_.parentNode==e){t=_;break}_=_.parentNode}return!e||e.firstChild||t||(t=e),t&&"false"===t.getAttribute("ds-draggable")&&(t=null),{child:t,zone:e}},__bg:function(_,e){var t=0,i=0,o=-1,a=-1,n=-1,r=-1,d=!1;if(e.pageX>=_.x&&e.pageX<=_.x+_.width&&e.pageY>=_.y&&e.pageY<=_.y+_.height&&(t|=e.pageX<=_.x+_.width/2?1:4,o=e.pageX-_.x,n=_.x+_.width-e.pageX,t|=e.pageY<=_.y+_.height/2?2:8,a=e.pageY-_.y,r=_.y+_.height-e.pageY,d=!0),d){var l=Math.min(o,a,n,r);l>-1&&(l==o?i=1:l==a?i=2:l==n?i=4:l==r&&(i=8))}var h=this.__bf;return h&&h.zone===h.hover&&(t=2,i=1),{position:t,atPlace:d,side:i}},__aR:function(_){if(1===_.which){var e=this,t=e.__be(_.target);t.child&&(e.__bd=t.child,e.__bh=t.zone,e.__j.trigger({type:"dragbegin",dragNode:t.child,dragZone:t.zone}),b.__aR(t),e.dragdrop(t.zone,function(_){e.__bi(_)},function(_){e.__aU(_)}))}},__bl:function(_,e,t){var i=this,o=i.__bg(_,e),a=o.side!=i.__bj,n=o.position!=i.__bk;(a||n)&&(i.__bj=o.side,i.__bk=o.position,t.__aW=a,t.__aX=n,t.side=o.side,t.position=o.position,t.atPlace=o.atPlace,t.anchor=i.__ba,b.__aX(t))},__bi:function(_){var e=o.fromPoint(_.clientX,_.clientY),t=this;if(b.__aZ(_),t.__bm=_,t.__bn=!0,t.__bo(),t.__bp(),t.__bq||t.__br||!e)return delete t.__bs,delete t.__bj,void delete t.__bk;if(t.__bs!=e){if(e.id===r)return;t.__bs=e,delete t.__bj;var a=t.__bc(e);if(a){a!=t.__bt&&(t.__bt=a,t.__j.trigger({type:"enterzone",zone:a,changePointer:b.__aY}));var d=t.__be(e,a);if(!d.child)return;var l=n(d.child),h=l.offset(),s={x:h.left,y:h.top,width:l.outerWidth(),height:l.outerHeight()};h=(l=n(d.zone)).offset(),t.__bu={x:h.left,y:h.top,scrollX:l.prop("scrollLeft"),scrollY:l.prop("scrollTop"),maxWidth:l.prop("scrollWidth"),maxHeight:l.prop("scrollHeight"),width:l.width(),height:l.height()},t.__bl(t.__bv=s,_,t.__bf={child:t.__bd,bound:s,zone:d.zone,hover:d.child})}else t.__bt&&(t.__j.trigger({type:"leavezone",zone:t.__bt,changePointer:b.__aY}),delete t.__bt)}else t.__bv&&i.inside(e,t.__bf.zone)?t.__bl(t.__bv,_,t.__bf):(delete t.__bj,delete t.__bk,t.__bb&&(b.__aS(),b.__aY()))},__aU:function(){var _=this;_.__bw(),_.__bx(),b.__aU({child:_.__bd});var e=_.__bk,t=_.__bj,i=_.__bn,o=_.__bf,a=_.__bd;if(i&&(e||t)){var n=o.zone,r=_.__ba,d=3===r?t:e;if(1&r&&1&d||2&d&&2&r)o.hover==n?n.appendChild(a):n.insertBefore(a,o.hover);else if(8&d&&2&r||4&d&&1&r){for(var l=o.hover.nextSibling;l&&1!=l.nodeType;)l=l.nextSibling;n.insertBefore(a,l),l||(n.scrollTop=n.scrollHeight)}}o&&_.__j.trigger({type:"dragfinish",moved:i,dragNode:a,dragZone:_.__bh,dropNode:o.hover,dropZone:o.zone,outZone:!_.__bt}),delete _.__bd,delete _.__bh,delete _.__bs,delete _.__bf,delete _.__bv,delete _.__bk,delete _.__bj,delete _.__bm,delete _.__br,delete _.__bt,delete _.__bu,delete _.__bq,delete _.__bn},__bo:function(){var _=this;_.__by||(_.__by=function(){var e=_.__bu;if(e){var t=_.__bf.zone,i=0,o=0,a=_.__bm;a.pageX>e.x&&a.pageY>e.y&&a.pageX<e.x+e.width&&a.pageY<e.y+e.height?(a.pageX-e.x<20&&e.scrollX>0?i=-Math.min(7,e.scrollX):e.x+e.width-a.pageX<20&&e.scrollX+e.width<e.maxWidth&&(i=Math.min(7,e.maxWidth-e.scrollX-e.width)),a.pageY-e.y<20&&e.scrollY>0?o=-Math.min(7,e.scrollY):e.y+e.height-a.pageY<20&&e.scrollY+e.height<e.maxHeight&&(o=Math.min(7,e.maxHeight-e.scrollY-e.height)),i||o?(_.__bq=!0,_.__bz=!0,t.scrollTop+=o,t.scrollLeft+=i,e.scrollX+=i,e.scrollY+=o,delete _.__bn,b.__aS(),b.__aY()):(delete _.__bq,delete _.__bz)):(delete _.__bq,delete _.__bz)}},a.__bA(30,_.__by))},__bp:function(){var _=this;_.__bB||(_.__bB=function(){if(!_.__bz){var e=0,t=0,i=_.__bm,o=l.scrollTop(),a=l.height(),n=h.height(),r=h.width(),d=l.width(),s=l.scrollLeft();i.pageX-s<20&&s>0?e=-Math.min(7,s):s+d-i.pageX<20&&s+d<r&&(e=Math.min(7,r-d-s)),i.pageY-o<20&&o>0?t=-Math.min(7,o):o+a-i.pageY<20&&o+a<n&&(t=Math.min(7,n-a-o)),e||t?(_.__br=!0,i.pageX+=e,i.pageY+=t,window.scrollBy(e,t),delete _.__bn,b.__aS(),b.__aZ(i),b.__aY()):delete _.__br}},a.__bA(30,_.__bB))},__bw:function(){this.__by&&(a.__bC(this.__by),delete this.__by,delete this.__bz)},__bx:function(){this.__bB&&(a.__bC(this.__bB),delete this.__bB)}})});