define("mx-dragsort/index",["magix","../mx-dragdrop/index","../mx-runner/index","$"],(_,e,t)=>{var a=_("magix"),i=_("../mx-dragdrop/index"),o=_("../mx-runner/index"),n=_("$");a.applyStyle("_zs_galleryD",'._zs_gallerydL{box-shadow:0 1px 1px 0 rgba(0,0,0,.08);border:1px solid #f5f5f6}._zs_gallerydM{left:-1000px;top:0;background:#4d7fff}._zs_gallerydM,._zs_gallerydN{position:absolute;z-index:10000}._zs_gallerydN{width:20px;height:20px;border-radius:4px}._zs_gallerydN:after{position:absolute;left:0;right:0;top:0;bottom:0;font-size:12px;line-height:20px;text-align:center;color:#4d7fff}._zs_gallerydO{background:#f6f9ff;border:1px solid #4d7fff}._zs_gallerydO:after{content:"âœ“"}');var d=a.guid("dbar_"),r=a.guid("pt_"),l=n(window),h=n(document),s={__aB:function(){n("#"+d).length||n('<div class="_zs_gallerydM" id="'+d+'"/>').appendTo("body")},__aC:function(_){_.child&&(n(_.child).css({opacity:.4}),this.__aB())},__aF:function(_){_&&_.child&&n(_.child).css({opacity:1}),this.__aD(),this.__aE()},__aD:function(){n("#"+d).css({left:-1e5})},__aG:function(_,e){var t=n("#"+d),a=!1;2&_.anchor&&(2&e?(t.css({height:2,width:_.bound.width,top:_.bound.y-1,left:_.bound.x}),a=!0):8&e&&(t.css({height:2,width:_.bound.width,top:_.bound.y+_.bound.height-1,left:_.bound.x}),a=!0)),!a&&1&_.anchor&&(1&e?t.css({height:_.bound.height,width:2,top:_.bound.y,left:_.bound.x-1}):4&e&&t.css({height:_.bound.height,width:2,top:_.bound.y,left:_.bound.x+_.bound.width-1}))},__aI:function(_){var e=this;_.atPlace&&_.child!=_.hover?(3==_.anchor?_.__aH&&e.__aG(_,_.side):_.__aI&&e.__aG(_,_.position),e.__aJ(!0)):(e.__aD(),e.__aJ())},__aK:function(_){var e=n("#"+r);e.length||(e=n('<div class="_zs_gallerydN" id="'+r+'"/>')).appendTo("body");var t=Math.max(0,Math.min(_.pageX+10,h.width()-e.width())),a=Math.max(0,Math.min(_.pageY+18,h.height()-e.height()));e.css({left:t,top:a,display:"block"})},__aJ:function(_){var e=n("#"+r);_?e.addClass("_zs_gallerydO"):e.removeClass("_zs_gallerydO")},__aE:function(){n("#"+r).hide()}};t.exports=a.View.extend({mixins:[i],init:function(_){var e=this,t=n("#"+e.id);t.on("mousedown",_.selector,function(_){_.preventDefault(),e.__aC(_)}),e.on("destroy",function(){t.off("mousedown")}),e.__j=t;var i=[t.get(0)];_.drops&&(i=i.concat(_.drops.split(","))),e.__aL=i;var o=_.horizonal+""=="true",d=_.vertical+""=="true";o||d||(d=!0);var r=0;o&&(r|=1),d&&(r|=2),e.__aM=r;var l=!0;a.has(_,"sort")&&(l=_.sort+""=="true"),e.__aN=l},__aO:function(_){for(var e=0,t=this.__aL;e<t.length;e++){var i=t[e];if(a.inside(_,i))return a.node(i)}return null},__aQ:function(_,e){var t=null;if(e||(e=this.__aO(_)),!this.__aN&&this.__aP)return{child:this.__aP,zone:e};for(;e!=_;){if(_.parentNode==e){t=_;break}_=_.parentNode}return!e||e.firstChild||t||(t=e),t&&"false"===t.getAttribute("ds-draggable")&&(t=null),{child:t,zone:e}},__aS:function(_,e){var t=0,a=0,i=-1,o=-1,n=-1,d=-1,r=!1;if(e.pageX>=_.x&&e.pageX<=_.x+_.width&&e.pageY>=_.y&&e.pageY<=_.y+_.height&&(t|=e.pageX<=_.x+_.width/2?1:4,i=e.pageX-_.x,n=_.x+_.width-e.pageX,t|=e.pageY<=_.y+_.height/2?2:8,o=e.pageY-_.y,d=_.y+_.height-e.pageY,r=!0),r){var l=Math.min(i,o,n,d);l>-1&&(l==i?a=1:l==o?a=2:l==n?a=4:l==d&&(a=8))}var h=this.__aR;return h&&h.zone===h.hover&&(t=2,a=1),{position:t,atPlace:r,side:a}},__aC:function(_){if(1===_.which){var e=this,t=e.__aQ(_.target);t.child&&(e.__aP=t.child,e.__aT=t.zone,e.__j.trigger({type:"dragbegin",dragNode:t.child,dragZone:t.zone}),s.__aC(t),e.dragdrop(t.zone,function(_){e.__aU(_)},function(_){e.__aF(_)}))}},__aX:function(_,e,t){var a=this,i=a.__aS(_,e),o=i.side!=a.__aV,n=i.position!=a.__aW;(o||n)&&(a.__aV=i.side,a.__aW=i.position,t.__aH=o,t.__aI=n,t.side=i.side,t.position=i.position,t.atPlace=i.atPlace,t.anchor=a.__aM,s.__aI(t))},__aU:function(_){var e=i.fromPoint(_.clientX,_.clientY),t=this;if(s.__aK(_),t.__aY=_,t.__aZ=!0,t.__b_(),t.__ba(),t.__bb||t.__bc||!e)return delete t.__bd,delete t.__aV,void delete t.__aW;if(t.__bd!=e){if(e.id===d)return;t.__bd=e,delete t.__aV;var o=t.__aO(e);if(o){o!=t.__be&&(t.__be=o,t.__j.trigger({type:"enterzone",zone:o,changePointer:s.__aJ}));var r=t.__aQ(e,o);if(!r.child)return;var l=n(r.child),h=l.offset(),g={x:h.left,y:h.top,width:l.outerWidth(),height:l.outerHeight()};h=(l=n(r.zone)).offset(),t.__bf={x:h.left,y:h.top,scrollX:l.prop("scrollLeft"),scrollY:l.prop("scrollTop"),maxWidth:l.prop("scrollWidth"),maxHeight:l.prop("scrollHeight"),width:l.width(),height:l.height()},t.__aX(t.__bg=g,_,t.__aR={child:t.__aP,bound:g,zone:r.zone,hover:r.child})}else t.__be&&(t.__j.trigger({type:"leavezone",zone:t.__be,changePointer:s.__aJ}),delete t.__be)}else t.__bg&&a.inside(e,t.__aR.zone)?t.__aX(t.__bg,_,t.__aR):(delete t.__aV,delete t.__aW,t.__aN&&(s.__aD(),s.__aJ()))},__aF:function(){var _=this;_.__bh(),_.__bi(),s.__aF({child:_.__aP});var e=_.__aW,t=_.__aV,a=_.__aZ,i=_.__aR,o=_.__aP;if(a&&(e||t)){var n=i.zone,d=_.__aM,r=3===d?t:e;if(1&d&&1&r||2&r&&2&d)i.hover==n?n.appendChild(o):n.insertBefore(o,i.hover);else if(8&r&&2&d||4&r&&1&d){for(var l=i.hover.nextSibling;l&&1!=l.nodeType;)l=l.nextSibling;n.insertBefore(o,l),l||(n.scrollTop=n.scrollHeight)}}i&&_.__j.trigger({type:"dragfinish",moved:a,dragNode:o,dragZone:_.__aT,dropNode:i.hover,dropZone:i.zone,outZone:!_.__be}),delete _.__aP,delete _.__aT,delete _.__bd,delete _.__aR,delete _.__bg,delete _.__aW,delete _.__aV,delete _.__aY,delete _.__bc,delete _.__be,delete _.__bf,delete _.__bb,delete _.__aZ},__b_:function(){var _=this;_.__bj||(_.__bj=function(){var e=_.__bf;if(e){var t=_.__aR.zone,a=0,i=0,o=_.__aY;o.pageX>e.x&&o.pageY>e.y&&o.pageX<e.x+e.width&&o.pageY<e.y+e.height?(o.pageX-e.x<20&&e.scrollX>0?a=-Math.min(7,e.scrollX):e.x+e.width-o.pageX<20&&e.scrollX+e.width<e.maxWidth&&(a=Math.min(7,e.maxWidth-e.scrollX-e.width)),o.pageY-e.y<20&&e.scrollY>0?i=-Math.min(7,e.scrollY):e.y+e.height-o.pageY<20&&e.scrollY+e.height<e.maxHeight&&(i=Math.min(7,e.maxHeight-e.scrollY-e.height)),a||i?(_.__bb=!0,_.__bk=!0,t.scrollTop+=i,t.scrollLeft+=a,e.scrollX+=a,e.scrollY+=i,delete _.__aZ,s.__aD(),s.__aJ()):(delete _.__bb,delete _.__bk)):(delete _.__bb,delete _.__bk)}},o.__bl(30,_.__bj))},__ba:function(){var _=this;_.__bm||(_.__bm=function(){if(!_.__bk){var e=0,t=0,a=_.__aY,i=l.scrollTop(),o=l.height(),n=h.height(),d=h.width(),r=l.width(),g=l.scrollLeft();a.pageX-g<20&&g>0?e=-Math.min(7,g):g+r-a.pageX<20&&g+r<d&&(e=Math.min(7,d-r-g)),a.pageY-i<20&&i>0?t=-Math.min(7,i):i+o-a.pageY<20&&i+o<n&&(t=Math.min(7,n-o-i)),e||t?(_.__bc=!0,a.pageX+=e,a.pageY+=t,window.scrollBy(e,t),delete _.__aZ,s.__aD(),s.__aK(a),s.__aJ()):delete _.__bc}},o.__bl(30,_.__bm))},__bh:function(){this.__bj&&(o.__bn(this.__bj),delete this.__bj,delete this.__bk)},__bi:function(){this.__bm&&(o.__bn(this.__bm),delete this.__bm)}})});