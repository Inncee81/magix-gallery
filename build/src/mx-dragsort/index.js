define("mx-dragsort/index",["magix","../mx-dragdrop/index","../mx-util/runner","$"],(_,e,t)=>{var i=_("magix"),o=_("../mx-dragdrop/index"),r=_("../mx-util/runner"),a=_("$");i.applyStyle("_zs_galleryF",'._zs_gallerydY{left:-1000px;top:0;background:var(--color-brand)}._zs_gallerydY,._zs_gallerydZ{position:absolute;z-index:10000}._zs_gallerydZ{width:20px;height:20px;border-radius:var(--border-radius)}._zs_gallerydZ:after{position:absolute;left:0;right:0;top:0;bottom:0;font-size:var(--font-size);line-height:20px;text-align:center;color:var(--color-brand)}._zs_gallerye_{background:var(--color-brand-opacity);border:1px solid var(--color-brand)}._zs_gallerye_:after{content:"âœ“"}');var n=i.guid("dbar_"),b=i.guid("pt_"),d=a(window),l=a(document),h={__aV:function(){a("#"+n).length||a('<div class="_zs_gallerydY" id="'+n+'"/>').appendTo("body")},__aW:function(_){_.child&&(a(_.child).css({opacity:.4}),this.__aV())},__aZ:function(_){_&&_.child&&a(_.child).css({opacity:1}),this.__aX(),this.__aY()},__aX:function(){a("#"+n).css({left:-1e5})},__b_:function(_,e){var t=a("#"+n),i=!1;2&_.anchor&&(2&e?(t.css({height:2,width:_.bound.width,top:_.bound.y-1,left:_.bound.x}),i=!0):8&e&&(t.css({height:2,width:_.bound.width,top:_.bound.y+_.bound.height-1,left:_.bound.x}),i=!0)),!i&&1&_.anchor&&(1&e?t.css({height:_.bound.height,width:2,top:_.bound.y,left:_.bound.x-1}):4&e&&t.css({height:_.bound.height,width:2,top:_.bound.y,left:_.bound.x+_.bound.width-1}))},__bb:function(_){var e=this;_.atPlace&&_.child!=_.hover?(3==_.anchor?_.__ba&&e.__b_(_,_.side):_.__bb&&e.__b_(_,_.position),e.__bc(!0)):(e.__aX(),e.__bc())},__bd:function(_){var e=a("#"+b);e.length||(e=a('<div class="_zs_gallerydZ" id="'+b+'"/>')).appendTo("body");var t=Math.max(0,Math.min(_.pageX+10,l.width()-e.width())),i=Math.max(0,Math.min(_.pageY+18,l.height()-e.height()));e.css({left:t,top:i,display:"block"})},__bc:function(_){var e=a("#"+b);_?e.addClass("_zs_gallerye_"):e.removeClass("_zs_gallerye_")},__aY:function(){a("#"+b).hide()}};t.exports=i.View.extend({mixins:[o],init:function(_){var e=this,t=a("#"+e.id);t.on("mousedown",_.selector,function(_){_.preventDefault(),e.__aW(_)}),e.on("destroy",function(){t.off("mousedown")}),e.__a=t;var o=[t.get(0)];_.drops&&(o=o.concat(_.drops.split(","))),e.__be=o;var r=_.horizonal+""=="true",n=_.vertical+""=="true";r||n||(n=!0);var b=0;r&&(b|=1),n&&(b|=2),e.__bf=b;var d=!0;i.has(_,"sort")&&(d=_.sort+""=="true"),e.__bg=d},__bh:function(_){for(var e=0,t=this.__be;e<t.length;e++){var o=t[e];if(i.inside(_,o))return i.node(o)}return null},__bj:function(_,e){var t=null;if(e||(e=this.__bh(_)),!this.__bg&&this.__bi)return{child:this.__bi,zone:e};for(;e!=_;){if(_.parentNode==e){t=_;break}_=_.parentNode}return!e||e.firstChild||t||(t=e),t&&"false"===t.getAttribute("ds-draggable")&&(t=null),{child:t,zone:e}},__bl:function(_,e){var t=0,i=0,o=-1,r=-1,a=-1,n=-1,b=!1;if(e.pageX>=_.x&&e.pageX<=_.x+_.width&&e.pageY>=_.y&&e.pageY<=_.y+_.height&&(t|=e.pageX<=_.x+_.width/2?1:4,o=e.pageX-_.x,a=_.x+_.width-e.pageX,t|=e.pageY<=_.y+_.height/2?2:8,r=e.pageY-_.y,n=_.y+_.height-e.pageY,b=!0),b){var d=Math.min(o,r,a,n);d>-1&&(d==o?i=1:d==r?i=2:d==a?i=4:d==n&&(i=8))}var l=this.__bk;return l&&l.zone===l.hover&&(t=2,i=1),{position:t,atPlace:b,side:i}},__aW:function(_){if(1===_.which){var e=this,t=e.__bj(_.target);t.child&&(e.__bi=t.child,e.__bm=t.zone,e.__a.trigger({type:"dragbegin",dragNode:t.child,dragZone:t.zone}),h.__aW(t),e.dragdrop(t.zone,function(_){e.__bn(_)},function(_){e.__aZ(_)}))}},__bq:function(_,e,t){var i=this,o=i.__bl(_,e),r=o.side!=i.__bo,a=o.position!=i.__bp;(r||a)&&(i.__bo=o.side,i.__bp=o.position,t.__ba=r,t.__bb=a,t.side=o.side,t.position=o.position,t.atPlace=o.atPlace,t.anchor=i.__bf,h.__bb(t))},__bn:function(_){var e=o.fromPoint(_.clientX,_.clientY),t=this;if(h.__bd(_),t.__br=_,t.__bs=!0,t.__bt(),t.__bu(),t.__bv||t.__bw||!e)return delete t.__bx,delete t.__bo,void delete t.__bp;if(t.__bx!=e){if(e.id===n)return;t.__bx=e,delete t.__bo;var r=t.__bh(e);if(r){r!=t.__by&&(t.__by=r,t.__a.trigger({type:"enterzone",zone:r,changePointer:h.__bc}));var b=t.__bj(e,r);if(!b.child)return;var d=a(b.child),l=d.offset(),s={x:l.left,y:l.top,width:d.outerWidth(),height:d.outerHeight()};l=(d=a(b.zone)).offset(),t.__bz={x:l.left,y:l.top,scrollX:d.prop("scrollLeft"),scrollY:d.prop("scrollTop"),maxWidth:d.prop("scrollWidth"),maxHeight:d.prop("scrollHeight"),width:d.width(),height:d.height()},t.__bq(t.__bA=s,_,t.__bk={child:t.__bi,bound:s,zone:b.zone,hover:b.child})}else t.__by&&(t.__a.trigger({type:"leavezone",zone:t.__by,changePointer:h.__bc}),delete t.__by)}else t.__bA&&i.inside(e,t.__bk.zone)?t.__bq(t.__bA,_,t.__bk):(delete t.__bo,delete t.__bp,t.__bg&&(h.__aX(),h.__bc()))},__aZ:function(){var _=this;_.__bB(),_.__bC(),h.__aZ({child:_.__bi});var e=_.__bp,t=_.__bo,i=_.__bs,o=_.__bk,r=_.__bi;if(i&&(e||t)){var a=o.zone,n=_.__bf,b=3===n?t:e;if(1&n&&1&b||2&b&&2&n)o.hover==a?a.appendChild(r):a.insertBefore(r,o.hover);else if(8&b&&2&n||4&b&&1&n){for(var d=o.hover.nextSibling;d&&1!=d.nodeType;)d=d.nextSibling;a.insertBefore(r,d),d||(a.scrollTop=a.scrollHeight)}}o&&_.__a.trigger({type:"dragfinish",moved:i,dragNode:r,dragZone:_.__bm,dropNode:o.hover,dropZone:o.zone,outZone:!_.__by}),delete _.__bi,delete _.__bm,delete _.__bx,delete _.__bk,delete _.__bA,delete _.__bp,delete _.__bo,delete _.__br,delete _.__bw,delete _.__by,delete _.__bz,delete _.__bv,delete _.__bs},__bt:function(){var _=this;_.__bD||(_.__bD=function(){var e=_.__bz;if(e){var t=_.__bk.zone,i=0,o=0,r=_.__br;r.pageX>e.x&&r.pageY>e.y&&r.pageX<e.x+e.width&&r.pageY<e.y+e.height?(r.pageX-e.x<20&&e.scrollX>0?i=-Math.min(7,e.scrollX):e.x+e.width-r.pageX<20&&e.scrollX+e.width<e.maxWidth&&(i=Math.min(7,e.maxWidth-e.scrollX-e.width)),r.pageY-e.y<20&&e.scrollY>0?o=-Math.min(7,e.scrollY):e.y+e.height-r.pageY<20&&e.scrollY+e.height<e.maxHeight&&(o=Math.min(7,e.maxHeight-e.scrollY-e.height)),i||o?(_.__bv=!0,_.__bE=!0,t.scrollTop+=o,t.scrollLeft+=i,e.scrollX+=i,e.scrollY+=o,delete _.__bs,h.__aX(),h.__bc()):(delete _.__bv,delete _.__bE)):(delete _.__bv,delete _.__bE)}},r.__bF(30,_.__bD))},__bu:function(){var _=this;_.__bG||(_.__bG=function(){if(!_.__bE){var e=0,t=0,i=_.__br,o=d.scrollTop(),r=d.height(),a=l.height(),n=l.width(),b=d.width(),s=d.scrollLeft();i.pageX-s<20&&s>0?e=-Math.min(7,s):s+b-i.pageX<20&&s+b<n&&(e=Math.min(7,n-b-s)),i.pageY-o<20&&o>0?t=-Math.min(7,o):o+r-i.pageY<20&&o+r<a&&(t=Math.min(7,a-r-o)),e||t?(_.__bw=!0,i.pageX+=e,i.pageY+=t,window.scrollBy(e,t),delete _.__bs,h.__aX(),h.__bd(i),h.__bc()):delete _.__bw}},r.__bF(30,_.__bG))},__bB:function(){this.__bD&&(r.__bH(this.__bD),delete this.__bD,delete this.__bE)},__bC:function(){this.__bG&&(r.__bH(this.__bG),delete this.__bG)}})});