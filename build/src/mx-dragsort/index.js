define("mx-dragsort/index",["magix","../mx-dragdrop/index","../mx-runner/index","$"],(_,e,a)=>{var t=_("magix"),i=_("../mx-dragdrop/index"),o=_("../mx-runner/index"),n=_("$");t.applyStyle("_zs_galleryC",'._zs_gallerydk{box-shadow:0 2px 4px rgba(51,51,51,.08);border:1px solid #eee}._zs_gallerydl{left:-1000px;top:0;background:#4d7fff}._zs_gallerydl,._zs_gallerydm{position:absolute;z-index:10000}._zs_gallerydm{width:20px;height:20px;border-radius:4px}._zs_gallerydm:after{position:absolute;left:0;right:0;top:0;bottom:0;font-size:12px;line-height:20px;text-align:center;color:#4d7fff}._zs_gallerydn{background:#f6f9ff;border:1px solid #4d7fff}._zs_gallerydn:after{content:"âœ“"}');var d=t.guid("dbar_"),r=t.guid("pt_"),l=n(window),h=n(document),s={__ax:function(){n("#"+d).length||n('<div class="_zs_gallerydl" id="'+d+'"/>').appendTo("body")},__ay:function(_){_.child&&(n(_.child).css({opacity:.4}),this.__ax())},__aB:function(_){_&&_.child&&n(_.child).css({opacity:1}),this.__az(),this.__aA()},__az:function(){n("#"+d).css({left:-1e5})},__aC:function(_,e){var a=n("#"+d),t=!1;2&_.anchor&&(2&e?(a.css({height:2,width:_.bound.width,top:_.bound.y-1,left:_.bound.x}),t=!0):8&e&&(a.css({height:2,width:_.bound.width,top:_.bound.y+_.bound.height-1,left:_.bound.x}),t=!0)),!t&&1&_.anchor&&(1&e?a.css({height:_.bound.height,width:2,top:_.bound.y,left:_.bound.x-1}):4&e&&a.css({height:_.bound.height,width:2,top:_.bound.y,left:_.bound.x+_.bound.width-1}))},__aE:function(_){var e=this;_.atPlace&&_.child!=_.hover?(3==_.anchor?_.__aD&&e.__aC(_,_.side):_.__aE&&e.__aC(_,_.position),e.__aF(!0)):(e.__az(),e.__aF())},__aG:function(_){var e=n("#"+r);e.length||(e=n('<div class="_zs_gallerydm" id="'+r+'"/>')).appendTo("body");var a=Math.max(0,Math.min(_.pageX+10,h.width()-e.width())),t=Math.max(0,Math.min(_.pageY+18,h.height()-e.height()));e.css({left:a,top:t,display:"block"})},__aF:function(_){var e=n("#"+r);_?e.addClass("_zs_gallerydn"):e.removeClass("_zs_gallerydn")},__aA:function(){n("#"+r).hide()}};a.exports=t.View.extend({mixins:[i],init:function(_){var e=this,a=n("#"+e.id);a.on("mousedown",_.selector,function(_){_.preventDefault(),e.__ay(_)}),e.on("destroy",function(){a.off("mousedown")}),e.__j=a;var i=[a.get(0)];_.drops&&(i=i.concat(_.drops.split(","))),e.__aH=i;var o=_.horizonal+""=="true",d=_.vertical+""=="true";o||d||(d=!0);var r=0;o&&(r|=1),d&&(r|=2),e.__aI=r;var l=!0;t.has(_,"sort")&&(l=_.sort+""=="true"),e.__aJ=l},__aK:function(_){for(var e=0,a=this.__aH;e<a.length;e++){var i=a[e];if(t.inside(_,i))return t.node(i)}return null},__aM:function(_,e){var a=null;if(e||(e=this.__aK(_)),!this.__aJ&&this.__aL)return{child:this.__aL,zone:e};for(;e!=_;){if(_.parentNode==e){a=_;break}_=_.parentNode}return!e||e.firstChild||a||(a=e),a&&"false"===a.getAttribute("ds-draggable")&&(a=null),{child:a,zone:e}},__aO:function(_,e){var a=0,t=0,i=-1,o=-1,n=-1,d=-1,r=!1;if(e.pageX>=_.x&&e.pageX<=_.x+_.width&&e.pageY>=_.y&&e.pageY<=_.y+_.height&&(a|=e.pageX<=_.x+_.width/2?1:4,i=e.pageX-_.x,n=_.x+_.width-e.pageX,a|=e.pageY<=_.y+_.height/2?2:8,o=e.pageY-_.y,d=_.y+_.height-e.pageY,r=!0),r){var l=Math.min(i,o,n,d);l>-1&&(l==i?t=1:l==o?t=2:l==n?t=4:l==d&&(t=8))}var h=this.__aN;return h&&h.zone===h.hover&&(a=2,t=1),{position:a,atPlace:r,side:t}},__ay:function(_){if(1===_.which){var e=this,a=e.__aM(_.target);a.child&&(e.__aL=a.child,e.__aP=a.zone,e.__j.trigger({type:"dragbegin",dragNode:a.child,dragZone:a.zone}),s.__ay(a),e.dragdrop(a.zone,function(_){e.__aQ(_)},function(_){e.__aB(_)}))}},__aT:function(_,e,a){var t=this,i=t.__aO(_,e),o=i.side!=t.__aR,n=i.position!=t.__aS;(o||n)&&(t.__aR=i.side,t.__aS=i.position,a.__aD=o,a.__aE=n,a.side=i.side,a.position=i.position,a.atPlace=i.atPlace,a.anchor=t.__aI,s.__aE(a))},__aQ:function(_){var e=i.fromPoint(_.clientX,_.clientY),a=this;if(s.__aG(_),a.__aU=_,a.__aV=!0,a.__aW(),a.__aX(),a.__aY||a.__aZ||!e)return delete a.__b_,delete a.__aR,void delete a.__aS;if(a.__b_!=e){if(e.id===d)return;a.__b_=e,delete a.__aR;var o=a.__aK(e);if(o){o!=a.__ba&&(a.__ba=o,a.__j.trigger({type:"enterzone",zone:o,changePointer:s.__aF}));var r=a.__aM(e,o);if(!r.child)return;var l=n(r.child),h=l.offset(),g={x:h.left,y:h.top,width:l.outerWidth(),height:l.outerHeight()};h=(l=n(r.zone)).offset(),a.__bb={x:h.left,y:h.top,scrollX:l.prop("scrollLeft"),scrollY:l.prop("scrollTop"),maxWidth:l.prop("scrollWidth"),maxHeight:l.prop("scrollHeight"),width:l.width(),height:l.height()},a.__aT(a.__bc=g,_,a.__aN={child:a.__aL,bound:g,zone:r.zone,hover:r.child})}else a.__ba&&(a.__j.trigger({type:"leavezone",zone:a.__ba,changePointer:s.__aF}),delete a.__ba)}else a.__bc&&t.inside(e,a.__aN.zone)?a.__aT(a.__bc,_,a.__aN):(delete a.__aR,delete a.__aS,a.__aJ&&(s.__az(),s.__aF()))},__aB:function(){var _=this;_.__bd(),_.__be(),s.__aB({child:_.__aL});var e=_.__aS,a=_.__aR,t=_.__aV,i=_.__aN,o=_.__aL;if(t&&(e||a)){var n=i.zone,d=_.__aI,r=3===d?a:e;if(1&d&&1&r||2&r&&2&d)i.hover==n?n.appendChild(o):n.insertBefore(o,i.hover);else if(8&r&&2&d||4&r&&1&d){for(var l=i.hover.nextSibling;l&&1!=l.nodeType;)l=l.nextSibling;n.insertBefore(o,l),l||(n.scrollTop=n.scrollHeight)}}i&&_.__j.trigger({type:"dragfinish",moved:t,dragNode:o,dragZone:_.__aP,dropNode:i.hover,dropZone:i.zone,outZone:!_.__ba}),delete _.__aL,delete _.__aP,delete _.__b_,delete _.__aN,delete _.__bc,delete _.__aS,delete _.__aR,delete _.__aU,delete _.__aZ,delete _.__ba,delete _.__bb,delete _.__aY,delete _.__aV},__aW:function(){var _=this;_.__bf||(_.__bf=function(){var e=_.__bb;if(e){var a=_.__aN.zone,t=0,i=0,o=_.__aU;o.pageX>e.x&&o.pageY>e.y&&o.pageX<e.x+e.width&&o.pageY<e.y+e.height?(o.pageX-e.x<20&&e.scrollX>0?t=-Math.min(7,e.scrollX):e.x+e.width-o.pageX<20&&e.scrollX+e.width<e.maxWidth&&(t=Math.min(7,e.maxWidth-e.scrollX-e.width)),o.pageY-e.y<20&&e.scrollY>0?i=-Math.min(7,e.scrollY):e.y+e.height-o.pageY<20&&e.scrollY+e.height<e.maxHeight&&(i=Math.min(7,e.maxHeight-e.scrollY-e.height)),t||i?(_.__aY=!0,_.__bg=!0,a.scrollTop+=i,a.scrollLeft+=t,e.scrollX+=t,e.scrollY+=i,delete _.__aV,s.__az(),s.__aF()):(delete _.__aY,delete _.__bg)):(delete _.__aY,delete _.__bg)}},o.__bh(30,_.__bf))},__aX:function(){var _=this;_.__bi||(_.__bi=function(){if(!_.__bg){var e=0,a=0,t=_.__aU,i=l.scrollTop(),o=l.height(),n=h.height(),d=h.width(),r=l.width(),g=l.scrollLeft();t.pageX-g<20&&g>0?e=-Math.min(7,g):g+r-t.pageX<20&&g+r<d&&(e=Math.min(7,d-r-g)),t.pageY-i<20&&i>0?a=-Math.min(7,i):i+o-t.pageY<20&&i+o<n&&(a=Math.min(7,n-o-i)),e||a?(_.__aZ=!0,t.pageX+=e,t.pageY+=a,window.scrollBy(e,a),delete _.__aV,s.__az(),s.__aG(t),s.__aF()):delete _.__aZ}},o.__bh(30,_.__bi))},__bd:function(){this.__bf&&(o.__bj(this.__bf),delete this.__bf,delete this.__bg)},__be:function(){this.__bi&&(o.__bj(this.__bi),delete this.__bi)}})});