define("mx-dialog/index",["magix","$"],(e,l,a)=>{var i=e("magix"),r=e("$");i.applyStyle("_zs_galleryB","._zs_galleryd_{box-shadow:0 2px 4px rgba(51,51,51,.08);border:1px solid #eee}._zs_galleryda,._zs_gallerydb{position:fixed;left:0;width:100%;height:100%;transition:opacity .25s,top .25s}._zs_galleryda{opacity:0;top:0;background-color:rgba(0,0,0,.4)}._zs_galleryda._zs_gallerydc{opacity:1}._zs_gallerydb{opacity:0;top:-50px;overflow-y:auto}._zs_gallerydb._zs_gallerydd{opacity:1;top:0}._zs_galleryde{position:absolute}._zs_galleryde ._zs_gallerydf{position:relative;background-color:#fff;border-radius:4px;word-break:break-all;box-shadow:0 2px 4px rgba(51,51,51,.08);border:1px solid #eee}._zs_galleryde ._zs_gallerydf ._zs_gallerydg{padding:80px 0}._zs_galleryde ._zs_gallerydh{position:absolute;top:18px;right:20px;width:26px;height:26px;z-index:20;border-radius:50%;background:transparent;color:#ccc;text-align:center}._zs_galleryde ._zs_gallerydh ._zs_gallerydi{font-size:18px;font-weight:700;line-height:26px}._zs_galleryde ._zs_gallerydh:focus,._zs_galleryde ._zs_gallerydh:hover{background-color:#999;color:#fff}._zs_gallerydj{overflow-y:hidden}");var o=r(window),t=500,n=[];a.exports=i.View.extend({tmpl:function(e,l,a,i,r,o,t,n){if(a||(a=e),!r){var s={"&":"amp","<":"lt",">":"gt",'"':"#34","'":"#39","`":"#96"},d=/[&<>"'`]/g,g=function(e){return"&"+s[e]+";"};r=function(e){return""+(null==e?"":e)},i=function(e){return r(e).replace(d,g)}}if(!o){var c={"!":"%21","'":"%27","(":"%28",")":"%29","*":"%2A"},_=function(e){return c[e]},u=/[!')(*]/g;o=function(e){return encodeURIComponent(r(e)).replace(u,_)}}if(!n){var f=/[\\'"]/g;n=function(e){return r(e).replace(f,"\\$&")}}var p="";return e.closable&&(p+='<a mxs="_zs_galleryai:_" href="javascript:;" mx-click="'+l+'__am()" class="_zs_gallerydh"><i class="mc-iconfont _zs_gallerydi">&#xe603;</i></a>'),p+='<div class="_zs_gallerydf" id="cnt_'+i(e.viewId)+'"><div mxs="_zs_galleryai:a" class="loading _zs_gallerydg"><span class="loading-anim"></span></div></div>'},init:function(e){var l=this;l.on("destroy",function(){!function(e){for(var l=n.length-1;l>=0;l--)if(n[l].id==e.id){n.splice(l,1);break}}(l),t-=2,r("#"+l.id).trigger("dlg_close")}),t+=2,n.push(l),i.has(e,"closable")||(e.closable=!0),l.updater.set(i.mix({viewId:l.id},e))},render:function(){var e=this,l=e.updater,a=l.get();l.digest(),setTimeout(e.wrapAsync(function(){var l=r("#wrapper_"+e.id),o="cnt_"+e.id;l.addClass("_zs_gallerydd");var t=r("#mask_"+e.id);t.length>0?t.addClass("_zs_gallerydc"):l.on("click",function(l){i.inside(l.target,o)||r("#"+e.id).trigger("dlg_close")}),e.owner.mountVframe(o,a.view,a),l.on("scroll",function(){r(document).trigger("dialogScolll")})}),250)},__al:function(e){var l=i.Vframe.get("cnt_"+this.id);l&&l.invoke("fire",["unload",e])},"__am<click>":function(){r("#"+this.id).trigger("dlg_close")},"$doc<keyup>":function(e){if(27==e.keyCode){var l=n[n.length-1];if(l==this&&l.updater.get("closable"))r("#"+l.id).trigger("dlg_close")}}},{__an:function(e,l){var a=i.guid("dlg_");if(l.mask){var o=r('<div class="_zs_galleryda" id="mask_'+a+'" />');o.css({zIndex:t-1}),r(document.body).append(o)}var s="wrapper_"+a,d=t,g=l.width,c=l.left,_=l.top,u=r('<div class="_zs_gallerydb" id="'+s+'"\n            style="z-index:'+d+'">\n            <div class="_zs_galleryde" id="'+a+'"\n                style="top:'+_+"px; left:"+c+"px; width:"+g+'px;"></div>\n        </div>');r(document.body).append(u),r(document.body).addClass("_zs_gallerydj"),l.modal&&u.addClass("_zs_gallerydj");var f,p=e.owner.mountVframe(a,"mx-dialog/index",l),m=r("#"+a);return m.on("dlg_close",function(){if(!m.data("closing")&&!f){var l=function(){m.data("closing",1),r("#wrapper_"+a).removeClass("_zs_gallerydd"),r("#mask_"+a).removeClass("_zs_gallerydc"),setTimeout(function(){m.trigger("close"),e.owner&&e.owner.unmountVframe(a),r("#wrapper_"+a).remove(),r("#mask_"+a).remove(),r(document.body)[0==n.length?"removeClass":"addClass"]("_zs_gallerydj")},250)},i={prevent:function(){f=1},resolve:function(){i.p=1,f=0,l()},reject:function(){i.p=1,f=0}};p.invoke("__al",[i]),f||i.p||l()}})},alert:function(e,l,a,r){var o=(r=r||{}).btns+""!="false";return this.mxDialog("mx-dialog/alert",{title:e,content:l,enterCallback:a,hasBtns:o},i.mix({width:320,closable:!1,mask:!1},r))},confirm:function(e,l){return this.mxDialog("mx-dialog/confirm",e,i.mix({width:320,closable:!1,mask:!1},l||{}))},mxDialogGroup:function(e,l){return e.height=l.height||500,this.mxDialog("mx-dialog/group",e,i.mix({width:800,closable:!0,mask:!0},l||{}))},mxDialog:function(e,l,a){var r,t,n=this,s={view:e};return seajs.use(e,n.wrapAsync(function(d){var g="$dlg_"+e;if(!n[g]){n[g]=1;var c=(a=a||{}).width||400,_=a.height||260;i.mix(s,i.mix({mask:!0,modal:!1,width:c,closable:!0,left:(o.width()-c)/2,top:Math.max((o.height()-_)/2,0)},a)),i.mix(s,l),s.dialog={close:function(){r&&r.trigger("dlg_close")}},(r=n.__an(n,s)).on("close",function(){delete n[g],t&&t()})}})),{close:function(){r&&r.trigger("dlg_close")},whenClose:function(e){t=e}}},mxCloseAllDialogs:function(){n.forEach(function(e){var l=r("#"+e.id);l&&l.trigger("dlg_close")})}})});