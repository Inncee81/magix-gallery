define("mx-area/index",["magix","mx-area/data"],(e,a,r)=>{var i=e("magix"),l=e("mx-area/data");i.applyStyle("_zs_gallerym","._zs_galleryb_,._zs_galleryba{display:block;width:300px;margin-bottom:12px}._zs_galleryba{margin-left:20px}._zs_gallerybb ._zs_gallerybc{position:relative;float:left;width:16%;height:46px}._zs_gallerybb ._zs_gallerybc ._zs_gallerybd{padding:5px 0;border-radius:var(--border-radius);transition:all var(--duration)}._zs_gallerybb ._zs_gallerybc ._zs_gallerybd._zs_gallerybe{background-color:var(--color-brand-opacity)}._zs_gallerybb ._zs_gallerybc ._zs_gallerybf{float:left;line-height:46px}._zs_gallerybb ._zs_gallerybc ._zs_gallerybg{float:left;font-size:12px;font-weight:700;font-family:Tahoma;line-height:44px}._zs_gallerybb ._zs_gallerybc ._zs_gallerybh{position:absolute;top:0;left:calc(var(--font-size)*4 + 28px);width:20px;height:46px;line-height:46px;text-align:center;font-size:22px;color:#ccc;cursor:pointer;transition:all var(--duration);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}._zs_gallerybb ._zs_gallerybc ._zs_gallerybh._zs_gallerybi{-webkit-transform:rotate(180deg);transform:rotate(180deg)}._zs_gallerybb ._zs_gallerybc ._zs_gallerybj{position:absolute;top:46px;left:-72px;z-index:99;width:240px;padding:10px;border-radius:var(--border-radius);background-color:#fff}._zs_gallerybb ._zs_gallerybc ._zs_gallerybj ._zs_gallerybk{float:left;width:48%;height:32px;margin-right:2%;line-height:32px;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}._zs_gallerybl{height:46px;line-height:46px}._zs_gallerybm{position:relative;padding-left:25px}._zs_gallerybm ._zs_gallerybn{position:absolute;top:0;left:0;width:25px;height:100%;line-height:46px;font-size:14px;color:#999;font-weight:700;font-family:Tahoma}._zs_gallerybo{float:left;width:50%}._zs_gallerybo ._zs_gallerybc{width:33%;min-width:calc(var(--font-size)*6 + 28px)}._zs_gallerybp{border-bottom:1px solid var(--color-border)}._zs_gallerybp ._zs_gallerybq{float:left;margin-bottom:-1px;padding-left:20px;border-bottom:1px solid transparent;cursor:pointer}._zs_gallerybp ._zs_gallerybq ._zs_gallerybr,._zs_gallerybp ._zs_gallerybq ._zs_gallerybs{float:left;height:46px;line-height:46px}._zs_gallerybp ._zs_gallerybq ._zs_gallerybs{padding-left:5px;padding-right:25px}._zs_gallerybp ._zs_gallerybq:hover{color:var(--color-brand);transition:color var(--duration)}._zs_gallerybp ._zs_gallerybq._zs_gallerybt{color:var(--color-brand);border-bottom:1px solid var(--color-brand)}"),r.exports=i.View.extend({tmpl:function(e,a,r,i,l,t,c,s){if(r||(r=e),!l){var n={"&":"amp","<":"lt",">":"gt",'"':"#34","'":"#39","`":"#96"},o=/[&<>"'`]/g,_=function(e){return"&"+n[e]+";"};l=function(e){return""+(null==e?"":e)},i=function(e){return l(e).replace(o,_)}}if(!t){var d={"!":"%21","'":"%27","(":"%28",")":"%29","*":"%2A"},g=function(e){return d[e]},h=/[!')(*]/g;t=function(e){return encodeURIComponent(l(e)).replace(h,g)}}if(!s){var p=/[\\'"]/g;s=function(e){return l(e).replace(p,"\\$&")}}var b="",f=e.isTab,y=e.placeholder,u=e.types,v=e.curTab,x=e.viewId,z=e.showProvinceId;if(b+='<div mxv class="search-box _zs_galleryb_ ',f&&(b+=" _zs_galleryba "),b+='"><i mxs="_zs_galleryT:_" class="mc-iconfont search-icon">&#xe651;</i><input mx-keyup="'+a+'__g()" class="input search-input" placeholder="'+i(y)+'"/></div>',f){b+='<div mxv mxa="_zs_galleryT:_" class="_zs_gallerybp clearfix">';for(var m=0,k=u.length;m<k;m++){b+='<div mxv class="_zs_gallerybq ',(E=u[m]).id==v&&(b+=" _zs_gallerybt "),b+=' clearfix"><div mxv mxa="_zs_galleryT:a" class="_zs_gallerybr"><input type="checkbox" mx-change="'+a+"__e({typeIndex:"+i(m)+'})" ',E.checked&&(b+=' checked="true" '),b+='/></div><div class="_zs_gallerybs" mx-click="'+a+"__d({curTab:'"+i(s(E.id))+"'})\">"+i(E.name)+"</div></div>"}b+="</div>"}b+=" ";m=0;for(var w=u.length;m<w;m++){var E=u[m];b+='<div mxv class="',f?(b+=" pl20 ",E.id!=v&&(b+=" hide "),b+=" "):b+=" mb15 ",b+='">',f||(b+='<div mxv mxa="_zs_galleryT:b" class="_zs_gallerybl"><label mxv for="'+i(x)+"_"+i(E.id)+'_all"><input mx-change="'+a+"__e({typeIndex:"+i(m)+'})" id="'+i(x)+"_"+i(E.id)+'_all" type="checkbox" ',E.checked&&(b+=' checked="true" '),b+='/><span mxa="_zs_galleryT:c" class="ml5">全选 - '+i(E.name)+"</span></label></div>"),b+='<div mxv mxa="_zs_galleryT:d" class="clearfix">';for(var T=0,I=E.groups,$=I.length;T<$;T++){var P=I[T];b+="<div mxv ",E.half&&(b+=' class="_zs_gallerybo" '),b+=">";for(var q=0,C=P.length;q<C;q++){var j=P[q];b+=" ",j.name&&(b+='<div mxv mxa="_zs_galleryT:e" class="_zs_gallerybm"><div mxa="_zs_galleryT:f" class="_zs_gallerybn">'+i(j.name)+"</div>"),b+='<div mxv mxa="_zs_galleryT:g" class="_zs_gallerybb clearfix">';for(var A=0,V=j.provinces,S=V.length;A<S;A++){var D=V[A];b+='<div mxv class="_zs_gallerybc clearfix" id="'+i(x)+"_province_wrapper_"+i(D.id)+'"><label mxv class="_zs_gallerybf" for="'+i(x)+"_province_"+i(D.id)+'"><input mx-change="'+a+"__f({typeIndex:"+i(m)+",province:"+i(D.id)+'})" type="checkbox" id="'+i(x)+"_province_"+i(D.id)+'" ',D.checked&&(b+=' checked="true" '),b+='/><span class="_zs_gallerybd ',D.highlight&&(b+=" _zs_gallerybe "),b+='">'+i(D.name)+"</span></label>",D.hasCity&&D.count>0&&(b+='<span mxa="_zs_galleryT:h" class="_zs_gallerybg">('+i(D.count)+")</span>"),b+=" ",D.hasCity&&(b+='<i class="mc-iconfont _zs_gallerybh ',D.hasCity&&D.id==z&&(b+=" _zs_gallerybi "),b+='" mx-click="'+a+"__c({province:"+i(D.id)+'})">&#xe692;</i>'),b+='<div mxv style="display: '+i(D.hasCity&&D.id==z?"block":"none")+';" class="_zs_gallerybj mx-shadow clearfix">';for(var R=0,U=D.cities,B=U.length;R<B;R++){var F=U[R];b+='<label mxv for="'+i(x)+"_city_"+i(F.id)+'" class="_zs_gallerybk"><input mx-change="'+a+"__f({typeIndex:"+i(m)+",province:"+i(D.id)+",city:"+i(F.id)+'})" id="'+i(x)+"_city_"+i(F.id)+'" type="checkbox" ',F.checked&&(b+=' checked="true" '),b+='/><span class="_zs_gallerybd ',F.highlight&&(b+=" _zs_gallerybe "),b+='">'+i(F.name)+"</span></label>"}b+="</div></div>"}b+="</div>",j.name&&(b+="</div>"),b+=" "}b+="</div>"}b+="</div></div>"}return b},init:function(e){this.updater.snapshot(),this.assign(e)},assign:function(e){var a=this,r=a.updater.altered(),i=(e.selected||[]).map(function(e){return+e}),t=/^true$/i.test(e.city),c="tab"==e.type,s=$.extend(!0,[],e.data||[]),n=[];if(0==s.length){var o=$.extend(!0,[],l.commonAreas),_=!0,d=$.extend(!0,[],l.lastProvinces),g=!0;o.forEach(function(e){e.provinces.forEach(function(e){a.__b(e,i,t),_=_&&e.checked})}),d.forEach(function(e){a.__b(e,i,t),g=g&&e.checked}),n=[{name:"常用地域",id:"more",half:!0,checked:_,groups:[o.splice(0,7),o]},{name:"非常用地域",id:"less",checked:g,groups:[[{provinces:d}]]}]}else n=s.map(function(e,r){var l=!0;return e.provinces.forEach(function(e){a.__b(e,i,t),l=l&&e.checked}),{name:e.name,id:r,checked:l,groups:[[{provinces:e.provinces}]]}});return a.updater.set({viewId:a.id,showProvinceId:-1,cityVisible:t,placeholder:"省份"+(t?"/城市":""),types:n,selected:i,isTab:c,curTab:n[0].id}),r||(r=a.updater.altered()),!!r&&(a.updater.snapshot(),!0)},render:function(){this.updater.digest({})},"__c<click>":function(e){e.preventDefault();var a=e.params.province;a==this.updater.get("showProvinceId")?this.updater.digest({showProvinceId:-1}):this.updater.digest({showProvinceId:a})},"__d<click>":function(e){this.updater.digest({curTab:e.params.curTab})},"__e<change>":function(e){var a=e.target.checked,r=this.updater.get("types"),i=r[e.params.typeIndex];i.checked=a,i.groups.forEach(function(e){e.forEach(function(e){e.provinces.forEach(function(e){var r=e.cities;e.checked=a,r.forEach(function(e){e.checked=a}),e.count=a?r.length:0})})});var l={types:r};this.updater.get("isTab")&&(l.curTab=i.id),this.updater.digest(l)},"__f<change>":function(e){var a=e.target.checked,r=e.params,i=r.typeIndex,l=r.province,t=r.city,c=this.updater.get("types"),s=!0;c[i].groups.forEach(function(e){e.forEach(function(e){e.provinces.forEach(function(e){if(e.id==l){var r=e.cities;if(t){var i=0;r.forEach(function(e){e.id==t&&(e.checked=a),e.checked&&i++}),e.checked=i>0&&i==r.length,e.count=i}else e.checked=a,e.count=a?r.length:0,r.forEach(function(e){e.checked=a})}s=s&&e.checked})})}),c[i].checked=s,this.updater.digest({types:c})},__b:function(e,a,r){e.checked=$.inArray(+e.id,a)>-1;var i=0;e.cities=e.cities||[],e.cities.forEach(function(r){e.checked?r.checked=!0:r.checked=$.inArray(+r.id,a)>-1,r.checked&&i++}),e.count=i,e.hasCity=e.cities.length>0&&r},"__g<keyup>":function(e){if(13===e.keyCode){var a,r=e.target.value,i=this.updater,l=i.get("types"),t=i.get("cityVisible"),c=!1,s=i.get("curTab");l.forEach(function(e){e.groups.forEach(function(i){i.forEach(function(i){i.provinces.forEach(function(i){(i.highlight=!1,i.name==r&&(a=i.id,i.highlight=!0,s=e.id),t)&&i.cities.forEach(function(l){l.highlight=!1,l.name==r&&(a=i.id,c=!0,l.highlight=!0,s=e.id)})})})})}),i.digest({curTab:s,types:l,showProvinceId:c?a:-1})}},"$doc<click>":function(e){var a=this.updater.get("showProvinceId");if(a>0){var r=$("#"+this.id+"_province_wrapper_"+a),l=r.find("._zs_gallerybf"),t=r.find("._zs_gallerybh"),c=r.find("._zs_gallerybj"),s=e.target;i.inside(s,l[0])||i.inside(s,t[0])||i.inside(s,c[0])||this.updater.digest({showProvinceId:-1})}},val:function(e){var a=this.updater.get("types"),r=this.updater.get("cityVisible"),i=[],l=[];return a.forEach(function(e){e.groups.forEach(function(e){e.forEach(function(e){e.provinces.forEach(function(e){e.checked?(i.push(e.id),l.push(e)):r&&e.cities.forEach(function(e){e.checked&&(i.push(e.id),l.push(e))})})})})}),e?$.extend(!0,[],l):i},getSelected:function(){return this.val(!0)}})});