define("mx-area/index",["magix","mx-area/data"],(e,a,i)=>{var l=e("magix"),r=e("mx-area/data");l.applyStyle("_zs_gallerys","._zs_gallerybA{box-shadow:0 1px 1px 0 rgba(0,0,0,.08);border:1px solid #f5f5f6}._zs_gallerybB,._zs_gallerybC{display:block;width:300px;margin-bottom:12px}._zs_gallerybC{margin-left:20px}._zs_gallerybD ._zs_gallerybE{position:relative;float:left;width:16%;height:46px}._zs_gallerybD ._zs_gallerybE ._zs_gallerybF{padding:5px;border-radius:4px;transition:all .25s}._zs_gallerybD ._zs_gallerybE ._zs_gallerybF._zs_gallerybG{background-color:#d8e3ff}._zs_gallerybD ._zs_gallerybE ._zs_gallerybH{float:left;line-height:46px}._zs_gallerybD ._zs_gallerybE ._zs_gallerybI{float:left;font-weight:700;font-family:Tahoma;line-height:44px}._zs_gallerybD ._zs_gallerybE ._zs_gallerybJ{position:absolute;top:15px;left:88px;width:20px;height:20px;line-height:20px;font-size:20px;color:#ccc;cursor:pointer}._zs_gallerybD ._zs_gallerybE ._zs_gallerybK{position:absolute;top:46px;left:-72px;z-index:3;width:240px;padding:10px;border-radius:4px;background-color:#fff;box-shadow:0 1px 1px 0 rgba(0,0,0,.08);border:1px solid #f5f5f6}._zs_gallerybD ._zs_gallerybE ._zs_gallerybK ._zs_gallerybL{float:left;width:48%;height:32px;margin-right:2%;line-height:32px;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}._zs_gallerybM{height:46px;line-height:46px}._zs_gallerybN{position:relative;padding-left:25px}._zs_gallerybN ._zs_gallerybO{position:absolute;top:0;left:0;width:25px;height:100%;line-height:46px;font-size:14px;color:#999;font-weight:700;font-family:Tahoma}._zs_gallerybP{float:left;width:50%}._zs_gallerybP ._zs_gallerybE{width:33%}._zs_gallerybQ{border-bottom:1px solid #e6e6e6}._zs_gallerybQ ._zs_gallerybR{float:left;margin-bottom:-1px;padding-left:20px;border-bottom:1px solid transparent;cursor:pointer}._zs_gallerybQ ._zs_gallerybR ._zs_gallerybS,._zs_gallerybQ ._zs_gallerybR ._zs_gallerybT{float:left;height:46px;line-height:46px}._zs_gallerybQ ._zs_gallerybR ._zs_gallerybT{padding-left:5px;padding-right:25px}._zs_gallerybQ ._zs_gallerybR:hover{color:#4d7fff;transition:color .25s}._zs_gallerybQ ._zs_gallerybR._zs_gallerybU{color:#4d7fff;border-bottom:1px solid #4d7fff}"),i.exports=l.View.extend({tmpl:function(e,a,i,l,r,t,s,c){if(i||(i=e),!r){var n={"&":"amp","<":"lt",">":"gt",'"':"#34","'":"#39","`":"#96"},o=/[&<>"'`]/g,_=function(e){return"&"+n[e]+";"};r=function(e){return""+(null==e?"":e)},l=function(e){return r(e).replace(o,_)}}if(!t){var d={"!":"%21","'":"%27","(":"%28",")":"%29","*":"%2A"},g=function(e){return d[e]},h=/[!')(*]/g;t=function(e){return encodeURIComponent(r(e)).replace(h,g)}}if(!c){var p=/[\\'"]/g;c=function(e){return r(e).replace(p,"\\$&")}}var f="",y=e.isTab,b=e.placeholder,u=e.types,v=e.curTab,x=e.viewId,z=e.showProvinceId;if(f+='<div mxv class="search-box _zs_gallerybB ',y&&(f+=" _zs_gallerybC "),f+='"><i mxs="_zs_galleryV:_" class="mc-iconfont search-icon">&#xe651;</i><input mx-keyup="'+a+'__e()" class="input search-input" placeholder="'+l(b)+'"/></div>',y){f+='<div mxv mxa="_zs_galleryV:_" class="_zs_gallerybQ clearfix">';for(var m=0,k=u.length;m<k;m++){f+='<div mxv class="_zs_gallerybR ',(w=u[m]).id==v&&(f+=" _zs_gallerybU "),f+=' clearfix"><div mxv mxa="_zs_galleryV:a" class="_zs_gallerybS"><input type="checkbox" mx-change="'+a+"__c({typeIndex:"+l(m)+'})" ',w.checked&&(f+=' checked="true" '),f+='/></div><div class="_zs_gallerybT" mx-click="'+a+"__b({curTab:'"+l(c(w.id))+"'})\">"+l(w.name)+"</div></div>"}f+="</div>"}f+=" ";m=0;for(var E=u.length;m<E;m++){var w=u[m];f+='<div mxv class="',y?(f+=" pl20 ",w.id!=v&&(f+=" hide "),f+=" "):f+=" mb15 ",f+='">',y||(f+='<div mxv mxa="_zs_galleryV:b" class="_zs_gallerybM"><label mxv for="'+l(x)+"_"+l(w.id)+'_all"><input mx-change="'+a+"__c({typeIndex:"+l(m)+'})" id="'+l(x)+"_"+l(w.id)+'_all" type="checkbox" ',w.checked&&(f+=' checked="true" '),f+='/><span mxa="_zs_galleryV:c" class="ml5">全选 - '+l(w.name)+"</span></label></div>"),f+='<div mxv mxa="_zs_galleryV:d" class="clearfix">';for(var I=0,T=w.groups,V=T.length;I<V;I++){var D=T[I];f+="<div mxv ",w.half&&(f+=' class="_zs_gallerybP" '),f+=">";for(var P=0,$=D.length;P<$;P++){var C=D[P];f+=" ",C.name&&(f+='<div mxv mxa="_zs_galleryV:e" class="_zs_gallerybN"><div mxa="_zs_galleryV:f" class="_zs_gallerybO">'+l(C.name)+"</div>"),f+='<div mxv mxa="_zs_galleryV:g" class="_zs_gallerybD clearfix">';for(var Q=0,R=C.provinces,A=R.length;Q<A;Q++){var F=R[Q];f+='<div mxv class="_zs_gallerybE clearfix" id="'+l(x)+"_province_wrapper_"+l(F.id)+'"><label mxv class="_zs_gallerybH" for="'+l(x)+"_province_"+l(F.id)+'"><input mx-change="'+a+"__d({typeIndex:"+l(m)+",province:"+l(F.id)+'})" type="checkbox" id="'+l(x)+"_province_"+l(F.id)+'" ',F.checked&&(f+=' checked="true" '),f+='/><span class="_zs_gallerybF ',F.highlight&&(f+=" _zs_gallerybG "),f+='">'+l(F.name)+"</span></label>",F.hasCity&&F.count>0&&(f+='<span mxa="_zs_galleryV:h" class="_zs_gallerybI">('+l(F.count)+")</span>"),f+=" ",F.hasCity&&(f+='<i class="mc-iconfont _zs_gallerybJ" mx-click="'+a+"__a({province:"+l(F.id)+'})">&#xe692;</i>'),f+='<div mxv style="display: '+l(F.hasCity&&F.id==z?"block":"none")+';" class="_zs_gallerybK clearfix">';for(var K=0,S=F.cities,G=S.length;K<G;K++){var H=S[K];f+='<label mxv for="'+l(x)+"_city_"+l(H.id)+'" class="_zs_gallerybL"><input mx-change="'+a+"__d({typeIndex:"+l(m)+",province:"+l(F.id)+",city:"+l(H.id)+'})" id="'+l(x)+"_city_"+l(H.id)+'" type="checkbox" ',H.checked&&(f+=' checked="true" '),f+='/><span class="_zs_gallerybF ',H.highlight&&(f+=" _zs_gallerybG "),f+='">'+l(H.name)+"</span></label>"}f+="</div></div>"}f+="</div>",C.name&&(f+="</div>"),f+=" "}f+="</div>"}f+="</div></div>"}return f},init:function(e){this.updater.snapshot(),this.assign(e)},assign:function(e){var a=this,i=a.updater.altered(),l=(e.selected||[]).map(function(e){return+e}),t=/^true$/i.test(e.city),s="tab"==e.type,c=$.extend(!0,[],e.data||[]),n=[];if(0==c.length){var o=$.extend(!0,[],r.commonAreas),_=!0,d=$.extend(!0,[],r.lastProvinces),g=!0;o.forEach(function(e){e.provinces.forEach(function(e){a.___(e,l,t),_=_&&e.checked})}),d.forEach(function(e){a.___(e,l,t),g=g&&e.checked}),n=[{name:"常用地域",id:"more",half:!0,checked:_,groups:[o.splice(0,7),o]},{name:"非常用地域",id:"less",checked:g,groups:[[{provinces:d}]]}]}else n=c.map(function(e,i){var r=!0;return e.provinces.forEach(function(e){a.___(e,l,t),r=r&&e.checked}),{name:e.name,id:i,checked:r,groups:[[{provinces:e.provinces}]]}});return a.updater.set({viewId:a.id,showProvinceId:-1,cityVisible:t,placeholder:"省份"+(t?"/城市":""),types:n,selected:l,isTab:s,curTab:n[0].id}),i||(i=a.updater.altered()),!!i&&(a.updater.snapshot(),!0)},render:function(){this.updater.digest({})},"__a<click>":function(e){e.preventDefault();var a=e.params.province;this.updater.set({showProvinceId:a}).digest()},"__b<click>":function(e){this.updater.digest({curTab:e.params.curTab})},"__c<change>":function(e){var a=e.target.checked,i=this.updater.get("types"),l=i[e.params.typeIndex];l.checked=a,l.groups.forEach(function(e){e.forEach(function(e){e.provinces.forEach(function(e){var i=e.cities;e.checked=a,i.forEach(function(e){e.checked=a}),e.count=a?i.length:0})})});var r={types:i};this.updater.get("isTab")&&(r.curTab=l.id),this.updater.digest(r)},"__d<change>":function(e){var a=e.target.checked,i=e.params,l=i.typeIndex,r=i.province,t=i.city,s=this.updater.get("types"),c=!0;s[l].groups.forEach(function(e){e.forEach(function(e){e.provinces.forEach(function(e){if(e.id==r){var i=e.cities;if(t){var l=0;i.forEach(function(e){e.id==t&&(e.checked=a),e.checked&&l++}),e.checked=l>0&&l==i.length,e.count=l}else e.checked=a,e.count=a?i.length:0,i.forEach(function(e){e.checked=a})}c=c&&e.checked})})}),s[l].checked=c,this.updater.set({types:s}).digest()},___:function(e,a,i){e.checked=$.inArray(+e.id,a)>-1;var l=0;e.cities=e.cities||[],e.cities.forEach(function(i){e.checked?i.checked=!0:i.checked=$.inArray(+i.id,a)>-1,i.checked&&l++}),e.count=l,e.hasCity=e.cities.length>0&&i},"__e<keyup>":function(e){if(13===e.keyCode){var a,i=e.target.value,l=this.updater,r=l.get("types"),t=l.get("cityVisible"),s=!1,c=l.get("curTab");r.forEach(function(e){e.groups.forEach(function(l){l.forEach(function(l){l.provinces.forEach(function(l){(l.highlight=!1,l.name==i&&(a=l.id,l.highlight=!0,c=e.id),t)&&l.cities.forEach(function(r){r.highlight=!1,r.name==i&&(a=l.id,s=!0,r.highlight=!0,c=e.id)})})})})}),l.digest({curTab:c,types:r,showProvinceId:s?a:-1})}},"$doc<click>":function(e){var a=this.updater.get("showProvinceId");if(a>0){var i=$("#"+this.id+"_province_wrapper_"+a),r=i.find("._zs_gallerybH"),t=i.find("._zs_gallerybJ"),s=i.find("._zs_gallerybK"),c=e.target;l.inside(c,r[0])||l.inside(c,t[0])||l.inside(c,s[0])||this.updater.set({showProvinceId:-1}).digest()}},val:function(e){var a=this.updater.get("types"),i=this.updater.get("cityVisible"),l=[],r=[];return a.forEach(function(e){e.groups.forEach(function(e){e.forEach(function(e){e.provinces.forEach(function(e){e.checked?(l.push(e.id),r.push(e)):i&&e.cities.forEach(function(e){e.checked&&(l.push(e.id),r.push(e))})})})})}),e?$.extend(!0,[],r):l},getSelected:function(){return this.val(!0)}})});