define("mx-editor/index",["magix","mx-form/index","mx-form/validator"],(e,t,i)=>{var r=e("magix"),l=e("mx-form/index"),n=e("mx-form/validator");r.applyStyle("_zs_galleryG","._zs_galleryeD{box-shadow:0 1px 1px 0 rgba(0,0,0,.08);border:1px solid #f5f5f6}._zs_galleryeE ._zs_galleryeF{display:none}._zs_galleryeE ._zs_galleryeG{display:inline-block;word-break:break-all}._zs_galleryeE ._zs_galleryeG ._zs_galleryeH{opacity:0;position:relative;top:2px;left:2px;color:#ccc;cursor:pointer}._zs_galleryeE ._zs_galleryeG:hover ._zs_galleryeH{opacity:1}._zs_galleryeE._zs_galleryeI ._zs_galleryeF{display:inline-block}._zs_galleryeE._zs_galleryeI ._zs_galleryeG{display:none}");i.exports=r.View.extend({tmpl:function(e,t,i,r,l,n,a,s){if(i||(i=e),!l){var o={"&":"amp","<":"lt",">":"gt",'"':"#34","'":"#39","`":"#96"},_=/[&<>"'`]/g,d=function(e){return"&"+o[e]+";"};l=function(e){return""+(null==e?"":e)},r=function(e){return l(e).replace(_,d)}}if(!n){var u={"!":"%21","'":"%27","(":"%28",")":"%29","*":"%2A"},p=function(e){return u[e]},c=/[!')(*]/g;n=function(e){return encodeURIComponent(l(e)).replace(c,p)}}if(!s){var g=/[\\'"]/g;s=function(e){return l(e).replace(g,"\\$&")}}a||(a=function(e,t,i,r){for(r=e[y];--r;)if(e[i=y+r]===t)return i;return e[i=y+e[y]++]=t,i});var y="",f="",m=e.editing,x=e.small,h=e.width,v=e.viewId,z=e.content,b=e.rules,k=e.dis;return f+='<div mxv class="_zs_galleryeE ',m&&(f+=" _zs_galleryeI "),f+='"><input mxe="'+t+"_0\" mxc=\"[{p:'content',f:'"+a(i,b)+'\'}]" class="input ',x&&(f+=" input-small "),f+=' _zs_galleryeF" style="width: '+r(h)+'px;" id="'+r(v)+'_input" value="'+r(z)+'" mx-keyup="'+t+'__bV()" mx-focusout="'+t+'__bV()"/><div mxa="_zs_gallerya#:_" class="_zs_galleryeG">'+l(k)+'<i mxs="_zs_gallerya#:_" class="mc-iconfont operations _zs_galleryeH" mx-click="'+t+'__n()">&#xe698;</i></div></div>'},mixins:[l,n],init:function(e){var t=this;t.updater.snapshot(),t.assign(e),t.on("destroy",function(){clearTimeout(t.__bT)})},assign:function(e){var t=this.updater.altered(),i=e.rules||{},r=e.content,l=/^true$/i.test(e.small),n=e.tmpl||"${content}";return this.__bU=r,this.updater.set({viewId:this.id,tmpl:n,dis:n.replace("${content}",r),content:r,rules:i,small:l,width:e.width||140,editing:!1}),t||(t=this.updater.altered()),!!t&&(this.updater.snapshot(),!0)},render:function(){this.updater.digest()},"__n<click>":function(e){e.preventDefault(),this.updater.digest({editing:!0}),$("#"+this.id+"_input").focus()},"__bV<keyup>":function(e){var t=this.isValid();if(13==e.keyCode&&t){var i=e.target.value,r=this.updater.get("tmpl");this.updater.digest({editing:!1,dis:r.replace("${content}",i),content:i})}},"__bV<focusout>":function(e){e.stopPropagation();if(this.isValid()){var t=e.target.value,i=this.updater.get("tmpl");this.updater.digest({editing:!1,dis:i.replace("${content}",t),content:t});t=this.updater.get("content");this.__bU!=t&&$("#"+this.id).trigger({type:"edit",editText:t})}}})});