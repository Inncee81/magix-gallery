define("mx-calendar/rangepicker",["magix","$","../mx-util/monitor","mx-calendar/util","mx-medusa/util","./range"],(t,e,r)=>{t("./range");var a=t("magix"),s=t("$"),i=t("../mx-util/monitor"),n=t("mx-calendar/util"),l=n.dateFormat,_=n.getDefaultDate,g=n.getQuickInfos,o=n.getOffsetDate,d=t("mx-medusa/util");a.applyStyle("_zs_galleryp","._zs_gallerybD{position:relative;padding:0 10px}._zs_gallerybD._zs_gallerybE ._zs_gallerybF{padding:0 5px}._zs_gallerybD._zs_gallerybG ._zs_gallerybF{position:absolute;top:50%;left:50%;width:40px;height:30px;margin-left:-20px;margin-top:-15px;line-height:30px;text-align:center}._zs_gallerybD._zs_gallerybG ._zs_gallerybH{display:inline-block;width:50%;text-align:center}._zs_gallerybD._zs_gallerybG ._zs_gallerybI{padding-right:10px}._zs_gallerybD._zs_gallerybG ._zs_gallerybJ{padding-left:10px}._zs_gallerybD._zs_gallerybK ._zs_gallerybI{color:var(--color-brand)}._zs_gallerybD._zs_gallerybK ._zs_gallerybJ{color:var(--color-brand-vs)}[mx-disabled] ._zs_gallerybD._zs_gallerybK ._zs_gallerybI,[mx-disabled] ._zs_gallerybD._zs_gallerybK ._zs_gallerybJ,[mx-disabled]:hover ._zs_gallerybD._zs_gallerybK ._zs_gallerybI,[mx-disabled]:hover ._zs_gallerybD._zs_gallerybK ._zs_gallerybJ{color:#999}");var u=a.View.extend({tmpl:function(t,e,r,a,s,i,n,l){if(r||(r=t),!s){var _={"&":"amp","<":"lt",">":"gt",'"':"#34","'":"#39","`":"#96"},g=/[&<>"'`]/g,o=function(t){return"&"+_[t]+";"};s=function(t){return""+(null==t?"":t)},a=function(t){return s(t).replace(g,o)}}if(!i){var d={"!":"%21","'":"%27","(":"%28",")":"%29","*":"%2A"},u=function(t){return d[t]},c=/[!')(*]/g;i=function(t){return encodeURIComponent(s(t)).replace(c,u)}}if(!l){var p=/[\\'"]/g;l=function(t){return s(t).replace(p,"\\$&")}}n||(n=function(t,e,r,a){for(a=t[f];--a;)if(t[r=f+a]===e)return r;return t[r=f+t[f]++]=e,r});var f="",h="",y=t.textAlign,b=t.rangeInfo,v=t.viewId,m=t.result,x=t.show,z=t.left,S=t.top;return h+='<div class="mx-trigger _zs_gallerybD '+a(y)+" ",b.vs&&(h+=" _zs_gallerybK "),h+='" id="trigger_'+a(v)+'" mx-click="'+e+'__p()" mx-change="'+e+'__m()">',m.endStr?h+='<span mxa="_zs_gallery]:_" class="_zs_gallerybH _zs_gallerybI">'+a(m.startStr)+'</span><span mxa="_zs_gallery]:a" class="_zs_gallerybF color-9">'+a(m.centetTip)+'</span><span mxa="_zs_gallery]:b" class="_zs_gallerybH _zs_gallerybJ">'+a(m.endStr)+"</span>":h+=" "+a(m.startStr)+" ",h+='</div><div mxv="rangeInfo" class="mx-output mx-output-bottom ',x&&(h+=" mx-output-open "),h+='" style="left:'+a(z)+"px;top:"+a(S)+'px;" id="rpcnt_'+a(v)+'" mx-view="mx-calendar/range?configs='+n(r,b)+'" mx-change="'+e+'__O()" mx-cancel="'+e+'__n()"></div>'},init:function(t){var e=this;i.__h(),e.on("destroy",function(){i.__i(e),i.__j()}),e.updater.snapshot(),e.assign(t)},assign:function(t){var e=this.updater.altered();this.__k=t.disabled+""=="true"||s("#"+this.id)[0].hasAttribute("mx-disabled");var r={left:"_zs_gallerybE",center:"_zs_gallerybG"}[t.textAlign||"center"]||"_zs_gallerybG",a=/^true$/i.test(t.vsenable)||!1,i=!1;a&&(i=/^true$/i.test(t.vs)||!1);var o=a&&/^true$/i.test(t.single)||!1,d=t.timeType,u=t.formatter||"YYYY-MM-dd"+(d?" hh:mm:ss":""),c=t.dateType,p=/^true$/i.test(t.startDisabled)||!1,f=/^true$/i.test(t.endDisabled)||!1,h=!/^false$/i.test(t.shortcuts),y=h?t.shortkeys||["today","yesterday","preWeekMon","lastestWeekMon","preMonth","lastestThisMonth"]:[];if(p){h=!1;for(var b=0;b<y.length;b++)y[b].indexOf("dynamic")<0&&y[b].indexOf("forever")<0&&y.splice(b--,1)}f&&(h=!1,y=[]);var v=t.start,m=t.end,x=t.min,z=t.max;v||(v=_(x,z,u)),m||h&&!(y.indexOf("forever")<0)||(m=_(x,z,u));var S,D,k=new Date(l(v,u)),w=l(k,u);m==n.foreverStr?S=D=n.foreverStr:(S=new Date(l(m,u)),D=l(S,u));for(var I,T,$=g(y,w,u),G=0;G<$.length;G++){var K=$[G];K.start==w&&K.end==D&&(I=K.text,T=K.key)}var O={start:k,startStr:w,end:S,endStr:D,formatter:u,quickDateText:I,quickDateKey:T},q={min:x,max:z,timeType:d,dateType:c,formatter:u,quickDates:y,quickGap:t.quickGap,align:t.align,vsEnable:a,vs:i,vsSingle:o,startDisabled:p,endDisabled:f,dates:O,disabledWeeks:t.disabledWeeks||[]};return this.updater.set({viewId:this.id,rangeInfo:q,textAlign:r}),this.__a=s("#"+this.id),this.__a.val(JSON.stringify({start:O.startStr,end:O.endStr,vs:i})),e||(e=this.updater.altered()),!!e&&(this.updater.snapshot(),!0)},render:function(){this.__N()},__N:function(){var t,e=this.updater.get("rangeInfo"),r=e.dates,a=e.vs,s=e.vsSingle,i=e.formatter,_=r.startStr,g=r.endStr,u=r.quickDateText,c={centetTip:a?d["calendar.vs"]:d["calendar.to"]},p=l(o(0),i),f=l(o(-1),i),h=l(o(1),i),y=((t={})[p]=d["calendar.today"],t[f]=d["calendar.yesterday"],t[h]=d["calendar.tomorrow"],t),b=function(t){return y[t]||t};a?(c.startStr=b(_),c.endStr=b(g)):s?c.startStr=b(_):u?u==n.foreverStr?(c.startStr=_,c.endStr=n.foreverStr):c.startStr=u:(c.startStr=_,c.endStr=g),this.updater.digest({result:c})},"__m<change,focusin,focusout>":function(t){t.dates||t.stopPropagation()},"__p<click>":function(t){this.__k||(t.preventDefault(),this.updater.get("show")?this.__n():this.__o())},__o:function(){var t=this.updater,e=t.get("rangeInfo");if(!t.get("show")){t.digest({show:!0});var r=s("#trigger_"+this.id),a=s("#rpcnt_"+this.id),n=0,l=r.outerHeight();"right"==e.align&&(n=r.outerWidth()-a.outerWidth()),t.digest({top:l,left:n}),i.__q(this)}},__n:function(){this.updater.get("show")&&(this.updater.digest({show:!1}),i.__i(this))},"__O<change>":function(t){t.stopPropagation();var e=this.updater.get("rangeInfo"),r=t.dates,s=t.vs;a.mix(e,{dates:r,vs:s}),this.__N(),this.__n();var i=JSON.stringify({start:r.startStr,end:r.endStr,vs:s});this.__a.val(i).trigger({type:"change",start:r.startStr,end:r.endStr,vs:s,dates:r})},"__n<cancel>":function(t){t.stopPropagation(),this.__n()},__l:function(t){var e=a.inside(t,this.id)||a.inside(t,this.__a[0]);if(!e)for(var r=this.owner.children(),s=r.length-1;s>=0;s--){var i=a.Vframe.get(r[s]);if(i&&(e=i.invoke("__l",[t])),e)break}return e}});r.exports=u});