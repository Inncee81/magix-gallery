define("mx-color/picker",["magix","$","../mx-util/monitor","./index"],(r,i,t)=>{var e=r("magix"),o=r("$"),l=r("../mx-util/monitor");r("./index"),e.applyStyle("_zs_galleryB",':root{--mx-color-width:224px;--mx-color-slider-width:18px;--mx-color-picker-width:calc(var(--mx-color-width) - var(--mx-color-slider-width) - 10px)}._zs_galleryds,._zs_gallerydt,._zs_gallerydu{width:var(--mx-color-width)}._zs_galleryds{margin:10px 0}._zs_gallerydv{position:relative;float:left;width:15px;height:15px;margin:-1px 0 0 -1px;border:1px solid #333;cursor:pointer}._zs_gallerydv._zs_gallerydw:after,._zs_gallerydv._zs_gallerydw:before{content:" ";position:absolute;left:0;top:0;width:100%;height:100%}._zs_gallerydv._zs_gallerydw:before{z-index:2;border:1px solid #fff}._zs_gallerydv._zs_gallerydw:after{z-index:1;border:2px solid #333}._zs_gallerydx{float:left;position:relative;width:var(--mx-color-picker-width);height:var(--mx-color-picker-width);cursor:pointer}._zs_gallerydx ._zs_gallerydy{position:absolute;width:8px;height:8px;box-shadow:0 0 0 1.5px #fff,inset 0 0 1px 1px rgba(0,0,0,.3),0 0 1px 2px rgba(0,0,0,.4);border-radius:50%}._zs_gallerydz{float:right;position:relative;width:var(--mx-color-slider-width);height:var(--mx-color-picker-width);cursor:pointer}._zs_gallerydz ._zs_gallerydA{position:absolute;right:-6px;top:-6px;width:0;height:0;background-color:none;border:6px solid transparent;border-right-color:#333;border-left:none}._zs_gallerydB{width:calc(var(--mx-color-width) - 120px)}._zs_gallerydC,._zs_gallerydD{width:50px}._zs_gallerydC{height:var(--input-height);margin-right:10px;border-radius:var(--border-radius);border:1px solid var(--color-border)}._zs_gallerydE{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAIAAADZF8uwAAAAGUlEQVQYV2M4gwH+YwCGIasIUwhT25BVBADtzYNYrHvv4gAAAABJRU5ErkJggg==);width:var(--mx-color-width);height:12px;margin-bottom:10px}._zs_gallerydF{position:relative;height:100%;cursor:pointer}._zs_gallerydG{position:absolute;left:-2px;top:2px;height:8px;width:4px;box-shadow:0 0 0 1.5px #fff,inset 0 0 1px 1px rgba(0,0,0,.3),0 0 1px 2px rgba(0,0,0,.4);background:#fff}._zs_gallerydH{display:inline-block;width:var(--input-height);height:var(--input-height);border-radius:50%;vertical-align:middle}[mx-view*="mx-color/index"]{width:calc(var(--mx-color-width) + 22px);min-width:calc(var(--mx-color-width) + 22px);padding:10px;background-color:#fff}[mx-view*="mx-color/picker"] ._zs_gallerydI{min-width:0}[mx-view*="mx-color/picker"][mx-view*="dot=true"]{min-width:var(--input-height)}[mx-view*="mx-color/picker"][mx-view*="dot=true"] ._zs_gallerydI{max-width:none}'),t.exports=e.View.extend({tmpl:function(r,i,t,e,o,l,a,d){if(t||(t=r),!o){var n={"&":"amp","<":"lt",">":"gt",'"':"#34","'":"#39","`":"#96"},s=/[&<>"'`]/g,h=function(r){return"&"+n[r]+";"};o=function(r){return""+(null==r?"":r)},e=function(r){return o(r).replace(s,h)}}if(!l){var _={"!":"%21","'":"%27","(":"%28",")":"%29","*":"%2A"},g=function(r){return _[r]},p=/[!')(*]/g;l=function(r){return encodeURIComponent(o(r)).replace(p,g)}}if(!d){var c=/[\\'"]/g;d=function(r){return o(r).replace(c,"\\$&")}}a||(a=function(r,i,t,e){for(e=r[x];--e;)if(r[t=x+e]===i)return t;return r[t=x+r[x]++]=i,t});var x="",u="",f=r.dot,v=r.viewId,w=r.info,m=r.show,y=r.left,z=r.top;return u+=f?'<div class="_zs_gallerydH" id="trigger_'+e(v)+'" style="background: '+e(w.color)+';" mx-click="'+i+'__p()" mx-change="'+i+'__m()"></div>':'<div class="mx-trigger" id="trigger_'+e(v)+'" mx-click="'+i+'__p()" mx-change="'+i+'__m()">'+e(w.color)+"</div>",u+='<div mxv="info" class="_zs_gallerydI mx-output mx-output-bottom ',m&&(u+=" mx-output-open "),u+='" id="cpcnt_'+e(v)+'" style="left:'+e(y)+"px;top:"+e(z)+'px;" mx-view="mx-color/index?data='+a(t,w)+'" mx-change="'+i+'__ax()"></div>'},init:function(r){var i=this;l.__h(),i.on("destroy",function(){l.__i(i),l.__j()}),i.updater.snapshot(),i.assign(r)},assign:function(r){var i=this.updater.altered(),t=r.color||"";return this.updater.set({viewId:this.id,align:r.align,show:!1,dot:r.dot+""=="true",info:{showBtns:!0,showAlpha:r.showAlpha,color:t}}),this.__a=o("#"+this.id),this.__a.val(t),i||(i=this.updater.altered()),!!i&&(this.updater.snapshot(),!0)},render:function(){this.updater.digest({})},"__m<change>":function(r){r.stopPropagation()},"__p<click>":function(r){r.preventDefault(),this.updater.get("show")?this.__n():this.__o()},__o:function(){var r=this.updater;if(!r.get("show")){r.digest({show:!0});var i=o("#trigger_"+this.id),t=o("#cpcnt_"+this.id),e=0,a=i.outerHeight();"right"==r.get("align")&&(e=i.outerWidth()-t.outerWidth()),r.digest({top:a,left:e}),l.__q(this)}},__n:function(){var r=this.updater.get(),i=r.show,t=r.info;if(i){var e=this.__a.val();t.color=e,this.updater.digest({show:!1,info:t}),l.__i(this)}},__l:function(r){var i=e.inside(r,this.id)||e.inside(r,this.__a[0]);if(!i)for(var t=this.owner.children(),o=t.length-1;o>=0;o--){var l=e.Vframe.get(t[o]);if(l&&(i=l.invoke("__l",[r])),i)break}return i},"__ax<change>":function(r){r.stopPropagation();this.__a.val(r.color).trigger({type:"change",color:r.color}),this.__n()}})});