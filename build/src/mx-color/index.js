define("mx-color/index",["magix","$","../mx-dragdrop/index"],(a,s,t)=>{var e=a("magix"),i=a("$"),o=a("../mx-dragdrop/index");e.applyStyle("_zs_galleryC",'._zs_gallerydD{box-shadow:0 1px 1px 0 rgba(0,0,0,.08);border:1px solid #f5f5f6}[mx-view*="mx-color/picker"]{display:inline-block;position:relative;vertical-align:middle}[mx-view*="mx-color/picker"] ._zs_gallerydE{display:none;position:absolute;z-index:1000;width:246px}[mx-view*="mx-color/picker"] ._zs_gallerydE._zs_gallerydF{display:block;-webkit-animation:fade-in-down .25s ease-out;animation:fade-in-down .25s ease-out;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}[mx-view*="mx-color/picker"] ._zs_gallerydG{width:100%;min-width:246px}[mx-view*="mx-color/index"]{position:relative;display:inline-block;z-index:1;padding:10px;background-color:#fff;border:1px solid #e6e6e6;border-radius:4px}._zs_gallerydH,._zs_gallerydI,._zs_gallerydJ{width:224px}._zs_gallerydH{margin:10px 0}._zs_gallerydK{position:relative;float:left;width:15px;height:15px;margin:-1px 0 0 -1px;border:1px solid #333;cursor:pointer}._zs_gallerydK._zs_gallerydL:after,._zs_gallerydK._zs_gallerydL:before{content:" ";position:absolute;left:0;top:0;width:100%;height:100%}._zs_gallerydK._zs_gallerydL:before{z-index:2;border:1px solid #fff}._zs_gallerydK._zs_gallerydL:after{z-index:1;border:2px solid #333}._zs_gallerydM{float:left;position:relative;width:196px;height:196px;cursor:pointer}._zs_gallerydM ._zs_gallerydN{position:absolute;width:8px;height:8px;box-shadow:0 0 0 1.5px #fff,inset 0 0 1px 1px rgba(0,0,0,.3),0 0 1px 2px rgba(0,0,0,.4);border-radius:50%}._zs_gallerydO{float:right;position:relative;width:18px;height:196px;cursor:pointer}._zs_gallerydO ._zs_gallerydP{position:absolute;right:-6px;top:-6px;width:0;height:0;background-color:none;border:6px solid transparent;border-right-color:#333;border-left:none}._zs_gallerydQ{width:104px}._zs_gallerydR{height:32px;width:50px;margin-right:10px;border-radius:4px;border:1px solid #e6e6e6}._zs_gallerydS{background:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAIAAADZF8uwAAAAGUlEQVQYV2M4gwH+YwCGIasIUwhT25BVBADtzYNYrHvv4gAAAABJRU5ErkJggg==);width:224px;height:12px;margin-bottom:10px}._zs_gallerydT{height:100%}._zs_gallerydU{position:absolute;left:-2px;top:2px;height:8px;width:4px;box-shadow:0 0 0 1.5px #fff,inset 0 0 1px 1px rgba(0,0,0,.3),0 0 1px 2px rgba(0,0,0,.4);background:#fff}');var r="_zs_gallerydL",_=["d81e06","f4ea2a","1afa29","1296db","13227a","d4237a","ffffff","e6e6e6","dbdbdb","cdcdcd","bfbfbf","8a8a8a","707070","515151","2c2c2c","000000","ea986c","eeb174","f3ca7e","f9f28b","c8db8c","aad08f","87c38f","83c6c2","7dc5eb","87a7d6","8992c8","a686ba","bd8cbb","be8dbd","e89abe","e8989a","e16632","e98f36","efb336","f6ef37","afcd51","7cba59","36ab60","1baba8","17ace3","3f81c1","4f68b0","594d9c","82529d","a4579d","db649b","dd6572","d84e06","e0620d","ea9518","f4ea2a","8cbb1a","2ba515","0e932e","0c9890","1295db","0061b2","0061b0","004198","122179","88147f","d3227b","d6204b"],l=function(a,s,t){var e,i,o,r,_;a=a%360/60,e=i=o=t-(_=t*s);var l=255*(e+=[_,r=_*(1-Math.abs(a%2-1)),0,0,r,_][a=~~a]),d=255*(i+=[r,_,_,r,0,0][a]),n=255*(o+=[0,0,r,_,_,r][a]);return{r:l,g:d,b:n,hex:"#"+(16777216|n|d<<8|l<<16).toString(16).slice(1)}};t.exports=e.View.extend({mixins:[o],tmpl:function(a,s,t,e,i,o,r,_){if(t||(t=a),!i){var l={"&":"amp","<":"lt",">":"gt",'"':"#34","'":"#39","`":"#96"},d=/[&<>"'`]/g,n=function(a){return"&"+l[a]+";"};i=function(a){return""+(null==a?"":a)},e=function(a){return i(a).replace(d,n)}}if(!o){var p={"!":"%21","'":"%27","(":"%28",")":"%29","*":"%2A"},g=function(a){return p[a]},c=/[!')(*]/g;o=function(a){return encodeURIComponent(i(a)).replace(c,g)}}if(!_){var f=/[\\'"]/g;_=function(a){return i(a).replace(f,"\\$&")}}var h="",x=a.id,v=a.shortcuts,y=a.alpha,b=a.btns;h+='<div id="scs_'+e(x)+'"><ul mxa="_zs_galleryao:_" class="_zs_gallerydJ clearfix">';for(var u=0;u<v.length;u++)h+='<li class="_zs_gallerydK" id="sc_'+e(v[u])+"_"+e(x)+'" style="background:#'+e(v[u])+'" mx-click="'+s+"__aq({color:'#"+e(_(v[u]))+"'})\"></li>";return h+='</ul></div><div mxa="_zs_galleryao:a" class="_zs_gallerydH clearfix"><div class="_zs_gallerydM" id="cz_'+e(x)+'" mx-mousedown="'+s+'__ao()"><svg mxa="_zs_galleryao:b" xmlns="http://www.w3.org/2000/svg" version="1.1" width="100%" height="100%"><defs><lineargradient id="gb_'+e(x)+'" x1="0%" y1="100%" x2="0%" y2="0%"><stop mxs="_zs_galleryao:_" offset="0%" stop-color="#000000" stop-opacity="1"></stop><stop mxs="_zs_galleryao:a" offset="100%" stop-color="#CC9A81" stop-opacity="0"></stop></lineargradient><lineargradient id="gw_'+e(x)+'" x1="0%" y1="100%" x2="100%" y2="100%"><stop mxs="_zs_galleryao:b" offset="0%" stop-color="#FFFFFF" stop-opacity="1"></stop><stop mxs="_zs_galleryao:a" offset="100%" stop-color="#CC9A81" stop-opacity="0"></stop></lineargradient></defs><rect x="0" y="0" width="100%" height="100%" fill="url(#gw_'+e(x)+')"></rect><rect x="0" y="0" width="100%" height="100%" fill="url(#gb_'+e(x)+')"></rect></svg><div class="_zs_gallerydN" id="ci_'+e(x)+'"></div></div><div mxa="_zs_galleryao:c" class="_zs_gallerydO" mx-mousedown="'+s+'__an()"><svg mxa="_zs_galleryao:d" xmlns="http://www.w3.org/2000/svg" version="1.1" width="100%" height="100%"><defs><lineargradient id="ghsv_'+e(x)+'" x1="0%" y1="100%" x2="0%" y2="0%"><stop mxs="_zs_galleryao:c" offset="0%" stop-color="#FF0000" stop-opacity="1"></stop><stop mxs="_zs_galleryao:d" offset="13%" stop-color="#FF00FF" stop-opacity="1"></stop><stop mxs="_zs_galleryao:e" offset="25%" stop-color="#8000FF" stop-opacity="1"></stop><stop mxs="_zs_galleryao:f" offset="38%" stop-color="#0040FF" stop-opacity="1"></stop><stop mxs="_zs_galleryao:g" offset="50%" stop-color="#00FFFF" stop-opacity="1"></stop><stop mxs="_zs_galleryao:h" offset="63%" stop-color="#00FF40" stop-opacity="1"></stop><stop mxs="_zs_galleryao:i" offset="75%" stop-color="#0BED00" stop-opacity="1"></stop><stop mxs="_zs_galleryao:j" offset="88%" stop-color="#FFFF00" stop-opacity="1"></stop><stop mxs="_zs_galleryao:k" offset="100%" stop-color="#FF0000" stop-opacity="1"></stop></lineargradient></defs><rect x="0" y="0" width="100%" height="100%" fill="url(#ghsv_'+e(x)+')"></rect></svg><div class="_zs_gallerydP" id="si_'+e(x)+'"></div></div></div>',y&&(h+='<div mxa="_zs_galleryao:e" class="_zs_gallerydS pr"><div class="_zs_gallerydT pr cp" id="at_'+e(x)+'" mx-mousedown="'+s+'__ap()"><div class="_zs_gallerydU" id="ai_'+e(x)+'"></div></div></div>'),h+='<div mxv mxa="_zs_galleryao:f" class="_zs_gallerydI clearfix"><span class="fl _zs_gallerydR" id="bc_'+e(x)+'"></span><input class="fl input _zs_gallerydQ" readonly="readonly" id="v_'+e(x)+'"/>',b&&(h+='<a mxs="_zs_galleryao:l" href="javascript:;" class="fr btn btn-brand" mx-click="'+s+'__ar()">确定</a>'),h+="</div>"},init:function(a){var s=a.data||{};this.__ad=s.color||"#ffffff",this.__ae=s.showAlpha+""=="true",this.__af=s.showBtns+""=="true",this.__ag={h:0,s:1,v:1}},render:function(){var a=this;a.updater.digest({id:a.id,alpha:a.__ae,btns:a.__af,shortcuts:_}),a.__ah(a.__ad)},__ak:function(a,s){var t=this,e=t.__ag;e.h=a.h%360,e.s=a.s,e.v=a.v;var o=l(a.h,a.s,a.v).hex,_=i("#cz_"+t.id),d=_.width(),n=l(a.h,1,1);if(_.css("background",n.hex),t.__ai=o,t.__aj(),!s){i("#scs_"+t.id+" li").removeClass(r);var p=i("#si_"+t.id).height()/2;p<0&&(p=0);var g=Math.round(e.h*d/360-p),c=i("#ci_"+t.id).width()/2;i("#si_"+t.id).css({top:g-6}),g=Math.round((1-e.v)*d-c);var f=Math.round(e.s*d-c);i("#ci_"+t.id).css({left:f,top:g})}i("#sc_"+o.substr(1,6)+"_"+t.id).addClass(r)},__ah:function(a){var s=parseInt(a.substr(1,2),16),t=parseInt(a.substr(3,2),16),e=parseInt(a.substr(5,2),16),i=parseInt(a.substr(7,2),16);isNaN(i)&&(i=255),this.__al=("0"+i.toString(16)).slice(-2);var o=function(a,s,t){var e,i;return a/=255,s/=255,t/=255,{h:(0==(i=(e=Math.max(a,s,t))-Math.min(a,s,t))?null:e==a?(s-t)/i+(s<t?6:0):e==s?(t-a)/i+2:(a-s)/i+4)%6*60,s:0===i?0:i/e,v:e}}(s,t,e);this.__ak(o),this.__ae&&this.__am(i)},"__an<mousedown>":function(a){var s=this,t=i(a.eventTarget),e=i("#si_"+s.id),o=a,r=i("#cz_"+s.id).width(),_=i("#si_"+s.id).height()/2,l=t.offset(),d=(a.pageY-l.top)/r*360;s.__ak({h:d,s:s.__ag.s,v:s.__ag.v});var n=parseInt(e.css("top"),10);s.dragdrop(a.eventTarget,function(a){var t=a.pageY-o.pageY;(t+=n)<=-_?t=-_:t>=r-_&&(t=r-_),e.css({top:t-6});var i=(t+_)/r*360;s.__ak({h:i,s:s.__ag.s,v:s.__ag.v},!0)},function(){s.__y()})},"__ao<mousedown>":function(a){var s=this,t=i("#cz_"+s.id).width(),e=i("#ci_"+s.id).width()/2,o=i(a.eventTarget).offset(),r=a.pageX-o.left,_=a.pageY-o.top,l=r/t,d=(t-_)/t;s.__ak({h:s.__ag.h,s:l,v:d});var n=i("#ci_"+s.id),p=parseInt(n.css("left"),10),g=parseInt(n.css("top"),10),c=a;s.dragdrop(a.eventTarget,function(a){var i=a.pageY-c.pageY,o=a.pageX-c.pageX;(i+=g)<=-e?i=-e:i>=t-e&&(i=t-e),(o+=p)<=-e?o=-e:o>=t-e&&(o=t-e),n.css({top:i,left:o});var r=(o+e)/t,_=(t-(i+e))/t;s.__ak({h:s.__ag.h,s:r,v:_})},function(){s.__y()})},__am:function(a){a/=255,a*=i("#at_"+this.id).width(),a-=i("#si_"+this.id).height()/2,i("#ai_"+this.id).css({left:a})},__aj:function(){var a=this,s=a.__ai;i("#at_"+a.id).css({background:"linear-gradient(to right, "+s+"00 0%,"+s+" 100%)"}),a.__ae&&(s+=a.__al),i("#bc_"+a.id).css("background",s),i("#v_"+a.id).val(s)},"__ap<mousedown>":function(a){var s=i(a.eventTarget),t=a,e=this,o=i("#ai_"+e.id),r=i("#at_"+e.id).width(),_=i("#si_"+e.id).height()/2,l=s.offset(),d=(a.pageX-l.left)/r*255|0;e.__al=("0"+d.toString(16)).slice(-2),e.__am(d),e.__aj();var n=parseInt(o.css("left"),10);e.dragdrop(a.eventTarget,function(a){var s=a.pageX-t.pageX;(s+=n)<=-_?s=-_:s>=r-_&&(s=r-_),o.css({left:s});var i=Math.round((s+_)/r*255);e.__al=("0"+i.toString(16)).slice(-2),e.__aj()},function(){e.__y()})},"__aq<click>":function(a){this.__ah(a.params.color),i(a.eventTarget).addClass(r),this.__y()},__y:function(a){var s=this;if(!s.__af||a){var t=i("#v_"+s.id).val();t!=s.__ad&&i("#"+s.id).trigger({type:"change",color:s.__ad=t})}},"__ar<click>":function(){this.__y(1)}})});