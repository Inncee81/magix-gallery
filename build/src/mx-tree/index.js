define("mx-tree/index",["magix","mx-tree/util","../mx-medusa/util","./branch"],(e,t,n)=>{e("./branch");var l=e("magix"),r=l.Vframe,i=e("mx-tree/util"),a=e("../mx-medusa/util");l.applyStyle("_zs_galleryaH",'._zs_gallerymX{box-shadow:0 1px 1px 0 rgba(0,0,0,.08);border:1px solid #f5f5f6}._zs_gallerymY{position:relative;height:32px;line-height:20px;padding-bottom:12px;background-color:#fff;overflow:hidden;transition:height .2s}._zs_gallerymY ._zs_gallerymZ{float:left;height:20px;margin-right:5px;line-height:20px;color:#ccc;transition:color .25s;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-user-select:none}._zs_gallerymY ._zs_galleryn_{cursor:pointer;font-size:14px}._zs_gallerymY ._zs_galleryn_:hover{color:#666}._zs_galleryna ._zs_gallerymY{height:0;padding-bottom:0}._zs_gallerynb{position:relative}._zs_gallerync{padding-left:20px}._zs_gallerynd,._zs_gallerynd ._zs_gallerynb{position:relative}._zs_gallerynd ._zs_gallerynb:after{content:"";position:absolute;top:22px;left:7px;bottom:2px;width:1px;background-color:#e6e6e6}._zs_gallerynd ._zs_gallerynb:last-child:after{content:none}'),n.exports=l.View.extend({tmpl:function(e,t,n,l,r,i,a,o){if(n||(n=e),!r){var s={"&":"amp","<":"lt",">":"gt",'"':"#34","'":"#39","`":"#96"},u=/[&<>"'`]/g,c=function(e){return"&"+s[e]+";"};r=function(e){return""+(null==e?"":e)},l=function(e){return r(e).replace(u,c)}}if(!i){var d={"!":"%21","'":"%27","(":"%28",")":"%29","*":"%2A"},g=function(e){return d[e]},_=/[!')(*]/g;i=function(e){return encodeURIComponent(r(e)).replace(_,g)}}if(!o){var p=/[\\'"]/g;o=function(e){return r(e).replace(p,"\\$&")}}a||(a=function(e,t,n,l){for(l=e[f];--l;)if(e[n=f+l]===t)return n;return e[n=f+e[f]++]=t,n});var f="",h="",x=e.viewId,m=e.hasLine,y=e.readOnly,v=e.needExpand,z=e.textKey,b=e.valueKey,w=e.list;return h+='<div mxv="readOnly,needExpand,list" id="tree_'+l(x)+'" class="',m&&(h+=" _zs_gallerynd "),h+='" mx-view="mx-tree/branch?readOnly='+a(n,y)+"&needExpand="+a(n,v)+"&textKey="+i(z)+"&valueKey="+i(b)+"&list="+a(n,w)+"&fromTop="+a(n,!0)+'"></div>'},init:function(e){this.__i=e},render:function(){var e,t=this.__i,n=t.readOnly+""=="true",l=t.hasLine+""=="true",r=t.valueKey||"value",o=t.textKey||"text",s=t.parentKey||"pValue",u=t.needAll+""=="true",c=t.needExpand+""=="true",d=t.close+""=="true",g=i.listToTree(t.list,r,s,d);if(u){var _={};_[r]="all",_[o]=a["select.all"],_.isAll=!0,_.children=g.list,_.close=d,e=[_]}else e=g.list;this.updater.digest({viewId:this.id,valueKey:r,textKey:o,list:e,readOnly:n,hasLine:l,needExpand:c});var p=t.bottomValues||[];p.length>0&&this.setBottomValues(p)},setBottomValues:function(e){this.loop(function(t){t.invoke("setValues",[e])})},getBottomValues:function(){var e=[];return this.loop(function(t){var n=t.invoke("getValues");e=e.concat(n)}),e},getBottomItems:function(){var e=[];return this.loop(function(t){var n=t.invoke("getItems");e=e.concat(n)}),e},loop:function(e){var t=this.owner.children(),n=function(t){for(var l=0,i=t;l<i.length;l++){var a=i[l],o=r.get(a);e(o);var s=o.children();s&&s.length>0&&n(s)}};n(t)}})});