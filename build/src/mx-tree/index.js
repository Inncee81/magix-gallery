define("mx-tree/index",["magix","./branch"],(e,t,n)=>{e("./branch");var l=e("magix"),r=l.Vframe;l.applyStyle("_zs_galleryas",'._zs_gallerykT{box-shadow:0 2px 4px rgba(51,51,51,.08);border:1px solid #eee}._zs_gallerykU{position:relative;height:32px;line-height:20px;padding-bottom:12px;background-color:#fff;overflow:hidden;transition:height .2s}._zs_gallerykU ._zs_gallerykV{float:left;height:20px;margin-right:5px;line-height:20px;color:#ccc;transition:color .25s;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-user-select:none}._zs_gallerykU ._zs_gallerykW{cursor:pointer;font-size:14px}._zs_gallerykU ._zs_gallerykW:hover{color:#666}._zs_gallerykX ._zs_gallerykU{height:0;padding-bottom:0}._zs_gallerykY{position:relative}._zs_gallerykZ{padding-left:20px}._zs_galleryl_,._zs_galleryl_ ._zs_gallerykY{position:relative}._zs_galleryl_ ._zs_gallerykY:after{content:"";position:absolute;top:22px;left:7px;bottom:2px;width:1px;background-color:#e6e6e6}._zs_galleryl_ ._zs_gallerykY:last-child:after{content:none}'),n.exports=l.View.extend({tmpl:function(e,t,n,l,r,i,o,a){if(n||(n=e),!r){var s={"&":"amp","<":"lt",">":"gt",'"':"#34","'":"#39","`":"#96"},u=/[&<>"'`]/g,c=function(e){return"&"+s[e]+";"};r=function(e){return""+(null==e?"":e)},l=function(e){return r(e).replace(u,c)}}if(!i){var _={"!":"%21","'":"%27","(":"%28",")":"%29","*":"%2A"},g=function(e){return _[e]},d=/[!')(*]/g;i=function(e){return encodeURIComponent(r(e)).replace(d,g)}}if(!a){var p=/[\\'"]/g;a=function(e){return r(e).replace(p,"\\$&")}}o||(o=function(e,t,n,l){for(l=e[h];--l;)if(e[n=h+l]===t)return n;return e[n=h+e[h]++]=t,n});var h="",f="",v=e.viewId,y=e.hasLine,x=e.readOnly,m=e.needExpand,z=e.textKey,k=e.valueKey,b=e.list;return f+='<div mxv="readOnly,needExpand,list" id="tree_'+l(v)+'" class="',y&&(f+=" _zs_galleryl_ "),f+='" mx-view="mx-tree/branch?readOnly='+o(n,x)+"&needExpand="+o(n,m)+"&textKey="+i(z)+"&valueKey="+i(k)+"&list="+o(n,b)+"&fromTop="+o(n,!0)+'"></div>'},init:function(e){this.__i=e},render:function(){var e,t=this.__i,n=t.readOnly+""=="true",r=t.hasLine+""=="true",i=t.valueKey||"value",o=t.textKey||"text",a=t.parentKey||"pValue",s=t.needAll+""=="true",u=t.needExpand+""=="true",c=t.close+""=="true",_=function(e,t,n,r){for(var i={},o={},a=[],s=0,u=e.length;s<u;s++){var c=l.mix({},e[s]);c.close=r,i[c[t]]=c,o[c[t]]&&(c.children=o[c[t]]),l.has(c,n)&&""!==c[n]?i[c[n]]?(i[c[n]].children||(i[c[n]].children=[])).push(c):o[c[n]]?o[c[n]].push(c):o[c[n]]=[c]:a.push(c)}return{list:a,map:i}}(t.list,i,a,c);if(s){var g={};g[i]="all",g[o]="全选",g.isAll=!0,g.children=_.list,g.close=c,e=[g]}else e=_.list;this.updater.digest({viewId:this.id,valueKey:i,textKey:o,list:e,readOnly:n,hasLine:r,needExpand:u});var d=t.bottomValues||[];d.length>0&&this.setBottomValues(d)},setBottomValues:function(e){this.loop(function(t){t.invoke("setValues",[e])})},getBottomValues:function(){var e=[];return this.loop(function(t){var n=t.invoke("getValues");e=e.concat(n)}),e},getBottomItems:function(){var e=[];return this.loop(function(t){var n=t.invoke("getItems");e=e.concat(n)}),e},loop:function(e){var t=this.owner.children(),n=function(t){for(var l=0,i=t;l<i.length;l++){var o=i[l],a=r.get(o);e(a);var s=a.children();s&&s.length>0&&n(s)}};n(t)}})});