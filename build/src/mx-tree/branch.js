define("mx-tree/branch",["magix","$"],(e,r,t)=>{var i=e("magix"),n=e("$"),a=i.Vframe;i.applyStyle("_zs_galleryaH",':root{--mx-tree-oper-size:calc(var(--font-size) + 2px)}._zs_gallerykv{position:relative;height:32px;line-height:20px;padding-bottom:12px;background-color:#fff;overflow:hidden;transition:height .2s}._zs_gallerykv ._zs_gallerykw{float:left;width:var(--mx-tree-oper-size);height:var(--mx-tree-oper-size);margin-right:5px;line-height:var(--mx-tree-oper-size);font-size:var(--mx-tree-oper-size);color:#ccc;transition:color var(--duration);-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-user-select:none}._zs_gallerykv ._zs_gallerykx{cursor:pointer}._zs_gallerykv ._zs_gallerykx:hover{color:#666}._zs_galleryky ._zs_gallerykv{height:0;padding-bottom:0}._zs_gallerykz{position:relative}._zs_gallerykA{padding-left:calc(var(--mx-tree-oper-size) + 5px)}._zs_gallerykB,._zs_gallerykB ._zs_gallerykz{position:relative}._zs_gallerykB ._zs_gallerykz:after{content:"";position:absolute;top:22px;left:calc(var(--mx-tree-oper-size)/2);bottom:2px;width:1px;background-color:var(--color-border)}._zs_gallerykB ._zs_gallerykz:last-child:after{content:none}'),t.exports=i.View.extend({tmpl:function(e,r,t,i,n,a,l,s){if(t||(t=e),!n){var o={"&":"amp","<":"lt",">":"gt",'"':"#34","'":"#39","`":"#96"},c=/[&<>"'`]/g,_=function(e){return"&"+o[e]+";"};n=function(e){return""+(null==e?"":e)},i=function(e){return n(e).replace(c,_)}}if(!a){var d={"!":"%21","'":"%27","(":"%28",")":"%29","*":"%2A"},g=function(e){return d[e]},h=/[!')(*]/g;a=function(e){return encodeURIComponent(n(e)).replace(h,g)}}if(!s){var p=/[\\'"]/g;s=function(e){return n(e).replace(p,"\\$&")}}l||(l=function(e,r,t,i){for(i=e[u];--i;)if(e[t=u+i]===r)return t;return e[t=u+e[u]++]=r,t});for(var u="",v="",f=e.list,x=e.needExpand,m=e.readOnly,z=e.viewId,y=e.valueKey,k=e.textKey,b=e.closeMap,w=0,V=f.length;w<V;w++){var A=f[w];v+='<div mxv mxa="_zs_gallerye9:_" class="_zs_gallerykz"><div mxv mxa="_zs_gallerye9:a" class="_zs_gallerykv clearfix">',x&&(v+=" ",A.children&&A.children.length>0?(v+='<i class="mc-iconfont _zs_gallerykw _zs_gallerykx" mx-click="'+r+"__p({index:"+i(w)+'})">',A.close?v+="&#xe65b;":v+="&#xe65a;",v+="</i>"):(v+=" ",m&&(v+='<i mxs="_zs_gallerye9:_" class="mc-iconfont _zs_gallerykw">&#xe732;</i>'),v+=" "),v+=" "),v+='<label mxv mxa="_zs_gallerye9:b" class="fl">',m||(v+='<input class="checkbox" type="checkbox" id="cb_'+i(z)+"_"+i(w)+'" value="'+i(A[y])+'" name="'+i(z)+'" mx-change="'+r+"__bW({index:"+i(w)+'})"/>'),v+=i(A[k])+"</label></div>",A.children&&A.children.length>0&&(v+='<div mxv="readOnly,needExpand,list,closeMap" id="'+i(z)+"_"+i(w)+'" class="',A.close&&(v+=" _zs_galleryky "),v+=" ",A.isAll||(v+=" _zs_gallerykA "),v+='" mx-view="mx-tree/branch?textKey='+a(k)+"&valueKey="+a(y)+"&readOnly="+l(t,m)+"&needExpand="+l(t,x)+"&list="+l(t,A.children)+"&closeMap="+l(t,b)+'"></div>'),v+="</div>"}return v},init:function(e){this.updater.set(e)},render:function(){this.updater.digest({viewId:this.id})},__fh:function(){var e,r,t=this.id;return n("#"+t+' input[name="'+t+'"]').each(function(t,i){i.indeterminate?e=r=!0:i.checked?e=!0:r=!0}),e&&r?3:e?2:1},__fi:function(e){var r=this.owner.parent(),t=0;if(r){for(var i=r.children(),l=0;l<i.length;l++)if(i[l]==e){var s=a.get(i[l]);s&&(t|=s.invoke("__fh"));break}var o=n("#cb_"+e);3===t?o.prop("indeterminate",!0):(o.prop("indeterminate",!1),o.prop("checked",2==t)),r.invoke("__fi",[r.id])}},__bV:function(e){var r=this.id;n("#"+r+' input[name="'+r+'"]').prop("indeterminate",!1).prop("checked",e);for(var t=0,i=this.owner.children();t<i.length;t++){var l=i[t],s=a.get(l);s&&s.invoke("__bV",[e])}},"__bW<change>":function(e){var r=a.get(this.id+"_"+e.params.index);r&&r.invoke("__bV",[e.eventTarget.checked]),this.__fi(this.id)},"__p<click>":function(e){e.stopPropagation();var r=n(e.eventTarget),t=e.params.index,i=n("#"+this.id+"_"+t);i.toggleClass("_zs_galleryky");var a=this.updater.get("list"),l=this.updater.get("closeMap"),s=a[t].value;i.hasClass("_zs_galleryky")?(r.html("&#xe65b;"),l[s]=!0):(r.html("&#xe65a;"),l[s]=!1)},setValues:function(e){e=e.map(function(e){return e+""});var r=this.id;n("#"+r+' input[name="'+r+'"]').each(function(r,t){e.indexOf(t.value+"")>-1&&(t.checked=!0)}),this.__fi(r)},getValues:function(){return this.get("value")},getItems:function(){return this.get("item")},get:function(e){var r=this.id,t=[];return this.updater.get("list").forEach(function(i,a){if(0==(i.children||[]).length){var l=n("#cb_"+r+"_"+a);l[0].checked&&("item"==e?t.push(i):t.push(l[0].value))}}),t}})});