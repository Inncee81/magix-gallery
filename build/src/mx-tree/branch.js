define("mx-tree/branch",["magix","$"],(e,n,t)=>{var i=e("magix"),l=e("$"),r=i.Vframe;i.applyStyle("_zs_galleryaI",'._zs_galleryng{box-shadow:0 1px 1px 0 rgba(0,0,0,.08);border:1px solid #f5f5f6}._zs_gallerynh{position:relative;height:32px;line-height:20px;padding-bottom:12px;background-color:#fff;overflow:hidden;transition:height .2s}._zs_gallerynh ._zs_galleryni{float:left;height:20px;margin-right:5px;line-height:20px;color:#ccc;transition:color .25s;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-user-select:none}._zs_gallerynh ._zs_gallerynj{cursor:pointer;font-size:14px}._zs_gallerynh ._zs_gallerynj:hover{color:#666}._zs_gallerynk ._zs_gallerynh{height:0;padding-bottom:0}._zs_gallerynl{position:relative}._zs_gallerynm{padding-left:20px}._zs_gallerynn,._zs_gallerynn ._zs_gallerynl{position:relative}._zs_gallerynn ._zs_gallerynl:after{content:"";position:absolute;top:22px;left:7px;bottom:2px;width:1px;background-color:#e6e6e6}._zs_gallerynn ._zs_gallerynl:last-child:after{content:none}'),t.exports=i.View.extend({tmpl:function(e,n,t,i,l,r,a,s){if(t||(t=e),!l){var o={"&":"amp","<":"lt",">":"gt",'"':"#34","'":"#39","`":"#96"},_=/[&<>"'`]/g,c=function(e){return"&"+o[e]+";"};l=function(e){return""+(null==e?"":e)},i=function(e){return l(e).replace(_,c)}}if(!r){var g={"!":"%21","'":"%27","(":"%28",")":"%29","*":"%2A"},h=function(e){return g[e]},d=/[!')(*]/g;r=function(e){return encodeURIComponent(l(e)).replace(d,h)}}if(!s){var f=/[\\'"]/g;s=function(e){return l(e).replace(f,"\\$&")}}a||(a=function(e,n,t,i){for(i=e[p];--i;)if(e[t=p+i]===n)return t;return e[t=p+e[p]++]=n,t});for(var p="",u="",x=e.list,v=e.needExpand,m=e.readOnly,y=e.viewId,z=e.valueKey,b=e.textKey,k=e.fromTop,w=0,I=x.length;w<I;w++){var E=x[w];u+='<div mxv mxa="_zs_galleryel:_" class="_zs_gallerynl"><div mxv mxa="_zs_galleryel:a" class="_zs_gallerynh clearfix">',v&&(u+=" ",E.children&&E.children.length>0?(u+='<i class="mc-iconfont _zs_galleryni _zs_gallerynj" mx-click="'+n+"__o({index:"+i(w)+'})">',E.close?u+=" &#xe65b; ":u+=" &#xe65a; ",u+="</i>"):(u+=" ",m&&(u+='<i mxs="_zs_galleryel:_" class="mc-iconfont _zs_galleryni empty">&#xe732;</i>'),u+=" "),u+=" "),u+='<label mxv mxa="_zs_galleryel:b" class="fl">',m||(u+='<input class="checkbox" type="checkbox" id="cb_'+i(y)+"_"+i(w)+'" value="'+i(E[z])+'" name="'+i(y)+'" mx-change="'+n+"__ca({index:"+i(w)+'})"/>'),u+=" "+i(E[b])+"</label></div>",E.children&&E.children.length>0&&(u+='<div mxv="readOnly,needExpand,list" id="'+i(y)+"_"+i(w)+'" class="',E.close&&(u+=" _zs_gallerynk "),u+=" ",E.isAll||(u+=" _zs_gallerynm "),u+=" ",k&&(u+=" top "),u+='" mx-view="mx-tree/branch?textKey='+r(b)+"&valueKey="+r(z)+"&readOnly="+a(t,m)+"&needExpand="+a(t,v)+"&list="+a(t,E.children)+'"></div>'),u+="</div>"}return u},init:function(e){this.updater.set(e)},render:function(){this.updater.digest({viewId:this.id})},__ff:function(){var e,n,t=this.id;return l("#"+t+' input[name="'+t+'"]').each(function(t,i){i.indeterminate?e=n=!0:i.checked?e=!0:n=!0}),e&&n?3:e?2:1},__fg:function(e){var n=this.owner.parent(),t=0;if(n){for(var i=n.children(),a=0;a<i.length;a++)if(i[a]==e){var s=r.get(i[a]);s&&(t|=s.invoke("__ff"));break}var o=l("#cb_"+e);3===t?o.prop("indeterminate",!0):(o.prop("indeterminate",!1),o.prop("checked",2==t)),n.invoke("__fg",[n.id])}},__bS:function(e){var n=this.id;l("#"+n+' input[name="'+n+'"]').prop("indeterminate",!1).prop("checked",e);for(var t=0,i=this.owner.children();t<i.length;t++){var a=i[t],s=r.get(a);s&&s.invoke("__bS",[e])}},"__ca<change>":function(e){var n=r.get(this.id+"_"+e.params.index);n&&n.invoke("__bS",[e.eventTarget.checked]),this.__fg(this.id)},"__o<click>":function(e){e.stopPropagation();var n=l(e.eventTarget),t=e.params.index,i=l("#"+this.id+"_"+t);i.toggleClass("_zs_gallerynk"),i.hasClass("_zs_gallerynk")?n.html("&#xe65b;"):n.html("&#xe65a;")},setValues:function(e){e=e.map(function(e){return e+""});var n=this.id;l("#"+n+' input[name="'+n+'"]').each(function(n,t){e.indexOf(t.value+"")>-1&&(t.checked=!0)}),this.__fg(this.id)},getValues:function(){return this.get("value")},getItems:function(){return this.get("item")},get:function(e){var n=this.id,t=[];return this.updater.get("list").forEach(function(i,r){if(0==(i.children||[]).length){var a=l("#cb_"+n+"_"+r);a[0].checked&&("item"==e?t.push(i):t.push(a[0].value))}}),t}})});