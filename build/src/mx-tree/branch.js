define("mx-tree/branch",["magix","$"],(e,t,n)=>{var r=e("magix"),i=e("$"),l=r.Vframe;r.applyStyle("_zs_galleryas",'._zs_gallerykT{box-shadow:0 2px 4px rgba(51,51,51,.08);border:1px solid #eee}._zs_gallerykU{position:relative;height:32px;line-height:20px;padding-bottom:12px;background-color:#fff;overflow:hidden;transition:height .2s}._zs_gallerykU ._zs_gallerykV{float:left;height:20px;margin-right:5px;line-height:20px;color:#ccc;transition:color .25s;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-user-select:none}._zs_gallerykU ._zs_gallerykW{cursor:pointer;font-size:14px}._zs_gallerykU ._zs_gallerykW:hover{color:#666}._zs_gallerykX ._zs_gallerykU{height:0;padding-bottom:0}._zs_gallerykY{position:relative}._zs_gallerykZ{padding-left:20px}._zs_galleryl_,._zs_galleryl_ ._zs_gallerykY{position:relative}._zs_galleryl_ ._zs_gallerykY:after{content:"";position:absolute;top:22px;left:7px;bottom:2px;width:1px;background-color:#e6e6e6}._zs_galleryl_ ._zs_gallerykY:last-child:after{content:none}'),n.exports=r.View.extend({tmpl:function(e,t,n,r,i,l,a,s){if(n||(n=e),!i){var o={"&":"amp","<":"lt",">":"gt",'"':"#34","'":"#39","`":"#96"},_=/[&<>"'`]/g,c=function(e){return"&"+o[e]+";"};i=function(e){return""+(null==e?"":e)},r=function(e){return i(e).replace(_,c)}}if(!l){var d={"!":"%21","'":"%27","(":"%28",")":"%29","*":"%2A"},g=function(e){return d[e]},h=/[!')(*]/g;l=function(e){return encodeURIComponent(i(e)).replace(h,g)}}if(!s){var p=/[\\'"]/g;s=function(e){return i(e).replace(p,"\\$&")}}a||(a=function(e,t,n,r){for(r=e[u];--r;)if(e[n=u+r]===t)return n;return e[n=u+e[u]++]=t,n});for(var u="",f="",x=e.list,v=e.needExpand,m=e.readOnly,y=e.viewId,k=e.valueKey,z=e.textKey,b=e.fromTop,w=0,V=x.length;w<V;w++){var U=x[w];f+='<div mxv mxa="_zs_gallerydx:_" class="_zs_gallerykY"><div mxv mxa="_zs_gallerydx:a" class="_zs_gallerykU clearfix">',v&&(f+=" ",U.children&&U.children.length>0?(f+='<i class="mc-iconfont _zs_gallerykV _zs_gallerykW" mx-click="'+t+"__o({index:"+r(w)+'})">',U.close?f+=" &#xe65b; ":f+=" &#xe65a; ",f+="</i>"):(f+=" ",m&&(f+='<i mxs="_zs_gallerydx:_" class="mc-iconfont _zs_gallerykV empty">&#xe732;</i>'),f+=" "),f+=" "),f+='<label mxv mxa="_zs_gallerydx:b" class="fl">',m||(f+='<input class="checkbox" type="checkbox" id="cb_'+r(y)+"_"+r(w)+'" value="'+r(U[k])+'" name="'+r(y)+'" mx-change="'+t+"__bV({index:"+r(w)+'})"/>'),f+=" "+r(U[z])+"</label></div>",U.children&&U.children.length>0&&(f+='<div mxv="readOnly,needExpand,list" id="'+r(y)+"_"+r(w)+'" class="',U.close&&(f+=" _zs_gallerykX "),f+=" ",U.isAll||(f+=" _zs_gallerykZ "),f+=" ",b&&(f+=" top "),f+='" mx-view="mx-tree/branch?textKey='+l(z)+"&valueKey="+l(k)+"&readOnly="+a(n,m)+"&needExpand="+a(n,v)+"&list="+a(n,U.children)+'"></div>'),f+="</div>"}return f},init:function(e){this.updater.set(e)},render:function(){this.updater.digest({viewId:this.id})},__fq:function(){var e,t,n=this.id;return i("#"+n+' input[name="'+n+'"]').each(function(n,r){r.indeterminate?e=t=!0:r.checked?e=!0:t=!0}),e&&t?3:e?2:1},__fr:function(e){var t=this.owner.parent(),n=0;if(t){for(var r=t.children(),a=0;a<r.length;a++)if(r[a]==e){var s=l.get(r[a]);s&&(n|=s.invoke("__fq"));break}var o=i("#cb_"+e);3===n?o.prop("indeterminate",!0):(o.prop("indeterminate",!1),o.prop("checked",2==n)),t.invoke("__fr",[t.id])}},__bN:function(e){var t=this.id;i("#"+t+' input[name="'+t+'"]').prop("indeterminate",!1).prop("checked",e);for(var n=0,r=this.owner.children();n<r.length;n++){var a=r[n],s=l.get(a);s&&s.invoke("__bN",[e])}},"__bV<change>":function(e){var t=l.get(this.id+"_"+e.params.index);t&&t.invoke("__bN",[e.eventTarget.checked]),this.__fr(this.id)},"__o<click>":function(e){e.stopPropagation();var t=i(e.eventTarget),n=e.params.index,r=i("#"+this.id+"_"+n);r.toggleClass("_zs_gallerykX"),r.hasClass("_zs_gallerykX")?t.html("&#xe65b;"):t.html("&#xe65a;")},setValues:function(e){e=e.map(function(e){return e+""});var t=this.id;i("#"+t+' input[name="'+t+'"]').each(function(t,n){e.indexOf(n.value+"")>-1&&(n.checked=!0)}),this.__fr(this.id)},getValues:function(){return this.get("value")},getItems:function(){return this.get("item")},get:function(e){var t=this.id,n=[];return this.updater.get("list").forEach(function(r,l){if(0==(r.children||[]).length){var a=i("#cb_"+t+"_"+l);a[0].checked&&("item"==e?n.push(r):n.push(a[0].value))}}),n}})});