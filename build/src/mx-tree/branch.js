define("mx-tree/branch",["magix","$"],(e,n,t)=>{var r=e("magix"),i=e("$"),l=r.Vframe;r.applyStyle("_zs_galleryaM",'._zs_gallerynl{box-shadow:0 1px 1px 0 rgba(0,0,0,.08);border:1px solid #f5f5f6}._zs_gallerynm{position:relative;height:32px;line-height:20px;padding-bottom:12px;background-color:#fff;overflow:hidden;transition:height .2s}._zs_gallerynm ._zs_gallerynn{float:left;height:20px;margin-right:5px;line-height:20px;color:#ccc;transition:color .25s;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-user-select:none}._zs_gallerynm ._zs_galleryno{cursor:pointer;font-size:14px}._zs_gallerynm ._zs_galleryno:hover{color:#666}._zs_gallerynp ._zs_gallerynm{height:0;padding-bottom:0}._zs_gallerynq{position:relative}._zs_gallerynr{padding-left:20px}._zs_galleryns,._zs_galleryns ._zs_gallerynq{position:relative}._zs_galleryns ._zs_gallerynq:after{content:"";position:absolute;top:22px;left:7px;bottom:2px;width:1px;background-color:#e6e6e6}._zs_galleryns ._zs_gallerynq:last-child:after{content:none}'),t.exports=r.View.extend({tmpl:function(e,n,t,r,i,l,a,s){if(t||(t=e),!i){var o={"&":"amp","<":"lt",">":"gt",'"':"#34","'":"#39","`":"#96"},_=/[&<>"'`]/g,c=function(e){return"&"+o[e]+";"};i=function(e){return""+(null==e?"":e)},r=function(e){return i(e).replace(_,c)}}if(!l){var g={"!":"%21","'":"%27","(":"%28",")":"%29","*":"%2A"},p=function(e){return g[e]},d=/[!')(*]/g;l=function(e){return encodeURIComponent(i(e)).replace(d,p)}}if(!s){var h=/[\\'"]/g;s=function(e){return i(e).replace(h,"\\$&")}}a||(a=function(e,n,t,r){for(r=e[u];--r;)if(e[t=u+r]===n)return t;return e[t=u+e[u]++]=n,t});for(var u="",f="",m=e.list,v=e.needExpand,x=e.readOnly,y=e.viewId,z=e.valueKey,b=e.textKey,k=e.closeMap,w=e.fromTop,q=0,M=m.length;q<M;q++){var T=m[q];f+='<div mxv mxa="_zs_gallerye6:_" class="_zs_gallerynq"><div mxv mxa="_zs_gallerye6:a" class="_zs_gallerynm clearfix">',v&&(f+=" ",T.children&&T.children.length>0?(f+='<i class="mc-iconfont _zs_gallerynn _zs_galleryno" mx-click="'+n+"__p({index:"+r(q)+'})">',T.close?f+=" &#xe65b; ":f+=" &#xe65a; ",f+="</i>"):(f+=" ",x&&(f+='<i mxs="_zs_gallerye6:_" class="mc-iconfont _zs_gallerynn empty">&#xe732;</i>'),f+=" "),f+=" "),f+='<label mxv mxa="_zs_gallerye6:b" class="fl">',x||(f+='<input class="checkbox" type="checkbox" id="cb_'+r(y)+"_"+r(q)+'" value="'+r(T[z])+'" name="'+r(y)+'" mx-change="'+n+"__bT({index:"+r(q)+'})"/>'),f+=" "+r(T[b])+"</label></div>",T.children&&T.children.length>0&&(f+='<div mxv="readOnly,needExpand,list,closeMap" id="'+r(y)+"_"+r(q)+'" class="',T.close&&(f+=" _zs_gallerynp "),f+=" ",T.isAll||(f+=" _zs_gallerynr "),f+=" ",w&&(f+=" top "),f+='" mx-view="mx-tree/branch?textKey='+l(b)+"&valueKey="+l(z)+"&readOnly="+a(t,x)+"&needExpand="+a(t,v)+"&list="+a(t,T.children)+"&closeMap="+a(t,k)+'"></div>'),f+="</div>"}return f},init:function(e){this.updater.set(e)},render:function(){this.updater.digest({viewId:this.id})},__fy:function(){var e,n,t=this.id;return i("#"+t+' input[name="'+t+'"]').each(function(t,r){r.indeterminate?e=n=!0:r.checked?e=!0:n=!0}),e&&n?3:e?2:1},__fz:function(e){var n=this.owner.parent(),t=0;if(n){for(var r=n.children(),a=0;a<r.length;a++)if(r[a]==e){var s=l.get(r[a]);s&&(t|=s.invoke("__fy"));break}var o=i("#cb_"+e);3===t?o.prop("indeterminate",!0):(o.prop("indeterminate",!1),o.prop("checked",2==t)),n.invoke("__fz",[n.id])}},__bS:function(e){var n=this.id;i("#"+n+' input[name="'+n+'"]').prop("indeterminate",!1).prop("checked",e);for(var t=0,r=this.owner.children();t<r.length;t++){var a=r[t],s=l.get(a);s&&s.invoke("__bS",[e])}},"__bT<change>":function(e){var n=l.get(this.id+"_"+e.params.index);n&&n.invoke("__bS",[e.eventTarget.checked]),this.__fz(this.id)},"__p<click>":function(e){e.stopPropagation();var n=i(e.eventTarget),t=e.params.index,r=i("#"+this.id+"_"+t);r.toggleClass("_zs_gallerynp");var l=this.updater.get("list"),a=this.updater.get("closeMap"),s=l[t].value;r.hasClass("_zs_gallerynp")?(n.html("&#xe65b;"),a[s]=!0):(n.html("&#xe65a;"),a[s]=!1)},setValues:function(e){e=e.map(function(e){return e+""});var n=this.id;i("#"+n+' input[name="'+n+'"]').each(function(n,t){e.indexOf(t.value+"")>-1&&(t.checked=!0)}),this.__fz(n)},getValues:function(){return this.get("value")},getItems:function(){return this.get("item")},get:function(e){var n=this.id,t=[];return this.updater.get("list").forEach(function(r,l){if(0==(r.children||[]).length){var a=i("#cb_"+n+"_"+l);a[0].checked&&("item"==e?t.push(r):t.push(a[0].value))}}),t}})});