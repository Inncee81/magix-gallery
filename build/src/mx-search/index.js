define("mx-search/index",["magix","$","../mx-monitor/index"],(a,r,t)=>{var e=a("magix"),s=a("$");e.applyStyle("_zs_galleryaf","._zs_galleryiX{box-shadow:0 2px 4px rgba(51,51,51,.08);border:1px solid #eee}@keyframes _zs_galleryp{0%{transform:translateY(-20%);-ms-transform:translateY(-20%);-moz-transform:translateY(-20%);-webkit-transform:translateY(-20%);-o-transform:translateY(-20%);opacity:0}to{transform:translate(0);-ms-transform:translate(0);-moz-transform:translate(0);-webkit-transform:translate(0);-o-transform:translate(0);opacity:1}}@-webkit-keyframes _zs_galleryp{0%{transform:translateY(-20%);-ms-transform:translateY(-20%);-moz-transform:translateY(-20%);-webkit-transform:translateY(-20%);-o-transform:translateY(-20%);opacity:0}to{transform:translate(0);-ms-transform:translate(0);-moz-transform:translate(0);-webkit-transform:translate(0);-o-transform:translate(0);opacity:1}}@keyframes _zs_galleryq{0%{transform:translateY(20%);-ms-transform:translateY(20%);-moz-transform:translateY(20%);-webkit-transform:translateY(20%);-o-transform:translateY(20%);opacity:0}to{transform:translate(0);-ms-transform:translate(0);-moz-transform:translate(0);-webkit-transform:translate(0);-o-transform:translate(0);opacity:1}}@-webkit-keyframes _zs_galleryq{0%{transform:translateY(20%);-ms-transform:translateY(20%);-moz-transform:translateY(20%);-webkit-transform:translateY(20%);-o-transform:translateY(20%);opacity:0}to{transform:translate(0);-ms-transform:translate(0);-moz-transform:translate(0);-webkit-transform:translate(0);-o-transform:translate(0);opacity:1}}@keyframes _zs_galleryr{0%{transform:translate(0);-ms-transform:translate(0);-moz-transform:translate(0);-webkit-transform:translate(0);-o-transform:translate(0)}25%{transform:translateY(-15%);-ms-transform:translateY(-15%);-moz-transform:translateY(-15%);-webkit-transform:translateY(-15%);-o-transform:translateY(-15%)}75%{transform:translateY(15%);-ms-transform:translateY(15%);-moz-transform:translateY(15%);-webkit-transform:translateY(15%);-o-transform:translateY(15%)}to{transform:translate(0);-ms-transform:translate(0);-moz-transform:translate(0);-webkit-transform:translate(0);-o-transform:translate(0)}}@-webkit-keyframes _zs_galleryr{0%{transform:translate(0);-ms-transform:translate(0);-moz-transform:translate(0);-webkit-transform:translate(0);-o-transform:translate(0)}25%{transform:translateY(-15%);-ms-transform:translateY(-15%);-moz-transform:translateY(-15%);-webkit-transform:translateY(-15%);-o-transform:translateY(-15%)}75%{transform:translateY(15%);-ms-transform:translateY(15%);-moz-transform:translateY(15%);-webkit-transform:translateY(15%);-o-transform:translateY(15%)}to{transform:translate(0);-ms-transform:translate(0);-moz-transform:translate(0);-webkit-transform:translate(0);-o-transform:translate(0)}}._zs_galleryiY,._zs_galleryiZ{position:relative;height:32px}._zs_galleryiY ._zs_galleryj_,._zs_galleryiZ ._zs_galleryj_{display:none;position:absolute;top:100%;min-width:100%;z-index:99;margin-top:10px;padding:8px 10px;border-radius:4px;background-color:#fff;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;box-shadow:0 2px 4px rgba(51,51,51,.08);border:1px solid #eee}._zs_galleryiY ._zs_galleryj_ ._zs_galleryja,._zs_galleryiZ ._zs_galleryj_ ._zs_galleryja{margin:2px 0;padding:0 10px;cursor:pointer;height:26px;line-height:26px;border-radius:4px;white-space:nowrap;word-break:break-all}._zs_galleryiY ._zs_galleryj_ ._zs_galleryja:hover,._zs_galleryiZ ._zs_galleryj_ ._zs_galleryja:hover{background-color:#f0f0f0}._zs_galleryiY ._zs_galleryj_ ._zs_galleryja._zs_galleryjb,._zs_galleryiY ._zs_galleryj_ ._zs_galleryja._zs_galleryjb:active,._zs_galleryiY ._zs_galleryj_ ._zs_galleryja._zs_galleryjb:focus,._zs_galleryiY ._zs_galleryj_ ._zs_galleryja._zs_galleryjb:hover,._zs_galleryiZ ._zs_galleryj_ ._zs_galleryja._zs_galleryjb,._zs_galleryiZ ._zs_galleryj_ ._zs_galleryja._zs_galleryjb:active,._zs_galleryiZ ._zs_galleryj_ ._zs_galleryja._zs_galleryjb:focus,._zs_galleryiZ ._zs_galleryj_ ._zs_galleryja._zs_galleryjb:hover{color:#fff;background-color:#4d7fff}._zs_galleryiY ._zs_galleryj_._zs_galleryjc,._zs_galleryiZ ._zs_galleryj_._zs_galleryjc{display:block;-webkit-animation:_zs_galleryp .25s ease-out;animation:_zs_galleryp .25s ease-out;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}._zs_galleryiZ ._zs_galleryj_{right:0}._zs_galleryiY ._zs_galleryj_{left:0}");var l=a("../mx-monitor/index");t.exports=e.View.extend({tmpl:function(a,r,t,e,s,l,_,n){if(t||(t=a),!s){var o={"&":"amp","<":"lt",">":"gt",'"':"#34","'":"#39","`":"#96"},i=/[&<>"'`]/g,m=function(a){return"&"+o[a]+";"};s=function(a){return""+(null==a?"":a)},e=function(a){return s(a).replace(i,m)}}if(!l){var f={"!":"%21","'":"%27","(":"%28",")":"%29","*":"%2A"},c=function(a){return f[a]},g=/[!')(*]/g;l=function(a){return encodeURIComponent(s(a)).replace(g,c)}}if(!n){var y=/[\\'"]/g;n=function(a){return s(a).replace(y,"\\$&")}}_||(_=function(a,r,t,e){for(e=a[h];--e;)if(a[t=h+e]===r)return t;return a[t=h+a[h]++]=r,t});var h="",u="",z=a.align,p=a.placeholder,d=a.searchValue,b=a.list,Y=a.show,j=a.searchKey;u+='<div mxv class="search-box ',u+="right"==z?" _zs_galleryiZ ":" _zs_galleryiY ",u+='"><i mxs="_zs_gallerycf:_" class="mc-iconfont search-icon">&#xe651;</i><input class="input search-input" placeholder="'+e(p)+'" value="'+e(d)+'" mx-keyup="'+r+'__e()" mx-paste="'+r+'__e()" mx-focusin="'+r+'__e()" mx-focusout="'+r+'__l()" mx-change="'+r+'__l()"/><ul class="_zs_galleryj_ ',b.length>1&&d&&Y&&(u+=" _zs_galleryjc "),u+='">';for(var x=0,k=b.length;x<k;x++){var v=b[x];u+='<li class="_zs_galleryja ',j==v.value&&(u+=" _zs_galleryjb "),u+='" mx-click="'+r+"__bG({item:'"+_(t,v)+"'})\">"+e(v.prefix)+e(d)+e(v.suffix)+"</li>"}return u+="</ul></div>"},init:function(a){var r=this;r.updater.snapshot(),r.assign(a),l.__f(),r.on("destroy",function(){l.__g(r),l.__h(),r.__bE&&clearTimeout(r.__bE)})},assign:function(a){var r=this.updater.altered();this.__cL=a.searchKey||"",this.__cM=this.__cL,this.__cN=a.searchValue||"",this.__cO=a.placeholder||"",this.__cP=a.align||"left";var t=[];if(a.list){var e=a.listText||"text",l=a.listValue||"value";try{t=new Function("return "+a.list)()}catch(r){t=a.list}if(t=t.map(function(a){var r=(a.tmpl||"搜索含有“${content}”的"+a[e]).split("${content}");return{prefix:r[0],suffix:r[1],text:a[e],value:a[l]}}),!this.__cO){var _=t.map(function(a){return a.text});this.__cO=s.unique(_).join("/")}}else this.__cO||(this.__cO="搜索");return this.__cQ=t,this.__j=s("#"+this.id),this.updater.set({viewId:this.id,list:this.__cQ,searchValue:this.__cN,searchKey:this.__cL,placeholder:this.__cO,align:this.__cP}),r||(r=this.updater.altered()),!!r&&(this.updater.snapshot(),!0)},render:function(){this.updater.digest()},"__e<focusin,keyup,paste>":function(a){a.stopPropagation();var r=this;r.__bE&&clearTimeout(r.__bE);var t=r.updater.get("show"),e=r.__cQ;if(40==a.keyCode||38==a.keyCode){if(t){for(var l=-1,_=r.__cL,n=0;n<e.length;n++)if(e[n].value==_){l=n;break}40==a.keyCode&&(l+=1)>=e.length&&(l=0),38==a.keyCode&&(l-=1)<0&&(l=e.length-1),r.updater.digest({searchKey:r.__cL=e[l].value})}}else 13==a.keyCode?(!r.__cL&&e&&e.length>0&&(r.__cL=e[0].value),r.__cM=r.__cL,r.__cN=s.trim(a.eventTarget.value),r.__m(),r.__bX()):r.__bE=setTimeout(r.wrapAsync(function(){r.__cN=s.trim(a.eventTarget.value),r.__n()}),300)},__m:function(){this.__cL!=this.__cM&&(this.__cL=this.__cM),this.updater.digest({searchKey:this.__cL,searchValue:this.__cN,show:!1}),l.__g(this)},__n:function(){this.updater.digest({searchKey:this.__cL,searchValue:this.__cN,show:!0}),l.__p(this)},__k:function(a){return e.inside(a,this.id)},"__l<change,focusout>":function(a){a.stopPropagation()},"__bG<click>":function(a){a.stopPropagation();var r=a.params.item;this.updater.digest({searchKey:this.__cL=this.__cM=r.value,show:!1}),this.__bX()},__bX:function(){this.__j.trigger({type:"search",searchKey:this.__cL,searchValue:this.__cN})}})});