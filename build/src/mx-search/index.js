define("mx-search/index",["magix","$","../mx-monitor/index"],(a,t,r)=>{var s=a("magix"),e=a("$");s.applyStyle("_zs_galleryau","._zs_gallerykS{box-shadow:0 1px 1px 0 rgba(0,0,0,.08);border:1px solid #f5f5f6}@keyframes _zs_galleryu{0%{transform:translateY(-20%);-ms-transform:translateY(-20%);-moz-transform:translateY(-20%);-webkit-transform:translateY(-20%);-o-transform:translateY(-20%);opacity:0}to{transform:translate(0);-ms-transform:translate(0);-moz-transform:translate(0);-webkit-transform:translate(0);-o-transform:translate(0);opacity:1}}@-webkit-keyframes _zs_galleryu{0%{transform:translateY(-20%);-ms-transform:translateY(-20%);-moz-transform:translateY(-20%);-webkit-transform:translateY(-20%);-o-transform:translateY(-20%);opacity:0}to{transform:translate(0);-ms-transform:translate(0);-moz-transform:translate(0);-webkit-transform:translate(0);-o-transform:translate(0);opacity:1}}@keyframes _zs_galleryv{0%{transform:translateY(20%);-ms-transform:translateY(20%);-moz-transform:translateY(20%);-webkit-transform:translateY(20%);-o-transform:translateY(20%);opacity:0}to{transform:translate(0);-ms-transform:translate(0);-moz-transform:translate(0);-webkit-transform:translate(0);-o-transform:translate(0);opacity:1}}@-webkit-keyframes _zs_galleryv{0%{transform:translateY(20%);-ms-transform:translateY(20%);-moz-transform:translateY(20%);-webkit-transform:translateY(20%);-o-transform:translateY(20%);opacity:0}to{transform:translate(0);-ms-transform:translate(0);-moz-transform:translate(0);-webkit-transform:translate(0);-o-transform:translate(0);opacity:1}}@keyframes _zs_galleryw{0%{transform:translate(0);-ms-transform:translate(0);-moz-transform:translate(0);-webkit-transform:translate(0);-o-transform:translate(0)}25%{transform:translateY(-15%);-ms-transform:translateY(-15%);-moz-transform:translateY(-15%);-webkit-transform:translateY(-15%);-o-transform:translateY(-15%)}75%{transform:translateY(15%);-ms-transform:translateY(15%);-moz-transform:translateY(15%);-webkit-transform:translateY(15%);-o-transform:translateY(15%)}to{transform:translate(0);-ms-transform:translate(0);-moz-transform:translate(0);-webkit-transform:translate(0);-o-transform:translate(0)}}@-webkit-keyframes _zs_galleryw{0%{transform:translate(0);-ms-transform:translate(0);-moz-transform:translate(0);-webkit-transform:translate(0);-o-transform:translate(0)}25%{transform:translateY(-15%);-ms-transform:translateY(-15%);-moz-transform:translateY(-15%);-webkit-transform:translateY(-15%);-o-transform:translateY(-15%)}75%{transform:translateY(15%);-ms-transform:translateY(15%);-moz-transform:translateY(15%);-webkit-transform:translateY(15%);-o-transform:translateY(15%)}to{transform:translate(0);-ms-transform:translate(0);-moz-transform:translate(0);-webkit-transform:translate(0);-o-transform:translate(0)}}@keyframes _zs_galleryx{0%{transform:translate(0);-ms-transform:translate(0);-moz-transform:translate(0);-webkit-transform:translate(0);-o-transform:translate(0)}25%{transform:translateY(2px);-ms-transform:translateY(2px);-moz-transform:translateY(2px);-webkit-transform:translateY(2px);-o-transform:translateY(2px)}50%{transform:translate(0);-ms-transform:translate(0);-moz-transform:translate(0);-webkit-transform:translate(0);-o-transform:translate(0)}75%{transform:translateY(-2px);-ms-transform:translateY(-2px);-moz-transform:translateY(-2px);-webkit-transform:translateY(-2px);-o-transform:translateY(-2px)}to{transform:translate(0);-ms-transform:translate(0);-moz-transform:translate(0);-webkit-transform:translate(0);-o-transform:translate(0)}}@-webkit-keyframes _zs_galleryx{0%{transform:translate(0);-ms-transform:translate(0);-moz-transform:translate(0);-webkit-transform:translate(0);-o-transform:translate(0)}25%{transform:translateY(2px);-ms-transform:translateY(2px);-moz-transform:translateY(2px);-webkit-transform:translateY(2px);-o-transform:translateY(2px)}50%{transform:translate(0);-ms-transform:translate(0);-moz-transform:translate(0);-webkit-transform:translate(0);-o-transform:translate(0)}75%{transform:translateY(-2px);-ms-transform:translateY(-2px);-moz-transform:translateY(-2px);-webkit-transform:translateY(-2px);-o-transform:translateY(-2px)}to{transform:translate(0);-ms-transform:translate(0);-moz-transform:translate(0);-webkit-transform:translate(0);-o-transform:translate(0)}}@keyframes _zs_galleryy{0%{transform:translate(0);-ms-transform:translate(0);-moz-transform:translate(0);-webkit-transform:translate(0);-o-transform:translate(0)}25%{transform:translateY(-2px);-ms-transform:translateY(-2px);-moz-transform:translateY(-2px);-webkit-transform:translateY(-2px);-o-transform:translateY(-2px)}50%{transform:translate(0);-ms-transform:translate(0);-moz-transform:translate(0);-webkit-transform:translate(0);-o-transform:translate(0)}75%{transform:translateY(2px);-ms-transform:translateY(2px);-moz-transform:translateY(2px);-webkit-transform:translateY(2px);-o-transform:translateY(2px)}to{transform:translate(0);-ms-transform:translate(0);-moz-transform:translate(0);-webkit-transform:translate(0);-o-transform:translate(0)}}@-webkit-keyframes _zs_galleryy{0%{transform:translate(0);-ms-transform:translate(0);-moz-transform:translate(0);-webkit-transform:translate(0);-o-transform:translate(0)}25%{transform:translateY(-2px);-ms-transform:translateY(-2px);-moz-transform:translateY(-2px);-webkit-transform:translateY(-2px);-o-transform:translateY(-2px)}50%{transform:translate(0);-ms-transform:translate(0);-moz-transform:translate(0);-webkit-transform:translate(0);-o-transform:translate(0)}75%{transform:translateY(2px);-ms-transform:translateY(2px);-moz-transform:translateY(2px);-webkit-transform:translateY(2px);-o-transform:translateY(2px)}to{transform:translate(0);-ms-transform:translate(0);-moz-transform:translate(0);-webkit-transform:translate(0);-o-transform:translate(0)}}._zs_gallerykT,._zs_gallerykU{position:relative;height:32px}._zs_gallerykT ._zs_gallerykV,._zs_gallerykU ._zs_gallerykV{display:none;position:absolute;top:100%;min-width:100%;z-index:99;margin-top:10px;padding:8px 10px;border-radius:4px;background-color:#fff;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;box-shadow:0 1px 1px 0 rgba(0,0,0,.08);border:1px solid #f5f5f6}._zs_gallerykT ._zs_gallerykV ._zs_gallerykW,._zs_gallerykU ._zs_gallerykV ._zs_gallerykW{margin:2px 0;padding:0 10px;cursor:pointer;height:26px;line-height:26px;border-radius:4px;white-space:nowrap;word-break:break-all}._zs_gallerykT ._zs_gallerykV ._zs_gallerykW:hover,._zs_gallerykU ._zs_gallerykV ._zs_gallerykW:hover{background-color:#f0f0f0}._zs_gallerykT ._zs_gallerykV ._zs_gallerykW._zs_gallerykX,._zs_gallerykT ._zs_gallerykV ._zs_gallerykW._zs_gallerykX:active,._zs_gallerykT ._zs_gallerykV ._zs_gallerykW._zs_gallerykX:focus,._zs_gallerykT ._zs_gallerykV ._zs_gallerykW._zs_gallerykX:hover,._zs_gallerykU ._zs_gallerykV ._zs_gallerykW._zs_gallerykX,._zs_gallerykU ._zs_gallerykV ._zs_gallerykW._zs_gallerykX:active,._zs_gallerykU ._zs_gallerykV ._zs_gallerykW._zs_gallerykX:focus,._zs_gallerykU ._zs_gallerykV ._zs_gallerykW._zs_gallerykX:hover{color:#4d7fff;background-color:#f6f9ff}._zs_gallerykT ._zs_gallerykV._zs_gallerykY,._zs_gallerykU ._zs_gallerykV._zs_gallerykY{display:block;-webkit-animation:_zs_galleryu .25s ease-out;animation:_zs_galleryu .25s ease-out;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}._zs_gallerykU ._zs_gallerykV{right:0}._zs_gallerykT ._zs_gallerykV{left:0}");var n=a("../mx-monitor/index");r.exports=s.View.extend({tmpl:function(a,t,r,s,e,n,l,o){if(r||(r=a),!e){var m={"&":"amp","<":"lt",">":"gt",'"':"#34","'":"#39","`":"#96"},_=/[&<>"'`]/g,f=function(a){return"&"+m[a]+";"};e=function(a){return""+(null==a?"":a)},s=function(a){return e(a).replace(_,f)}}if(!n){var i={"!":"%21","'":"%27","(":"%28",")":"%29","*":"%2A"},k=function(a){return i[a]},g=/[!')(*]/g;n=function(a){return encodeURIComponent(e(a)).replace(g,k)}}if(!o){var p=/[\\'"]/g;o=function(a){return e(a).replace(p,"\\$&")}}l||(l=function(a,t,r,s){for(s=a[y];--s;)if(a[r=y+s]===t)return r;return a[r=y+a[y]++]=t,r});var y="",z="",d=a.align,c=a.placeholder,u=a.searchValue,h=a.list,x=a.show,Y=a.searchKey;z+='<div mxv class="search-box ',z+="right"==d?" _zs_gallerykU ":" _zs_gallerykT ",z+='"><i mxs="_zs_gallerydj:_" class="mc-iconfont search-icon">&#xe651;</i><input class="input search-input" placeholder="'+s(c)+'" autocomplete="off" value="'+s(u)+'" mx-keyup="'+t+'__e()" mx-paste="'+t+'__e()" mx-focusin="'+t+'__e()" mx-focusout="'+t+'__l()" mx-change="'+t+'__l()"/><ul class="_zs_gallerykV ',h.length>1&&u&&x&&(z+=" _zs_gallerykY "),z+='">';for(var b=0,w=h.length;b<w;b++){var v=h[b];z+='<li class="_zs_gallerykW ',Y==v.value&&(z+=" _zs_gallerykX "),z+='" mx-click="'+t+"__aa({item:'"+l(r,v)+"'})\">"+s(v.prefix)+s(u)+s(v.suffix)+"</li>"}return z+="</ul></div>"},init:function(a){var t=this;t.updater.snapshot(),t.assign(a),n.__f(),t.on("destroy",function(){n.__g(t),n.__h(),t.__bT&&clearTimeout(t.__bT)})},assign:function(a){var t=this.updater.altered();this.__da=a.searchKey||"",this.__db=this.__da,this.__dc=a.searchValue||"",this.__dd=a.placeholder||"",this.__de=a.align||"left";var r=[];if(a.list){var s=a.listText||"text",n=a.listValue||"value";try{r=new Function("return "+a.list)()}catch(t){r=a.list}if(r=r.map(function(a){var t=(a.tmpl||"搜索含有“${content}”的"+a[s]).split("${content}");return{prefix:t[0],suffix:t[1],text:a[s],value:a[n]}}),!this.__dd){var l=r.map(function(a){return a.text});this.__dd=e.unique(l).join("/")}}else this.__dd||(this.__dd="搜索");return this.__df=r,this.__j=e("#"+this.id),this.updater.set({viewId:this.id,list:this.__df,searchValue:this.__dc,searchKey:this.__da,placeholder:this.__dd,align:this.__de}),t||(t=this.updater.altered()),!!t&&(this.updater.snapshot(),!0)},render:function(){this.updater.digest()},"__e<focusin,keyup,paste>":function(a){a.stopPropagation();var t=this;t.__bT&&clearTimeout(t.__bT);var r=t.updater.get("show"),s=t.__df;if(40==a.keyCode||38==a.keyCode){if(r){for(var n=-1,l=t.__da,o=0;o<s.length;o++)if(s[o].value==l){n=o;break}40==a.keyCode&&(n+=1)>=s.length&&(n=0),38==a.keyCode&&(n-=1)<0&&(n=s.length-1),t.updater.digest({searchKey:t.__da=s[n].value})}}else 13==a.keyCode?(!t.__da&&s&&s.length>0&&(t.__da=s[0].value),t.__db=t.__da,t.__dc=e.trim(a.eventTarget.value),t.__m(),t.__cq()):t.__bT=setTimeout(t.wrapAsync(function(){t.__dc=e.trim(a.eventTarget.value),t.__n()}),300)},__m:function(){this.__da!=this.__db&&(this.__da=this.__db),this.updater.digest({searchKey:this.__da,searchValue:this.__dc,show:!1}),n.__g(this)},__n:function(){this.updater.digest({searchKey:this.__da,searchValue:this.__dc,show:!0}),n.__p(this)},__k:function(a){return s.inside(a,this.id)},"__l<change,focusout>":function(a){a.stopPropagation()},"__aa<click>":function(a){a.stopPropagation();var t=a.params.item;this.updater.digest({searchKey:this.__da=this.__db=t.value,show:!1}),this.__cq()},__cq:function(){this.__j.trigger({type:"search",searchKey:this.__da,searchValue:this.__dc})}})});