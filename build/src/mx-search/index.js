define("mx-search/index",["magix","$","../mx-monitor/index"],(t,a,r)=>{var s=t("magix"),e=t("$");s.applyStyle("_zs_galleryau","._zs_gallerykR{box-shadow:0 1px 1px 0 rgba(0,0,0,.08);border:1px solid #f5f5f6}@keyframes _zs_galleryu{0%{transform:translateY(-20%);-ms-transform:translateY(-20%);-moz-transform:translateY(-20%);-webkit-transform:translateY(-20%);-o-transform:translateY(-20%);opacity:0}to{transform:translate(0);-ms-transform:translate(0);-moz-transform:translate(0);-webkit-transform:translate(0);-o-transform:translate(0);opacity:1}}@-webkit-keyframes _zs_galleryu{0%{transform:translateY(-20%);-ms-transform:translateY(-20%);-moz-transform:translateY(-20%);-webkit-transform:translateY(-20%);-o-transform:translateY(-20%);opacity:0}to{transform:translate(0);-ms-transform:translate(0);-moz-transform:translate(0);-webkit-transform:translate(0);-o-transform:translate(0);opacity:1}}@keyframes _zs_galleryv{0%{transform:translateY(20%);-ms-transform:translateY(20%);-moz-transform:translateY(20%);-webkit-transform:translateY(20%);-o-transform:translateY(20%);opacity:0}to{transform:translate(0);-ms-transform:translate(0);-moz-transform:translate(0);-webkit-transform:translate(0);-o-transform:translate(0);opacity:1}}@-webkit-keyframes _zs_galleryv{0%{transform:translateY(20%);-ms-transform:translateY(20%);-moz-transform:translateY(20%);-webkit-transform:translateY(20%);-o-transform:translateY(20%);opacity:0}to{transform:translate(0);-ms-transform:translate(0);-moz-transform:translate(0);-webkit-transform:translate(0);-o-transform:translate(0);opacity:1}}@keyframes _zs_galleryw{0%{transform:translate(0);-ms-transform:translate(0);-moz-transform:translate(0);-webkit-transform:translate(0);-o-transform:translate(0)}25%{transform:translateY(-15%);-ms-transform:translateY(-15%);-moz-transform:translateY(-15%);-webkit-transform:translateY(-15%);-o-transform:translateY(-15%)}75%{transform:translateY(15%);-ms-transform:translateY(15%);-moz-transform:translateY(15%);-webkit-transform:translateY(15%);-o-transform:translateY(15%)}to{transform:translate(0);-ms-transform:translate(0);-moz-transform:translate(0);-webkit-transform:translate(0);-o-transform:translate(0)}}@-webkit-keyframes _zs_galleryw{0%{transform:translate(0);-ms-transform:translate(0);-moz-transform:translate(0);-webkit-transform:translate(0);-o-transform:translate(0)}25%{transform:translateY(-15%);-ms-transform:translateY(-15%);-moz-transform:translateY(-15%);-webkit-transform:translateY(-15%);-o-transform:translateY(-15%)}75%{transform:translateY(15%);-ms-transform:translateY(15%);-moz-transform:translateY(15%);-webkit-transform:translateY(15%);-o-transform:translateY(15%)}to{transform:translate(0);-ms-transform:translate(0);-moz-transform:translate(0);-webkit-transform:translate(0);-o-transform:translate(0)}}@keyframes _zs_galleryx{0%{transform:translate(0);-ms-transform:translate(0);-moz-transform:translate(0);-webkit-transform:translate(0);-o-transform:translate(0)}25%{transform:translateY(2px);-ms-transform:translateY(2px);-moz-transform:translateY(2px);-webkit-transform:translateY(2px);-o-transform:translateY(2px)}50%{transform:translate(0);-ms-transform:translate(0);-moz-transform:translate(0);-webkit-transform:translate(0);-o-transform:translate(0)}75%{transform:translateY(-2px);-ms-transform:translateY(-2px);-moz-transform:translateY(-2px);-webkit-transform:translateY(-2px);-o-transform:translateY(-2px)}to{transform:translate(0);-ms-transform:translate(0);-moz-transform:translate(0);-webkit-transform:translate(0);-o-transform:translate(0)}}@-webkit-keyframes _zs_galleryx{0%{transform:translate(0);-ms-transform:translate(0);-moz-transform:translate(0);-webkit-transform:translate(0);-o-transform:translate(0)}25%{transform:translateY(2px);-ms-transform:translateY(2px);-moz-transform:translateY(2px);-webkit-transform:translateY(2px);-o-transform:translateY(2px)}50%{transform:translate(0);-ms-transform:translate(0);-moz-transform:translate(0);-webkit-transform:translate(0);-o-transform:translate(0)}75%{transform:translateY(-2px);-ms-transform:translateY(-2px);-moz-transform:translateY(-2px);-webkit-transform:translateY(-2px);-o-transform:translateY(-2px)}to{transform:translate(0);-ms-transform:translate(0);-moz-transform:translate(0);-webkit-transform:translate(0);-o-transform:translate(0)}}@keyframes _zs_galleryy{0%{transform:translate(0);-ms-transform:translate(0);-moz-transform:translate(0);-webkit-transform:translate(0);-o-transform:translate(0)}25%{transform:translateY(-2px);-ms-transform:translateY(-2px);-moz-transform:translateY(-2px);-webkit-transform:translateY(-2px);-o-transform:translateY(-2px)}50%{transform:translate(0);-ms-transform:translate(0);-moz-transform:translate(0);-webkit-transform:translate(0);-o-transform:translate(0)}75%{transform:translateY(2px);-ms-transform:translateY(2px);-moz-transform:translateY(2px);-webkit-transform:translateY(2px);-o-transform:translateY(2px)}to{transform:translate(0);-ms-transform:translate(0);-moz-transform:translate(0);-webkit-transform:translate(0);-o-transform:translate(0)}}@-webkit-keyframes _zs_galleryy{0%{transform:translate(0);-ms-transform:translate(0);-moz-transform:translate(0);-webkit-transform:translate(0);-o-transform:translate(0)}25%{transform:translateY(-2px);-ms-transform:translateY(-2px);-moz-transform:translateY(-2px);-webkit-transform:translateY(-2px);-o-transform:translateY(-2px)}50%{transform:translate(0);-ms-transform:translate(0);-moz-transform:translate(0);-webkit-transform:translate(0);-o-transform:translate(0)}75%{transform:translateY(2px);-ms-transform:translateY(2px);-moz-transform:translateY(2px);-webkit-transform:translateY(2px);-o-transform:translateY(2px)}to{transform:translate(0);-ms-transform:translate(0);-moz-transform:translate(0);-webkit-transform:translate(0);-o-transform:translate(0)}}._zs_gallerykS,._zs_gallerykT{position:relative;height:32px}._zs_gallerykS ._zs_gallerykU,._zs_gallerykT ._zs_gallerykU{display:none;position:absolute;top:100%;min-width:100%;z-index:99;margin-top:10px;padding:8px 10px;border-radius:4px;background-color:#fff;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;box-shadow:0 1px 1px 0 rgba(0,0,0,.08);border:1px solid #f5f5f6}._zs_gallerykS ._zs_gallerykU ._zs_gallerykV,._zs_gallerykT ._zs_gallerykU ._zs_gallerykV{margin:2px 0;padding:0 10px;cursor:pointer;height:26px;line-height:26px;border-radius:4px;white-space:nowrap;word-break:break-all}._zs_gallerykS ._zs_gallerykU ._zs_gallerykV:hover,._zs_gallerykT ._zs_gallerykU ._zs_gallerykV:hover{background-color:#f0f0f0}._zs_gallerykS ._zs_gallerykU ._zs_gallerykV._zs_gallerykW,._zs_gallerykS ._zs_gallerykU ._zs_gallerykV._zs_gallerykW:active,._zs_gallerykS ._zs_gallerykU ._zs_gallerykV._zs_gallerykW:focus,._zs_gallerykS ._zs_gallerykU ._zs_gallerykV._zs_gallerykW:hover,._zs_gallerykT ._zs_gallerykU ._zs_gallerykV._zs_gallerykW,._zs_gallerykT ._zs_gallerykU ._zs_gallerykV._zs_gallerykW:active,._zs_gallerykT ._zs_gallerykU ._zs_gallerykV._zs_gallerykW:focus,._zs_gallerykT ._zs_gallerykU ._zs_gallerykV._zs_gallerykW:hover{color:#4d7fff;background-color:#f6f9ff}._zs_gallerykS ._zs_gallerykU._zs_gallerykX,._zs_gallerykT ._zs_gallerykU._zs_gallerykX{display:block;-webkit-animation:_zs_galleryu .25s ease-out;animation:_zs_galleryu .25s ease-out;-webkit-animation-fill-mode:forwards;animation-fill-mode:forwards}._zs_gallerykT ._zs_gallerykU{right:0}._zs_gallerykS ._zs_gallerykU{left:0}");var n=t("../mx-monitor/index");r.exports=s.View.extend({tmpl:function(t,a,r,s,e,n,l,o){if(r||(r=t),!e){var m={"&":"amp","<":"lt",">":"gt",'"':"#34","'":"#39","`":"#96"},_=/[&<>"'`]/g,f=function(t){return"&"+m[t]+";"};e=function(t){return""+(null==t?"":t)},s=function(t){return e(t).replace(_,f)}}if(!n){var i={"!":"%21","'":"%27","(":"%28",")":"%29","*":"%2A"},k=function(t){return i[t]},g=/[!')(*]/g;n=function(t){return encodeURIComponent(e(t)).replace(g,k)}}if(!o){var p=/[\\'"]/g;o=function(t){return e(t).replace(p,"\\$&")}}l||(l=function(t,a,r,s){for(s=t[y];--s;)if(t[r=y+s]===a)return r;return t[r=y+t[y]++]=a,r});var y="",d="",z=t.align,u=t.placeholder,h=t.searchValue,c=t.list,x=t.show,Y=t.searchKey;d+='<div mxv class="search-box ',d+="right"==z?" _zs_gallerykT ":" _zs_gallerykS ",d+='"><i mxs="_zs_gallerydw:_" class="mc-iconfont search-icon">&#xe651;</i><input class="input search-input" placeholder="'+s(u)+'" autocomplete="off" value="'+s(h)+'" mx-keyup="'+a+'__e()" mx-paste="'+a+'__e()" mx-focusin="'+a+'__e()" mx-focusout="'+a+'__m()" mx-change="'+a+'__m()"/><ul class="_zs_gallerykU ',c.length>1&&h&&x&&(d+=" _zs_gallerykX "),d+='">';for(var b=0,w=c.length;b<w;b++){var v=c[b];d+='<li class="_zs_gallerykV ',Y==v.value&&(d+=" _zs_gallerykW "),d+='" mx-click="'+a+"__ab({item:'"+l(r,v)+"'})\">"+s(v.prefix)+s(h)+s(v.suffix)+"</li>"}return d+="</ul></div>"},init:function(t){var a=this;a.updater.snapshot(),a.assign(t),n.__f(),a.on("destroy",function(){n.__g(a),n.__h(),a.__bU&&clearTimeout(a.__bU)})},assign:function(t){var a=this.updater.altered();this.__dd=t.searchKey||"",this.__de=this.__dd,this.__df=t.searchValue||"",this.__dg=t.placeholder||"",this.__dh=t.align||"left";var r=[];if(t.list){var s=t.listText||"text",n=t.listValue||"value";try{r=new Function("return "+t.list)()}catch(a){r=t.list}if(r=r.map(function(t){var a=(t.tmpl||"搜索含有“${content}”的"+t[s]).split("${content}");return{prefix:a[0],suffix:a[1],text:t[s],value:t[n]}}),!this.__dg){var l=r.map(function(t){return t.text});this.__dg=e.unique(l).join("/")}}else this.__dg||(this.__dg="搜索");return this.__di=r,this.__k=e("#"+this.id),this.updater.set({viewId:this.id,list:this.__di,searchValue:this.__df,searchKey:this.__dd,placeholder:this.__dg,align:this.__dh}),a||(a=this.updater.altered()),!!a&&(this.updater.snapshot(),!0)},render:function(){this.updater.digest()},"__e<focusin,keyup,paste>":function(t){t.stopPropagation();var a=this;a.__bU&&clearTimeout(a.__bU);var r=a.updater.get("show"),s=a.__di;if(40==t.keyCode||38==t.keyCode){if(r){for(var n=-1,l=a.__dd,o=0;o<s.length;o++)if(s[o].value==l){n=o;break}40==t.keyCode&&(n+=1)>=s.length&&(n=0),38==t.keyCode&&(n-=1)<0&&(n=s.length-1),a.updater.digest({searchKey:a.__dd=s[n].value})}}else 13==t.keyCode?(!a.__dd&&s&&s.length>0&&(a.__dd=s[0].value),a.__de=a.__dd,a.__df=e.trim(t.eventTarget.value),a.__n(),a.__ae()):a.__bU=setTimeout(a.wrapAsync(function(){a.__df=e.trim(t.eventTarget.value),a.__o()}),300)},__n:function(){this.__dd!=this.__de&&(this.__dd=this.__de),this.updater.digest({searchKey:this.__dd,searchValue:this.__df,show:!1}),n.__g(this)},__o:function(){this.updater.digest({searchKey:this.__dd,searchValue:this.__df,show:!0}),n.__q(this)},__l:function(t){return s.inside(t,this.id)},"__m<change,focusout>":function(t){t.stopPropagation()},"__ab<click>":function(t){t.stopPropagation();var a=t.params.item;this.updater.digest({searchKey:this.__dd=this.__de=a.value,show:!1}),this.__ae()},__ae:function(){this.__k.trigger({type:"search",searchKey:this.__dd,searchValue:this.__df})}})});