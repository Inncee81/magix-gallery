define("mx-taginput/suggest",["magix","$","../mx-monitor/index"],(e,_,t)=>{var r=e("magix"),i=e("$"),l=e("../mx-monitor/index");r.applyStyle("_zs_galleryao","._zs_gallerykD{box-shadow:0 2px 4px rgba(51,51,51,.08);border:1px solid #eee}._zs_gallerykE{position:relative;z-index:1;max-height:260px;padding:10px;font-size:12px;border-radius:4px;border:1px solid #e6e6e6;overflow:auto;list-style:none;background-color:#fff;line-height:1.5}._zs_gallerykE ._zs_gallerykF{cursor:pointer}._zs_gallerykE ._zs_gallerykF ._zs_gallerykG{display:block;width:100%;padding:0 10px;height:32px;color:#666;line-height:32px;border-radius:4px}._zs_gallerykE ._zs_gallerykF ._zs_gallerykG:active,._zs_gallerykE ._zs_gallerykF ._zs_gallerykG:focus,._zs_gallerykE ._zs_gallerykF ._zs_gallerykG:hover{color:#333;background-color:#f0f0f0}._zs_gallerykE ._zs_gallerykF:last-child{margin-bottom:0}._zs_gallerykE ._zs_gallerykH{color:#333;background-color:#f0f0f0;border-radius:4px;text-decoration:none;outline:0}"),t.exports=r.View.extend({tmpl:function(e,_,t,r,i,l,o,s){if(t||(t=e),!i){var n={"&":"amp","<":"lt",">":"gt",'"':"#34","'":"#39","`":"#96"},a=/[&<>"'`]/g,c=function(e){return"&"+n[e]+";"};i=function(e){return""+(null==e?"":e)},r=function(e){return i(e).replace(a,c)}}if(!l){var f={"!":"%21","'":"%27","(":"%28",")":"%29","*":"%2A"},g=function(e){return f[e]},p=/[!')(*]/g;l=function(e){return encodeURIComponent(i(e)).replace(p,g)}}if(!s){var u=/[\\'"]/g;s=function(e){return i(e).replace(u,"\\$&")}}o||(o=function(e,_,t,r){for(r=e[d];--r;)if(e[t=d+r]===_)return t;return e[t=d+e[d]++]=_,t});var d="",h="",y=e.list,x=e.width,v=e.viewId;if(y&&y.length){h+='<ul class="_zs_gallerykE unselectable" style="width: '+r(x)+'px;" mx-mouseout="'+_+'__bQ()" mx-mousemove="'+_+'__fb()" mx-contextmenu="'+_+'__H()">';for(var k=0,m=y.length;k<m;k++){var z=y[k];h+='<li mxa="_zs_gallerydl:_" class="_zs_gallerykF"><a href="javascript:;" class="_zs_gallerykG" data-idx="'+r(k)+'" mx-click="'+_+"__fa({item:'"+o(t,z)+'\'})" id="sg_'+r(v)+"_"+r(k)+'">'+r(z.text)+"</a></li>"}h+="</ul>"}else h+='<div class="_zs_gallerykE text-center color-9" style="width: '+r(x)+'px;">无匹配选项</div>';return h},init:function(e){var _=this;_.__eM=e.scrollTop||0,_.__cQ=e.list||[],_.__eN=0|(e.offsetLeft||0),l.__f(),_.on("destroy",function(){l.__g(_),l.__h(),_.__j.off("keyup paste input",_.__eO).off("focus",_.__eP)}),_.updater.set({viewId:_.id,width:e.width}),_.__eQ=-1,_.__eR=[_.id].concat(e.relateIds.split(","))},__k:function(e){for(var _=this.__eR,t=0;t<_.length;t++)if(r.inside(e,_[t]))return!0;return!1},__eT:function(e,_){_||(this.__cQ=e),this.__eQ=-1,this.updater.digest({list:this.__eS=e})},render:function(){var e=this,_=i("#"+e.id);e.__eU=_,_=_.prev("input"),e.__j=_,_.on("focus",e.__eP=i.proxy(e.__n,e)).on("keyup paste input",e.__eO=i.proxy(e.__eV,e)),e.__eT(e.__cQ),e.__eW=i("#"+e.id+" ul"),setTimeout(e.wrapAsync(function(){e.__eW.prop("scrollTop",e.__eM)}),0)},__eV:function(e){var _=this;_.__eX||_.__n();var t=_.__eS;if(40==e.keyCode)_.__eY(),_.__eQ++,_.__eQ>=t.length&&(_.__eQ=0),_.__eZ();else if(38==e.keyCode)_.__eY(),_.__eQ--,_.__eQ<0&&(_.__eQ=t.length-1),_.__eZ();else if(13==e.keyCode){if(_.__eQ>-1&&_.__eQ<_.__eS.length){var r=_.__eS[_.__eQ];_.__eY(),_.__eQ=-1,_.__m(),_.__j.trigger({type:"pick",item:r})}}else{var l=i.trim(e.target.value);if(l!=_.__dc)if(_.__dc=l,l){for(var o=[],s=_.__cQ.slice(),n=0,a=void 0;n<s.length;n++)((a=s[n]).text+"").indexOf(l)>=0&&o.push(a);_.__eT(o,!0)}else _.__eT(_.__cQ,!0)}},__n:function(){var e=this,_=e.updater;if(!e.__eX){e.__eX="from show ",_.get("rList")||_.digest({rList:!0}),l.__p(e);var t=e.__j.position();e.__eU.show().css({display:"block",left:t.left+e.__eN,top:t.top+e.__j.outerHeight()+10}),e.__j.trigger("showlist")}},__eY:function(){i("#sg_"+this.id+"_"+this.__eQ).removeClass("_zs_gallerykH")},__eZ:function(e){var _=this,t=i("#sg_"+_.id+"_"+_.__eQ);if(t.addClass("_zs_gallerykH"),!e&&t.length){_.__f_=1;var r=t.outerHeight(),l=(_.__eQ+1)*r,o=_.__eW,s=o.height(),n=o.prop("scrollTop"),a=Math.ceil(s/r);l<n+r?o.prop("scrollTop",l-r):l>n+s&&o.prop("scrollTop",(_.__eQ+2-a)*r)}},__m:function(){var e=this;e.__eX&&(e.__eX=!1,l.__g(e),e.__eU.hide(),e.__j.trigger("hidelist"))},"__fa<click>":function(e){e.preventDefault();var _=e.params.item;this.__m(),this.__j.trigger({type:"pick",item:_,scrollTop:this.__eW.prop("scrollTop")})},"__bQ<mouseout>":function(e){if(!r.inside(e.relateTarget,e.eventTarget)){this.__eY(),this.__eQ=-1}},"__fb<mousemove>":function(e){var _=this;if(_.__f_)delete _.__f_;else{var t=i(e.target);if(t.is("li")){var r=t.data("idx");r!=_.__eQ&&(_.__eY(),_.__eQ=r,_.__eZ(!0))}}},"__H<contextmenu>":function(e){e.preventDefault()}})});