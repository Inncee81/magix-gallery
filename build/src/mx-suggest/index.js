define("mx-suggest/index",["magix","$","../mx-medusa/util","../mx-util/monitor"],(t,e,i)=>{var s=t("magix"),a=t("$"),l=t("../mx-medusa/util"),_=t("../mx-util/monitor");s.applyStyle("_zs_galleryaz",'[mx-view*="mx-suggest/index"]{position:relative;display:inline-block}'),i.exports=s.View.extend({tmpl:function(t,e,i,s,a,l,_,n){if(i||(i=t),!a){var u={"&":"amp","<":"lt",">":"gt",'"':"#34","'":"#39","`":"#96"},r=/[&<>"'`]/g,d=function(t){return"&"+u[t]+";"};a=function(t){return""+(null==t?"":t)},s=function(t){return a(t).replace(r,d)}}if(!l){var o={"!":"%21","'":"%27","(":"%28",")":"%29","*":"%2A"},c=function(t){return o[t]},h=/[!')(*]/g;l=function(t){return encodeURIComponent(a(t)).replace(h,c)}}if(!n){var p=/[\\'"]/g;n=function(t){return a(t).replace(p,"\\$&")}}_||(_=function(t,e,i,s){for(s=t[v];--s;)if(t[i=v+s]===e)return i;return t[i=v+t[v]++]=e,i});var v="",g="",x=t.placeholder,f=t.viewId,m=t.selectedText,y=t.show,w=t.loading,k=t.list,z=t.selectedValue,T=t.emptyText;if(g+='<div mxv mxa="_zs_galleryd`:_" class="search-box"><i mxs="_zs_galleryd`:_" class="mc-iconfont search-icon">&#xe651;</i><input class="input search-input" placeholder="'+s(x)+'" autocomplete="off" id="'+s(f)+'_input" value="'+s(m)+'" mx-keyup="'+e+'__dD()" mx-paste="'+e+'__dD()" mx-focusin="'+e+'__dD()" mx-focusout="'+e+'__m()" mx-change="'+e+'__m()"/><div class="mx-output mx-output-bottom ',y&&(g+=" mx-output-open "),g+='"><ul mxa="_zs_galleryd`:a" class="mx-output-list">',w)g+='<li mxs="_zs_galleryd`:a"><div class="loading" style="padding: 40px 0;"><span class="loading-anim"></span></div></li>';else{if(g+=" ",k.length>0){g+=" ";for(var C=0,b=k.length;C<b;C++){var A=k[C];g+='<li mxa="_zs_galleryd`:b" class="mx-output-item"><span class="mx-output-link ',z+""==A.value+""&&(g+=" mx-output-link-active "),g+="\" data-active=\"(selectedValue + '') === (item.value + '')\" mx-click=\""+e+"__ac({item:'"+_(i,A)+"'})\">"+a(A.text)+"</span></li>"}g+=" "}else g+='<li mxa="_zs_galleryd`:c" class="text-center color-9 pt20 pb20">'+s(T)+"</li>";g+=" "}return g+="</ul></div></div>"},init:function(t){var e=this;e.updater.snapshot(),e.assign(t);var i=t.list||[];e.__du=0==i.length,_.__h(),e.on("destroy",function(){_.__i(e),_.__j(),e.__dv&&clearTimeout(e.__dv)})},assign:function(t){var e=this.updater.altered(),i=t.placeholder||"";i||(i=l.search),this.__dw=t.dynamicEnter+""=="true",this.__dx=t.listValue||"value",this.__dy=t.listText||"text";var s=this.__dz(t.list||this.__dA);this.__dA=s;var _=t.item||{},n=_.value||t.selected||"",u=_.text||"";if(n)for(var r=0;r<s.length;r++)if(s[r].value==n){u=s[r].text;break}this.__dB=n;var d=(t.type||"text")+"";return"all"==d&&(d="text,value"),this.__dC=d.split(","),this.updater.set({viewId:this.id,list:s,selectedValue:n,selectedText:u,placeholder:i,show:!1,emptyText:l["empty.text"]}),this.__a=a("#"+this.id),this.__a.val(n),e||(e=this.updater.altered()),!!e&&(this.updater.snapshot(),!0)},__dz:function(t){var e=this.__dx,i=this.__dy,s=[];return t&&t.length>0&&(s="object"==typeof t[0]?t.map(function(t){return{value:t[e],text:t[i]}}):t.map(function(t){return{value:t,text:t}})),s},render:function(){this.updater.digest()},"__dD<focusin,keyup,paste>":function(t){t.stopPropagation();var e=this;e.__dv&&clearTimeout(e.__dv);for(var i=e.updater.get(),s=i.list,l=i.selectedValue,_=-1,n=0;n<s.length;n++)if(s[n].value==l){_=n;break}if(40==t.keyCode||38==t.keyCode)40==t.keyCode&&(_+=1)>=s.length&&(_=0),38==t.keyCode&&(_-=1)<0&&(_=s.length-1),e.updater.digest({selectedValue:s[_].value});else if(13==t.keyCode)if(e.__dw){var u=a("#"+e.id+"_input").val();e.__ac({value:u,text:u})}else e.__aw(_);else e.__dv=setTimeout(e.wrapAsync(function(){e.__o()}),250)},showLoading:function(){this.updater.digest({loading:!0})},hideLoading:function(){this.updater.digest({loading:!1})},update:function(t){this.__dA=this.__dz(t),this.__o(!0)},__l:function(t){return s.inside(t,this.id)},"__m<change,focusout>":function(t){t.stopPropagation()},__o:function(t){var e=a("#"+this.id+"_input").val();if(this.__du)e?(this.updater.digest({list:this.__dA,selectedText:e,show:!0}),_.__q(this),t||this.__a.trigger({type:"show",keyword:e})):(this.updater.set({list:this.__dA=[]}),this.__n());else{var i=this.__dA,s=(e+"").toLowerCase(),l=[],n=this.__dC;i.forEach(function(t){var e=!1;n.forEach(function(i){(t[i]+"").toLowerCase().indexOf(s)>-1&&(e=!0)}),e&&l.push(t)}),this.updater.digest({list:l,selectedText:e,show:!0}),_.__q(this),t||this.__a.trigger({type:"show",keyword:e})}},__n:function(t){t=t||{},this.updater.digest({selectedValue:t.value||"",selectedText:t.text||"",show:!1}),_.__i(this),this.__a.trigger("focusout")},__aw:function(t){if(a("#"+this.id+"_input").val()){var e=this.updater.get().list;t<0&&(t=0),e[t]&&this.__ac(e[t])}else this.__ac({value:"",text:""})},"__ac<click>":function(t){t.stopPropagation();var e=t.params.item;this.__ac(e)},__ac:function(t){var e=!(t.value==this.__dB),i=this.__dB=t.value;this.__n(t),e&&(this.__a.val(i).trigger({type:"change",selected:i,item:t}),this.__a.trigger({type:"suggest",selected:{value:i,text:t.text}}))}})});