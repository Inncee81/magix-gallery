define("mx-main/index",["magix"],(e,l,r)=>{var a=e("magix"),s=a.Router,i=a.Vframe;a.applyStyle("_zs_galleryaf",'._zs_galleryhw{position:relative;background-color:var(--color-bg)}._zs_galleryhw ._zs_galleryhx{position:absolute;top:0;left:0;bottom:0;background-color:#fff}._zs_galleryhw ._zs_galleryhx ._zs_galleryhy{position:relative;padding:10px 0 10px 20px;border-bottom:1px solid #f5f5f5}._zs_galleryhw ._zs_galleryhx ._zs_galleryhy ._zs_galleryhz{color:#666}._zs_galleryhw ._zs_galleryhx ._zs_galleryhy ._zs_galleryhz:hover{color:var(--color-brand)}._zs_galleryhw ._zs_galleryhx ._zs_galleryhy ._zs_galleryhA{line-height:30px}._zs_galleryhw ._zs_galleryhx ._zs_galleryhy ._zs_galleryhA ._zs_galleryhB>*{position:relative;top:2px;margin-right:4px;font-size:18px;color:#999}._zs_galleryhw ._zs_galleryhx ._zs_galleryhy ._zs_galleryhA:hover ._zs_galleryhB>*{color:var(--color-brand)}._zs_galleryhw ._zs_galleryhx ._zs_galleryhy ._zs_galleryhC{position:relative;height:30px;line-height:30px;padding-left:26px}._zs_galleryhw ._zs_galleryhx ._zs_galleryhy ._zs_galleryhC:before{content:"";position:absolute;top:0;left:9px;width:0;height:30px;border-left:1px solid #adadad}._zs_galleryhw ._zs_galleryhx ._zs_galleryhy ._zs_galleryhC:after{content:"";position:absolute;top:15px;left:10px;width:6px;height:0;border-top:1px solid #adadad}._zs_galleryhw ._zs_galleryhx ._zs_galleryhy ._zs_galleryhC:last-child:before{height:16px}._zs_galleryhw ._zs_galleryhx ._zs_galleryhy._zs_galleryhD{background-color:var(--color-brand-opacity)}._zs_galleryhw ._zs_galleryhx ._zs_galleryhy._zs_galleryhD ._zs_galleryhE,._zs_galleryhw ._zs_galleryhx ._zs_galleryhy._zs_galleryhD ._zs_galleryhE ._zs_galleryhB>*,._zs_galleryhw ._zs_galleryhx ._zs_galleryhy._zs_galleryhD ._zs_galleryhE:hover,._zs_galleryhw ._zs_galleryhx ._zs_galleryhy._zs_galleryhD ._zs_galleryhE:hover ._zs_galleryhB>*{color:var(--color-brand)}._zs_galleryhw ._zs_galleryhx ._zs_galleryhy._zs_galleryhD ._zs_galleryhF{position:absolute;top:50%;right:8px;margin-top:-7px;font-size:12px;font-weight:700;color:var(--color-brand)}._zs_galleryhw ._zs_galleryhx ._zs_galleryhy._zs_galleryhG ._zs_galleryhz,._zs_galleryhw ._zs_galleryhx ._zs_galleryhy._zs_galleryhG ._zs_galleryhz:hover{color:#666;cursor:not-allowed}._zs_galleryhw ._zs_galleryhx ._zs_galleryhy._zs_galleryhG ._zs_galleryhA:hover ._zs_galleryhB>*{color:#999}._zs_galleryhw ._zs_galleryhx ._zs_galleryhy._zs_galleryhG ._zs_galleryhH{position:absolute;top:50%;right:8px;height:18px;margin-top:-9px;font-size:14px;line-height:18px;font-weight:700;color:#eee}._zs_galleryhw ._zs_galleryhI ._zs_galleryhJ{height:58px;line-height:58px;text-align:center;font-size:20px;border-bottom:1px solid var(--color-border);background-color:var(--color-bg)}._zs_galleryhw ._zs_galleryhI ._zs_galleryhK{position:relative;margin-left:20px;margin-right:20px;background-color:#fff;border-bottom-left-radius:var(--border-radius);border-bottom-right-radius:var(--border-radius)}._zs_galleryhw ._zs_galleryhI ._zs_galleryhK ._zs_galleryhL{position:relative;padding-top:20px;padding-bottom:20px;padding-left:20px}._zs_galleryhw ._zs_galleryhI ._zs_galleryhK ._zs_galleryhL:last-child{padding-bottom:40px}._zs_galleryhw ._zs_galleryhI ._zs_galleryhK ._zs_galleryhM{position:absolute;top:0;right:0;height:100%;padding-top:20px;padding-left:20px;border-left:1px solid var(--color-border)}._zs_galleryhw ._zs_galleryhI ._zs_galleryhN{text-align:center;padding:40px 0}._zs_galleryhw ._zs_galleryhO{display:inline-block;position:relative;margin-top:10px;color:var(--color-red)}._zs_galleryhw ._zs_galleryhO ._zs_galleryhP{position:absolute;left:-20px;top:0;color:var(--color-red)}'),r.exports=a.View.extend({tmpl:function(e,l,r,a,s,i,_,t){if(r||(r=e),!s){var n={"&":"amp","<":"lt",">":"gt",'"':"#34","'":"#39","`":"#96"},o=/[&<>"'`]/g,g=function(e){return"&"+n[e]+";"};s=function(e){return""+(null==e?"":e)},a=function(e){return s(e).replace(o,g)}}if(!i){var d={"!":"%21","'":"%27","(":"%28",")":"%29","*":"%2A"},h=function(e){return d[e]},p=/[!')(*]/g;i=function(e){return encodeURIComponent(s(e)).replace(p,h)}}if(!t){var y=/[\\'"]/g;t=function(e){return s(e).replace(y,"\\$&")}}_||(_=function(e,l,r,a){for(a=e[c];--a;)if(e[r=c+a]===l)return r;return e[r=c+e[c]++]=l,r});var c="",z="",x=e.viewHeight,v=e.leftWidth,f=e.stepInfos,u=e.curStepIndex,b=e.curSubStepIndex,m=e.curStepInfo,w=e.viewId;z+='<div mxv class="_zs_galleryhw" style="min-height: '+a(x)+'px;"><div class="_zs_galleryhx" style="width: '+a(v)+'px;">';for(var I=0,S=f.length;I<S;I++){var k=f[I];if(z+='<div class="_zs_galleryhy ',k.index==u&&(z+=" _zs_galleryhD "),z+=" ",k.locked&&(z+=" _zs_galleryhG "),z+='"><div mxa="_zs_galleryc2:_" class="_zs_galleryhA"><a href="javascript:;" class="_zs_galleryhz _zs_galleryhA clearfix ',k.index==u&&-1==b&&(z+=" _zs_galleryhE "),z+='" data-sub="-1" ',k.locked||(z+=' mx-click="'+l+"nav({stepIndex:"+a(k.index)+'})" '),z+=">",k.icon&&(z+='<span mxa="_zs_galleryc2:a" class="_zs_galleryhB fl">'+s(k.icon)+"</span>"),z+='<span mxa="_zs_galleryc2:b" class="fl">'+a(k.label)+"</span></a></div>",!k.locked&&k.subs.length>1){z+="<div>";for(var $=0,T=k.subs,W=T.length;$<W;$++){var D=T[$];z+='<div mxa="_zs_galleryc2:c" class="_zs_galleryhC"><a href="javascript:;" class="_zs_galleryhz ',k.index==u&&b==D.index&&(z+=" _zs_galleryhE "),z+='" data-sub="'+a(D.index)+'" mx-click="'+l+"nav({stepIndex:"+a(k.index)+",subStepIndex:"+a(D.index)+'})">'+a(D.label)+"</a></div>"}z+="</div>"}z+=" ",k.index==u&&(z+='<i mxs="_zs_galleryc2:_" class="mc-iconfont _zs_galleryhF">&#xe602;</i>'),z+=" ",k.locked&&(z+='<i mxs="_zs_galleryc2:a" class="mc-iconfont _zs_galleryhH">&#xe759;</i>'),z+="</div>"}z+='</div><div mxv class="_zs_galleryhI" style="padding-left: '+a(v)+'px;"><div mxa="_zs_galleryc2:d" class="_zs_galleryhJ">'+a(m.label)+'</div><div mxv mxa="_zs_galleryc2:e" class="_zs_galleryhK"><div mxv>';for(var E=0,C=m.subs,A=C.length;E<A;E++){D=C[E];z+='<div mxv class="_zs_galleryhL" style="padding-right: '+a(m.rightWidth+20)+'px;"><div mxv="curStepInfo" mx-view="'+a(D.view)+"?info="+_(r,D)+'" id="sub_frame_'+a(D.index)+'"><div mxs="_zs_galleryc2:b" class="loading" style="padding: 150px 0;"><span class="loading-anim"></span></div></div>',D.sideWrapper&&(z+='<div mxv="curStepInfo" mx-view="'+a(D.sideWrapper)+"?data="+_(r,D.sideData)+'" class="_zs_galleryhM" style="width: '+a(m.rightWidth)+'px;"><div mxs="_zs_galleryc2:b" class="loading" style="padding: 150px 0;"><span class="loading-anim"></span></div></div>'),z+="</div>"}return z+="</div>",m.sideWrapper&&(z+='<div mxv="curStepInfo" mx-view="'+a(m.sideWrapper)+"?data="+_(r,m.sideData)+'" class="_zs_galleryhM" style="width: '+a(m.rightWidth)+'px;"><div mxs="_zs_galleryc2:b" class="loading" style="padding: 150px 0;"><span class="loading-anim"></span></div></div>'),z+="</div>",m.customTrigger||(z+='<div mxa="_zs_galleryc2:f" class="_zs_galleryhN"><div>',m.prevTip&&(z+='<a mxa="_zs_galleryc2:g" href="javascript:;" class="btn min-width-100 mr20" mx-click="'+l+'prev()">'+a(m.prevTip)+"</a>"),z+=" ",m.nextTip&&(z+='<a mxa="_zs_galleryc2:h" href="javascript:;" class="btn min-width-100 btn-brand" mx-click="'+l+'next()">'+a(m.nextTip)+"</a>"),z+='</div><div id="'+a(w)+'_error" class="_zs_galleryhO"></div></div>'),z+="</div></div>"},init:function(e){var l=this;l.updater.set({leftWidth:e.leftWidth||160,rightWidth:e.rightWidth||260,alreadyStep:e.alreadyStep||1,stepInfos:e.stepInfos||[],viewId:l.id,viewHeight:$(window).height()}),l.observeLocation(["stepIndex","subStepIndex"]),l.owner.oncreated=function(){l.$init||(l.subScroll(),l.$init=1)},l.ondestroy=function(){l.owner.off("created")}},render:function(){var e=this;e.$init=null;var l=e.updater,r=+l.get("alreadyStep"),a=l.get("stepInfos"),i=s.parse().params,_=+(i.stepIndex||1);_>r&&(r=_);var t=+i.subStepIndex||-1;if(a.forEach(function(l,s){var i=s+1;l.index=i,l.subs=l.subs||[],(l=e.wrapSide(l)).locked=i>r,i==_&&(t>l.subs.length||1==l.subs.length)&&(t=-1);var n="";!l.customTrigger&&i>1&&!a[s-1].locked&&(n=l.prevTip||"返回上一步"),l.prevTip=n;var o="";!l.customTrigger&&i<a.length&&(o=l.nextTip||"下一步"),l.nextTip=o}),i.stepIndex+""==_+""&&i.subStepIndex+""==t+""){var n=function(){e.updater.digest({alreadyStep:r,curStepInfo:a[_-1],curStepIndex:_,curSubStepIndex:t})};if(e.$inited)if(s.diff().params.stepIndex)n();else{e.updater.set({curSubStepIndex:t});var o=$("#"+e.id+" ._zs_galleryhD");o.find("._zs_galleryhz").removeClass("_zs_galleryhE"),o.find('._zs_galleryhz[data-sub="'+t+'"]').addClass("_zs_galleryhE"),e.subScroll()}else e.$inited=1,n()}else s.to({stepIndex:_,subStepIndex:t})},wrapSide:function(e){var l=+this.updater.get("rightWidth"),r=!1,a=null,s={};(e.sideView||e.sideTip)&&(a="mx-main/tip",s={view:e.sideView||"",content:e.sideTip||""},r=!0);var i=!1;return e.subs.forEach(function(e,l){e.index=l+1;var a=null,s={};if(!r){var _=!1;(e.sideView||e.sideTip)&&(a="mx-main/tip",s={view:e.sideView||"",content:e.sideTip||""},_=!0),i=i||_}e.sideWrapper=a,e.sideData=s}),r=r||i,e.hasSide=r,e.sideWrapper=a,e.sideData=s,e.rightWidth=r?l:0,e},subScroll:function(){var e,l=+this.updater.get("curSubStepIndex");l>0?e=$("#"+this.id+" #sub_frame_"+l).offset().top:e=0;$(window).scrollTop(e)},"$win<scroll>":function(){var e=$("#"+this.id),l=e.find("._zs_galleryhI");if(l.length){var r=e.find("._zs_galleryhx");$(window).scrollTop()>l.offset().top?r.css({position:"fixed"}):r.css({position:"absolute"})}},"$win<resize>":function(){var e=$(window).height();this.updater.set({viewHeight:e}),$("#"+this.id).find("._zs_galleryhw").css({minHeight:e})},"prev<click>":function(e){var l=this.updater.get("curStepIndex");s.to({stepIndex:+l-1,subStepIndex:-1})},"next<click>":function(e){var l=this,r=l.updater.get("curStepInfo"),s=r.subs,_=s.map(function(e){return i.get("sub_frame_"+e.index).invoke("check")});Promise.all(_).then(function(e){var i=!0,_=[],t={},n=$("#"+l.id+"_error");if(e.forEach(function(e,l){i=i&&e.ok,e.ok||_.push({id:l+1,label:s[l].label,msg:e.msg||""}),a.mix(t,e.remain||{})}),i)n.html(""),r.nextFn?r.nextFn(t,function(e){l.next(e)}):l.next({});else{n.html('\n                    <i class="mc-iconfont _zs_galleryhP">&#xe6ad;</i>\n                    '+_.map(function(e){return"\n                        <div>"+e.label+"："+e.msg+"</div>\n                    "}).join("")+"\n                ");var o=$("#"+l.id+" #sub_frame_"+_[0].id);$(window).scrollTop(o.offset().top)}})},"nav<click>":function(e){var l=e.params,r=l.stepIndex,a=l.subStepIndex||-1;s.to({stepIndex:r,subStepIndex:a})},next:function(e){var l=this.updater.get("curStepIndex");e.stepIndex=+l+1,s.to(e)}})});