define("mx-color/picker",["magix","$","../mx-util/monitor","./index"],(o,r,n)=>{var i=o("magix"),e=o("$"),t=o("../mx-util/monitor");o("./index"),i.applyStyle("_zs_gallery_mx-color_index_",':root {\n  --mx-color-width: 224px;\n  --mx-color-slider-width: 18px;\n  --mx-color-picker-width: calc(var(--mx-color-width) - var(--mx-color-slider-width) - 10px);\n}\n._zs_gallery_mx-color_index_-shortcuts,\n._zs_gallery_mx-color_index_-cbd,\n._zs_gallery_mx-color_index_-foot {\n  width: var(--mx-color-width);\n}\n._zs_gallery_mx-color_index_-cbd {\n  margin: 10px 0;\n}\n._zs_gallery_mx-color_index_-shortcut {\n  position: relative;\n  float: left;\n  width: 15px;\n  height: 15px;\n  margin: -1px 0 0 -1px;\n  border: 1px solid #333;\n  cursor: pointer;\n}\n._zs_gallery_mx-color_index_-shortcut._zs_gallery_mx-color_index_-selected:before,\n._zs_gallery_mx-color_index_-shortcut._zs_gallery_mx-color_index_-selected:after {\n  content: \' \';\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n}\n._zs_gallery_mx-color_index_-shortcut._zs_gallery_mx-color_index_-selected:before {\n  z-index: 2;\n  border: solid 1px #fff;\n}\n._zs_gallery_mx-color_index_-shortcut._zs_gallery_mx-color_index_-selected:after {\n  z-index: 1;\n  border: solid 2px #333;\n}\n._zs_gallery_mx-color_index_-cpicker {\n  float: left;\n  position: relative;\n  width: var(--mx-color-picker-width);\n  height: var(--mx-color-picker-width);\n  cursor: pointer;\n}\n._zs_gallery_mx-color_index_-cpicker ._zs_gallery_mx-color_index_-cpicker-indicator {\n  position: absolute;\n  width: 8px;\n  height: 8px;\n  box-shadow: 0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0, 0, 0, 0.3), 0 0 1px 2px rgba(0, 0, 0, 0.4);\n  border-radius: 50%;\n}\n._zs_gallery_mx-color_index_-slide {\n  float: right;\n  position: relative;\n  width: var(--mx-color-slider-width);\n  height: var(--mx-color-picker-width);\n  cursor: pointer;\n}\n._zs_gallery_mx-color_index_-slide ._zs_gallery_mx-color_index_-slide-indicator {\n  position: absolute;\n  right: -6px;\n  top: -6px;\n  width: 0;\n  height: 0;\n  background-color: none;\n  border-right: 6px solid #333;\n  border-left: none;\n  border-bottom: 6px solid transparent;\n  border-top: 6px solid transparent;\n}\n._zs_gallery_mx-color_index_-color-value {\n  width: calc(var(--mx-color-width) - 100px - 20px);\n}\n._zs_gallery_mx-color_index_-submit-btn {\n  width: 50px;\n}\n._zs_gallery_mx-color_index_-bg-color {\n  height: var(--input-height);\n  width: 50px;\n  margin-right: 10px;\n  border-radius: var(--border-radius);\n  border: 1px solid var(--color-border);\n}\n._zs_gallery_mx-color_index_-alpha {\n  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAIAAADZF8uwAAAAGUlEQVQYV2M4gwH+YwCGIasIUwhT25BVBADtzYNYrHvv4gAAAABJRU5ErkJggg==);\n  width: var(--mx-color-width);\n  height: 12px;\n  margin-bottom: 10px;\n}\n._zs_gallery_mx-color_index_-alpha-tracker {\n  position: relative;\n  height: 100%;\n  cursor: pointer;\n}\n._zs_gallery_mx-color_index_-alpha-indicator {\n  position: absolute;\n  left: -2px;\n  top: 2px;\n  height: 8px;\n  width: 4px;\n  box-shadow: 0 0 0 1.5px #fff, inset 0 0 1px 1px rgba(0, 0, 0, 0.3), 0 0 1px 2px rgba(0, 0, 0, 0.4);\n  background: #fff;\n}\n._zs_gallery_mx-color_index_-dot {\n  display: inline-block;\n  width: var(--input-height);\n  height: var(--input-height);\n  border-radius: 50%;\n  vertical-align: middle;\n}\n[mx-view*="mx-color/index"] {\n  width: calc(var(--mx-color-width) + 22px);\n  min-width: calc(var(--mx-color-width) + 22px);\n  padding: 10px;\n  background-color: #fff;\n}\n[mx-view*="mx-color/picker"] ._zs_gallery_mx-color_index_-color-output {\n  min-width: 0;\n}\n[mx-view*="mx-color/picker"][mx-view*="dot=true"] {\n  min-width: var(--input-height);\n}\n[mx-view*="mx-color/picker"][mx-view*="dot=true"] ._zs_gallery_mx-color_index_-color-output {\n  max-width: none;\n}\n'),n.exports=i.View.extend({tmpl:function(o,r,n,i,e,t,l,d){if(n||(n=o),!e){var a={"&":"amp","<":"lt",">":"gt",'"':"#34","'":"#39","`":"#96"},c=/[&<>"'`]/g,s=function(o){return"&"+a[o]+";"};e=function(o){return""+(null==o?"":o)},i=function(o){return e(o).replace(c,s)}}if(!t){var x={"!":"%21","'":"%27","(":"%28",")":"%29","*":"%2A"},_=function(o){return x[o]},h=/[!')(*]/g;t=function(o){return encodeURIComponent(e(o)).replace(h,_)}}if(!d){var p=/[\\'"]/g;d=function(o){return e(o).replace(p,"\\$&")}}l||(l=function(o,r,n,i){for(i=o[f];--i;)if(o[n=f+i]===r)return n;return o[n=f+o[f]++]=r,n});var g,m,u,f="",w="",v=o.dot,b=o.viewId,y=o.info,z=o.show,A=o.left,k=o.top;try{u=1,m="if dot",g="<%if (dot) {%>",v?(w+='<div class="_zs_gallery_mx-color_index_-dot" id="trigger_',u=2,m="=viewId",w+=(g="<%=viewId%>",i(b)+'" style="background: '),u=2,m="=info.color",w+=(g="<%=info.color%>",i(y.color)+';" mx-click="'+r+'@{toggle}()" mx-change="'+r+'@{stop}()"></div>'),u=5,m="else",g="<%}else {%>"):(w+='<div class="mx-trigger" id="trigger_',u=6,m="=viewId",w+=(g="<%=viewId%>",i(b)+'" mx-click="'+r+'@{toggle}()" mx-change="'+r+'@{stop}()">'),u=8,m="=info.color",w+=(g="<%=info.color%>",i(y.color)+"</div>"),u=9,m="/if",g="<%}%>"),w+='<div mxv="info" class="_zs_gallery_mx-color_index_-color-output mx-output mx-output-bottom ',u=11,m="if show",g="<%if (show) {%>",z&&(w+=" mx-output-open ",u=11,m="/if",g="<%}%>"),w+='" id="cpcnt_',u=12,m="=viewId",w+=(g="<%=viewId%>",i(b)+'" style="left:'),u=13,m="=left",w+=(g="<%=left%>",i(A)+"px;top:"),u=13,m="=top",w+=(g="<%=top%>",i(k)+'px;" mx-view="mx-color/index?data='),u=14,m="@info",w+=(g="<%@info%>",l(n,y)+'" mx-change="'+r+'@{color.picked}()"></div>')}catch(o){var I="render view error:"+(o.message||o);throw m&&(I+="\r\n\tsrc art:{{"+m+"}}\r\n\tat line:"+u),I+="\r\n\t"+(m?"translate to:":"expr:"),I+=g+"\r\n\tat file:mx-color/picker.html"}return w},init:function(o){var r=this;t["@{setup}"](),r.on("destroy",function(){t["@{remove}"](r),t["@{teardown}"]()}),r.updater.snapshot(),r.assign(o)},assign:function(o){var r=this.updater.altered(),n=o.color||"";return this.updater.set({viewId:this.id,align:o.align,show:!1,dot:o.dot+""=="true",info:{showBtns:!0,showAlpha:o.showAlpha,color:n}}),this["@{owner.node}"]=e("#"+this.id),this["@{owner.node}"].val(n),r||(r=this.updater.altered()),!!r&&(this.updater.snapshot(),!0)},render:function(){this.updater.digest({})},"@{stop}<change>":function(o){o.stopPropagation()},"@{toggle}<click>":function(o){o.preventDefault(),this.updater.get("show")?this["@{hide}"]():this["@{show}"]()},"@{show}":function(){var o=this.updater;if(!o.get("show")){o.digest({show:!0});var r=e("#trigger_"+this.id),n=e("#cpcnt_"+this.id),i=0,l=r.outerHeight();"right"==o.get("align")&&(i=r.outerWidth()-n.outerWidth()),o.digest({top:l,left:i}),t["@{add}"](this)}},"@{hide}":function(){var o=this.updater.get(),r=o.show,n=o.info;if(r){var i=this["@{owner.node}"].val();n.color=i,this.updater.digest({show:!1,info:n}),t["@{remove}"](this)}},"@{inside}":function(o){var r=i.inside(o,this.id)||i.inside(o,this["@{owner.node}"][0]);if(!r)for(var n=this.owner.children(),e=n.length-1;e>=0;e--){var t=i.Vframe.get(n[e]);if(t&&(r=t.invoke("@{inside}",[o])),r)break}return r},"@{color.picked}<change>":function(o){o.stopPropagation();this["@{owner.node}"].val(o.color).trigger({type:"change",color:o.color}),this["@{hide}"]()}})});